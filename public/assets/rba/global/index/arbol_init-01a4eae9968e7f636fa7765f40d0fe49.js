(function(){jQuery.fn.arbolInit=function(e){var a;return void 0===e&&(e=$("#controller_path").val()),a=jQuery.getJSON("nodos.json?modelo="+e,function(e){var a,r,d;return d={datatype:"json",datafields:[{name:"id"},{name:"padre_id"},{name:"nombre"}],id:"id",localdata:e},a=new $.jqx.dataAdapter(d),a.dataBind(),r=a.getRecordsHierarchy("id","padre_id","items",[{name:"nombre",map:"label"}]),$("#jqxTree").jqxTree({source:r,width:"100%"}),$("#jqxTree").jqxTree("expandAll")}),$("#jqxTree").on("dragEnd",function(e){var a,r;return a=e.args.id,r=e.args.value,$.ajax({type:"PATCH",url:"nodos/"+$("#jqxTree").jqxTree("getSelectedItem").id,data:{rba_nodo:{padre_id:$("#jqxTree").jqxTree("getSelectedItem").parentElement.id}},dataType:"json"}),$("#jqxgrid").jqxGrid("updatebounddata")}),$("#jqxTree").on("select",function(e){var a,r,d;return a=e.args,r=$("#jqxTree").jqxTree("getItem",a.element),d=r.label,jQuery.fn.gridRequest("?nodo="+r.id),$("#nodo_actual").val(r.id)})}}).call(this);