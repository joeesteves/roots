!function(e){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.enabletooltips=!0,this.columngroup=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){var i=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)}else if(this[e.toLowerCase()]){var i=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i)}},this._initfields=function(i){if(null!=i){var s=this.that;if(e.jqx.hasProperty(i,"dataField")&&(this.datafield=e.jqx.get(i,"dataField")),this.displayfield=e.jqx.hasProperty(i,"displayField")?e.jqx.get(i,"displayField"):this.datafield,e.jqx.hasProperty(i,"enableTooltips")&&(this.enabletooltips=e.jqx.get(i,"enableTooltips")),e.jqx.hasProperty(i,"text")&&(this.text=e.jqx.get(i,"text")),e.jqx.hasProperty(i,"sortable")&&(this.sortable=e.jqx.get(i,"sortable")),e.jqx.hasProperty(i,"hideable")&&(this.hideable=e.jqx.get(i,"hideable")),e.jqx.hasProperty(i,"hidden")&&(this.hidden=e.jqx.get(i,"hidden")),e.jqx.hasProperty(i,"groupable")&&(this.groupable=e.jqx.get(i,"groupable")),e.jqx.hasProperty(i,"renderer")&&(this.renderer=e.jqx.get(i,"renderer")),e.jqx.hasProperty(i,"align")&&(this.align=e.jqx.get(i,"align")),e.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=e.jqx.get(i,"cellsAlign")),e.jqx.hasProperty(i,"cellsFormat")&&(this.cellsformat=e.jqx.get(i,"cellsFormat")),e.jqx.hasProperty(i,"width")&&(this.width=e.jqx.get(i,"width")),e.jqx.hasProperty(i,"minWidth")&&(this.minwidth=e.jqx.get(i,"minWidth")),e.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=e.jqx.get(i,"maxWidth")),e.jqx.hasProperty(i,"cellsRenderer")&&(this.cellsrenderer=e.jqx.get(i,"cellsRenderer")),e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"checkChange")&&(this.checkchange=e.jqx.get(i,"checkChange")),e.jqx.hasProperty(i,"buttonClick")&&(this.buttonclick=e.jqx.get(i,"buttonClick")),e.jqx.hasProperty(i,"pinned")&&(this.pinned=e.jqx.get(i,"pinned")),e.jqx.hasProperty(i,"visibleIndex")&&(this.visibleindex=e.jqx.get(i,"visibleIndex")),e.jqx.hasProperty(i,"filterable")&&(this.filterable=e.jqx.get(i,"filterable")),e.jqx.hasProperty(i,"filter")&&(this.filter=e.jqx.get(i,"filter")),e.jqx.hasProperty(i,"resizable")&&(this.resizable=e.jqx.get(i,"resizable")),e.jqx.hasProperty(i,"editable")&&(this.editable=e.jqx.get(i,"editable")),e.jqx.hasProperty(i,"initEditor")&&(this.initeditor=e.jqx.get(i,"initEditor")),e.jqx.hasProperty(i,"createEditor")&&(this.createeditor=e.jqx.get(i,"createEditor")),e.jqx.hasProperty(i,"destroyEditor")&&(this.destroyeditor=e.jqx.get(i,"destroyEditor")),e.jqx.hasProperty(i,"getEditorValue")&&(this.geteditorvalue=e.jqx.get(i,"getEditorValue")),e.jqx.hasProperty(i,"validation")&&(this.validation=e.jqx.get(i,"validation")),e.jqx.hasProperty(i,"cellBeginEdit")&&(this.cellbeginedit=e.jqx.get(i,"cellBeginEdit")),e.jqx.hasProperty(i,"cellEndEdit")&&(this.cellendedit=e.jqx.get(i,"cellEndEdit")),e.jqx.hasProperty(i,"className")&&(this.classname=e.jqx.get(i,"className")),e.jqx.hasProperty(i,"cellClassName")&&(this.cellclassname=e.jqx.get(i,"cellClassName")),e.jqx.hasProperty(i,"menu")&&(this.menu=e.jqx.get(i,"menu")),e.jqx.hasProperty(i,"aggregates")&&(this.aggregates=e.jqx.get(i,"aggregates")),e.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesrenderer=e.jqx.get(i,"aggregatesRenderer")),e.jqx.hasProperty(i,"createFilterWidget")&&(this.createfilterwidget=e.jqx.get(i,"createFilterWidget")),e.jqx.hasProperty(i,"filterType")&&(this.filtertype=e.jqx.get(i,"filterType")),e.jqx.hasProperty(i,"rendered")&&(this.rendered=e.jqx.get(i,"rendered")),e.jqx.hasProperty(i,"exportable")&&(this.exportable=e.jqx.get(i,"exportable")),e.jqx.hasProperty(i,"filterItems")&&(this.filteritems=e.jqx.get(i,"filterItems")),e.jqx.hasProperty(i,"cellValueChanging")&&(this.cellvaluechanging=e.jqx.get(i,"cellValueChanging")),e.jqx.hasProperty(i,"draggable")&&(this.draggable=e.jqx.get(i,"draggable")),e.jqx.hasProperty(i,"filterCondition")&&(this.filtercondition=e.jqx.get(i,"filterCondition")),e.jqx.hasProperty(i,"threeStateCheckbox")&&(this.threestatecheckbox=e.jqx.get(i,"threeStateCheckbox")),e.jqx.hasProperty(i,"nullable")&&(this.nullable=e.jqx.get(i,"nullable")),e.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=e.jqx.get(i,"columnGroup")),!i instanceof String&&"string"!=typeof i)for(var r in i)if(!s.hasOwnProperty(r)&&!s.hasOwnProperty(r.toLowerCase()))throw t.host.remove(),new Error("jqxGrid: Invalid property name - "+r+".")}},this._initfields(i),this}function i(e,t){return this.setdata=function(e){null!=e&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}e.jqx.jqxWidget("jqxGrid","",{}),e.extend(e.jqx._jqxGrid.prototype,{defineInstance:function(){this.disabled=!1,this.width=600,this.height=400,this.pagerheight=28,this.groupsheaderheight=34,this.pagesize=10,this.pagesizeoptions=["5","10","20"],this.rowsheight=25,this.columnsheight=25,this.filterrowheight=31,this.groupindentwidth=30,this.rowdetails=!1,this.enablerowdetailsindent=!0,this.enablemousewheel=!0,this.initrowdetails=null,this.layoutrowdetails=null,this.editable=!1,this.editmode="selectedcell",this.pageable=!1,this.pagermode="default",this.pagerbuttonscount=5,this.groupable=!1,this.sortable=!1,this.filterable=!1,this.filtermode="default",this.autoshowfiltericon=!0,this.showfiltercolumnbackground=!0,this.showpinnedcolumnbackground=!0,this.showsortcolumnbackground=!0,this.altrows=!1,this.altstart=1,this.altstep=1,this.showrowdetailscolumn=!0,this.showtoolbar=!1,this.toolbarheight=34,this.showstatusbar=!1,this.statusbarheight=34,this.enableellipsis=!0,this.groups=[],this.groupsrenderer=null,this.groupcolumnrenderer=null,this.groupsexpandedbydefault=!1,this.pagerrenderer=null,this.touchmode="auto",this.columns=[],this.selectedrowindex=-1,this.selectedrowindexes=new Array,this.selectedcells=new Array,this.selectedcell=null,this.tableZIndex=799,this.headerZIndex=199,this.updatefilterconditions=null,this.showaggregates=!1,this.showfilterrow=!1,this.autorowheight=!1,this.autokoupdates=!0,this.handlekeyboardnavigation=null,this.showsortmenuitems=!0,this.showfiltermenuitems=!0,this.showgroupmenuitems=!0,this.enablebrowserselection=!1,this.enablekeyboarddelete=!0,this.clipboard=!0,this.ready=null,this.updatefilterpanel=null,this.autogeneratecolumns=!1,this.rowdetailstemplate=null,this.scrollfeedback=null,this.rendertoolbar=null,this.renderstatusbar=null,this.rendered=null,this.multipleselectionbegins=null,this.columngroups=null,this.cellhover=null,this.source={beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},this.dataview=null,this.updatedelay=null,this.autoheight=!1,this.autowidth=!1,this.showheader=!0,this.showgroupsheader=!0,this.closeablegroups=!0,this.scrollbarsize=e.jqx.utilities.scrollBarSize,this.touchscrollbarsize=e.jqx.utilities.touchScrollBarSize,this.virtualmode=!1,this.sort=null,this.columnsmenu=!0,this.columnsresize=!1,this.columnsreorder=!1,this.columnsmenuwidth=15,this.autoshowcolumnsmenubutton=!0,this.popupwidth="auto",this.sorttogglestates=2,this.rendergridrows=null,this.enableanimations=!0,this.enabletooltips=!1,this.selectionmode="singlerow",this.enablehover=!0,this.loadingerrormessage="The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",this.verticalscrollbarstep=25,this.verticalscrollbarlargestep=400,this.horizontalscrollbarstep=10,this.horizontalscrollbarlargestep=50,this.keyboardnavigation=!0,this.touchModeStyle="auto",this.autoshowloadelement=!0,this.showdefaultloadelement=!0,this.showemptyrow=!0,this.autosavestate=!1,this.autoloadstate=!1,this._updating=!1,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this._requiresupdate=!1,this._hasOpenedMenu=!1,this.scrollmode="physical",this.deferreddatafields=null,this.localization=null,this.rtl=!1,this.menuitemsarray=[],this.events=["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]},createInstance:function(){this.that=this;var t="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+this.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";if(this.element.innerText="",this.element.innerHTML="",15!=e.jqx.utilities.scrollBarSize&&(this.scrollbarsize=e.jqx.utilities.scrollBarSize),this.source){this.source.dataBind||(this.source=new e.jqx.dataAdapter(this.source));var i=this.source._source.datafields;i&&i.length>0&&(this._camelCase=void 0!==this.source._source.dataFields,this.editmode=this.editmode.toLowerCase(),this.selectionmode=this.selectionmode.toLowerCase())}this.host.attr("role","grid"),this.host.attr("align","left"),this.element.innerHTML=t,this.host.addClass(this.toTP("jqx-grid")),this.host.addClass(this.toTP("jqx-reset")),this.host.addClass(this.toTP("jqx-rc-all")),this.host.addClass(this.toTP("jqx-widget")),this.host.addClass(this.toTP("jqx-widget-content")),this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var s=this.host.find("#verticalScrollBar"+this.element.id),r=this.host.find("#horizontalScrollBar"+this.element.id);if(this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),!s.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(this.editors=new Array,this.vScrollBar=s.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=r.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.groupsheader=this.host.find("#groupsheader"),this.groupsheader.addClass(this.toTP("jqx-grid-groups-header")),this.groupsheader.addClass(this.toTP("jqx-widget-header")),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance,this.gridtable=null,this.isNestedGrid=this.host.parent()?2e3==this.host.parent().css("z-index"):!1,this.touchdevice=this.isTouchDevice(),this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this.rowdetailstemplate&&(void 0==this.rowdetailstemplate.rowdetails&&(this.rowdetailstemplate.rowdetails="<div></div>"),void 0==this.rowdetailstemplate.rowdetailsheight&&(this.rowdetailstemplate.rowdetailsheight=200),void 0==this.rowdetailstemplate.rowdetailshidden&&(this.rowdetailstemplate.rowdetailshidden=!0)),this.showfilterrow&&!this.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(this.autorowheight&&!this.autoheight&&!this.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(this.virtualmode&&null==this.rendergridrows)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(this.virtualmode&&!this.pageable&&this.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!this._testmodules()){if(this._builddataloadelement(),this._cachedcolumns=this.columns,25!=this.rowsheight&&this._measureElement("cell"),(25!=this.columnsheight||this.columngroups)&&this._measureElement("column"),this.source){var i=this.source.datafields;if(null==i&&this.source._source&&(i=this.source._source.datafields),i)for(var a=0;a<this.columns.length;a++){var l=this.columns[a];if(l&&l.cellsformat&&l.cellsformat.length>2)for(var o=0;o<i.length;o++)if(i[o].name==l.datafield&&!i[o].format){i[o].format=l.cellsformat;break}}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","visible"),this.showstatusbar&&this.statusbar.css("visibility","visible"),this._arrange(),this.pageable&&this._initpager&&this._initpager(),this.tableheight=null;var n=this.that,h=function(){n.content&&(n.content[0].scrollTop=0,n.content[0].scrollLeft=0),n.gridcontent&&(n.gridcontent[0].scrollLeft=0,n.gridcontent[0].scrollTop=0)};this.addHandler(this.content,"mousedown",function(){h()}),this.addHandler(this.content,"scroll",function(){return h(),!1}),this.showfilterrow||(this.showstatusbar||this.showtoolbar||this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),this.enablebrowserselection&&(this.content.removeClass("jqx-disableselect"),this.host.removeClass("jqx-disableselect")),this._resizeWindow(),this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.hasTransform=e.jqx.utilities.hasTransform(this.host),"logical"==this.scrollmode&&(this.vScrollInstance.thumbStep=this.rowsheight,this.vScrollInstance.step=this.rowsheight),e.jqx.isHidden(this.host)||(this.filterable||this.groupable||this.sortable)&&this._initmenu()}},_resizeWindow:function(){var t=this.that;(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&(this._updatesizeonwindowresize=!0,e.jqx.utilities.resize(this.host,function(i){var s=e(window).width(),r=e(window).height(),a=t.host.width(),l=t.host.height();if(t.autoheight&&(t._lastHostWidth=r),t._lastHostWidth!=a||t._lastHostHeight!=l){if(t.touchdevice&&t.editcell&&"orientationchange"!==i)return;t._updatesize(t._lastHostWidth!=a,t._lastHostHeight!=l)}t._lastWidth=s,t._lastHeight=r,t._lastHostWidth=a,t._lastHostHeight=l}))},_builddataloadelement:function(){if(this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=e('<div style="overflow: hidden; position: absolute;"></div>'),this.showdefaultloadelement){var t=e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),t.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(t)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement)},_measureElement:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");i.addClass(this.toTP("jqx-widget")),e(document.body).append(i),"cell"==t?this._cellheight=i.height():this._columnheight=i.height(),i.remove()},_measureMenuElement:function(){var t=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-menu")),t.addClass(this.toTP("jqx-menu-item-top")),t.addClass(this.toTP("jqx-fill-state-normal")),e(document.body).append(t);var i=t.outerHeight();return t.remove(),i},_measureElementWidth:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>"+t+"</span>");i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),e(document.body).append(i);var s=i.outerWidth()+20;return i.remove(),s},_getBodyOffset:function(){var t=0,i=0;return"0px"!=e("body").css("border-top-width")&&(t=parseInt(e("body").css("border-top-width")),isNaN(t)&&(t=0)),"0px"!=e("body").css("border-left-width")&&(i=parseInt(e("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_testmodules:function(){var t="",i=this.that,s=function(){""!=t.length&&(t+=",")};if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(s(),t+=" jqxmenu.js"),this.host.jqxScrollBar||(s(),t+=" jqxscrollbar.js"),this.host.jqxButton||(s(),t+=" jqxbuttons.js"),e.jqx.dataAdapter||(s(),t+=" jqxdata.js"),this.pageable&&!this.gotopage&&(s(),t+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(s(),t+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(s(),t+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(s(),t+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(s(),t+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(s(),t+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(s(),t+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(s(),t+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(s(),t+=" jqxgrid.selection.js"),""!=t||this.editable||this.filterable||this.pageable){var r=[],a=function(e){switch(e){case"checkbox":i.host.jqxCheckBox||r.checkbox||(r.checkbox=!0,s(),t+=" jqxcheckbox.js");break;case"numberinput":i.host.jqxNumberInput||r.numberinput||(r.numberinput=!0,s(),t+=" jqxnumberinput.js");break;case"datetimeinput":i.host.jqxDateTimeInput||r.datetimeinput?i.host.jqxCalendar||r.calendar||(s(),t+=" jqxcalendar.js"):(s(),r.datetimeinput=!0,t+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":i.host.jqxComboBox||r.combobox?i.host.jqxListBox||r.listbox||(s(),r.listbox=!0,t+=" jqxlistbox.js"):(s(),r.combobox=!0,t+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":i.host.jqxDropDownList||r.dropdownlist?i.host.jqxListBox||r.listbox||(s(),r.listbox=!0,t+=" jqxlistbox.js"):(s(),r.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}};(this.filterable||this.pageable)&&a("dropdownlist");for(var l=0;l<this.columns.length;l++)if(void 0!=this.columns[l]){var o=this.columns[l].columntype;if(a(o),this.filterable&&this.showfilterrow){var o=this.columns[l].filtertype;("checkedlist"==o||"bool"==o)&&a("checkbox"),"date"==o&&a("datetimeinput")}}if(""!=t)throw new Error("jqxGrid: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper.focus();var e=this.that;setTimeout(function(){e.wrapper.focus()},25),this.focused=!0}catch(t){}},hiddenParent:function(){return e.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(t,i){if(!this._loading){var s=this.that;s._newmax=null;var r=s.host.width(),a=s.host.height();s._oldWidth||(s._oldWidth=r),s._oldHeight||(s._oldHeight=a),s._resizeTimer&&clearTimeout(s._resizeTimer);var l=5;s._resizeTimer=setTimeout(function(){if(s.resizingGrid=!0,!e.jqx.isHidden(s.host)){if(o!=s._oldHeight||1==i){var a=s.groupable&&s.groups.length>0,l=s.vScrollBar.css("visibility");if(!s.autoheight){if(s.virtualmode&&(s._pageviews=new Array),a||s.rowdetails||s.pageable){s._arrange(),s.prerenderrequired=!0;var o=Math.round(s.host.height())+2*s.rowsheight;realheight=s._gettableheight();var n=Math.round(o/s.rowsheight),h=Math.max(s.dataview.totalrows,s.dataview.totalrecords);s.pageable&&(h=s.pagesize,s.pagesize>Math.max(s.dataview.totalrows,s.dataview.totalrecords)&&s.autoheight?h=Math.max(s.dataview.totalrows,s.dataview.totalrecords):s.autoheight||s.dataview.totalrows<s.pagesize&&(h=Math.max(s.dataview.totalrows,s.dataview.totalrecords)));{h*s.rowsheight,s._getpagesize()}!s.pageable&&s.autoheight&&(n=h),s.virtualsizeinfo&&(s.virtualsizeinfo.visiblerecords=n),s.rendergridcontent(!0,!1),s._renderrows(s.virtualsizeinfo)}else{s._arrange(),s.virtualsizeinfo=s._calculatevirtualheight();var o=Math.round(s.host.height())+2*s.rowsheight;parseInt(o)>=parseInt(s._oldHeight)&&(s.prerenderrequired=!0),s._renderrows(s.virtualsizeinfo)}l!=s.vScrollBar.css("visibility")&&(s.vScrollInstance.setPosition(0),s._arrange(),s._updatecolumnwidths(),s.table&&s.table.width(s.columnsheader.width()),s._updatecellwidths())}}if(r!=s._oldWidth||1==t){var d=!1;if(s.editcell&&s.editcell.editor)switch(s.editcell.columntype){case"dropdownlist":if(d=s.editcell.editor.jqxDropDownList("isOpened")||s.editcell.editor.jqxDropDownList("isanimating")&&!s.editcell.editor.jqxDropDownList("ishiding"))return s.editcell.editor.jqxDropDownList({openDelay:0}),s.editcell.editor.jqxDropDownList("open"),void s.editcell.editor.jqxDropDownList({openDelay:250});break;case"combobox":if(d=s.editcell.editor.jqxComboBox("isOpened")||s.editcell.editor.jqxComboBox("isanimating")&&!s.editcell.editor.jqxComboBox("ishiding"))return s.editcell.editor.jqxComboBox({openDelay:0}),s.editcell.editor.jqxComboBox("open"),void s.editcell.editor.jqxComboBox({openDelay:250});break;case"datetimeinput":if(d)return d=s.editcell.editor.jqxDateTimeInput("isOpened")||s.editcell.editor.jqxDateTimeInput("isanimating")&&!s.editcell.editor.jqxDateTimeInput("ishiding"),s.editcell.editor.jqxDateTimeInput({openDelay:0}),s.editcell.editor.jqxDateTimeInput("open"),void s.editcell.editor.jqxDateTimeInput({openDelay:250})}var c=s.hScrollBar.css("visibility");s._arrange(),s._updatecolumnwidths(),s.table&&s.table.width(s.columnsheader.width()),s._updatecellwidths(),0==t&&s._oldWidth>r||i&&0!=s.dataview.rows.length||s._renderrows(s.virtualsizeinfo),c!=s.hScrollBar.css("visibility")&&s.hScrollInstance.setPosition(0)}s._oldWidth=r,s._oldHeight=o,s.resizingGrid=!1}},l)}},getTouches:function(t){return e.jqx.mobile.getTouches(t)},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){t.scrollmode="logical",t.vScrollInstance.thumbStep=t.rowsheight;var i=e.jqx.mobile.getTouchEventName("touchstart"),s=e.jqx.mobile.getTouchEventName("touchend"),r=e.jqx.mobile.getTouchEventName("touchmove");t.enablehover=!1,t.gridcontent&&(t.removeHandler(t.gridcontent,i+".touchScroll"),t.removeHandler(t.gridcontent,r+".touchScroll"),t.removeHandler(t.gridcontent,s+".touchScroll"),t.removeHandler(t.gridcontent,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t.gridcontent[0],t.vScrollInstance.max,function(e,i){if("visible"==t.vScrollBar.css("visibility")){var s=t.vScrollInstance.value;t.vScrollInstance.setPosition(s+i)}if("visible"==t.hScrollBar.css("visibility")){var s=t.hScrollInstance.value;t.hScrollInstance.setPosition(s+e)}t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),t._overlayElement&&(t.removeHandler(t._overlayElement,i+".touchScroll"),t.removeHandler(t._overlayElement,r+".touchScroll"),t.removeHandler(t._overlayElement,s+".touchScroll"),t.removeHandler(t._overlayElement,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t._overlayElement[0],t.vScrollInstance.max,function(e,i){if("visible"==t.vScrollBar.css("visibility")){var s=t.vScrollInstance.value;t.vScrollInstance.setPosition(s+i)}if("visible"==t.hScrollBar.css("visibility")){var s=t.hScrollInstance.value;t.hScrollInstance.setPosition(s+e)}t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,i,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")}),this.addHandler(this.host,s,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")})))}},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var t=e.jqx.mobile.isTouchDevice();if(this.touchDevice=t,1==this.touchmode){if(e.jqx.browser.msie&&e.jqx.browser.version<9)return this.enablehover=!1,!1;t=!0,e.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=t}else 0==this.touchmode&&(t=!1);return t&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(t,i){if(this._cellscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null!=t){for(var s in t)s.toLowerCase()!==s&&(t[s.toLowerCase()]=t[s]);if(t.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=t.pagergotopagestring),t.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=t.pagershowrowsstring),t.pagerrangestring&&(this.gridlocalization.pagerrangestring=t.pagerrangestring),t.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=t.pagernextbuttonstring),t.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=t.pagerpreviousbuttonstring),t.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=t.pagerfirstbuttonstring),t.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=t.pagerlastbuttonstring),t.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=t.groupsheaderstring),t.sortascendingstring&&(this.gridlocalization.sortascendingstring=t.sortascendingstring),t.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=t.sortdescendingstring),t.sortremovestring&&(this.gridlocalization.sortremovestring=t.sortremovestring),t.groupbystring&&(this.gridlocalization.groupbystring=t.groupbystring),t.groupremovestring&&(this.gridlocalization.groupremovestring=t.groupremovestring),t.firstDay&&(this.gridlocalization.firstDay=t.firstDay),t.days&&(this.gridlocalization.days=t.days),t.months&&(this.gridlocalization.months=t.months),t.AM&&(this.gridlocalization.AM=t.AM),t.PM&&(this.gridlocalization.PM=t.PM),t.patterns&&(this.gridlocalization.patterns=t.patterns),t.percentsymbol&&(this.gridlocalization.percentsymbol=t.percentsymbol),t.currencysymbol&&(this.gridlocalization.currencysymbol=t.currencysymbol),t.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=t.currencysymbolposition),void 0!=t.decimalseparator&&(this.gridlocalization.decimalseparator=t.decimalseparator),void 0!=t.thousandsseparator&&(this.gridlocalization.thousandsseparator=t.thousandsseparator),t.filterclearstring&&(this.gridlocalization.filterclearstring=t.filterclearstring),t.filterstring&&(this.gridlocalization.filterstring=t.filterstring),t.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=t.filtershowrowstring),t.filterselectallstring&&(this.gridlocalization.filterselectallstring=t.filterselectallstring),t.filterchoosestring&&(this.gridlocalization.filterchoosestring=t.filterchoosestring),t.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=t.filterorconditionstring),t.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=t.filterandconditionstring),t.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=t.filterstringcomparisonoperators),t.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=t.filternumericcomparisonoperators),t.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=t.filterdatecomparisonoperators),t.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=t.filterbooleancomparisonoperators),t.emptydatastring&&(this.gridlocalization.emptydatastring=t.emptydatastring),t.filterselectstring&&(this.gridlocalization.filterselectstring=t.filterselectstring),t.todaystring&&(this.gridlocalization.todaystring=t.todaystring),t.clearstring&&(this.gridlocalization.clearstring=t.clearstring),t.validationstring&&(this.gridlocalization.validationstring=t.validationstring),t.loadtext&&(this.gridlocalization.loadtext=t.loadtext),i!==!1){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var s in this._filterrowcache)e(this._filterrowcache[s]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today"}
},_initmenu:function(){var t=this.that;if(this.host.jqxMenu){this.gridmenu&&(this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()),this.menuitemsarray=new Array,this.gridmenu=e('<div id="gridmenu'+this.element.id+'" style="z-index: 9999999999999;"></div>'),this.host.append(this.gridmenu);var i=e("<ul></ul>"),s='<div class="jqx-grid-sortasc-icon"></div>',r=e("<li>"+s+this.gridlocalization.sortascendingstring+"</li>"),a='<div class="jqx-grid-sortdesc-icon"></div>',l=e("<li>"+a+this.gridlocalization.sortdescendingstring+"</li>"),o='<div class="jqx-grid-sortremove-icon"></div>',n=e("<li>"+o+this.gridlocalization.sortremovestring+"</li>"),h='<div class="jqx-grid-groupby-icon"></div>',d=e("<li>"+h+this.gridlocalization.groupbystring+"</li>"),c=e("<li>"+h+this.gridlocalization.groupremovestring+"</li>"),u=e('<li type="separator"></li>'),g=e('<li class="filter" style="height: 175px;" ignoretheme="true"><div class="filter"></div></li>'),p=this.gridlocalization.sortascendingstring.length,v=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>p&&(p=this.gridlocalization.sortdescendingstring.length,v=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>p&&(p=this.gridlocalization.sortremovestring.length,v=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>p&&(p=this.gridlocalization.groupbystring.length,v=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>p&&(p=this.gridlocalization.groupremovestring.length,v=this.gridlocalization.groupremovestring));var m=200;v=e.trim(v).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");var f=e("<span>"+v+"</span>");f.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(f),m=f.outerWidth()+60,f.remove();var w=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(i.append(r),this.menuitemsarray[0]=r[0],i.append(l),this.menuitemsarray[1]=l[0],i.append(n),this.menuitemsarray[2]=n[0],w=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(i.append(d),this.menuitemsarray[3]=d[0],i.append(c),this.menuitemsarray[4]=c[0],w+=2);var b=this._measureMenuElement(),x=w*b+9,_=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=g[0],this.menuitemsarray[6]=g[0],i.append(u),i.append(g),x+=180,e.jqx.browser.msie&&e.jqx.browser.version<8&&(x+=20);var y=e(g).find("div:first");m+=20,this._initfilterpanel(this,y,"",m),_=!1,this.removeHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t),this.addHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t)}if(this.gridmenu.append(i),e.jqx.browser.msie&&e.jqx.browser.version<8&&this.filterable&&(e("#listBoxfilter1"+this.element.id).css("z-index",4990),e("#listBoxfilter2"+this.element.id).css("z-index",4990),e("#listBoxfilter3"+this.element.id).css("z-index",4990),e("#gridmenu"+this.element.id).css("z-index",5e3),this.addHandler(e("#gridmenu"+this.element.id),"initialized",function(){e("#menuWrappergridmenu"+t.element.id).css("z-index",4980)})),void 0==this.menuitemsarray[0]&&(x=65),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(i){if(27==i.keyCode)t.gridmenu.jqxMenu("close");else if(13==i.keyCode&&t.filterable&&t._buildfilter){var s="block"==e(e.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display"),r="block"==e(e.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display"),a="block"==e(e.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display"),l=e(e.find("#filterclearbutton"+t.element.id)).hasClass("jqx-fill-state-focus");if(l){var o=e.data(document.body,"contextmenu"+t.element.id).column;t._clearfilter(t,t.element,o),t.gridmenu.jqxMenu("close")}else if(!s&&!r&&!a){var o=e.data(document.body,"contextmenu"+t.element.id).column;t.gridmenu.jqxMenu("close"),t._buildfilter(t,g,o)}}}),"auto"!=this.popupwidth&&(m=this.popupwidth),this.gridmenu.jqxMenu({width:m,height:x,autoCloseOnClick:_,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0}),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",g[0].id,"closeOnClick",!1),this.rtl){var q=this.that;e.each(i.find("li"),function(){e(this).addClass(q.toTP("jqx-rtl"))});var j=function(e){var t=e.find("div");t.css("float","right"),t.css("margin-left","4px"),t.css("margin-right","-4px")};j(n),j(l),j(r),j(d),j(c)}this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var t=this.gridlocalization.sortascendingstring.length,i=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>t&&(t=this.gridlocalization.sortdescendingstring.length,i=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>t&&(t=this.gridlocalization.sortremovestring.length,i=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>t&&(t=this.gridlocalization.groupbystring.length,i=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>t&&(t=this.gridlocalization.groupremovestring.length,i=this.gridlocalization.groupremovestring));var s=200;i=e.trim(i).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");var r=e("<span>"+i+"</span>");r.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(r),s=r.outerWidth()+60,r.remove();var a=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(a=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(a+=2);var l=27*a+3;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(l+=180,s+=20,e.jqx.browser.msie&&e.jqx.browser.version<8&&(l+=20)),void 0==this.menuitemsarray[0]&&(l=65),"auto"!=this.popupwidth&&(s=this.popupwidth),this.gridmenu.jqxMenu({width:s,height:l})},_closemenuafterclick:function(t){var i=null!=t?t.data:this,s=!1;if(void 0==t.target||void 0!=t.target&&void 0==t.target.className.indexOf)return void i.gridmenu.jqxMenu("close");if(-1==t.target.className.indexOf("filter")||-1!=t.target.className.indexOf("jqx-grid-cell-filter")){if(-1!=t.target.className.indexOf("jqx-grid-cell"))return void i.gridmenu.jqxMenu("close");if(!i._hasOpenedMenu||!e(t.target).ischildof(i.gridmenu)){var r=(i.host.coord(),i.gridmenu.coord()),a=t.pageX,l=t.pageY;if(e.each(e(t.target).parents(),function(){return null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")?(s=!0,!1):this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter")?(s=!0,!1):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")?(i.gridmenu.jqxMenu("close"),!1):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column")?(i.gridmenu.jqxMenu("close"),!1):void 0}),!s){try{if("default"===i.filtermode){var o=e(e.find("#filter1"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,n=new Date;if(100>n-o)return;var h=e(e.find("#filter3"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(100>n-h)return;if("block"==e(e.find("#filter3"+i.element.id)).jqxDropDownList("container").css("display"))return;if("block"==e(e.find("#filter1"+i.element.id)).jqxDropDownList("container").css("display"))return;if("block"==e(e.find("#filter2"+i.element.id)).jqxDropDownList("container").css("display"))return}else{var o=e(e.find("#filter1"+i.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup,n=new Date;if(100>n-o)return;var h=e(e.find("#filter1"+i.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup;if(100>n-h)return}}catch(d){}a>=r.left&&a<=r.left+i.gridmenu.width()&&l>=r.top&&l<=r.top+i.gridmenu.height()||i.gridmenu.jqxMenu("close")}}}},_handlemenueevents:function(){var t=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(){t._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(i){for(var s=i.args,r=0;r<t.menuitemsarray.length;r++){var a=t.menuitemsarray[r];if(s==a){if(void 0!=e(s).attr("ignoretheme"))return;var l=e.data(document.body,"contextmenu"+t.element.id),o=l.column;t.filterable&&t.gridmenu.jqxMenu("close");var n=o.displayfield;if(null==n&&(n=o.datafield),null!=l)switch(r){case 0:t.sortby(n,"ascending",null);break;case 1:t.sortby(n,"descending",null);break;case 2:t.sortby(n,null,null);break;case 3:t.addgroup(o.datafield);break;case 4:t.removegroup(o.datafield);break;case 5:var h=e(t.menuitemsarray[6]);e(h).css("display","block");break;case 7:}break}}})},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that;this.hiddens=new Array;var i=this.hiddenboundrows;e.each(i,function(e){if(void 0!=this.index){var i=(this.index,t.getrowvisibleindex(e));t.hiddens[i]=this.hidden}})},_updaterowheights:function(){var t=this.that;this.heights=new Array;var i=this.heightboundrows;e.each(i,function(e){if(void 0!=this.index){var i=(this.index,t.getrowvisibleindex(e));t.heights[i]=this.height}})},_updaterowdetails:function(){var t=this.that;this.details=new Array;var i=this.detailboundrows;e.each(i,function(e){if(void 0!=this.index){var i=(this.index,t.getrowvisibleindex(e));t.details[i]=this.details}})},_getmenuitembyindex:function(e){return void 0==e?null:this.menuitemsarray[e]},_closemenu:function(){if(this._hasOpenedMenu){null!=this.gridmenu&&this.gridmenu.jqxMenu("close");var t=e.data(document.body,"contextmenu"+this.element.id);if(null!=t&&this.autoshowcolumnsmenubutton){if(this.enableanimations){e(t.columnsmenu).animate({"margin-left":0},"fast",function(){e(t.columnsmenu).css("display","none")});var i=this.rtl?0:-32;t.column.iconscontainer.animate({"margin-left":i},"fast")}else{e(t.columnsmenu).css("display","none");var i=this.rtl?0:-32;t.column.iconscontainer.css("margin-left",i)}e.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=!1;var s=this._getmenuitembyindex(5);if(s){var r=e(s).find("#filter1"+this.element.id),a=e(s).find("#filter2"+this.element.id),l=e(s).find("#filter3"+this.element.id);r.length>0&&"default"===this.filtermode&&(r.jqxDropDownList("hideListBox"),a.jqxDropDownList("hideListBox"),l.jqxDropDownList("hideListBox"))}}},scrolloffset:function(e,t){null!=e&&null!=t&&void 0!=e&&void 0!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&void 0!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&void 0!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(){this._updating=!0,this._datachanged=!1},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,1==this._datachanged){var e=this.vScrollInstance.value;this.render(!0,!0,!1),this._datachanged=!1,0!=e&&e<this.vScrollInstance.max&&this.scrolltop(e)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block")},hideloadelement:function(){e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var e=this.that;e.focusedfilter&&(e.focusedfilter.focus(),setTimeout(function(){if(e.focusedfilter.focus(),"input"==e.focusedfilter[0].nodeName.toLowerCase()){var t=e.focusedfilter.val().length;try{if("selectionStart"in e.focusedfilter[0])e.focusedfilter[0].setSelectionRange(t,t);else{var i=e.focusedfilter[0].createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}catch(s){}}},10))},databind:function(t,i){if(this.loadingstate!==!0){"block"==this.host.css("display")&&(this.autoshowloadelement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&this.groups.length>0&&(this.groups=new Array);var s=this.that;null==t&&(t={}),t.recordstartindex||(t.recordstartindex=0),t.recordendindex||(t.recordendindex=0),(void 0==t.loadallrecords||null==t.loadallrecords)&&(t.loadallrecords=!0),(void 0==t.sortcomparer||null==t.sortcomparer)&&(t.sortcomparer=null),(void 0==t.filter||null==t.filter)&&(t.filter=null),(void 0==t.sort||null==t.sort)&&(t.sort=null),(void 0==t.data||null==t.data)&&(t.data=null);var r=null;if(null!=t&&(r=void 0!=t._source?t._source.url:t.url),this.dataview=this.dataview||new e.jqx.dataview,e.jqx.dataview.sort&&e.extend(this.dataview,new e.jqx.dataview.sort),e.jqx.dataview.grouping&&e.extend(this.dataview,new e.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,this.dataview.grid=this,this.dataview._clearcaches(),!this.pageable&&this.virtualmode&&(this.loadondemand=!0),!s.initializedcall){if(t._source&&this.sortable&&(void 0!=t._source.sortcolumn&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),void 0!=t._source.sortdirection)){this.dataview.sortfielddirection=t._source.sortdirection;var a=t._source.sortdirection;if("a"==a||"asc"==a||"ascending"==a||1==a)var l=!0;else var l=!1;this.sortdirection=null!=a?{ascending:l,descending:!l}:{ascending:!1,descending:!1}}this.pageable&&t._source&&(void 0!=t._source.pagenum&&(this.dataview.pagenum=t._source.pagenum),void 0!=t._source.pagesize?(this.pagesize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection))}this._loading=!0,this.dataview.update=function(t){if(!s.pageable&&s.virtualmode&&(s.loadondemand=!0),s._loading=!1,s.dataview.isupdating()&&s.dataview.resumeupdate(!1),s.pageable&&s.pagerrenderer){if(!s._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");s._initpager()}if(s.source&&s.source.sortcolumn&&s.sortby&&!s.virtualmode)s.render(),s.source._source.sort||s.sortby(s.source.sortcolumn,s.source.sortdirection,s.source.sortcomparer),s.source.sortcolumn=null;else{var r=s.vScrollInstance.value,a=s.hScrollInstance.value,l=s.source?s.source.datatype:"array";if("local"!=l||"array"!=l){var o=null==s.virtualsizeinfo||null!=s.virtualsizeinfo&&0==s.virtualsizeinfo.virtualheight;if("cells"==i){var n=!1;if(s.filterable&&s._initfilterpanel&&s.dataview.filters.length&&(n=!0),0==t)return s.vScrollInstance.isScrolling()||s.hScrollInstance.isScrolling()||(s._cellscache=new Array,s._pagescache=new Array,s._renderrows(s.virtualsizeinfo),s.showfilterrow&&s.filterable&&s.filterrow&&s._updatelistfilters(!0),s.showaggregates&&s._updateaggregates&&s._updateaggregates()),s.sortcolumn&&s.sortby(s.sortcolumn,s.dataview.sortfielddirection,s.source.sortcomparer),s.autoshowloadelement&&(e(s.dataloadelement).css("visibility","hidden"),e(s.dataloadelement).css("display","none")),void(s.virtualmode&&!s._loading&&(s.loadondemand=!0,s._renderrows(s.virtualsizeinfo)));n?i="filter":void 0!=s.sortcolumn&&(i="sort")}!s.virtualmode||o||s.virtualmode&&s.pageable?1==s.initializedcall&&"pagechanged"==i?(r=0,s.groupable&&s.groups.length>0?(s._render(!0,!0,!1,!1,!1),s._updatecolumnwidths(),s._updatecellwidths(),s._renderrows(s.virtualsizeinfo)):(s.rendergridcontent(!0),s.pageable&&s.updatepagerdetails&&(s.updatepagerdetails(),s.autoheight?(s._updatepageviews(),s.autorowheight&&s._renderrows(this.virtualsizeinfo)):s.autorowheight&&(s._updatepageviews(),s._renderrows(this.virtualsizeinfo)))),s.showaggregates&&s._updateaggregates&&s._updateaggregates()):"filter"==i?s.virtualmode?(s._render(!0,!0,!1,!1,!1),s._updatefocusedfilter(),s._updatecolumnwidths(),s._updatecellwidths(),s._renderrows(s.virtualsizeinfo)):s._render(!0,!0,!1,!1,!1):"sort"==i?s.virtualmode?(s.rendergridcontent(!0),s.showaggregates&&s._updateaggregates&&s._updateaggregates()):(s._render(!0,!0,!1,!1,!1),s.sortcolumn&&!s.source.sort&&s.sortby(s.sortcolumn,s.dataview.sortfielddirection,s.source.sortcomparer)):"data"==i?s._render(!0,!0,!1,!1,!1):"state"==i?s._render(!0,!0,!1,s.menuitemsarray&&s.menuitemsarray.length>0&&!s.virtualmode):s._render(!0,!0,!0,s.menuitemsarray&&s.menuitemsarray.length>0&&!s.virtualmode):s.virtualmode&&1==t&&!s.pageable?(s._render(!0,!0,!1,!1,!1),s._updatefocusedfilter(),s._updatecolumnwidths(),s._updatecellwidths(),s._renderrows(s.virtualsizeinfo)):s.virtualmode&&!s.pageable&&0==t&&void 0!=i?(s.rendergridcontent(!0),s.showaggregates&&s._updateaggregates&&s._updateaggregates()):s.virtualmode&&0==s.dataview.totalrecords&&s.dataview.filters.length>0?s._render(!0,!0,!0,s.menuitemsarray&&!s.virtualmode):(s._pagescache=new Array,s._renderrows(s.virtualsizeinfo)),s.vScrollInstance.value!=r&&r<=s.vScrollInstance.max&&s.vScrollInstance.setPosition(r),s.hScrollInstance.value!=a&&a<=s.hScrollInstance.max&&s.hScrollInstance.setPosition(a)}}if(s.autoshowloadelement&&(e(s.dataloadelement).css("visibility","hidden"),e(s.dataloadelement).css("display","none")),s.pageable&&(s.pagerrightbutton&&(s.pagerrightbutton.jqxButton({disabled:!1}),s.pagerleftbutton.jqxButton({disabled:!1}),s.pagershowrowscombo.jqxDropDownList({disabled:!1})),s.pagerfirstbutton&&(s.pagerfirstbutton.jqxButton({disabled:!1}),s.pagerlastbutton.jqxButton({disabled:!1}))),s._raiseEvent(11),s.initializedcall)s._updateTouchScrolling();else{var h=function(){s._raiseEvent(0),s.initializedcall=!0,s.isInitialized=!0,s.ready&&s.ready(),s.renderstatusbar&&s.renderstatusbar(s.statusbar),s.rendertoolbar&&s.rendertoolbar(s.toolbar),s.autoloadstate&&s.loadstate&&s.loadstate(null,!0)};if(e.jqx.isHidden(s.host)?(s.readyInterval&&clearInterval(s.readyInterval),s.readyInterval=setInterval(function(){e.jqx.isHidden(s.host)||s.__isRendered&&(clearInterval(s.readyInterval),s.readyInterval=null,h(),s._initmenu())},200)):h(),null!=s.width&&-1!=s.width.toString().indexOf("%")||null!=s.height&&-1!=s.height.toString().indexOf("%"),"hidden"==s.host.css("visibility")){{e.jqx.browser.msie&&e.jqx.browser.version<8}"visible"==s.vScrollBar.css("visibility")&&s.vScrollBar.css("visibility","inherit"),s.autowidth||"visible"==s.hScrollBar.css("visibility")&&s.hScrollBar.css("visibility","inherit"),s._intervalTimer=setInterval(function(){"visible"==s.host.css("visibility")&&(s._updatesize(!0),clearInterval(s._intervalTimer))},100)}}},this.dataview.databind(t),this.dataview.isupdating()&&(void 0!=r?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows()}},scrollto:function(e,t){void 0!=e&&this.hScrollInstance.setPosition(e),void 0!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){if(this.autoheight&&!this.pageable)return!0;var t=this._getpagesize(),i=Math.floor(e/t);if(this._pageviews[i]||this.pageable||this._updatepageviews(),this.groupable&&this.groups.length>0)return!0;var s=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){var i=Math.floor(e/t);if(this.dataview.pagenum!=i){if(this.groupable&&this.groups.length>0)return!0;this.gotopage(i),s=!0}}var r=this.vScrollInstance.value,a=this._gettableheight()-this.rowsheight,l=t*(e/t-i);if(l=Math.round(l),this._pageviews[i]){var o=this._pageviews[i].top,n=o+l*this.rowsheight;if(this.rowdetails)for(var h=t*i;e>h;h++)this.details[h]&&0==this.details[h].rowdetailshidden&&(n+=this.details[h].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=n+this.rowsheight&&(n=this.vScrollInstance.max),r>n?(this.scrolltop(n),s=!0):n>r+a+2&&(this.scrolltop(n-a),s=!0)}else if(this.pageable){var n=l*this.rowsheight;if(this.rowdetails)for(var h=t*i;t*i+l>h;h++)this.details[h]&&0==this.details[h].rowdetailshidden&&(n+=this.details[h].rowdetailsheight);(r>n||n>r+a)&&(this.scrollto(0,n),s=!0)}return s},ensurecellvisible:function(t,i){var s=this.that,r=this.hScrollBar.jqxScrollBar("value"),a=s.hScrollInstance.max;s.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(a=0);var l=this.ensurerowvisible(t),o=0;if(this.columns.records){var n=r;if("hidden"==this.hScrollBar.css("visibility"))return;var h=this.host.width(),d=0,c="visible"==this.vScrollBar.css("visibility")?20:0,u=!1;e.each(this.columns.records,function(){if(this.datafield==i){var e=0,t=s.rtl?a-r:n;return o+this.width>t+h-c?(e=o+this.width-h+c,s.rtl&&(e=a-e),s.scrollleft(e),u=!0):t>=o&&(e=o-this.width,s.rtl&&(e=a-e),s.scrollleft(e),u=!0),0==d?(s.scrollleft(s.rtl?a:0),u=!0):d==s.columns.records.length-1&&"visible"==s.hScrollBar.css("visibility")&&(s.scrollleft(s.rtl?s.hScrollBar.jqxScrollBar("min"):s.hScrollBar.jqxScrollBar("max")),u=!0),!1}d++,o+=this.width}),u||s.scrollleft(n)}return l},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return null==e||null==t?!1:(this.heightboundrows[e]={index:e,height:t},e=this.getrowvisibleindex(e),0>e?!1:(this.rows.records[e]?this.rows.records[e].height=t:(row=new i(this,null),row.height=t,this.rows.replace(e,row)),this.heights[e]=t,this.rendergridcontent(!0),!0))},getrowheight:function(e){return null==e?null:(e=this.getrowvisibleindex(e),0>e?!1:this.rows.records[e]?this.rows.records[e].height:void 0)},setrowdetails:function(t,i,s,r){if(!(void 0==t||null==t||0>t)){var a=t+"_";if(this._rowdetailscache[a]){var l=this._rowdetailscache[a].element;e(l).remove(),this._rowdetailscache[a]=null}var o=this.dataview.generatekey();return this.detailboundrows[t]={index:t,details:{rowdetails:i,rowdetailsheight:s,rowdetailshidden:r,key:o}},t=this.getrowvisibleindex(t),0>t?!1:this._setrowdetails(t,i,s,r,o)}},getcolumn:function(t){var i=null;return this.columns.records&&e.each(this.columns.records,function(){return this.datafield==t||this.displayfield==t?(i=this,!1):void 0}),i},_getcolumnindex:function(t){var i=-1;return this.columns.records&&e.each(this.columns.records,function(){return i++,this.datafield==t?!1:void 0}),i},_getcolumnat:function(e){var t=this.columns.records[e];return t},_getprevvisiblecolumn:function(e){for(var t=this.that;e>0;){e--;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},_getnextvisiblecolumn:function(e){for(var t=this.that;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},getcolumnat:function(e){if(!isNaN(e)){var t=this.columns.records[e];return t}return null},_getcolumn:function(t){var i=null;return e.each(this._columns,function(){return this.datafield==t||this.displayfield==t?(i=this,!1):void 0}),i},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;t=t.toLowerCase();var s=this.getcolumn(e);if(null!=s){var r=s[t];s[t]=i;var a=this._getcolumn(e);switch(null!=a&&(a[t]=i),this._cellscache=new Array,t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo);break;case"editable":case"resizable":case"draggable":if("editable"==t&&i!=r){if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),"checkbox"==s.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))return!1;if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,this.rendergridcontent(!0),this.updating())return!1;"hidden"==t&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;s._width=null,s._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(e,t){if(null==e||null==t)return null;t=t.toLowerCase();var i=this.getcolumn(e);return i[t]},setcolumnproperty:function(e,t,i){this._setcolumnproperty(e,t,i)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,i,s,r){if(0==i&&(i=100),null==e||null==i)return!1;if(null!=r)this.details[e]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,detailskey:r};else{for(var a=null!=this.details[e]?this.details[e].detailskey:null,l={rowdetails:t,rowdetailsheight:i,rowdetailshidden:s,detailskey:a},o=(this.that,0);o<this.detailboundrows.length;o++)if(void 0!=this.detailboundrows[o]){var n=this.detailboundrows[o];if(n.details.detailskey==a){n.details.rowdetailsheight=l.rowdetailsheight,n.details.rowdetailshidden=l.rowdetailshidden,n.details.rowdetails=l.rowdetails;break}}this.details[e]=l}return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(e){return null==e?!1:(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){return null==e?!1:0>e?!1:this.details[e]?this.details[e]:this.rowdetailstemplate?this.rowdetailstemplate:void 0},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e)return!1;if(e=this.getrowvisibleindex(e),0>e)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(e=this.getrowvisibleindex(e),0>e)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){var t=e.visibleindex,i=this._getrowdetails(t);if(null!=i){var s=this.vScrollInstance.value,r=!i.rowdetailshidden,a=this._setrowdetailsvisibility(t,i,r);return 0!==s&&"hidden"!==this.vScrollBar.css("visibility")&&this.vScrollInstance.setPosition(s<=this.vScrollInstance.max?s:this.vScrollInstance.max),a}return!1},_setrowdetailsvisibility:function(e,t,i){if(this.rowdetailstemplate&&(this.details||(this.details=new Array),!this.details[e])){this.details[e]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var s=this.dataview.generatekey();this.details[e].detailskey=s,this.detailboundrows[e]={index:e,details:this.details[e]}}if(null==t)return!1;this.details[e].rowdetailshidden=i;var r=this.details[e];return i?this._raiseEvent(21,{rowindex:e,details:r.rowdetails,height:r.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:r.rowdetails,height:r.rowdetailsheight}),this._setrowdetails(e,r.rowdetails,r.rowdetailsheight,r.rowdetailshidden)},getrowvisibleindex:function(e){if(void 0==e||null==e||0>e)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[e];return void 0==t?-1:t.visibleindex}return this.getrowdisplayindex(e)},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return void 0==e||null==e||0>e?!1:null==e?!1:(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return void 0==e||null==e||0>e?!1:null==e?!1:(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1))},isrowhiddenat:function(e){return null==e?null:(e=this.getrowvisibleindex(e),this.rows.records[e]?this.rows.records[e].hidden:void 0)},_setrowvisibility:function(e,t,i){return null==e?!1:(this.hiddens[e]=t,void 0==i||i?(this.rendergridcontent(!0),!0):!1)},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&void 0!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var t=this.that,s=new Array,r=new Array,a=t.groupable&&t.groups.length>0,l=(this.dataview.totalrecords,this.virtualsizeinfo.virtualheight,0);this.rows.beginupdate();var o=this.dataview.pagesize;this.pageable&&a&&(o=this.dataview.rows.length);for(var n=0;o>n&&!(n>=this.dataview.rows.length);n++){var h=this.dataview.rows[n],d=null;t.rows.records[h.visibleindex]?(d=t.rows.records[h.visibleindex],d.setdata(h)):d=new i(t,h),d.hidden=this.hiddens[d.visibleindex],this.rowdetailstemplate&&(d.rowdetails=this.rowdetailstemplate.rowdetails,d.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,d.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden);var c=this.details[d.visibleindex];if(c?(d.rowdetails=c.rowdetails,d.rowdetailsheight=c.rowdetailsheight,d.rowdetailshidden=c.rowdetailshidden):this.rowdetailstemplate||(d.rowdetails=null),a&&this.pageable&&null!=d.parentbounddata){var u=s[d.parentbounddata.uniqueid];if(null!=u){var g=this._findgroupstate(u.uniqueid);this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,d.parentbounddata,!g,!1),d.hidden=this.hiddens[d.visibleindex]}null!=u&&void 0!=u&&(d.parentrow=u,u.subrows[u.subrows.length++]=d)}if(!d.hidden){var p=h.visibleindex;this.heights[p]||(this.heights[p]=this.rowsheight),d.height=this.heights[p],this.rowdetails&&d.rowdetails&&!d.rowdetailshidden&&(d.height+=d.rowdetailsheight),s[d.uniqueid]=d,r[l++]=d,d.top=e,e+=d.height;var v=p;t.rows.replace(v,d)}}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&this._pageviews.length>0&&(this._pageviews[0].height=e),this.rows.resumeupdate(),r.length>0&&(this._pagescache[this.dataview.pagenum]=r)}}},_gettableheight:function(){if(void 0!=this.tableheight)return this.tableheight;var e=this.host.height();if(this.columnsheader){var t=this.columnsheader.outerHeight();this.showheader||(t=0)}return e-=t,"visible"==this.hScrollBar[0].style.visibility&&(e-=this.hScrollBar.outerHeight()),this.pageable&&(e-=this.pager.outerHeight()),this._groupsheader()&&(e-=this.groupsheader.outerHeight()),this.showtoolbar&&(e-=this.toolbarheight),this.showstatusbar&&(e-=this.statusbarheight),e>0?(this.tableheight=e,e):this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight,t=Math.round(e/this.rowsheight);return t}return this.autoheight||this.autorowheight?0==this.dataview.totalrows?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0?this.dataview.totalrows:100
},_calculatevirtualheight:function(){var e=(this.that,Math.round(this.host.height())+2*this.rowsheight);realheight=this._gettableheight();var t=Math.round(e/this.rowsheight);this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array;var i=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(i=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?i=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(i=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var s=i*this.rowsheight,r=0,a=0,l=0,o=this._getpagesize(),n=o*this.rowsheight,h=0;if(!this.pageable&&this.autoheight&&(t=i),i+o>0)for(;i+o>=h;){if(r+=n,i>h-o&&h>=i){var d=h-i;d>0&&(l-=n,this._pageviews[a-1]={top:l,height:n-d*this.rowsheight});break}this._pageviews[a++]={top:l,height:n},l=r,h+=o}return 1!=this.resizingGrid&&this.vScrollBar.jqxScrollBar({value:0}),s>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),this.vScrollBar.jqxScrollBar("deferred"==this.scrollmode?{max:s}:{max:s-realheight})):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=o,this.dataview.updateview(),{visiblerecords:t,virtualheight:s}},_updatepageviews:function(){if(!this.updating()){this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,i=Math.round(t/this.rowsheight),s=Math.max(this.dataview.totalrows,this.dataview.totalrecords),r=s*this.rowsheight,a=0,l=0,o=0,n=0,h=0,d=this._getpagesize();if(this.pageable)this._updatepagedview&&(r=this._updatepagedview(s,r,0)),this.autoheight&&this._arrange();else for(var c=0;s>c;c++){var u={index:c,height:this.heights[c],hidden:this.hiddens[c],details:this.details[c]};if(void 0==this.heights[c]&&(this.heights[c]=this.rowsheight,u.height=this.rowsheight),void 0==this.hiddens[c]&&(this.hiddens[c]=!1,u.hidden=!1),void 0==this.details[c]&&(this.details[c]=null),u.height!=e.rowsheight&&(r-=e.rowsheight,r+=u.height),u.hidden)r-=u.height;else{l+=u.height;var g=0;this.rowdetails&&(this.rowdetailstemplate&&(u.details||(u.details=this.rowdetailstemplate)),u.details&&u.details.rowdetails&&!u.details.rowdetailshidden&&(g=u.details.rowdetailsheight,l+=g,r+=g)),a+=u.height+g}h++,(h>=d||c==s-1)&&(this._pageviews[o++]={top:n,height:l},l=0,n=a,h=0)}var p=this._gettableheight();if(r>p)if(this.pageable&&this.gotopage&&(r=this._pageviews[0].height,0>r&&(r=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(p>=r||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),r-p>0){if("deferred"!=this.scrollmode){var v=r-p,m=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:v}),v!=m&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:r});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.autoheight&&(i=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:i,virtualheight:r}}},updatebounddata:function(e){"data"==e||"sort"==e||"filter"==e||"cells"==e||"pagechanged"==e||"pagesizechanged"==e||this.virtualmode||(this.virtualsizeinfo=null,this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())),this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&this._pageviews.length>0){var e=this._pageviews[0].height;(this.virtualmode||!this.pageable)&&(e=this.virtualsizeinfo.virtualheight);var t=this._gettableheight();if(e>t)if(this.pageable&&this.gotopage&&(e=this._pageviews[0].height,0>e&&(e=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(t>=e||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),e-t>0){var i=e-t;this.vScrollBar.jqxScrollBar({max:i})}else this.vScrollBar.jqxScrollBar({value:0,max:e});else this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(t){if(1!=t){if(e.jqx.isHidden(this.host))return;null!=this.virtualsizeinfo&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var t=this,i=0;i<this.columngroups.length;i++)this.columngroups[i].parent=null,this.columngroups[i].groups=null;for(var i=0;i<this.columns.records.length;i++)this.columns.records[i].parent=null,this.columns.records[i].groups=null;for(var s=function(e){for(var i=0;i<t.columngroups.length;i++){var s=t.columngroups[i];if(s.name===e)return s}return null},i=0;i<this.columngroups.length;i++){var r=this.columngroups[i];if(r.groups||(r.groups=null),r.parentgroup){var a=s(r.parentgroup);a&&(r.parent=a,a.groups||(a.groups=new Array),-1===a.groups.indexOf(r)&&a.groups.push(r))}}for(var i=0;i<this.columns.records.length;i++){var r=this.columns.records[i];if(r.columngroup){var a=s(r.columngroup);a&&(a.groups||(a.groups=new Array),r.parent=a,-1===a.groups.indexOf(r)&&a.groups.push(r))}}for(var l=0,i=0;i<this.columns.records.length;i++){var r=this.columns.records[i],o=r;for(r.level=0;o.parent;)o=o.parent,r.level++;var o=r,n=r.level;for(l=Math.max(l,r.level);o.parent;)o=o.parent,o&&(o.level=--n)}for(var h=function(e){var t=new Array;if(e.columngroup&&t.push(e),e.groups)for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var s=h(e.groups[i]),r=0;r<s.length;r++)t.push(s[r]);return t},i=0;i<this.columngroups.length;i++){var r=this.columngroups[i],d=h(r);r.columns=d;for(var c=new Array,u=0,g=0;g<d.length;g++)c.push(this.columns.records.indexOf(d[g])),d[g].pinned&&u++;if(0!=u)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return e=parseInt(e),t=parseInt(t),t>e?-1:e>t?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+l,e=this.columngroupslevel*this.columnsheight}return e},_render:function(t,i,s,r,a){if(null!=this.dataview&&!this._loading){if(e.jqx.isHidden(this.host)){var l=this;return l.___hiddenTimer&&(clearInterval(l.___hiddenTimer),l.___hiddenTimer=null),void(this.___hiddenTimer=setInterval(function(){e.jqx.isHidden(l.host)||(clearInterval(l.___hiddenTimer),l.render())},300))}null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=void 0!=i?i:!0,this._newmax=null,s&&(this._requiresupdate||0!=r&&this._initmenu(),null==this.columns?this.columns=new e.jqx.collection(this.element):this._initializeColumns()),this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),1==r&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,e.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),s?(this.filterrow&&this.filterrow.detach(),e.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&e.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var o=this.columnsheight;if(o=this._preparecolumngroups(),this.columnsheader.height(this.showfilterrow&&this.filterable?o+this.filterrowheight:o),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||e("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,s),this.groups.length>0&&this.groupable){var n=this.vScrollBar[0].style.visibility;this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=n&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1}this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),"deferred"==this.scrollmode&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(void 0==a||1==a)&&this._updatelistfilters(!s),this.rendered&&this.rendered("full"),this.__isRendered=!0}},_addoverlayelement:function(){if(this.autoheight)return this._overlayElement&&this._overlayElement.remove(),void this._updateTouchScrolling();var t=e.jqx.utilities.getBrowser();if("msie"==t.browser&&parseInt(t.version)<9||this.isTouchDevice())if(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",18e3),this._overlayElement.css("opacity",.001),this.isTouchDevice())if("hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")){var i=0;"checkbox"==this.selectionmode&&(i+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0)));var s=this._overlayElement.css("left");this._overlayElement.css("left",s+i)}else this._overlayElement&&this._overlayElement.remove();else this.content.prepend(this._overlayElement);this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",18e3),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=e("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",18005),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},rendergridcontent:function(e,t){if(this.updating())return!1;(void 0==e||null==e)&&(e=!1),this._requiresupdate=e;var i=this.prerenderrequired;this.prerenderrequired&&this._arrange();var s=this.that,t=t;if((null==t||void 0==t)&&(t=!0),this.tableheight=null,s.virtualsizeinfo=s.virtualsizeinfo||s._calculatevirtualheight(),s.pageable&&!s.autoheight&&s.dataview.totalrows<s.pagesize&&(s._requiresupdate=!0),t?s._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),s._renderrows(s.virtualsizeinfo),this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0)),i){var r=this.tableheight;this._arrange(),r!=this.tableheight&&this.autoheight&&s._renderrows(s.virtualsizeinfo)}return this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate(),!0},_updatecolumnwidths:function(){var t=this.host.width(),i=t,s="";if(void 0!=this.columns&&void 0!=this.columns.records){var r=this.that,a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;e.each(this.columns.records,function(e,l){if(!this.hidden||!this.hideable)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var l=0,o="hidden"==r.vScrollBar[0].style.visibility?0:r.scrollbarsize+5,n=i;l=parseFloat(this.width)*n/100,o+=a,void 0!=this._percentagewidth&&(l=parseFloat(this._percentagewidth)*(n-o)/100),l<this.minwidth&&"auto"!=this.minwidth&&(l=this.minwidth),l>this.maxwidth&&"auto"!=this.maxwidth&&(l=this.maxwidth),t-=l}else"auto"==this.width||this._width?s+=this.text:t-=this.width});var l=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>l)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var o=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var n=0;n<this.dataview.rows.length;n++)this.dataview.rows[n].group&&0===this.dataview.rows[n].level&&(o+=this.rowsheight);o>l?(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5):"visible"==this.vScrollBar.css("visibility")&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5)}else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;var a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(i-=a,this.columnsheader){var h=this.columnsheader.find("#columntable"+this.element.id);if(0!=h.length){var d=h.find(".jqx-grid-column-header"),c=0;e.each(this.columns.records,function(r){var a=e(d[r]),l=!1,o=this.width;if((-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)&&(o=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*i/100:parseFloat(this.width)*i/100,l=!0),"auto"==this.width||this._width||l)if(l)o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth,this.width=o),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth,this.width=o),parseInt(a[0].style.width)!=o&&(a.width(o),this.width=o);else{var n=Math.floor(t*(this.text.length/s.length));isNaN(n)&&(n=this.minwidth),0>n&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),n=10+$element.width(),$element.remove()),n<this.minwidth&&(n=this.minwidth),n>this.maxwidth&&(n=this.maxwidth),this._width="auto",this.width=n,a.width(this.width)}else parseInt(a[0].style.width)!=this.width&&a.width(this.width);parseInt(a[0].style.left)!=c&&a.css("left",c),this.hidden&&this.hideable||(c+=this.width),this._requirewidthupdate=!0}),this.columnsheader.width(2+c),h.width(this.columnsheader.width()),this.columnsheader[0].style.visibility=0==c?"hidden":"inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.autowidth&&this._arrange()}}}},_rendercolumnheaders:function(){var t=this.that;if(!this.prerenderrequired)return this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),void(this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()));this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var i=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');i[0].cells=new Array;var s=0,r=0,a="",l=this.host.width(),o=l,n=new Array,h=new Array,d=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(e.each(this.columns.records,function(e,i){if(!this.hidden||!this.hideable)if("auto"==this.width||this._width)a+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)l-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)l-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var i=0,s="hidden"==t.vScrollBar[0].style.visibility?0:t.scrollbarsize+5;s+=d,i=parseFloat(this.width)*(o-s)/100,i<this.minwidth&&"auto"!=this.minwidth&&(i=this.minwidth),i>this.maxwidth&&"auto"!=this.maxwidth&&(i=this.maxwidth),l-=i}else"string"==typeof this.width&&(this.width=parseInt(this.width)),l-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),n[n.length]=this):h[h.length]=this}),this.rtl){var c=0;n.reverse();for(var u=this.columns.records.length-1;u>=this.columns.records.length-n.length;u--)this.columns.replace(u,n[c++]);for(var g=0;g<h.length;g++)this.columns.replace(g,h[g])}else{for(var u=0;u<n.length;u++)this.columns.replace(u,n[u]);for(var g=0;g<h.length;g++)this.columns.replace(n.length+g,h[g])}var p=this.headerZIndex,v=t.groupable?t.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&v++;var m=t.columnsheader.height();this.showfilterrow&&(this.columngroups?m-=this.filterrowheight:m=this.columnsheight);var f=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>f)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var w=0;if(this.pageable){if(this.pageable)for(var b=0;b<this.dataview.rows.length;b++)this.dataview.rows[b].group&&0===this.dataview.rows[b].level&&(w+=this.rowsheight)}else var w=this.dataview.loadedrootgroups.length*this.rowsheight;w>f&&(l-=this.scrollbarsize+5,o-=this.scrollbarsize+5)}else l-=this.scrollbarsize+5,o-=this.scrollbarsize+5;else this.autoheight||(l-=this.scrollbarsize+5,o-=this.scrollbarsize+5);o-=d;var x=function(e,i){var s=t.columngroupslevel*t.columnsheight;return s-=i.level*t.columnsheight};if(e.each(this.columns.records,function(n){this.height=t.columnsheight,t.columngroups&&t.columngroups.length&&(this.height=x(this.datafield,this),m=this.height);var h=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(h+=" "+t.toTP("jqx-grid-column-header-rtl"));var d=t.rtl?150+p+1:150+p-1,c=t.rtl?p++:p--,u=e('<div role="columnheader" style="z-index: '+c+';position: absolute; height: 100%;" class="'+h+'"><div style="height: 100%; width: 100%;"></div></div>');t.columngroups&&(u[0].style.height=m+"px",u[0].style.bottom="0px",this.pinned&&(u[0].style.zIndex=d)),this.uielement=u,""!=this.classname&&this.classname&&u.addClass(this.classname);var g=this.width,f=!1;if(null===this.width&&(this.width="auto"),(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)&&(g=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*o/100:parseFloat(this.width)*o/100,f=!0),"auto"==this.width||this._width||f){if(f)g<this.minwidth&&"auto"!=this.minwidth&&(g=this.minwidth),g>this.maxwidth&&"auto"!=this.maxwidth&&(g=this.maxwidth),(void 0==this._percentagewidth||-1!=this.width.toString().indexOf("%"))&&(this._percentagewidth=this.width),u.width(g),this.width=g;else if(!this.hidden){var w=Math.floor(l*(this.text.length/a.length));isNaN(w)&&(w=this.minwidth),0>w&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),w=10+$element.width(),$element.remove()),w<this.minwidth&&(w=this.minwidth),w>this.maxwidth&&(w=this.maxwidth),this._width="auto",this.width=w,g=this.width,u.width(this.width)}}else g<this.minwidth&&"auto"!=this.minwidth&&(g=this.minwidth),g>this.maxwidth&&"auto"!=this.maxwidth&&(g=this.maxwidth),u[0].style.width=parseInt(g)+"px";this.hidden&&this.hideable&&u.css("display","none");var b=e(u.children()[0]),_=t.rtl?t.toTP("jqx-grid-column-menubutton")+" "+t.toTP("jqx-grid-column-menubutton-rtl"):t.toTP("jqx-grid-column-menubutton");_+=" "+t.toTP("jqx-icon-arrow-down");var y=e('<div style="height: '+m+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+_+'" style="width: 100%; height:100%;"></div></div>');t.enableanimations||y.css("margin-left",-16),t.rtl&&y.css("left","0px"),this.columnsmenu=y[0],i[0].cells[n]=u[0],y[0].style.width=parseInt(t.columnsmenuwidth)+"px";var q=t.columnsmenu,j=!1,S=!1,z=t.groupable&&v>0&&v>s||t.rowdetails&&v>s;if(t.rtl&&(z=t.groupable&&v>0&&v>s||t.rowdetails&&v>s,z&=n>t.columns.records.length-1-v),z)s++,q&=!1,this.sortable=!1,this.editable=!1,S=!0;else{var k=null!=this.renderer?this.renderer(this.text,this.align,m):t._rendercolumnheader(this.text,this.align,m,t);null==k&&(k=t._rendercolumnheader(this.text,this.align,m,t)),null!=this.renderer&&(k=e(k)),q&=!0,j=!0}if(t.WinJS?MSApp.execUnsafeLocalFunction(function(){b.append(e(k))}):this.renderer?b.append(e(k)):k&&(b[0].innerHTML=k),null!=k){var I=e('<div class="iconscontainer" style="height: '+m+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+m+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+m+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+" "+t.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+m+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>');y.addClass(t.toTP("jqx-widget-header")),b.append(I);var T=I.children();this.sortasc=T[1],this.sortdesc=T[2],this.filtericon=T[0],this.iconscontainer=I,t.rtl&&(I.css("margin-left","0px"),I.css("left","0px"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left")),!t.autoshowfiltericon&&this.filterable&&e(this.filtericon).css("display","block")}if(q&&(t._handlecolumnsmenu(t,b,u,y,this),this.menu||y.hide()),i.append(u),t.groupable&&j){if(u[0].id=t.dataview.generatekey(),!t._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");t._handlecolumnstogroupsdragdrop(this,u)}t.columnsreorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,u);var B=this;if(t.addHandler(u,"click",function(e){return B.checkboxcolumn?!0:(t.sorttogglestates>0&&t._togglesort&&(t._loading||t._togglesort(B)),e.preventDefault(),void t._raiseEvent(7,{column:B.getcolumnproperties(),datafield:B.datafield,originalEvent:e}))}),B.resizable&&t.columnsresize&&!S){var C=!1,P="mousemove";t.isTouchDevice()&&t.touchmode!==!0&&(C=!0,P=e.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(u,P,function(i){var s=parseInt(i.pageX),r=5,a=parseInt(u.coord().left);if(t.hasTransform&&(a=e.jqx.utilities.getOffset(u).left),t.resizing)return!0;if(t._handlecolumnsresize){if(C){var l=t.getTouches(i),o=l[0];return s=o.pageX,r=40,s>=a+B.width-r?(t.resizablecolumn={columnelement:u,column:B},u.css("cursor","col-resize")):(u.css("cursor",""),t.resizablecolumn=null),!0}var n=B.width;if(t.rtl&&(n=0),s>=a+n-r){if(a+n+r>=s)return t.resizablecolumn={columnelement:u,column:B},u.css("cursor","col-resize"),!1;u.css("cursor",""),t.resizablecolumn=null}else u.css("cursor",""),a+n-r>s&&(B._animating||B._menuvisible||u.mouseenter()),t.resizablecolumn=null}})}if(u.css("left",r),this.hidden&&this.hideable||(r+=g),B.rendered){var H=B.rendered(e(b[0].firstChild),B.align,m);H&&null!=I&&I.hide()}if(B.checkboxcolumn){if(I&&I.hide(),!t.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");b.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"></div>');var M=b.find("div:first");M.jqxCheckBox({_canFocus:!1,disabled:t.disabled,disabledContainer:!0,theme:t.theme,enableContainerClick:!1,width:16,height:16,animationShowDelay:0,animationHideDelay:0}),B.checkboxelement=M;var D=M.data().jqxCheckBox.instance;t._checkboxcolumn=B,D.updated=function(e,i,s){t._checkboxcolumnupdating=!0,t.disabled&&(M.jqxCheckBox({disabled:t.disabled}),i=s),i?t.selectallrows():t.clearselection(!0,!1),t._checkboxcolumnupdating=!1}}}),this.columnsheader.width(r>0?2+r:r),this.columnsrow=i,t.columnsheader.append(i),this.showfilterrow&&this._updatefilterrow){if(i.height(this.columngroups?this.columngroupslevel*this.columnsheight:this.columnsheight),!this.filterrow){var _=e("<div></div>");_[0].id="filterrow."+this.element.id,_.height(this.filterrowheight),this.filterrow=_}this.filterrow.width(r),this.columnsheader.append(this.filterrow),this._updatefilterrow()}i[0].style.visibility=0==r?"hidden":"inherit",i.width(r),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(this.columngroups){for(var t=0,i=0;i<this.columns.records.length;i++)this.columns.records[i].pinned&&t++;var s=this.headerZIndex-t+this.columns.records.length,r=this.that,a=r.toTP("jqx-grid-column-header")+" "+r.toTP("jqx-grid-columngroup-header")+" "+r.toTP("jqx-widget-header");r.rtl&&(a+=" "+r.toTP("jqx-grid-columngroup-header-rtl"));var l=this.columnsheader.find("#columntable"+this.element.id);l.find("jqx-grid-columngroup-header").remove();for(var o=0;o<this.columngroupslevel-1;o++)for(var i=0;i<this.columngroups.length;i++){var n=this.columngroups[i],h=n.level;if(h===o){var d=h*this.columnsheight,c=99999;if(n.groups){var u=function(e){for(var t=0,i=0;i<e.groups.length;i++){var s=e.groups[i];s.groups?t+=u(s):s.hidden||(t+=s.width,c=Math.min(parseInt(s.element.style.left),c))}return t};n.width=u(n),n.left=c;var g=this.columnsheight,p=s--,v=e('<div role="columnheader" style="z-index: '+p+';position: absolute;" class="'+a+'"></div>'),m=e(this._rendercolumnheader(n.text,n.align,this.columnsheight,this));if(n.renderer){var m=e("<div style='height: 100%; width: 100%;'></div>"),f=n.renderer(n.text,n.align,g);m.html(f)}v.append(m),v[0].style.left=c+"px",0===c&&(v[0].style.borderLeftColor="transparent"),v[0].style.top=d+"px",v[0].style.height=g+"px",v[0].style.width=-1+n.width+"px",l.append(v),n.element=v,n.rendered&&n.rendered(m,n.align,g)}}}}},_resizecolumngroups:function(){if(this.columngroups)for(var e=0;e<this.columngroups.length;e++){var t=this.columngroups[e],i=t.level,s=i*this.columnsheight,r=99999;if(t.groups){var a=function(e){for(var t=0,i=0;i<e.groups.length;i++){var s=e.groups[i];s.groups?t+=a(s):s.hidden||(t+=s.width,r=Math.min(parseInt(s.element.style.left),r))}return t};t.width=a(t),t.left=r;var l=this.columnsheight,o=t.element;o[0].style.left=r+"px",o[0].style.top=s+"px",o[0].style.height=l+"px",o[0].style.width=-1+t.width+"px"}}},_handlecolumnsmenu:function(t,i,s,r,a){t.dragmousedown=null,r[0].id=t.dataview.generatekey(),i.append(r),s[0].columnsmenu=r[0],a.element=s[0];var l=this.columnsmenuwidth+1,o=function(){if(!a.menu)return!1;if(!t.resizing){if(a._menuvisible&&t._hasOpenedMenu)return!1;if(a._animating=!0,t.menuitemsarray&&t.menuitemsarray.length>0)if(t.enableanimations){r.css("display","block"),r.stop(),a.iconscontainer.stop(),t.rtl?(r.css("margin-left",-l),r.animate({"margin-left":"0px"},"fast",function(){r.css("display","block"),a._animating=!1,a._menuvisible=!0})):(r.css("margin-left","0px"),r.animate({"margin-left":-l},"fast",function(){r.css("display","block"),a._animating=!1,a._menuvisible=!0}));var e=t.rtl?l:-(32+l);a.iconscontainer.animate({"margin-left":e},"fast")}else{r.css("display","block");var e=t.rtl?16:-48;a.iconscontainer.css("margin-left",e+"px"),a._animating=!1,a._menuvisible=!0}}},n="mouseenter";if(t.isTouchDevice()&&(n="touchstart"),t.addHandler(s,n,function(i){var r=parseInt(i.pageX),l=t.columnsresize&&a.resizable?3:0,n=parseInt(s.coord().left);t.hasTransform&&(n=e.jqx.utilities.getOffset(s).left);var h=a.width;if(t.rtl&&(h=0),0!=l&&r>=n+h-l&&n+h+l>=r)return!1;var d=t.vScrollInstance.isScrolling();a.menu&&t.autoshowcolumnsmenubutton&&!d&&!t.disabled&&o()}),!t.autoshowcolumnsmenubutton){r.css("display","block");var h=t.rtl?16:-48;a.iconscontainer.css("margin-left",h+"px"),r.css(t.rtl?{"margin-left":"0px"}:{"margin-left":-l})}t.addHandler(s,"mouseleave",function(){if(t.menuitemsarray&&t.menuitemsarray.length>0&&a.menu){var i=e.data(document.body,"contextmenu"+t.element.id);if(void 0!=i&&r[0].id==i.columnsmenu.id)return;if(t.autoshowcolumnsmenubutton)if(t.enableanimations){t.rtl?r.css("margin-left","0px"):r.css("margin-left",-l),r.stop(),a.iconscontainer.stop(),t.rtl?r.animate({"margin-left":-l},"fast",function(){r.css("display","none"),a._menuvisible=!1}):r.animate({"margin-left":0},"fast",function(){r.css("display","none"),a._menuvisible=!1});var s=t.rtl?0:-32;a.iconscontainer.animate({"margin-left":s},"fast")}else{r.css("display","none");var s=t.rtl?0:-32;a.iconscontainer.css("margin-left",s+"px"),a._menuvisible=!1}}});var d=!0,c="",u=e(a.filtericon);t.addHandler(r,"mousedown",function(){t.gridmenu||t._initmenu(),d=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),c=e.data(document.body,"contextmenu"+t.element.id),null!=c&&(c=c.column.datafield)}),t.addHandler(u,"mousedown",function(){t.gridmenu||t._initmenu(),d=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),c=e.data(document.body,"contextmenu"+t.element.id),null!=c&&(c=c.column.datafield)});var g=function(){if(!a.menu)return!1;t.gridmenu||t._initmenu();var i=r.coord(!0),s=r.height();if(!d&&(d=!0,c==a.datafield))return t._closemenu(),!1;var l=t.host.coord(!0);t.hasTransform&&(l=e.jqx.utilities.getOffset(t.host),i=e.jqx.utilities.getOffset(r)),l.left+t.host.width()>parseInt(i.left)+t.gridmenu.width()?t.gridmenu.jqxMenu("open",i.left,i.top+s):t.gridmenu.jqxMenu("open",r.width()+i.left-t.gridmenu.width(),i.top+s),t.gridmenu.width()<100&&t._arrangemenu(),t._hasOpenedMenu=!0;var o=t._getmenuitembyindex(0),n=t._getmenuitembyindex(1),h=t._getmenuitembyindex(2),u=t._getmenuitembyindex(3),g=t._getmenuitembyindex(4),p=t._getmenuitembyindex(5);if(null!=o&&null!=n&&null!=h){var v=a.sortable&&t.sortable;if(t.gridmenu.jqxMenu("disable",o.id,!v),t.gridmenu.jqxMenu("disable",n.id,!v),t.gridmenu.jqxMenu("disable",h.id,!v),a.datafield)if(t.sortcolumn==a.datafield){var m=t.getsortinformation();v&&(m.sortdirection.ascending?t.gridmenu.jqxMenu("disable",o.id,!0):t.gridmenu.jqxMenu("disable",n.id,!0))}else t.gridmenu.jqxMenu("disable",h.id,!0)}if(null!=u&&null!=g&&(t.groupable&&a.groupable?t.groups&&-1!=t.groups.indexOf(a.datafield)?(t.gridmenu.jqxMenu("disable",u.id,!0),t.gridmenu.jqxMenu("disable",g.id,!1)):(t.gridmenu.jqxMenu("disable",u.id,!1),t.gridmenu.jqxMenu("disable",g.id,!0)):(t.gridmenu.jqxMenu("disable",g.id,!0),t.gridmenu.jqxMenu("disable",u.id,!0))),null!=p){t._updatefilterpanel(t,p,a);
var f=0;t.sortable&&t._togglesort&&t.showsortmenuitems&&(f+=3),t.groupable&&t.addgroup&&t.showgroupmenuitems&&(f+=2);var w=27*f+3;e.jqx.browser.msie&&e.jqx.browser.version<8&&(w+=20,e(p).height(190)),t.filterable&&t.showfiltermenuitems&&(a.filterable?(t.gridmenu.height(w+180),e(p).css("display","block")):(t.gridmenu.height(w),e(p).css("display","none")))}e.data(document.body,"contextmenu"+t.element.id,{column:a,columnsmenu:r[0]})};t.addHandler(u,"click",function(){return a.menu?(t.showfilterrow||(o(),g()),!1):!1}),t.addHandler(r,"click",function(){return a.menu?(g(),!1):!1}),t.isTouchDevice()&&t.addHandler(r,e.jqx.mobile.getTouchEventName("touchstart"),function(){return a.menu?(t._hasOpenedMenu?t._closemenu():g(),!1):!1})},_removecolumnhandlers:function(t){var i=this.that,s=e(t.element);if(s.length>0){i.removeHandler(s,"mouseenter"),i.removeHandler(s,"mouseleave");var r=e(t.filtericon);if(i.removeHandler(r,"mousedown"),i.removeHandler(r,"click"),i.removeHandler(s,"click"),i.removeHandler(s,"mousemove"),i.columnsreorder&&(i.removeHandler(s,"mousedown.drag"),i.removeHandler(s,"mousemove.drag")),i.removeHandler(s,"dragstart"),s[0].columnsmenu){var a=e(s[0].columnsmenu);i.removeHandler(a,"click"),i.removeHandler(a,"mousedown"),i.removeHandler(a,e.jqx.mobile.getTouchEventName("touchstart"))}}},_rendercolumnheader:function(e,t,i,s){var r="4px";if(s.columngroups?(r=i/2-this._columnheight/2,0>r&&(r=4),r+="px"):25!=this.columnsheight&&(r=this.columnsheight/2-this._columnheight/2,0>r&&(r=4),r+="px"),this.enableellipsis)return'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; margin-bottom: "+r+"; margin-top: "+r+';"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>";if("center"==t||"middle"==t)return'<div style="padding-bottom: 2px; text-align: center; margin-top: '+r+';"><a href="#">'+e+"</a></div>";var a='<a style="margin-top: '+r+"; float: "+t+';" href="#">'+e+"</a>";return a},_renderrows:function(t,i){var s=this.that;if((this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(s.prerenderrequired=!0),!this.pageable&&(this.autoheight||this.autorowheight)&&(this.virtualmode||this.unboundmode)){var r=this.source.totalrecords;isNaN(r)||null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length!=r&&(s.prerenderrequired=!0)}!this.autoheight&&!this.autorowheight||s.prerenderrequired||this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?s.prerenderrequired=!0:this.pageable||(s.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?s.prerenderrequired=!0:this.pageable||(s.prerenderrequired=!0))),s._prerenderrows(t),s._requiresupdate&&(s._requiresupdate=!1,s._updatepageviews());var a=function(){s._loading||(s.WinJS?MSApp.execUnsafeLocalFunction(function(){s._rendervisualrows()}):s._rendervisualrows(),s.virtualmode&&s.showaggregates&&s._updateaggregates&&s.refreshaggregates())},l=e.jqx.browser.msie&&e.jqx.browser.version<10;if(this.virtualmode){var o=function(){if(s.rendergridrows){var e=s._startboundindex;void 0==e&&(e=0);var t=e+1+s.dataview.pagesize;if(null!=e&&null!=t){var r=s.source._source?!0:!1,a=r?s.source._source.recordstartindex:s.source.recordstartindex;if(a!=e||1==i){if(r){if(t>=s.source._source.totalrecords&&(t=s.source._source.totalrecords,e=t-s.dataview.pagesize-1,0>e&&(e=0),s.source._source.recordendindex==t&&s.source._source.recordstartindex==e))return;s.source._source.recordstartindex=e,s.source._source.recordendindex=t}else s.source.recordstartindex=e,s.source.recordendindex=t;s.updatebounddata("cells")}}}};this.loadondemand&&(a(),o(),this.loadondemand=!1);var n=void 0==this._browser?this._isIE10():this._browser;this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?a():this.autoheight?a():n||l||e.jqx.browser.mozilla||navigator&&-1!=navigator.userAgent.indexOf("Safari")?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){a()},5)):a()}else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var h=this._getfirstvisualrow();if(null!=h){var d=function(){if(null==h)return"";var t="<table>",i=s.deferreddatafields;null==i&&s.columns.records.length>0&&(i=new Array,i.push(s.columns.records[0].displayfield));for(var r=0;r<i.length;r++){var a=i[r],l=s._getcolumnbydatafield(a);if(l){var o=s._getcellvalue(l,h);""!=l.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(o)?o=e.jqx.dataFormat.formatdate(o,l.cellsformat,s.gridlocalization):e.jqx.dataFormat.isNumber(o)&&(o=e.jqx.dataFormat.formatnumber(o,l.cellsformat,s.gridlocalization))),t+="<tr><td>"+o+"</td></tr>"}}return t+="</table>"},c=this.scrollfeedback?this.scrollfeedback(h.bounddata):d(h.bounddata);c!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=c,this._scrollelementcontent=c)}return this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),void(this._scrolltimer=setInterval(function(){s.hScrollInstance.isScrolling()||s.vScrollInstance.isScrolling()||(a(),s._scrollelement.css("visibility","hidden"),s._scrollelementoverlay.css("visibility","hidden"),clearInterval(s._scrolltimer),h&&s.ensurerowvisible(h.visibleindex))},100))}navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1),void 0!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5);var n=void 0==this._browser?this._isIE10():this._browser;if((n||l)&&(this._updatedelay=5),(n||e.jqx.browser.mozilla)&&this.hScrollInstance.isScrolling())return void a();if(e.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=1),null!=this.updatedelay&&(this._updatedelay=this.updatedelay),0==this._updatedelay)a();else{var u=this._jqxgridrendertimer;null!=u&&clearTimeout(u),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(u=setTimeout(function(){a()},this._updatedelay),this._jqxgridrendertimer=u):(this._jqxgridrendertimer=u,a())}}if(s.autorowheight&&!s.autoheight&&this._pageviews.length>0){var g=this._gettableheight(),p=this._pageviews[0].height;if(p>g)if(this.pageable&&this.gotopage&&(p=this._pageviews[0].height,0>p&&(p=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(g>=p||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),p-g>0){if("deferred"!=this.scrollmode){var v=p-g,m=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:v}),Math.round(v)!=Math.round(m)&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:p});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=p)}},scrolling:function(){var e=this.vScrollInstance.isScrolling(),t=this.hScrollInstance.isScrolling();return{vertical:e,horizontal:t}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(e.value=0,t=0);var i=parseInt(t);if(null!=this.table){var s=this.table[0].rows.length,r=this.columnsrow,a=this.groupable&&this.groups.length>0?this.groups.length:0,l=this.columns.records.length-a,o=this.columns.records,n=0==this.dataview.rows.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),n&&!this._haspinned){for(var h=0;s>h;h++)for(var d=this.table[0].rows[h],c=0;a+l>c;c++){var u=d.cells[c];if(void 0!=u){var g=o[c];if(g.pinned&&(u.style.marginLeft=i+"px",0==h)){var p=r[0].cells[c];p.style.marginLeft=i+"px"}}}this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px"}else if(this._haspinned||void 0==this._haspinned){for(var h=0;s>h;h++)for(var d=this.table[0].rows[h],c=0;a+l>c;c++){var u=d.cells[c];if(void 0!=u){var g=o[c];if(g.pinned){if(0==i&&""==u.style.marginLeft)continue;var v=null,m=null;if(this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(m=this.filterrow[0].cells[c]),this.showaggregates&&this.statusbar[0].cells&&(v=this.statusbar[0].cells[c]),this.rtl){if(u.style.marginLeft=-parseInt(t)+"px",0==h){var p=r[0].cells[c];p.style.marginLeft=-parseInt(t)+"px",v&&(v.style.marginLeft=-parseInt(t)+"px"),m&&(m.style.marginLeft=-parseInt(t)+"px")}}else if(u.style.marginLeft=i+"px",0==h){var p=r[0].cells[c];p.style.marginLeft=i+"px",v&&(v.style.marginLeft=i+"px"),m&&(m.style.marginLeft=i+"px")}}}}this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-i+"px",r[0].style.marginLeft=-i+"px");if(this.showaggregates&&this.statusbar[0].cells){var f=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(f=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-i+f+"px"}this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-i+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var t=0;t<this._rowdetailselementscache.length;t++)e(this._rowdetailselementscache[t]).css("display","none")},_getvisualcolumnsindexes:function(e,t,i,s,r){if(this.rowdetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:i+s};var a=0,l=-1,o=i+s,n=!1;if(this.autorowheight)return{start:0,end:i+s};if(!r)for(var h=0;i+s>h;h++){if(n||this.columns.records[h].pinned&&(n=!0),this.columns.records[h].hidden||(a+=this.columns.records[h].width),a>=e&&-1==l&&(l=h),a>t+e){o=h;break}}return o++,o>i+s&&(o=i+s),(-1==l||n)&&(l=0),{start:l,end:o}},_getfirstvisualrow:function(){var e=this.vScrollInstance,t=e.value,i=parseInt(t);if(0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"visible"!=this.vScrollBar[0].style.visibility&&(i=0),!this.pageable){var s=this._findvisiblerow(i,this._pageviews);if(-1==s)return null;s!=this.dataview.pagenum?(this.dataview.pagenum=s,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var r=this._findvisiblerow(i,this._pagescache[this.dataview.pagenum]),a=this._pagescache[this.dataview.pagenum];return a&&a[0]?a[r]:void 0},_rendervisualrows:function(){if(this.virtualsizeinfo){var t=this.vScrollInstance,i=this.hScrollInstance,s=t.value,r=i.value,a=parseInt(s),l=parseInt(r),o=this._gettableheight(),n=void 0!=this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&(o+=29),"deferred"==this.scrollmode&&0!=this._newmax&&a>this._newmax&&null!=this._newmax&&(a=this._newmax);var h=t.isScrolling()||i.isScrolling()||this._keydown,d=this.groupable&&this.groups.length>0;if(this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&void 0==this.editrow&&this._hidecelleditor(!1),void 0!=this.editrow&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"hidden"==this.vScrollBar[0].style.visibility&&(a=0),!this.pageable){var c=this._findvisiblerow(a,this._pageviews);if(-1==c)return this._clearvisualrows(),this._renderemptyrow(),void this._updaterowdetailsvisibility();c!=this.dataview.pagenum?(this.dataview.pagenum=c,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var u=this.groupable&&this.groups.length>0?this.groups.length:0;if(this.columns.records){var g=this.columns.records.length-u,p=this._findvisiblerow(a,this._pagescache[this.dataview.pagenum]),v=this._pagescache[this.dataview.pagenum],m=p;0>m&&(m=0);var f=0,w=0,b=0,x=0,_=this.virtualsizeinfo.visiblerecords,y=this.groupable?this.groups.length:0,q=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(q+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(this.groupable||(_=this.dataview.pagesize)),d&&(q=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(q+=" "+this.toTP("jqx-touch")),this.autorowheight&&(q+=" jqx-grid-cell-wrap");var j=this.rowsheight,S=this._rendercell,z=!0,k=this._getvisualcolumnsindexes(l,n,u,g,d),I=k.start,T=k.end;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(m=0),m>=0){this._updaterowdetailsvisibility(),this._startboundindex=null!=v?v[m].bounddata.boundindex:0,this._startvisibleindex=null!=v?v[m].bounddata.visibleindex:0;for(var B=0;_>B&&_>w;B++){var C=void 0!=v?v[m+B]:null;if(null==C){if(m=-B,this._pagescache[this.dataview.pagenum+1])v=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var P=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){v=void 0;break}this.dataview.pagenum++,v=void 0,this._pageviews[this.dataview.pagenum].height>0&&(this.dataview.updateview(),this._loadrows(),v=this._pagescache[this.dataview.pagenum])}while(void 0==v&&this.dataview.pagenum<P)}void 0!=v&&(C=v[m+B])}if(null!=C){if(C.hidden)continue;if(this._endboundindex=this._startboundindex+B,this._endvisibleindex=this._startvisibleindex+B,0==B){var H=Math.abs(a-C.top);this.table[0].style.top=-H+"px",x=-H}var M=this.table[0].rows[w];if(!M)continue;parseInt(M.style.height)!=C.height&&(M.style.height=parseInt(C.height)+"px"),b+=C.height;var D=this.rowdetails&&C.rowdetails,A=!C.rowdetailshidden;D&&A&&(M.style.height=parseInt(C.height-C.rowdetailsheight)+"px",_++);for(var E=this._isrowselected(z,C),L=I;T>L;L++){var N=L;this._rendervisualcell(S,q,E,D,A,d,y,M,C,N,w,h)}if(void 0!=C.group&&this._rendergroup&&this._rendergroup(y,M,C,u,g,w,n),this.autorowheight&&(this.autoheight||this.pageable)){for(var j=this.rowsheight,L=I;T>L;L++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[L].datafield&&this.editcell.row==this.getboundindex(C)||M.cells[L].firstChild&&(j=Math.max(j,8+parseInt(M.cells[L].firstChild.offsetHeight)));M.style.height=parseInt(j)+"px",this.heights[this._startboundindex+B]=j,D&&A&&(j+=C.rowdetailsheight),C.height=j}if(this.visiblerows[this.visiblerows.length]=C,this.hittestinfo[this.hittestinfo.length]={row:C,visualrow:M,details:!1},D&&A){w++;var M=this.table[0].rows[w];this._renderrowdetails(q,M,C,u,g,w),this.visiblerows[this.visiblerows.length]=C,this.hittestinfo[this.hittestinfo.length]={row:C,visualrow:M,details:!0}}if(!this.autorowheight&&b+x>=o)break}else cansetheight=!0,this._clearvisualrow(l,d,w,u,g),o>=b+f+x&&(f+=j);w++}if(this._horizontalvalue=l,f>0&&"visible"==this.vScrollBar[0].style.visibility){var O=(parseInt(this.table.css("top")),this._pageviews[this._pageviews.length-1]),F=t.max,G=O.top+O.height-o;"visible"==this.hScrollBar.css("visibility")&&(G+=this.scrollbarsize+20),F==G||this.autorowheight||G>=0&&("deferred"!=this.scrollmode?(t.max=G,t.setPosition(t.max)):this._newmax!=G&&(this._newmax=G,this._rendervisualrows()))}}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;for(var W=0,R=0,V=0;V<this.visiblerows.length;V++){var K=this.visiblerows[V];K.top=W,W+=K.height,R+=K.height;var D=this.rowdetails&&K.rowdetails,A=!K.rowdetailshidden,M=this.table[0].rows[V];D&&A&&V++;for(var L=I;T>L;L++){var Y=this.columns.records[L];if(!Y.hidden&&!Y.cellsrenderer){var U=M.cells[L],J=0;if(U.firstChild){var J=(K.height-parseInt(U.firstChild.offsetHeight)-8)/2;if(D&&A)var J=(K.height-K.rowdetailsheight-e(U.firstChild).height()-8)/2}else var J=(K.height-parseInt(e(U).height())-8)/2;if(J>=0&&(J=parseInt(J)+4,U.firstChild&&-1==U.firstChild.className.indexOf("jqx-grid-groups-row")&&"checkbox"!=Y.columntype&&"button"!=Y.columntype)){if(this.editable&&this.editcell&&this.editcell.column==Y.datafield&&this.editcell.row==this.getboundindex(K))continue;U.firstChild.style.marginTop=J+"px"}}}}this._pageviews[0]&&(this._pageviews[0].height=R),this._arrange()}this._renderemptyrow()}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var t=this.table[0].rows[0];if(t)for(var i=!1,s=0;s<t.cells.length;s++){var r=e(t.cells[s]);"none"==r.css("display")||i||(r.width()==this.host.width()||r.text()==this.gridlocalization.emptydatastring)&&(r[0].checkbox=null,r[0].button=null,i=!0,r[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var t=!1,i=this.toTP("jqx-grid-cell");if(this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0){var s=this.table[0].rows[0];this.table[0].style.top="0px";for(var r=0;r<s.cells.length;r++){var a=e(s.cells[r]);if("none"!=a.css("display")&&!t){a[0].checkbox=null,a[0].button=null,a[0].className=i,t=!0,a[0].innerHTML="";var l=e("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");l.text(this.gridlocalization.emptydatastring),a.append(l);var o=0;this.oldhscroll||(o=parseInt(this.table[0].style.marginLeft),this.rtl&&(a.css("z-index",999),a.css("overflow","visible"))),l.css("left",-o-l.width()/2),l.css("top",this._gettableheight()/2-l.height()/2),e.jqx.browser.msie&&e.jqx.browser.version<8&&(l.css("margin-left","0px"),l.css("left",this.host.width()/2-l.width()/2));var n=Math.abs(parseInt(this.table[0].style.top));isNaN(n)&&(n=0),e(s).height(this._gettableheight()+n),a.css("margin-left","0px"),a.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())}a.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance,i=t.value,s=parseInt(i),r=this.groupable&&this.groups.length>0;if(this.columns.records)for(var a=0;e>a;a++)this._clearvisualrow(s,r,a,0,this.columns.records.length)},_iscellselected:function(e,t,i){var s=!1,r=0;if(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(r=this.dataview.pagesize*this.dataview.pagenum),e&&null!=t.bounddata)if("singlerow"!=this.selectionmode){if(this.dataview.filters.length>0)if(this.virtualmode)for(var a in this.selectedcells)a==r+t.bounddata.boundindex+"_"+i&&(s=!0);else for(var a in this.selectedcells)a==r+t.bounddata.dataindex+"_"+i&&(s=!0);else for(var a in this.selectedcells)if(a==r+t.bounddata.boundindex+"_"+i){s=!0;break}}else if(this.dataview.filters.length>0){if(this.virtualmode){for(var a in this.selectedcells)if(a==r+t.bounddata.boundindex+"_"+i){s=!0;break}}else for(var a in this.selectedcells)if(a==r+t.bounddata.dataindex+"_"+i){s=!0;break}}else for(var a in this.selectedcells)if(a==r+t.bounddata.boundindex==this.selectedrowindex){s=!0;break}return s},_isrowselected:function(e,t){var i=!1,s=0;return this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(s=this.dataview.pagesize*this.dataview.pagenum),e&&null!=t.bounddata&&("singlerow"!=this.selectionmode?this.dataview.filters.length>0?this.virtualmode?-1!=this.selectedrowindexes.indexOf(s+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(s+t.bounddata.dataindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(s+t.bounddata.boundindex)&&(i=!0):this.dataview.filters.length>0?this.virtualmode?-1!=this.selectedrowindexes.indexOf(s+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(s+t.bounddata.dataindex)&&(i=!0):s+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i},_rendervisualcell:function(t,i,s,r,a,l,o,n,h,d,c,u){var g=this.columns.records[d];if(g.hidden){var p=n.cells[d];return void(p.innerHTML="")}cellvalue=this._getcellvalue(g,h);var p=n.cells[d],v=i;if(-1!=this.selectionmode.indexOf("cell")&&(s=this.dataview.filters.length>0?this.selectedcells[h.bounddata.dataindex+"_"+g.datafield]?!0:!1:this.selectedcells[h.boundindex+"_"+g.datafield]?!0:!1,this.editcell&&this.editcell.row===h.boundindex&&this.editcell.column===g.datafield&&"checkbox"!==g.columntype&&(s=!1),this.virtualmode&&(s=this._iscellselected(!0,h,g.datafield))),""!=g.cellclassname&&g.cellclassname)if("string"==typeof g.cellclassname)v+=" "+g.cellclassname;else{var m=g.cellclassname(this.getboundindex(h),g.datafield,cellvalue,h.bounddata);m&&(v+=" "+m)}var f=this.showsortcolumnbackground&&this.sortcolumn&&g.displayfield==this.sortcolumn;if(f&&(v+=" "+this.toTP("jqx-grid-cell-sort")),g.filter&&this.showfiltercolumnbackground&&(v+=" "+this.toTP("jqx-grid-cell-filter")),(g.pinned&&this.showpinnedcolumnbackground||g.grouped)&&(v+=l?" "+this.toTP("jqx-grid-cell-pinned"):" "+this.toTP("jqx-grid-cell-pinned")),this.altrows&&void 0==h.group){var w=h.visibleindex;w>=this.altstart&&(this.altstart+w)%(1+this.altstep)==0&&(v+=f?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),g.filter&&this.showfiltercolumnbackground&&(v+=" "+this.toTP("jqx-grid-cell-filter-alt")),g.pinned&&this.showpinnedcolumnbackground&&(v+=" "+this.toTP("jqx-grid-cell-pinned-alt")))}if(o>=d){if(l||this.rowdetails){var b=e(p),x=this.columns.records[d].width;p.style.width!=parseInt(x)+"px"&&b.width(x)}}else if((l||this.rowdetails)&&this._hiddencolumns){var b=e(p),x=this.columns.records[d].width;parseInt(p.style.width)!=x&&b.width(x)}var _=!0;if(this.rowdetails&&r&&(a&&!l?v+=" "+this.toTP("jqx-grid-details-cell"):l&&(v+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(void 0==h.group&&d==n.cells.length-o-1){var y=this.toThemeProperty("jqx-icon-arrow-down");if(a)v+=" "+this.toTP("jqx-grid-group-expand-rtl"),v+=" "+y;else{v+=" "+this.toTP("jqx-grid-group-collapse-rtl");var y=this.toThemeProperty("jqx-icon-arrow-left");v+=" "+y}return _=!1,p.title="",p.innerHTML="",void(p.className!=v&&(p.className=v))}}else if(void 0==h.group&&d==o){var y=this.toThemeProperty("jqx-icon-arrow-down");if(a)v+=" "+this.toTP("jqx-grid-group-expand"),v+=" "+y;else{v+=" "+this.toTP("jqx-grid-group-collapse");var y=this.toThemeProperty("jqx-icon-arrow-right");v+=" "+y}return _=!1,p.title="",p.innerHTML="",void(p.className!=v&&(p.className=v))}return s&&_&&d>=o&&(v+=" "+this.toTP("jqx-grid-cell-selected"),v+=" "+this.toTP("jqx-fill-state-pressed")),p.className!=v&&(p.className=v),void 0!=h.group?(cellvalue="",p.title="",void(p.innerHTML="")):void t(this,g,h,cellvalue,p,u)},_rendercell:function(t,i,s,r,a,l){var o=r+"_"+i.visibleindex;if("number"==i.columntype||null!=i.cellsrenderer)var o=s.uniqueid+"_"+i.visibleindex;if(t.editcell&&void 0==t.editrow)if("selectedrow"==t.editmode&&i.editable&&t.editable){if(t.editcell.row==t.getboundindex(s)&&t._showcelleditor)return void(t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,a,!1,!1):t._showcelleditor(t.editcell.row,i,a,t.editcell.init))}else if(t.editcell.row==t.getboundindex(s)&&t.editcell.column==i.datafield&&(t.editcell.element=a,t.editcell.editing&&t._showcelleditor))return void(t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init,!1):t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init));var n=t._defaultcellsrenderer(r,i),h=t._cellscache[o];if(h){if("inline"==i.columntype){if(t._renderinlinecell(t,a,i,s,r),null!=i.cellsrenderer){var d=i.cellsrenderer(t.getboundindex(s),i.datafield,r,n,i.getcolumnproperties(),s.bounddata);void 0!=d&&(a.innerHTML=d)}return}if("checkbox"==i.columntype){if(t.host.jqxCheckBox){""===r&&(r=null);var c=0==a.innerHTML.toString().length;if(!a.checkbox||t.groupable||c?t._rendercheckboxcell(t,a,i,s,r):(a.checkboxrow=t.getboundindex(s),""==r&&(r=!1),"1"==r&&(r=!0),"0"==r&&(r=!1),1==r&&(r=!0),0==r&&(r=!1),"true"==r&&(r=!0),"false"==r&&(r=!1),null!=r||i.threestatecheckbox||(r=!1),i.checkboxcolumn&&(r=!1,t.dataview.filters.length>0&&!t.virtualmode?-1!=t.selectedrowindexes.indexOf(s.bounddata.dataindex)&&(r=!0):-1!=t.selectedrowindexes.indexOf(s.bounddata.boundindex)&&(r=!0)),t.disabled||(a.checkboxinstance?a.checkboxinstance._setState(r):a.checkbox.jqxCheckBox("_setState",r))),null!=i.cellsrenderer){var d=i.cellsrenderer(t.getboundindex(s),i.datafield,r,n,i.getcolumnproperties(),s.bounddata);void 0!=d&&(a.innerHTML=d)}return}}else if("button"==i.columntype&&t.host.jqxButton)return""==r&&(r=!1),null!=i.cellsrenderer&&(r=i.cellsrenderer(t.getboundindex(s),i.datafield,r,n,i.getcolumnproperties(),s.bounddata)),""==a.innerHTML&&(a.buttonrow=t.getboundindex(s),a.button=null,t._renderbuttoncell(t,a,i,s,r)),void(a.button&&!t.groupable?(a.buttonrow=t.getboundindex(s),a.button.val(r)):t._renderbuttoncell(t,a,i,s,r));var u=h.element;if(null!=i.cellsrenderer||a.childNodes&&0==a.childNodes.length||t.groupable||t.rowdetails)a.innerHTML!=u&&(a.innerHTML=u);else if(a.innerHTML.indexOf("editor")>=0)a.innerHTML=u;else if(l){var g=u.indexOf(">"),p=u.indexOf("</"),v=u.substring(g+1,p),m=a.childNodes[0];if(v.indexOf(">")>=0)a.innerHTML=u;else if(m.childNodes[0])v!=m.childNodes[0].nodeValue&&(v.indexOf("&")>=0?a.innerHTML=u:m.childNodes[0].nodeValue=v);else{var f=document.createTextNode(v);m.appendChild(f)}}else a.innerHTML!=u&&(a.innerHTML=u);return void(t.enabletooltips&&i.enabletooltips&&(a.title=h.title))}if("checkbox"==i.columntype)return t._rendercheckboxcell(t,a,i,s,r),t._cellscache[o]={element:"",title:r},void(t.enabletooltips&&i.enabletooltips&&(a.title=r));if("button"==i.columntype)return null!=i.cellsrenderer&&(r=i.cellsrenderer(t.getboundindex(s),i.datafield,r,n,i.getcolumnproperties(),s.bounddata)),t._renderbuttoncell(t,a,i,s,r),t._cellscache[o]={element:"",title:r},void(t.enabletooltips&&i.enabletooltips&&(a.title=r));if("number"==i.columntype)r=s.visibleindex;else if("inline"==i.columntype)return t._renderinlinecell(t,a,i,s,r),t._cellscache[o]={element:"",title:r},void(t.enabletooltips&&i.enabletooltips&&(a.title=r));var u=null;u=null!=i.cellsrenderer?i.cellsrenderer(t.getboundindex(s),i.datafield,r,n,i.getcolumnproperties(),s.bounddata):n,null==u&&(u=n);var w=r;return t.enabletooltips&&i.enabletooltips&&(""!=i.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?w=e.jqx.dataFormat.formatdate(w,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(w=e.jqx.dataFormat.formatnumber(w,i.cellsformat,this.gridlocalization))),a.title=w),t.WinJS?e(a).html(u):a.innerHTML=u,t._cellscache[o]={element:a.innerHTML,title:w},!0},_isIE10:function(){if(void 0==this._browser){var t=e.jqx.utilities.getBrowser();if("msie"==t.browser&&parseInt(t.version)>9)this._browser=!0;else if(this._browser=!1,"msie"==t.browser){var i="Browser CodeName: "+navigator.appCodeName;i+="Browser Name: "+navigator.appName,i+="Browser Version: "+navigator.appVersion,i+="Platform: "+navigator.platform,i+="User-agent header: "+navigator.userAgent,-1!=i.indexOf("Zune 4.7")&&(this._browser=!0)}}return this._browser},_renderinlinecell:function(t,i){e(i);i.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(t,i,s,r,a){if(t.host.jqxCheckBox){var l=e(i);if(""===a&&(a=s.threestatecheckbox?null:!1),"1"==a&&(a=!0),"0"==a&&(a=!1),1==a&&(a=!0),0==a&&(a=!1),"true"==a&&(a=!0),"false"==a&&(a=!1),s.checkboxcolumn&&(a=!1,this.dataview.filters.length>0?-1!=this.selectedrowindexes.indexOf(r.bounddata.dataindex)&&(a=!0):-1!=this.selectedrowindexes.indexOf(r.bounddata.boundindex)&&(a=!0)),0==l.find(".jqx-checkbox").length){if(i.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>',e(i.firstChild).jqxCheckBox({disabled:t.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:s.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:t.theme,checked:a}),this.editable&&s.editable&&e(i.firstChild).jqxCheckBox({locked:!1}),s.checkboxcolumn&&e(i.firstChild).jqxCheckBox({locked:!1}),i.checkbox=e(i.firstChild),i.checkboxinstance=i.checkbox.data().jqxCheckBox.instance,i.checkboxrow=r.boundindex,this.dataview.filters.length>0){var o=r.bounddata.dataindex;i.checkboxrow=o}var n=e.data(i.firstChild,"jqxCheckBox").instance;n.updated=function(r,a,l){if(t.disabled){a=l;for(var o=t.table[0].rows.length,n=t._getcolumnindex(s.datafield),h=0;o>h;h++){var d=t.table[0].rows[h].cells[n].firstChild;d&&e(d).jqxCheckBox({disabled:t.disabled})}}if(s.editable&&!t.disabled){var o=t.table[0].rows.length,n=t._getcolumnindex(s.datafield);if(void 0==t.editrow){if(s.cellbeginedit){var c=s.cellbeginedit(i.checkboxrow,s.datafield,s.columntype,!a);if(0==c)return void t.setcellvalue(i.checkboxrow,s.datafield,!a,!0)}if("selectedrow"!==t.editmode)for(var h=0;o>h;h++){var d=t.table[0].rows[h].cells[n].firstChild;d&&e(d).jqxCheckBox("destroy")}t.editcell&&0==t.editcell.validated?t.setcellvalue(i.checkboxrow,s.datafield,!a,!0):"selectedrow"!==t.editmode||null==t.editcell?(t._raiseEvent(17,{rowindex:i.checkboxrow,datafield:s.datafield,value:l,columntype:s.columntype}),t.setcellvalue(i.checkboxrow,s.datafield,a,!0),t._raiseEvent(18,{rowindex:i.checkboxrow,datafield:s.datafield,oldvalue:l,value:a,columntype:s.columntype})):t.setcellvalue(i.checkboxrow,s.datafield,a,!1,!1)}}else s.checkboxcolumn&&(t.editcell&&t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t.disabled||(a?t.selectrow(i.checkboxrow):t.unselectrow(i.checkboxrow),t.autosavestate&&t.savestate&&t.savestate()))}}else i.checkboxrow=r.boundindex,this.dataview.filters.length>0&&(o=r.bounddata.dataindex,i.checkboxrow=o),e(i.firstChild).jqxCheckBox("_setState",a)}},_renderbuttoncell:function(t,i,s,r,a){if(t.host.jqxButton){var l=e(i);if(""==a&&(a=!1),0==l.find(".jqx-button").length){i.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',e(i.firstChild).val(a),e(i.firstChild).attr("hideFocus","true"),e(i.firstChild).jqxButton({disabled:t.disabled,theme:t.theme,height:t.rowsheight-4,width:s.width-4}),i.button=e(i.firstChild),i.buttonrow=t.getboundindex(r);var o=this.isTouchDevice();if(o){var n=e.jqx.mobile.getTouchEventName("touchend");t.addHandler(e(i.firstChild),n,function(e){s.buttonclick&&s.buttonclick(i.buttonrow,e)})}else t.addHandler(e(i.firstChild),"click",function(e){s.buttonclick&&s.buttonclick(i.buttonrow,e)})}else i.buttonrow=t.getboundindex(r),e(i.firstChild).val(a)}},_clearvisualrow:function(t,i,s,r,a){var l=this.toTP("jqx-grid-cell");i&&(l=" "+this.toTP("jqx-grid-group-cell")),l+=" "+this.toTP("jqx-grid-cleared-cell");for(var o=this.table[0].rows,n=0;r+a>n;n++)if(o[s]){var h=o[s].cells[n];h.className!=l&&(h.className=l);var d=this.columns.records[n];if(this._horizontalvalue!=t&&!d.pinned&&1==this.oldhscroll){h.style.marginLeft=-t+"px"}var c=d.width;c<d.minwidth&&(c=d.minwidth),c>d.maxwidth&&(c=d.maxwidth),parseInt(h.style.width)!=c&&(e(h)[0].style.width="auto"!=c?c+"px":c),""!=h.title&&(h.title=""),""!=h.innerHTML&&(h.innerHTML="")}o[s]&&parseInt(o[s].style.height)!=this.rowsheight&&(o[s].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(e){var t=this._findgroup(e);return null==t?!1:t.expanded},_findgroup:function(e){var t=null;return this.expandedgroups[e]?this.expandedgroups[e]:t},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(t){if(void 0==this._columnsbydatafield&&(this._columnsbydatafield=new Array),this._columnsbydatafield[t])return this._columnsbydatafield[t];var i=t,s=null;return e.each(this.columns.records,function(){return this.datafield==t?(i=this.text,s=this,!1):void 0}),this._columnsbydatafield[t]={label:i,column:s},this._columnsbydatafield[t]},_getcolumnbydatafield:function(t){if(void 0==this.__columnsbydatafield&&(this.__columnsbydatafield=new Array),this.__columnsbydatafield[t])return this.__columnsbydatafield[t];var i=t,s=null;return e.each(this.columns.records,function(){return this.datafield==t||this.displayfield==t?(i=this.text,s=this,!1):void 0}),this.__columnsbydatafield[t]=s,this.__columnsbydatafield[t]},isscrollingvertically:function(){var e=this.vScrollBar.jqxScrollBar("isScrolling");return e},_renderrowdetails:function(t,i,s,r,a){if(void 0!=i){var l=e(i),o=0,n=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;
if(this.groupable&&this.groups.length>0)for(var h=0;a>=h;h++){var d=e(i.cells[h]);d[0].innerHTML="",d[0].className="jqx-grid-details-cell"}var d=e(i.cells[o]);if("none"==d[0].style.display){for(var c=i.cells[o],u=2,g=o;void 0!=c&&"none"==c.style.display&&10>u;)c=i.cells[g+u-1],u++;d=e(c)}if(this.rtl)for(var p=r;a>p;p++)i.cells[p].innerHTML="",i.cells[p].className="jqx-grid-details-cell";d.css("width","100%"),l.height(s.rowdetailsheight),d[0].className=t;var v=this.getboundindex(s),m=v+"_";if(this._rowdetailscache[m]){var f=this._rowdetailscache[m],w=f.html;if(this.initrowdetails){if(this._rowdetailscache[m].element){var b=this._rowdetailscache[m].element,x=d.coord(),_=this.gridcontent.coord(),y=parseInt(x.top)-parseInt(_.top),q=parseInt(x.left)-parseInt(_.left);this.rtl&&(q=0),e(b).css("top",y),e(b).css("left",q),e(b).css("display","block"),e(b).width(this.host.width()-n),this.layoutrowdetails&&this.layoutrowdetails(v,b,this.element,this.getrowdata(v))}}else d[0].innerHTML=w}else{d[0].innerHTML="",this.enablerowdetailsindent||(n=0);var j='<div role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+n+'px;">'+s.rowdetails+"</div>";if(this.rtl)var j='<div role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+n+'px;">'+s.rowdetails+"</div>";if(this._rowdetailscache[m]={id:i.id,html:j},this.initrowdetails){var b=e(j)[0];e(this.gridcontent).prepend(e(b)),e(b).css("position","absolute"),e(b).width(this.host.width()-n),e(b).height(d.height());var x=d.coord();e(b).css("z-index",2e3),this.isTouchDevice()&&e(b).css("z-index",99999),e(b).addClass(this.toThemeProperty("jqx-widget-content"));var x=d.coord(),_=this.gridcontent.coord(),y=parseInt(x.top)-parseInt(_.top),q=parseInt(x.left)-parseInt(_.left);e(b).css("top",y),e(b).css("left",q),this.content[0].scrollTop=0,this.content[0].scrollLeft=0;var S=e(e(b).children()[0]);""!=S[0].id&&(S[0].id=S[0].id+v),this.initrowdetails(v,b,this.element,this.getrowdata(v)),this._rowdetailscache[m].element=b,this._rowdetailselementscache[v]=b}else d[0].innerHTML=j}}},_defaultcellsrenderer:function(t,i){""!=i.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(t)?t=e.jqx.dataFormat.formatdate(t,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(t)&&(t=e.jqx.dataFormat.formatnumber(t,i.cellsformat,this.gridlocalization)));var s="4px";if(25!=this.rowsheight&&(s=this.rowsheight/2-this._cellheight/2,0>s&&(s=4),s+="px"),this.enableellipsis){if("center"==i.cellsalign||"middle"==i.cellsalign)return'<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: '+s+';">'+t+"</div>";if("left"==i.cellsalign)return'<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin-right: 2px; margin-left: 4px; margin-top: '+s+';">'+t+"</div>";if("right"==i.cellsalign)return'<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin-right: 2px; margin-left: 4px; margin-top: '+s+';">'+t+"</div>"}return"center"==i.cellsalign||"middle"==i.cellsalign?'<div style="text-align: center; margin-top: '+s+';">'+t+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+s+"; float: "+i.cellsalign+';">'+t+"</span>"},getcelltext:function(t,i){if(null==t||null==i)return null;var s=this.getcellvalue(t,i),r=this.getcolumn(i);return r&&""!=r.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(s)?s=e.jqx.dataFormat.formatdate(s,r.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(s)&&(s=e.jqx.dataFormat.formatnumber(s,r.cellsformat,this.gridlocalization))),s},getcelltextbyid:function(t,i){if(null==t||null==i)return null;var s=this.getcellvaluebyid(t,i),r=this.getcolumn(i);return r&&""!=r.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(s)?s=e.jqx.dataFormat.formatdate(s,r.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(s)&&(s=e.jqx.dataFormat.formatnumber(s,r.cellsformat,this.gridlocalization))),s},_getcellvalue:function(e,t){var i=null;return i=t.bounddata[e.datafield],null!=e.displayfield&&(i=t.bounddata[e.displayfield]),null==i&&(i=""),i},getcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e,r="";return isNaN(i)||(s=this.getrowdata(i)),null!=s&&(r=s[t]),this._getcellresult(r,e,t)},getrenderedcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e,r="";return isNaN(i)||(s=this.getrenderedrowdata(i)),null!=s&&(r=s[t]),this._getcellresult(r,e,t)},_getcellresult:function(e,t,i){var s=this.getcolumn(i);if(null==s||void 0==s)return null;var r=s.getcolumnproperties(),a=r.hidden,l=r.width,o=r.pinned,n=r.cellsalign,h=r.cellsformat,d=this.getrowheight(t);return 0==d?null:{value:e,row:t,column:i,datafield:i,width:l,height:d,hidden:a,pinned:o,align:n,format:h}},setcellvaluebyid:function(e,t,i,s,r){var a=this.getrowboundindexbyid(e);return this.setcellvalue(a,t,i,s,r)},getcellvaluebyid:function(e,t){var i=this.getrowboundindexbyid(e);return this.getcellvalue(i,t)},setcellvalue:function(t,i,s,r,a){if(null==t||null==i)return!1;var l=parseInt(t),o=l,n=t;isNaN(l)||(n=this.getrowdata(l));var h=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(h=!0),this.virtualmode&&(this._pagescache=new Array);var d="",c="";if(null==n||n[i]===s)return this._updating||0==r||this._renderrows(this.virtualsizeinfo),!1;if(null!==n[i]||""!==s){var u=this._getcolumnbydatafield(i),g="string",p=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(p){var v="";e.each(p,function(){return this.name==u.displayfield?(this.type&&(v=this.type),!1):void 0}),v&&(g=v),c=n[u.displayfield]}if(d=n[i],!u.nullable||null!=s&&""!==s&&u.nullable&&void 0===s.label){if(e.jqx.dataFormat.isNumber(d)||"number"==g||"float"==g||"int"==g||"decimal"==g&&"date"!=g)s=new Number(s),s=parseFloat(s),isNaN(s)&&(s=0);else if((e.jqx.dataFormat.isDate(d)||"date"==g)&&""!=s){var m=s;m=new Date(m),"Invalid Date"!=m&&null!=m?s=m:"Invalid Date"==m&&(m=new Date,s=m)}if(n[i]===s)return void(this._updating||0==r||this._renderrows(this.virtualsizeinfo))}n[i]=s;var f=this.getrenderedrowdata(l,!0);if(f[i]=s,null!=s&&null!=s.label){var u=this._getcolumnbydatafield(i);n[u.displayfield]=s.label,f[u.displayfield]=s.label,n[i]=s.value,f[i]=s.value}if(h&&void 0!=n.dataindex&&(o=n.dataindex,this.dataview.cachedrecords[n.dataindex][i]=s,null!=s&&void 0!=s.label&&(this.dataview.cachedrecords[n.dataindex][i]=s.value,this.dataview.cachedrecords[n.dataindex][u.displayfield]=s.label)),this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var w=l;h&&void 0!=n.dataindex&&(w=n.dataindex);var b=this.source._source._localdata()[w];this.source.suspendKO=!0;var x=b;if(x[i]&&x[i].subscribe)null!=s&&null!=s.label?(x[u.displayfield](s.label),x[i](s.value)):x[i](s);else{var p=this.source._source.datafields,_=null;if(p&&e.each(p,function(){return this.name==i?(_=this.map,!1):void 0}),null==_)null!=s&&null!=s.label?(x[i]=s.value,x[u.displayfield]=s.label):x[i]=s;else{var y=_.split(this.source.mapChar);if(y.length>0){for(var q=x,j=0;j<y.length-1;j++)q=q[y[j]];q[y[y.length-1]]=s}}this.source._source._localdata.replace(b,e.extend({},x))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){var S=this.getsortinformation();this.sortcolumn==i&&(this.dataview.clearsortdata(),this.dataview.sortby(S.sortcolumn,S.sortdirection.ascending))}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=new Array,this.source.updaterow&&(void 0==a||1==a)){var z=!1,k=this.that,I=function(e){0==e&&(k.setcellvalue(t,i,d,!0,!1),d!=c&&k.setcellvalue(t,k.getcolumn(i).displayfield,c,!0,!1))};try{var T=this.getrowid(l);z=this.source.updaterow(T,n,I),void 0==z&&(z=!0)}catch(B){return z=!1,k.setcellvalue(t,i,d,!0,!1),void(d!=c&&k.setcellvalue(t,k.getcolumn(i).displayfield,c,!0,!1))}}var C=this.vScrollInstance.value;if(this._updating&&1!=r&&(r=!1),1==r||void 0==r){var k=this.that,P=function(){k.pageable&&k.updatepagerdetails&&(k.updatepagerdetails(),(k.autoheight||k.autorowheight)&&k._updatepageviews())},H=this.groupable&&this.groups.length>0;h&&!H?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),P(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!H?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),P(),this._renderrows(this.virtualsizeinfo)):this.groupable&&this.groups.length>0?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable&&-1!=this.groups.indexOf(i)?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}if(this.vScrollInstance.setPosition(C),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow){var M=this.getcolumn(i).filtertype;("list"==M||"checkedlist"==M)&&this._updatelistfilters(!0)}return this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:s,value:s,oldvalue:d}),!0}},getcellvalue:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),s=e;if(isNaN(i)||(s=this.getrowdata(i)),null!=s){var r=s[t];return r}return null},getrows:function(){var t=this.dataview.records.length;if(this.virtualmode){for(var i=new Array,s=0;s<this.dataview.records.length;s++){var r=this.dataview.records[s];r&&i.push(r)}void 0===this.dataview.records.length&&e.each(this.dataview.records,function(){var e=this;e&&i.push(e)});var a=0;return this.pageable&&(a=this.dataview.pagenum*this.dataview.pagesize),i.length>this.source._source.totalrecords-a?i.slice(0,this.source._source.totalrecords-a):i}if(this.dataview.sortdata){for(var i=new Array,s=0;t>s;s++){var l={};l=e.extend({},this.dataview.sortdata[s].value),i[s]=l}return i}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);for(var i=this.getboundrows(),s=0;s<i.length;s++)if(i[s]&&i[s].uid==e)return s;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t)return t;var i=this.getrowboundindexbyid(e);return this.getboundrows()[i]},getrowdata:function(e){if(void 0==e&&(e=0),this.virtualmode){var t=this.dataview.records[e];return t}var t=this.getboundrows()[e];return t},getrenderedrowdata:function(e,t){if(void 0==e&&(e=0),this.virtualmode){var i=this.getrowvisibleindex(e),s=this.dataview.loadedrecords[i];return s}var i=this.getrowvisibleindex(e);if(i>=0){if(this.groupable&&this.groups.length>0)var s=this.dataview.loadedrecords[i];else{var s=this.dataview.loadedrecords[i];if(this.pageable&&(void 0==t||0==t))var s=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e]}return s}return null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){for(var t=this.getdisplayrows(),i=0;i<t.length;i++)if(void 0!==t[i].dataindex){if(t[i].dataindex===e)return t[i].visibleindex}else if(t[i].boundindex===e)return t[i].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.dataview.filters.length>0&&(e.bounddata?void 0!==e.bounddata.dataindex&&(t=e.bounddata.dataindex):void 0!==e.dataindex&&(t=e.dataindex)),t},getrowboundindex:function(e){var t=this.getdisplayrows()[e];return t?void 0!==t.dataindex?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var e=[],t=0;t<this.dataview.pagesize;t++){var i=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum];if(void 0==i)break;e.push(i)}return e}if(void 0!=this._startboundindex&&void 0!=this._endboundindex){for(var e=[],t=this._startvisibleindex;t<=this._endvisibleindex;t++){var i=this.dataview.loadedrecords[t];if(void 0==i)break;e.push(i)}return e}return this.dataview.loadedrecords},getrowid:function(e){if(void 0==e&&(e=0),this.virtualmode){var t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];if(i)return i.uid}else{var i=null,s=this.dataview.filters.length>0;if(e>=0&&e<this.dataview.bounditems.length&&!s){if(this.groupable&&this.groups.length>0)var t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];else var t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];if(i)return i.uid}if(this.dataview.filters.length>0){var i=this.getboundrows()[e];return i&&null!=i.uid?i.uid:null}}return null},_updateGridData:function(e){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),"updaterow"==e?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&this.groups.length>0?(this.dataview.reloaddata(),this.render()):(this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,s){if(void 0!=t&&void 0!=i){var r=this.that,a=!1;r._datachanged=!0;var l=function(t,i,r){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var a=!1;e.isArray(i)?(e.each(i,function(e){a=t.dataview.updaterow(this,r[e],!1)}),t.dataview.refresh()):a=t.dataview.updaterow(i,r);var l=t.vScrollInstance.value;if((void 0==s||1==s)&&(void 0==t._updating||0==t._updating)&&t._updateGridData("updaterow"),t.showaggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var o=t.dataview.recordsbyid["id"+i],n=t.dataview.records.indexOf(o),h=t.source._source._localdata()[n];t.source.suspendKO=!0,t.source._source._localdata.replace(h,e.extend({},o)),t.source.suspendKO=!1}return t.vScrollInstance.setPosition(l),a};if(this.source.updaterow){var o=function(e){(1==e||void 0==e)&&l(r,t,i)};try{a=this.source.updaterow(t,i,o),void 0==a&&(a=!0)}catch(n){a=!1}}else a=l(r,t,i);return a}return!1},deleterow:function(t,i){if(void 0!=t){this._datachanged=!0;var s=!1,r=this.that,a=function(t,s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var r=!1,a=t.vScrollInstance.value;if(e.isArray(s))e.each(s,function(){r=t.dataview.deleterow(this,!1)}),t.dataview.refresh();else var r=t.dataview.deleterow(s);return(void 0==t._updating||0==t._updating)&&(void 0==i||1==i)&&(t._render(!0,!0,!1,!1),"visible"!=t.vScrollBar.css("visibility")&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo))),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1),t.vScrollInstance.setPosition(a),r};if(this.source.deleterow){var l=function(e){(1==e||void 0==e)&&a(r,t)};try{this.source.deleterow(t,l),void 0==s&&(s=!0)}catch(o){s=!1}}else s=a(r,t);return s}return!1},addrow:function(t,i,s){if(void 0!=i){this._datachanged=!0,void 0==s&&(s="last");var r=!1,a=this.that;if(null==t){var l=this.dataview.filters&&this.dataview.filters.length>0,o=l?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(e.isArray(i)){var n=new Array;e.each(i,function(e){var t=a.dataview.getid(a.dataview.source.id,i[e],o+e);n.push(t)}),t=n}else for(t=this.dataview.getid(this.dataview.source.id,i,o);null!=this.dataview.recordsbyid["id"+t];)t++}var h=function(t,i,s,r){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var a=t.vScrollInstance.value,l=!1;return e.isArray(s)?(e.each(s,function(e){void 0!=this.dataindex&&delete this.dataindex;var s=null;null!=i&&null!=i[e]&&(s=i[e]),l=t.dataview.addrow(s,this,r,!1)}),t.dataview.refresh()):(void 0!=s&&void 0!=s.dataindex&&delete s.dataindex,l=t.dataview.addrow(i,s,r)),(void 0==t._updating||0==t._updating)&&(t._render(!0,!0,!1,!1),t.invalidate()),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(s),t.source.suspendKO=!1),t.vScrollInstance.setPosition("deferred"!=t.scrollmode?a:0),l};if(this.source.addrow){var d=function(e,r){(1==e||void 0==e)&&(void 0!=r&&(t=r),h(a,t,i,s))};try{r=this.source.addrow(t,i,s,d),void 0==r&&(r=!0)}catch(c){r=!1}if(0==r)return!1}else h(this,t,i,s);return r}return!1},_findvisiblerow:function(e,t){void 0==e&&(e=parseInt(this.vScrollInstance.value));var i=0;(void 0==t||null==t)&&(t=this.rows.records);for(var s=t.length;s>=i;){mid=parseInt((i+s)/2);var r=t[mid];if(void 0==r)break;if(r.top>e&&r.top+r.height>e)s=mid-1;else{if(!(r.top<e&&r.top+r.height<e))return mid;i=mid+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(e){{this.that}if(void 0!=this.gridcontent){void 0==this.table&&(this.table=this.gridcontent.find("#contenttable"+this.element.id));var t=this.groupable&&this.groups.length>0,i=0,s=e.visiblerecords;if(this.pageable&&(this.autoheight||this.autorowheight)&&(s=this.dataview.pagesize,this.groupable&&(this.dataview.updateview(),s=this.dataview.rows.length)),this.groupable||this.pageable||!this.autoheight&&!this.autorowheight||(s=this.dataview.totalrecords),this.rowdetails&&(s+=this.dataview.pagesize),this.columns.records){for(var r=this.columns.records.length,a=this.table[0].rows,l=0;s>l;l++){var o=a[l];if(!o)break;for(var n=o.cells,h=0,d=0;r>d;d++){var c=this.columns.records[d],u=c.width,g=n[d];parseInt(g.style.left)!=h&&(g.style.left=h+"px"),parseInt(g.style.width)!=u&&(g.style.width=u+"px"),c.hidden&&c.hideable?g.style.display="none":h+=parseInt(u)}0==i&&(this.table.width(parseInt(h)+2),i=h)}this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this.showfilterrow&&this.filterable&&this._updatefilterrowui&&this._updatefilterrowui(),this._updatescrollbarsafterrowsprerender(),t&&this._renderrows(this.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var e=this.hScrollBar[0].style.visibility,t=0,i=this.vScrollBar[0].style.visibility;"visible"==i&&(t=this.scrollbarsize+3);var s=this.element.style.width;if(s=s.toString().indexOf("%")>=0?this.host.width():parseInt(s),parseInt(this.table[0].style.width)-2>s-t){if("visible"!=e&&(this.autowidth||(this.hScrollBar[0].style.visibility="visible"),this._arrange()),"visible"==i){if("deferred"==this.scrollmode||this.virtualmode)this._updatevscrollbarmax();else if(this.virtualsizeinfo){var r=this.virtualsizeinfo.virtualheight-this._gettableheight();!isNaN(r)&&r>0&&("hidden"!=e?this.vScrollBar.jqxScrollBar("max",r+this.scrollbarsize+4):this.vScrollBar.jqxScrollBar("max",r))}}else t=-2;this.hScrollBar.jqxScrollBar("max",t+this.table.width()-this.host.width())}else"hidden"!=e&&(this.hScrollBar.css("visibility","hidden"),this._arrange());this._renderhorizontalscroll()},_prerenderrows:function(t){var i=this.that;if(1==this.prerenderrequired){if(this.prerenderrequired=!1,this.editable&&this._destroyeditors&&this._destroyeditors(),void 0==this.gridcontent)return;this.gridcontent.find("#contenttable"+this.element.id).remove(),null!=this.table&&(this.table.remove(),this.table=null),this.table=e('<div id="contenttable'+this.element.id+'" style="overflow: hidden; position: relative;" height="100%"></div>'),this.gridcontent.addClass(this.toTP("jqx-grid-content")),this.gridcontent.addClass(this.toTP("jqx-widget-content")),this.gridcontent.append(this.table);var s=this.groupable&&this.groups.length>0,r=0;this.table[0].rows=new Array;var a=this.toTP("jqx-grid-cell");s&&(a=" "+this.toTP("jqx-grid-group-cell"));var l=t.visiblerecords;if(this.pageable&&(this.autoheight||this.autorowheight)&&(l=this.dataview.pagesize,this.groupable&&(this.dataview.updateview(),l=this.dataview.rows.length,l<this.dataview.pagesize&&(l=this.dataview.pagesize))),this.pageable||!this.autoheight&&!this.autorowheight||(l=this.dataview.totalrecords),this.groupable&&(this.autoheight||this.autorowheight)&&!this.pageable&&(l=this.dataview.rows.length),this.rowdetails&&(l+=this.autoheight||this.autorowheight?this.dataview.pagesize:l),!this.columns.records)return;var o=this.columns.records.length;e.jqx.browser.msie&&e.jqx.browser.version>8&&this.table.css("opacity","0.99"),e.jqx.browser.mozilla&&this.table.css("opacity","0.99"),-1!=navigator.userAgent.indexOf("Safari")&&this.table.css("opacity","0.99");var n=e.jqx.browser.msie&&e.jqx.browser.version<8;n&&this.host.attr("hideFocus","true");var h=this.tableZIndex;l*o>h&&(h=l*o);var d=(0==this.dataview.records.length,this.isTouchDevice(),"");this._hiddencolumns=!1;for(var c=0;l>c;c++){var u='<div role="row" style="position: relative; height='+this.rowsheight+'px;" id="row'+c+this.element.id+'">';if(n){var u='<div role="row" style="position: relative; z-index: '+h+"; height:"+this.rowsheight+'px;" id="row'+c+this.element.id+'">';h--}for(var g=0,p=0;o>p;p++){var v=this.columns.records[p],m=v.width;if(m<v.minwidth&&(m=v.minwidth),m>v.maxwidth&&(m=v.maxwidth),this.rtl){var f=h-o+2*p,w='<div role="gridcell" style="left: '+g+"px; z-index: "+f+"; width:"+m+"px;";h--}else var w='<div role="gridcell" style="left: '+g+"px; z-index: "+h--+"; width:"+m+"px;";v.hidden&&v.hideable?(w+="display: none;",this._hiddencolumns=!0,h++):g+=m,w+='" class="'+a+'"></div>',u+=w}0==r&&(this.table.width(parseInt(g)+2),r=g),u+="</div>",d+=u}i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(d)}):i.table[0].innerHTML=d,this.table[0].rows=new Array;for(var b=this.table.children(),c=0;l>c;c++){var x=b[c];this.table[0].rows.push(x),x.cells=new Array;for(var _=e(x).children(),p=0;o>p;p++)x.cells.push(_[p])}if(0==l){var g=0;if(this.showemptyrow){var u=e('<div style="position: relative;" id="row0'+this.element.id+'"></div>');this.table.append(u),u.height(this.rowsheight),this.table[0].rows[0]=u[0],this.table[0].rows[0].cells=new Array}for(var p=0;o>p;p++){var v=this.columns.records[p],m=v.width;if(this.showemptyrow){var w=e('<div style="position: absolute; height: 100%; left: '+g+"px; z-index: "+h--+"; width:"+m+'px;" class="'+a+'"></div>');w.height(this.rowsheight),u.append(w),this.table[0].rows[0].cells[p]=w[0]}m<v.minwidth&&(m=v.minwidth),m>v.maxwidth&&(m=v.maxwidth),v.hidden&&v.hideable||(g+=m)}this.table.width(parseInt(g)+2),r=g}this._updatescrollbarsafterrowsprerender(),this.rendered&&this.rendered("rows"),this._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null;this.tableheight=null;var i=this.that,s=!1,r=!1;if(null!=this.width&&-1!=this.width.toString().indexOf("px")?e=this.width:void 0==this.width||isNaN(this.width)||(e=this.width),null!=this.width&&-1!=this.width.toString().indexOf("%")&&(e=this.width,s=!0),this.autowidth){for(var a=0,l=0;l<this.columns.records.length;l++){var o=this.columns.records[l].width;"auto"==o?(o=this._measureElementWidth(this.columns.records[l].text),a+=o):a+=o}"hidden"!=this.vScrollBar.css("visibility")&&(a+=this.scrollbarsize+4),e=a,this.width=e}null!=this.height&&-1!=this.height.toString().indexOf("px")?t=this.height:void 0==this.height||isNaN(this.height)||(t=this.height),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(t=this.height,r=!0);var n=function(){var e=0,t=i.showheader&&null!=i.columnsheader?i.columnsheader.height()+2:0;return e+=t,i.pageable&&(e+=i.pagerheight),i._groupsheader()&&(e+=i.groupsheaderheight),i.showtoolbar&&(e+=i.toolbarheight),i.showstatusbar&&(e+=i.statusbarheight),"visible"==i.hScrollBar[0].style.visibility&&(e+=20),e};if(this.autoheight&&this.virtualsizeinfo)if(this.pageable&&this.gotopage){var h=0;t=h+(this._pageviews[0]?this._pageviews[0].height:0),t+=n(),this.showemptyrow&&0==this.dataview.totalrecords&&(t+=this.rowsheight)}else{var h=this.host.height()-this._gettableheight();this._pageviews.length>0?(t=h+this._pageviews[this._pageviews.length-1].height+this._pageviews[this._pageviews.length-1].top,this.vScrollBar[0].style.visibility="hidden"):(t=n(),this.showemptyrow&&(t+=this.rowsheight))}else this.autoheight&&(t=this.dataview.totalrecords*this.rowsheight,this._loading&&(t=250,this.dataloadelement.height(t)),t+=n(),t>1e4&&(t=1e4));null!=e?(e=parseInt(e),s?this.element.style.width=this.width:this.element.style.width!=parseInt(this.width)+"px"&&(this.element.style.width=parseInt(this.width)+"px"),s&&(e=this.host.width(),2>=e&&(e=600,this.host.width(e)),this._oldWidth||(this._oldWidth=e))):this.host.width(250),null!=t?(r||(t=parseInt(t)),r?this.element.style.height=this.height:this.element.style.height!=parseInt(t)+"px"&&(this.element.style.height=parseInt(t)+"px"),r&&!this.autoheight&&(t=this.host.height(),0==t&&(t=400,this.host.height(t)),this._oldHeight||(this._oldHeight=t))):this.host.height(250),this.autoheight&&(this.tableheight=null,this._gettableheight());var d=0;if(this.showtoolbar?(this.toolbar.width(e),this.toolbar.height(this.toolbarheight-1),this.toolbar.css("top",0),d+=this.toolbarheight,t-=parseInt(this.toolbarheight)):this.toolbar[0].style.height="0px",this.showstatusbar?(this.statusbar.width(this.showaggregates?this.table?Math.max(e,this.table.width()):e:e),this.statusbar.height(this.statusbarheight)):this.statusbar[0].style.height="0px",this._groupsheader()){this.groupsheader.width(e),this.groupsheader.height(this.groupsheaderheight),this.groupsheader.css("top",d);var c=this.groupsheader.height()+1;d+=c,t>c&&(t-=parseInt(c))}else{this.groupsheader[0].style.width!=e+"px"&&(this.groupsheader[0].style.width=parseInt(e)+"px"),this.groupsheader[0].style.height!=this.groupsheaderheight+"px"&&(this.groupsheader[0].style.height=parseInt(this.groupsheaderheight)+"px"),this.groupsheader[0].style.top!=d+"px"&&this.groupsheader.css("top",d);var c=this.showgroupsheader&&this.groupable?this.groupsheaderheight:0,u=d+c+"px";this.content[0].style.top!=u&&this.content.css("top",d+this.groupsheaderheight)}var g=this.scrollbarsize;isNaN(g)&&(g=parseInt(g),isNaN(g)?g="17px":g+="px"),g=parseInt(g);var p=4,v=2,m=0;"visible"==this.vScrollBar[0].style.visibility&&(m=g+p),"visible"==this.hScrollBar[0].style.visibility&&(v=g+p+2);var f=0;this.pageable&&(f=this.pagerheight,v+=this.pagerheight),this.showstatusbar&&(v+=this.statusbarheight,f+=this.statusbarheight),this.hScrollBar[0].style.height!=g+"px"&&(this.hScrollBar[0].style.height=parseInt(g)+"px"),(this.hScrollBar[0].style.top!=d+t-p-g-f+"px"||"0px"!=this.hScrollBar[0].style.left)&&this.hScrollBar.css({top:d+t-p-g-f+"px",left:"0px"});var w=this.hScrollBar[0].style.width,b=!1,x=!1;0==m?w!=e-2+"px"&&(this.hScrollBar.width(e-2),b=!0):w!=e-g-p+"px"&&(this.hScrollBar.width(e-g-p+"px"),b=!0),this.autoheight||(this.vScrollBar[0].style.width!=g+"px"&&(this.vScrollBar.width(g),x=!0),this.vScrollBar[0].style.height!=parseInt(t)-v+"px"&&(this.vScrollBar.height(parseInt(t)-v+"px"),x=!0),(this.vScrollBar[0].style.left!=parseInt(e)-parseInt(g)-p+"px"||this.vScrollBar[0].style.top!=d+"px")&&this.vScrollBar.css({left:parseInt(e)-parseInt(g)-p+"px",top:d})),this.rtl&&(this.vScrollBar.css({left:"0px",top:d}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:g+2}));var _=this.vScrollInstance;_.disabled=this.disabled,this.autoheight||x&&_.refresh();var y=this.hScrollInstance;y.disabled=this.disabled,b&&y.refresh(),this.autowidth&&(this.hScrollBar[0].style.visibility="hidden"),this.statusbarheight=parseInt(this.statusbarheight),this.toolbarheight=parseInt(this.toolbarheight);var q=function(e){"visible"==e.vScrollBar[0].style.visibility&&"visible"==e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(g)+3),e.bottomRight.height(parseInt(g)+4),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(g)+4+e.statusbarheight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight}))):e.bottomRight[0].style.visibility="hidden"};if(q(this),this.content[0].style.width!=e-m+"px"&&this.content.width(e-m),this.content[0].style.height!=t-v+3+"px"&&this.content.height(t-v+3),this.content[0].style.top!=d+"px"&&this.content.css("top",d),this.rtl&&(this.content.css("left",m),this.table)){var j=this.table.width();e-m>j&&this.content.css("left",e-j)}if(this.showstatusbar&&(this.statusbar.css("top",d+t-this.statusbarheight-(this.pageable?this.pagerheight:0)),this.showaggregates&&("visible"==this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:d+t-p-g-f+this.statusbarheight+"px"}),this.statusbar.css("top",1+d+t-g-5-this.statusbarheight-(this.pageable?this.pagerheight:0))),q(this)),this.rtl&&("visible"!=this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager.width(e),this.pager.height(this.pagerheight),this.pager.css("top",d+t-this.pagerheight-1)):this.pager[0].style.height="0px",null!=this.table){var S=-2;if("visible"==this.vScrollBar[0].style.visibility&&(S=this.scrollbarsize+3),"visible"==this.hScrollBar[0].style.visibility){var z=S+this.table.width()-this.host.width();z>=0&&this.hScrollBar.jqxScrollBar("max",z),"visible"==this.hScrollBar[0].style.visibility&&0==z&&(this.hScrollBar[0].style.visibility="hidden",this._arrange())}}e!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),t!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=e},destroy:function(){if(delete e.jqx.dataFormat.datescache,delete this.gridlocalization,e.jqx.utilities.resize(this.host,null,!0),this.table&&this.table[0]){for(var t=this.table[0].rows.length,i=0;t>i;i++){for(var s=this.table[0].rows[i],r=s.cells,a=r.length,l=0;a>l;l++)e(s.cells[l]).remove(),s.cells[l]=null,delete s.cells[l];s.cells=null,s.cells&&delete s.cells,e(this.table[0].rows[i]).remove(),this.table[0].rows[i]=null}try{delete this.table[0].rows}catch(o){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(var i=0;i<this.columns.records.length;i++){var n=this.columns.records[i];this._removecolumnhandlers(this.columns.records[i]),n.element&&(e(n.element).remove(),e(n.sortasc).remove(),e(n.sortdesc).remove(),e(n.filtericon).remove(),e(n.menu).remove(),n.element=null,n.uielement=null,n.sortasc=null,n.sortdesc=null,n.filtericon=null,n.menu=null,delete n.element,delete n.uielement,delete n.sortasc,delete n.sortdesc,delete n.filtericon,delete n.menu,delete this.columnsrow[0].cells[i])}try{delete this.columnsrow[0].cells}catch(o){}delete this.columnsrow}if(jQuery.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(e(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(e(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(e(document),"selectstart."+this.element.id),this.removeHandler(e(document),"mousedown.resize"+this.element.id),this.removeHandler(e(document),"mouseup.resize"+this.element.id),this.removeHandler(e(document),"mousemove.resize"+this.element.id),this.isTouchDevice()){var h=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,d=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,c=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;
this.removeHandler(e(document),h),this.removeHandler(e(document),d),this.removeHandler(e(document),c)}if(this.removeHandler(e(document),"mousedown.reorder"+this.element.id),this.removeHandler(e(document),"mouseup.reorder"+this.element.id),this.removeHandler(e(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()){var h=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,d=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,c=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id;this.removeHandler(e(document),h),this.removeHandler(e(document),d),this.removeHandler(e(document),c)}if(this.removeHandler(e(window),"resize."+this.element.id),this.groupable){var h="mousemove.grouping"+this.element.id,d="mousedown.grouping"+this.element.id,c="mouseup.grouping"+this.element.id;this.removeHandler(e(document),h),this.removeHandler(e(document),d),this.removeHandler(e(document),c)}if(this.columnsreorder){var h="mousemove.reorder"+this.element.id,d="mousedown.reorder"+this.element.id,c="mouseup.reorder"+this.element.id;this.removeHandler(e(document),h),this.removeHandler(e(document),d),this.removeHandler(e(document),c),delete this.columnsbounds}if(this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader.remove(),delete this.columnsheader,this.selectionarea.remove(),delete this.selectionarea,this.menuitemsarray&&this.menuitemsarray.length)for(var u=this.menuitemsarray.length,i=0;u>i;i++)e(this.menuitemsarray[i]).remove();delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent.remove(),delete this.gridcontent,this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var i=this.source?this.source.datafields:null;null==i&&this.source&&this.source._source&&(i=this.source._source.datafields);var s=i?i.length>0:!1;if(this.autogeneratecolumns){var r=new Array;if(i)e.each(i,function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};r.push(e)});else if(this.source.records.length>0){var a=this.source.records[0];for(obj in a)if("uid"!=obj){var l={width:100,datafield:obj,text:obj};r.push(l)}}this.columns=r}if(this.columns&&this.columns.records)for(var o=0;o<this.columns.records.length;o++)this._removecolumnhandlers(this.columns.records[o]);var n=this.that,h=new e.jqx.collection(this.element),d=0;if(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.groupable&&e.each(this.groups,function(){var e=new t(n,this);e.visibleindex=d++,e.width=n.groupindentwidth,h.add(e),e.grouped=!0,e.filterable=!1,e.sortable=!1,e.editable=!1,e.resizable=!1,e.draggable=!1}),this.rowdetails&&this.showrowdetailscolumn){var l=new t(n,this);l.visibleindex=d++,l.width=n.groupindentwidth,l.pinned=!0,l.editable=!1,l.filterable=!1,l.draggable=!1,l.groupable=!1,l.resizable=!1,h.add(l),n._haspinned=!0}if("checkbox"==this.selectionmode){var l=new t(n,null);l.visibleindex=d++,l.width=n.groupindentwidth,l.checkboxcolumn=!0,l.editable=!1,l.columntype="checkbox",l.groupable=!1,l.draggable=!1,l.filterable=!1,l.resizable=!1,l.datafield="_checkboxcolumn",h.add(l)}var c=new Array;e.each(this.columns,function(e){if(void 0!=n.columns[e]){var i=new t(n,this);if(i.visibleindex=d++,void 0!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(n._haspinned=!0),null==this.datafield)n.source&&n.source._source&&"array"==n.source._source.datatype&&(s||(n.source._source.datafields?n.source._source.datafields.push({name:e.toString()}):(n.source._source.datafields=new Array,n.source._source.datafields.push({name:e.toString()}))),this.datafield=e.toString(),this.displayfield=e.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else{if(c[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");c[this.datafield]=!0}h.add(i)}}),this.rtl&&h.records.reverse(),this.columns=h},_initializeRows:function(){var t=new e.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=t},_raiseEvent:function(e,t){if(void 0==t&&(t={owner:null}),this._trigger!==!1){var i=this.events[e];this._camelCase||(i=i.toLowerCase()),args=t,args.owner=this;var s=new jQuery.Event(i);s.owner=this,s.args=args;var r=this.host.trigger(s);return t=s.args,r}},wheel:function(e,t){if(t.autoheight&&"visible"!=t.hScrollBar.css("visibility"))return e.returnValue=!0,!0;var i=0;if(e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var s=t._handleDelta(i);return s&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),void 0!=e.stopPropagation&&e.stopPropagation()),s?(s=!1,e.returnValue=s,s):!1}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;0>e?this.scrollDown():this.scrollUp();var i=this.vScrollInstance.value;if(t!=i)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){var t=this.hScrollInstance.value;this.hScrollInstance.setPosition(e>0?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.value-2*this.horizontalscrollbarstep:0:this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.value+2*this.horizontalscrollbarstep:this.hScrollInstance.max);var i=this.hScrollInstance.value;if(t!=i)return!0}return!1},scrollDown:function(){if("hidden"!=this.vScrollBar.css("visibility")){var e=this.vScrollInstance;e.setPosition(e.value+this.rowsheight<=e.max?parseInt(e.value)+this.rowsheight:e.max)}},scrollUp:function(){if("hidden"!=this.vScrollBar.css("visibility")){var e=this.vScrollInstance;e.setPosition(e.value-this.rowsheight>=e.min?parseInt(e.value)-this.rowsheight:e.min)}},_removeHandlers:function(){this.that;this.removeHandler(this.vScrollBar,"valuechanged"),this.removeHandler(this.hScrollBar,"valuechanged"),this.vScrollInstance.valuechanged=null,this.hScrollInstance.valuechanged=null;var t="mousedown.jqxgrid";this.isTouchDevice()&&(t=e.jqx.mobile.getTouchEventName("touchend")),this.removeHandler(this.host,"dblclick.jqxgrid"),this.removeHandler(this.host,t),this.removeHandler(this.content,"mousemove",this._mousemovefunc),this.removeHandler(this.host,"mouseleave.jqxgrid"),this.removeHandler(this.content,"mouseenter"),this.removeHandler(this.content,"mouseleave"),this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"selectstart."+this.element.id),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown.edit"+this.element.id),this.removeHandler(e(document),"keydown.edit"+this.element.id),this.removeHandler(e(document),"keyup.edit"+this.element.id),this._mousemovedocumentfunc&&this.removeHandler(e(document),"mousemove.selection"+this.element.id,this._mousemovedocumentfunc),this.removeHandler(e(document),"mouseup.selection"+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.editable&&this.removeHandler(e(document),"mousedown.gridedit"+this.element.id),this.host.off&&(this.content.off("mousemove"),this.host.off("mousewheel"))},_addHandlers:function(){var t=this.that,i=t.isTouchDevice();i||this.addHandler(this.host,"dragstart."+this.element.id,function(){return!1}),this.editable&&this.addHandler(e(document),"mousedown.gridedit"+this.element.id,function(e){if(t.editable&&t.begincelledit&&t.editcell&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var i=t.host.coord(),s=t.host.width(),r=t.host.height(),a=!1,l=!1,o=!1;if((e.pageY<i.top||e.pageY>i.top+r)&&(a=!0,l=!0),(e.pageX<i.left||e.pageX>i.left+s)&&(a=!0,o=!0),a){if(t.editcell&&t.editcell.editor)switch(t.editcell.columntype){case"datetimeinput":if(t.editcell.editor.jqxDateTimeInput&&t.editcell.editor.jqxDateTimeInput("container")&&"block"==t.editcell.editor.jqxDateTimeInput("container")[0].style.display){var n=t.editcell.editor.jqxDateTimeInput("container").coord().top,h=t.editcell.editor.jqxDateTimeInput("container").coord().top+t.editcell.editor.jqxDateTimeInput("container").height();if(!l||!(e.pageY<n||e.pageY>h))return;a=!0,t.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(t.editcell.editor.jqxComboBox&&t.editcell.editor.jqxComboBox("container")&&"block"==t.editcell.editor.jqxComboBox("container")[0].style.display){var n=t.editcell.editor.jqxComboBox("container").coord().top,h=t.editcell.editor.jqxComboBox("container").coord().top+t.editcell.editor.jqxComboBox("container").height();if(!l||!(e.pageY<n||e.pageY>h))return;a=!0,t.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(t.editcell.editor.jqxDropDownList&&t.editcell.editor.jqxDropDownList("container")&&"block"==t.editcell.editor.jqxDropDownList("container")[0].style.display){var n=t.editcell.editor.jqxDropDownList("container").coord().top,h=t.editcell.editor.jqxDropDownList("container").coord().top+t.editcell.editor.jqxDropDownList("container").height();if(!l||!(e.pageY<n||e.pageY>h))return;a=!0,t.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":for(var d=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],c=function(i){var s=t.editcell.editor.data();if(s[i]&&s[i].instance.container&&"block"==s[i].instance.container[0].style.display){var r=s[i].instance,o=r.container.coord().top,n=r.container.coord().top+r.container.height();return l&&(e.pageY<o||e.pageY>n)?(a=!0,r.close(),!0):!1}},u=0;u<d.length;u++){var g=c(d[u]);if(0==g)return}}t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t._oldselectedcell=null}}}),this.vScrollInstance.valuechanged=function(e){t.virtualsizeinfo&&(t._closemenu(),"physical"!=t.scrollmode?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):void 0!=t.currentScrollValue&&Math.abs(t.currentScrollValue-e.currentValue)>=5?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue),t.pageable||t.groupable||!t.dataview.virtualmode||(t.loadondemandupdate&&clearTimeout(t.loadondemandupdate),t.loadondemandupdate=setTimeout(function(){t.loadondemand=!0,t._renderrows(t.virtualsizeinfo)},100)),i&&(t._lastScroll=new Date))},this.hScrollInstance.valuechanged=function(){if(t.virtualsizeinfo){t._closemenu();{var s=function(){t._renderhorizontalscroll(),t._renderrows(t.virtualsizeinfo),t.editcell&&!t.editrow&&t._showcelleditor&&t.editcell.editing&&(t.hScrollInstance.isScrolling()||t._showcelleditor(t.editcell.row,t.getcolumn(t.editcell.column),t.editcell.element,t.editcell.init))};void 0==t._browser?t._isIE10():t._browser}navigator&&-1!=navigator.userAgent.indexOf("Safari")?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){s()},1)):e.jqx.browser.mozilla||e.jqx.browser.msie?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){s()},.01)):s(),i&&(t._lastScroll=new Date)}},this._mousewheelfunc=this._mousewheelfunc||function(e){return!t.editcell&&t.enablemousewheel?(t.wheel(e,t),!1):void 0},this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var s="mousedown.jqxgrid";i&&(s=e.jqx.mobile.getTouchEventName("touchend")),this.addHandler(this.host,s,function(i){if(t.isTouchDevice()){if(t._newScroll=new Date,t._newScroll-t._lastScroll<500)return!1;if(e(i.target).ischildof(t.vScrollBar))return!1;if(e(i.target).ischildof(t.hScrollBar))return!1}t._mousedown=new Date;var s=t._handlemousedown(i,t);return t.isNestedGrid&&(t.resizablecolumn||t.columnsreorder||i.stopPropagation()),t._lastmousedown=new Date,s}),i||(this.addHandler(this.host,"dblclick.jqxgrid",function(i){if(t.editable&&t.begincelledit&&"dblclick"==t.editmode)t._handledblclick(i,t);else if(e.jqx.browser.msie&&e.jqx.browser.version<9){t._handlemousedown(i,t)}return t.mousecaptured=!1,t._lastmousedown=new Date,!0}),this._mousemovefunc=function(e){return t._handlemousemove?t._handlemousemove(e,t):void 0},this.addHandler(this.content,"mousemove",this._mousemovefunc),t._handlemousemoveselection&&(this._mousemovedocumentfunc=function(e){return t._handlemousemoveselection?t._handlemousemoveselection(e,t):void 0},this.addHandler(e(document),"mousemove.selection"+this.element.id,this._mousemovedocumentfunc)),this.addHandler(e(document),"mouseup.selection"+this.element.id,function(e){t._handlemouseupselection&&t._handlemouseupselection(e,t)}));try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var r=null;if(window.parent&&document.referrer&&(r=document.referrer),r&&-1!=r.indexOf(document.location.host)){var a=function(e){t._handlemouseupselection&&t._handlemouseupselection(e,t)};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",a,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",a)}}}catch(l){}this.focused=!1,i||(this.addHandler(this.content,"mouseenter",function(){t.focused=!0,t.wrapper&&(t.wrapper.attr("tabindex",1),t.content.attr("tabindex",2)),t._overlayElement&&(t._overlayElement[0].style.visibility=t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()?"visible":"hidden")}),this.addHandler(this.content,"mouseleave",function(){t._handlemousemove&&t.enablehover&&t._clearhoverstyle(),t._overlayElement&&(t._overlayElement[0].style.visibility="hidden"),t.focused=!1}),(this.groupable||this.columnsreorder)&&this.addHandler(e(document),"selectstart."+this.element.id,function(){return t.__drag===!0?!1:void 0}),this.addHandler(this.content,"selectstart."+this.element.id,function(i){return t.enablebrowserselection?!0:t.showfilterrow&&e(i.target).ischildof(t.filterrow)?!0:t.editcell?void 0:!1}),this.addHandler(e(document),"keyup.edit"+this.element.id,function(){t._keydown=!1}),this.addHandler(e(document),"keydown.edit"+this.element.id,function(i){t._keydown=!0&&!t.editcell;var s=i.charCode?i.charCode:i.keyCode?i.keyCode:0;if(t.handlekeyboardnavigation){var r=t.handlekeyboardnavigation(i);if(1==r)return!1}if(t.editable&&t.editcell&&(13==s||27==s)&&t._handleeditkeydown&&(a=t._handleeditkeydown(i,t)),27==s&&(t.mousecaptured=!1,"visible"==t.selectionarea.css("visibility")&&t.selectionarea.css("visibility","hidden")),e.jqx.browser.msie&&e.jqx.browser.version<8&&t.focused&&!t.isNestedGrid){if(13==s&&0==a)return a;var a=!0,s=i.charCode?i.charCode:i.keyCode?i.keyCode:0;if(!t.editcell&&t.editable&&"programmatic"!=t.editmode&&t._handleeditkeydown&&(a=t._handleeditkeydown(i,t)),a&&t.keyboardnavigation&&t._handlekeydown)return a=t._handlekeydown(i,t),a||(i.preventDefault&&i.preventDefault(),void 0!=i.stopPropagation&&i.stopPropagation()),a}return!0}),this.addHandler(this.host,"keydown.edit"+this.element.id,function(i){var s=!0;if(t.handlekeyboardnavigation){var r=t.handlekeyboardnavigation(i);if(1==r)return!1}return t.editable&&"programmatic"!=t.editmode&&t._handleeditkeydown&&(s=t._handleeditkeydown(i,t)),e.jqx.browser.msie&&e.jqx.browser.version<8?t.isNestedGrid&&s&&t.keyboardnavigation&&t._handlekeydown&&(s=t._handlekeydown(i,t),i.stopPropagation()):s&&t.keyboardnavigation&&t._handlekeydown&&(s=t._handlekeydown(i,t),t.isNestedGrid&&i.stopPropagation()),s||(i.preventDefault&&i.preventDefault(),void 0!=i.stopPropagation&&i.stopPropagation()),s}))},_hittestrow:function(t,i){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){void 0==t&&(t=0);var s=this.vScrollInstance,r=this.hScrollInstance,a=s.value;"visible"!=this.vScrollBar.css("visibility")&&(a=0);var l=r.value;"visible"!=this.hScrollBar.css("visibility")&&(l=0),"deferred"==this.scrollmode&&null!=this._newmax&&a>this._newmax&&(a=this._newmax);{var o=parseInt(a)+i;parseInt(l)+t}if(null!=this.visiblerows&&0!=this.visiblerows.length){var n=!1,h=this._findvisiblerow(o,this.visiblerows);if(h>=0){var d=this.visiblerows[h],c=this.rowdetails&&d.rowdetails,u=!d.rowdetailshidden;if(c){var g=this.visiblerows[h-1];if(g==d&&(d=g,h--),u){var p=e(this.hittestinfo[h].visualrow).position().top+parseInt(this.table.css("top")),v=e(this.hittestinfo[h].visualrow).height();i>=p&&p+v>=i||(h++,d=this.visiblerows[h],n=!0)}}}return{index:h,row:d,details:n}}}},getcellatposition:function(t,i){var s=this.that,r=this.showheader?this.columnsheader.height()+2:0,a=this._groupsheader()?this.groupsheader.height():0,l=this.showtoolbar?this.toolbarheight:0;a+=l;var o=this.host.coord();this.hasTransform&&(o=e.jqx.utilities.getOffset(this.host));var n=t-o.left,h=i-r-o.top-a,d=this._hittestrow(n,h),c=d.row,u=d.index,g=this.table[0].rows[u];if(this.dataview&&0==this.dataview.records.length){for(var p=this.table[0].rows,v=0,m=0;m<p.length;m++){if(h>=v&&h<v+this.rowsheight){g=p[m];break}v+=this.rowsheight}c={boundindex:m}}if(null==g)return!0;for(var f=this.hScrollInstance,w=f.value,b=0,m=(this.groupable?this.groups.length:0,0);m<g.cells.length;m++){var x=parseInt(e(this.columnsrow[0].cells[m]).css("left")),t=x-w;s.columns.records[m].pinned&&(t=x);var _=t+e(this.columnsrow[0].cells[m]).width();if(_>=n&&n>=t){b=m;break}}if(null!=c){var y=this._getcolumnat(b);return{row:this.getboundindex(c),column:y.datafield,value:this.getcellvalue(this.getboundindex(c),y.datafield)}}return null},_handlemousedown:function(t,i){if(null==t.target)return!0;if(i.disabled)return!0;if(e(t.target).ischildof(this.columnsheader))return!0;var s;t.which?s=3==t.which:t.button&&(s=2==t.button);var r;if(t.which?r=2==t.which:t.button&&(r=1==t.button),r)return!0;if(this.showstatusbar){if(e(t.target).ischildof(this.statusbar))return!0;if(t.target==this.statusbar[0])return!0}if(this.showtoolbar){if(e(t.target).ischildof(this.toolbar))return!0;if(t.target==this.toolbar[0])return!0}if(this.pageable){if(e(t.target).ischildof(this.pager))return!0;if(t.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&e(t.target).ischildof(this.pager))return!0;var a=this.showheader?this.columnsheader.height()+2:0,l=this._groupsheader()?this.groupsheader.height():0,o=this.showtoolbar?this.toolbarheight:0;l+=o;var n=this.host.coord();if(this.hasTransform){n=e.jqx.utilities.getOffset(this.host);var h=this._getBodyOffset();n.left-=h.left,n.top-=h.top}var d=parseInt(t.pageX),c=parseInt(t.pageY);if(this.isTouchDevice()){var u=i.getTouches(t),g=u[0];d=parseInt(g.pageX),c=parseInt(g.pageY),1==i.touchmode&&(d=parseInt(g._pageX),c=parseInt(g._pageY))}var p=d-n.left,v=c-a-n.top-l;if(this.pageable&&!this.autoheight&&this.gotopage){var m=this.pager.coord().top-n.top-l-a;if(v>m)return}var f=this._hittestrow(p,v);if(f&&!f.details){var w=f.row,b=f.index,x=t.target.className,_=this.table[0].rows[b];if(null==_)return i.editable&&i.begincelledit&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!0;i.mousecaptured=!0,i.mousecaptureposition={left:t.pageX,top:t.pageY-l,clickedrow:_};var y=this.hScrollInstance,q=y.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(q=y.max-y.value);var j=-1,S=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(q-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(q=-parseInt(this.content.css("left"))));for(var z=0;z<_.cells.length;z++){var k=parseInt(e(this.columnsrow[0].cells[z]).css("left")),d=k-q;i.columns.records[z].pinned&&!i.rtl&&(d=k);var I=this._getcolumnat(z);if(null==I||!I.hidden){var T=d+e(this.columnsrow[0].cells[z]).width();if(T>=p&&p>=d){j=z,i.mousecaptureposition.clickedcell=z;break}}}if(this.rtl&&this._haspinned)for(var z=_.cells.length-1;z>=0&&i.columns.records[z].pinned;z--){var k=e(this.columnsrow[0].cells[z]).coord().left-this.host.coord().left,d=k,I=this._getcolumnat(z);if(null==I||!I.hidden){var T=d+e(this.columnsrow[0].cells[z]).width();if(T>=p&&p>=d){j=z,i.mousecaptureposition.clickedcell=z;break}}}if(null!=w&&j>=0){this._raiseEvent(1,{rowindex:this.getboundindex(w),visibleindex:w.visibleindex,group:w.group,rightclick:s,originalEvent:t});var I=this._getcolumnat(j),B=this.getcellvalue(this.getboundindex(w),I.datafield);if(this.editable&&this.editcell&&I.datafield==this.editcell.column&&this.getboundindex(w)==this.editcell.row&&(this.mousecaptured=!1),this._raiseEvent(8,{rowindex:this.getboundindex(w),column:I?I.getcolumnproperties():null,datafield:I?I.datafield:null,columnindex:j,value:B,rightclick:s,originalEvent:t}),this.isTouchDevice())if("checkbox"==I.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(b,I.datafield),!0}else if("button"==I.columntype&&this._overlayElement)return I.buttonclick&&I.buttonclick(_.cells[j].buttonrow,t),!0;var C=!1;if(null!=this._lastmousedown&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(w)&&(this._raiseEvent(22,{rowindex:this.getboundindex(w),visibleindex:w.visibleindex,group:w.group,rightclick:s,originalEvent:t}),this._clickedcolumn==I.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(w),column:I?I.getcolumnproperties():null,datafield:I?I.datafield:null,columnindex:j,value:B,rightclick:s,originalEvent:t}),C=!0,this._clickedrowindex=-1,this._clickedcolumn=null,t.isPropagationStopped&&t.isPropagationStopped()))return!1;if(s)return!0;C||(this._clickedrowindex=this.getboundindex(w),this._clickedcolumn=I.datafield);var P=e.jqx.utilities.getBrowser();if("msie"==P.browser&&parseInt(P.version)<=7&&(0==j&&this.rowdetails&&(x="jqx-grid-group-collapse"),S>0&&S>=j&&(x="jqx-grid-group-collapse")),-1!=x.indexOf("jqx-grid-group-expand")||-1!=x.indexOf("jqx-grid-group-collapse"))this.rtl?S>0&&j>_.cells.length-S-1&&this._togglegroupstate?this._togglegroupstate(w.bounddata,!0):j==_.cells.length-1-S&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(w.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):S>0&&S>j&&this._togglegroupstate?this._togglegroupstate(w.bounddata,!0):j==S&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(w.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=w.boundindex){var H=this.selectedrowindexes.slice(0),M=!1;if("none"!=i.selectionmode&&"checkbox"!=i.selectionmode&&this._selectrowwithmouse){("multiplecellsadvanced"==i.selectionmode||"multiplecellsextended"==i.selectionmode||"multiplerowsextended"==i.selectionmode||"multiplerowsadvanced"==i.selectionmode)&&(t.ctrlKey||t.shiftKey||(i.selectedrowindexes=new Array,i.selectedcells=new Array));var D=!1,A=this.getboundindex(w);(i._oldselectedrow===A||"none"===i.selectionmode)&&(D=!0),-1==i.selectionmode.indexOf("cell")?("singlerow"!=i.selectionmode||i.selectedrowindex!=A&&"singlerow"==i.selectionmode)&&(this._applyrowselection(A,!0,!1,null,I.datafield),this._selectrowwithmouse(i,f,H,I.datafield,t.ctrlKey,t.shiftKey)):null!=I.datafield&&(this._selectrowwithmouse(i,f,H,I.datafield,t.ctrlKey,t.shiftKey),t.shiftKey||this._applycellselection(A,I.datafield,!0,!1)),i._oldselectedcell&&i._oldselectedcell.datafield==i.selectedcell.datafield&&i._oldselectedcell.rowindex==i.selectedcell.rowindex&&(M=!0),i._oldselectedcell=i.selectedcell,i._oldselectedrow=A}if(i.autosavestate&&i.savestate&&i.savestate(),i.editable&&i.begincelledit){if(t.isPropagationStopped&&t.isPropagationStopped())return!1;if("selectedrow"==i.editmode){if(D&&!i.editcell){if("checkbox"!==I.columntype){i.beginrowedit(this.getboundindex(w))}}else if(i.editcell&&!D&&"none"!=i.selectionmode){i.endrowedit(i.editcell.row)}}else{var E="click"==i.editmode||M&&"selectedcell"==i.editmode;if(-1==i.selectionmode.indexOf("cell")&&"dblclick"!=i.editmode&&(E=!0),E&&void 0!=w.boundindex&&I.editable){{i.begincelledit(this.getboundindex(w),I.datafield,I.defaulteditorvalue)}-1!=i.selectionmode.indexOf("cell")&&i._applycellselection(A,I.datafield,!1,!1)}-1!=i.selectionmode.indexOf("cell")&&"selectedcell"==i.editmode&&!M&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0)}return!0}}}return!0}},_columnPropertyChanged:function(){},_rowPropertyChanged:function(){},_serializeObject:function(t){if(null==t)return"";var i="";return e.each(t,function(e){var t=this;e>0&&(i+=", "),i+="[";var s=0;for(obj in t)s>0&&(i+=", "),i+="{"+obj+":"+t[obj]+"}",s++;i+="]"}),i},propertyChangedHandler:function(t,i,s,r){if(void 0!=this.isInitialized&&0!=this.isInitialized)switch(i=i.toLowerCase()){case"enablebrowserselection":t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect"));break;case"columnsheight":(25!=t.columnsheight||t.columngroups)&&t._measureElement("column"),t._render(!0,!0,!0,!1,!1);break;case"rowsheight":r!=s&&(25!=t.rowsheight&&t._measureElement("cell"),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refresh());break;case"scrollMode":t.vScrollInstance.thumbStep=t.rowsheight;break;case"showdefaultloadelement":t._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":t._initmenu();break;case"touchmode":s!=r&&(t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:r}),t.hScrollBar.jqxScrollBar({touchMode:r}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._addHandlers());break;case"autoshowcolumnsmenubutton":s!=r&&t._rendercolumnheaders();break;case"rendergridrows":s!=r&&t.updatebounddata();break;case"editmode":s!=r&&(t._removeHandlers(),t._addHandlers());break;case"source":t.updatebounddata(),t.virtualmode&&!t._loading&&(t.loadondemand=!0,t._renderrows(t.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":t._initgroupsheader&&t._initgroupsheader();break;case"showgroupsheader":s!=r&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader(),t._renderrows(t.virtualsizeinfo));break;case"theme":r!=s&&(t.pager&&(t.pager.removeClass(),t.pager.addClass(t.toTP("jqx-grid-pager")),t.pager.addClass(t.toTP("jqx-widget-header")),t.pageable&&t._updatepagertheme&&t._updatepagertheme()),t.groupsheader&&(t.groupsheader.removeClass(),t.groupsheader.addClass(t.toTP("jqx-grid-groups-header")),t.groupsheader.addClass(t.toTP("jqx-widget-header"))),t.toolbar.removeClass(),t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar.removeClass(),t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-content")),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.hScrollBar.jqxScrollBar({theme:t.theme}),t.host.removeClass(),t.host.addClass(t.toTP("jqx-grid")),t.host.addClass(t.toTP("jqx-reset")),t.host.addClass(t.toTP("jqx-rc-all")),t.host.addClass(t.toTP("jqx-widget")),t.host.addClass(t.toTP("jqx-widget-content")),t.bottomRight.removeClass(),t.bottomRight.addClass(t.toTP("jqx-grid-bottomright")),t.bottomRight.addClass(t.toTP("jqx-scrollbar-state-normal")),t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-header")),t.render());break;case"showtoolbar":case"toolbarheight":s!=r&&(t._arrange(),t.refresh());break;case"showstatusbar":s!=r&&(t.statusbar&&(r?t.statusbar.show():t.statusbar.hide()),t._arrange(),t.refresh());break;case"statusbarheight":s!=r&&(t._arrange(),t.refresh());break;case"filterable":case"showfilterrow":s!=r&&t.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":s!=r&&t.rendergridcontent();break;case"showrowdetailscolumn":s!=r&&t.render();break;case"scrollbarsize":s!=r&&t._arrange();break;case"width":case"height":s!=r&&(t._updatesize(!0,!0),t._resizeWindow(),t.virtualmode&&!t._loading&&t.vScrollInstance.setPosition(0));break;case"altrows":case"altstart":case"altstep":s!=r&&t._renderrows(t.virtualsizeinfo);break;case"groupsheaderheight":s!=r&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader());break;case"pagerheight":s!=r&&t._initpager();break;case"selectedrowindex":t.selectrow(r);break;case"selectionmode":s!=r&&("none"==r&&(t.selectedrowindexes=new Array,t.selectedcells=new Array,t.selectedrowindex=-1),t._renderrows(t.virtualsizeinfo),"checkbox"==r&&t._render(!1,!1,!0,!1,!1));break;case"showheader":r?t.columnsheader.css("display","block"):t.columnsheader.css("display","none");break;case"virtualmode":s!=r&&(t.dataview.virtualmode=t.virtualmode,t.dataview.refresh(!1),t._render(!1,!1,!1));break;case"columnsmenu":s!=r&&t.render();break;case"columngroups":t._render(!0,!0,!0,!1,!1);break;case"columns":if(t._serializeObject(t._cachedcolumns)!==t._serializeObject(r)){var a=!1;t.filterable&&s&&s.records&&e.each(s.records,function(){this.filter&&(a=!0),t.dataview.removefilter(this.displayfield,this.filter)}),t._columns=null,t._filterrowcache=[],t.render(),a&&t.applyfilters(),t._cachedcolumns=t.columns,t.removesort&&t.removesort()}else t._initializeColumns();break;case"autoheight":s!=r&&t._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":s!=r&&t._initpager&&(t.pagershowrowscombo&&(t.pagershowrowscombo.jqxDropDownList("destroy"),t.pagershowrowscombo=null),t.pagerrightbutton&&(t.removeHandler(t.pagerrightbutton,"mousedown"),t.removeHandler(t.pagerrightbutton,"mouseup"),t.removeHandler(t.pagerrightbutton,"click"),t.pagerrightbutton.jqxButton("destroy"),t.pagerrightbutton=null),t.pagerleftbutton&&(t.removeHandler(t.pagerleftbutton,"mousedown"),t.removeHandler(t.pagerleftbutton,"mouseup"),t.removeHandler(t.pagerleftbutton,"click"),t.pagerleftbutton.jqxButton("destroy"),t.removeHandler(e(document),"mouseup.pagerbuttons"+t.element.id),t.pagerleftbutton=null),t.pagerdiv.remove(),t._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(s!=r){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(!t.host.jqxDropDownList||!t.host.jqxListBox)return void t._testmodules();if(t._initpager){if("pageable"!=i&&"pagermode"!=i&&"string"==typeof r){var l="The expected value type is: Int.";if("pagesize"!=i)var l="The expected value type is: Array of Int values.";
throw new Error("Invalid Value for: "+i+". "+l)}t.dataview.pageable=t.pageable,t.dataview.pagenum=0,t.dataview.pagesize=t._getpagesize(),t.virtualmode&&t.updatebounddata(),t.dataview.refresh(!0),t._initpager(),"pagesizeoptions"==i&&null!=r&&r.length>0&&(t.pagesize=parseInt(r[0]),t.dataview.pagesize=parseInt(r[0]),t.prerenderrequired=!0,t._requiresupdate=!0,t.dataview.pagenum=-1,t.gotopage(0))}t._render(!1,!1,!1)}break;case"groups":t._serializeObject(s)!==t._serializeObject(r)&&(t.dataview.groups=r,t._refreshdataview(),t._render(!0,!0,!0,!1));break;case"groupable":s!=r&&(t.dataview.groupable=t.groupable,t.dataview.pagenum=0,t.dataview.refresh(!1),t._render(!1,!1,!0));break;case"renderstatusbar":null!=r&&t.renderstatusbar(t.statusbar);break;case"rendertoolbar":null!=r&&t.rendertoolbar(t.toolbar);break;case"disabled":r?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),e.jqx.aria(t,"aria-disabled",t.disabled),t.pageable&&(t.pagerrightbutton&&(t.pagerrightbutton.jqxButton({disabled:r}),t.pagerleftbutton.jqxButton({disabled:r}),t.pagershowrowscombo.jqxDropDownList({disabled:r}),t.pagergotoinput.attr("disabled",r)),t.pagerfirstbutton&&(t.pagerfirstbutton.jqxButton({disabled:r}),t.pagerlastbutton.jqxButton({disabled:r}))),t.vScrollBar.jqxScrollBar({disabled:r}),t.hScrollBar.jqxScrollBar({disabled:r}),t.filterable&&t.showfilterrow&&t._updatefilterrowui(!0)}}}),e.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return void 0==this.records[e]?!0:!1},this.initialize=function(e){1>e&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null==e?!1:(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return null==e||void 0==e?!1:null==t?!1:e>=0?e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t):!1},this.remove=function(e){if(null==e||void 0==e)return!1;var t=this.records.indexOf(e);return-1!=t?(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0):!1},this.removeAt=function(e){if(null==e||void 0==e)return!1;if(0>e)return!1;if(e<this.records.length){var t=this.records[e];return this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0}return!1},this},e.jqx.dataview=function(){return this.self=this,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,this.that=this,this.destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,void 0==e&&(e=!0),this.refresh(e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(t,i){var s=t._source?!0:!1,r=null;s?(r=t,t=t._source):r=new e.jqx.dataAdapter(t,{autoBind:!1});var a=function(e){r.recordids=[],r.records=new Array,r.cachedrecords=new Array,r.originaldata=new Array,r._options.virtualmode=e.virtualmode,r._options.totalrecords=e.totalrecords,r._options.originaldata=e.originaldata,r._options.recordids=e.recordids,r._options.cachedrecords=new Array,r._options.pagenum=e.pagenum,r._options.pageable=e.pageable,void 0!=t.type&&(r._options.type=t.type),void 0!=t.formatdata&&(r._options.formatData=t.formatdata),void 0!=t.contenttype&&(r._options.contentType=t.contenttype),void 0!=t.async&&(r._options.async=t.async),void 0!=t.updaterow&&(r._options.updaterow=t.updaterow),void 0!=t.addrow&&(r._options.addrow=t.addrow),void 0!=t.deleterow&&(r._options.deleterow=t.deleterow),0==e.pagesize&&(e.pagesize=10),r._options.pagesize=e.pagesize},l=function(i){if(i.totalrecords=r.totalrecords,i.virtualmode){var s={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize};if(void 0!=t.recordstartindex&&(s.startindex=parseInt(t.recordstartindex)),void 0!=t.recordendindex?s.endindex=parseInt(t.recordendindex):i.grid.pageable||(s.endindex=s.startindex+100,i.grid.autoheight&&(s.endindex=s.startindex+i.totalrecords)),t.recordendindex||(i.grid.pageable?s={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize}:(s.endindex=s.startindex+100,i.grid.autoheight&&(s.endindex=s.startindex+i.totalrecords))),s.data=r.records,i.grid.rendergridrows&&i.totalrecords>0){var a=0;if(t.records=i.grid.rendergridrows(s),t.records.length&&(a=t.records.length),t.records&&!t.records[s.startindex]){var l=new Array,o=s.startindex;e.each(t.records,function(){l[o]=this,o++,a++}),t.records=l}if(0==a&&t.records&&e.each(t.records,function(){a++}),a>0&&a<s.endindex-s.startindex&&!i.grid.groupable)for(var n=t.records[0],h=0;h<s.endindex-s.startindex-a;h++){var d={};for(obj in n)d[obj]="";t.records.push&&t.records.push(d)}}t.records&&0!=i.totalrecords||(t.records=new Array),i.originaldata=t.records,i.records=t.records,i.cachedrecords=t.records}else i.originaldata=r.originaldata,i.records=r.records,i.recordids=r.recordids,i.cachedrecords=r.cachedrecords};a(this),this.source=t,void 0!==i&&(uniqueId=i);var o=this.that;switch(t.datatype){case"local":case"array":default:if(null==t.localdata&&(t.localdata=[]),null!=t.localdata){r.unbindBindingUpdate(o.grid.element.id),r.dataBind();var n=function(i){if(void 0!=i&&""!=i){var s=r._changedrecords[0];if(s){var a=new Array;e.each(r._changedrecords,function(e){var t=this.index,s=this.record;switch(o.grid._updateFromAdapter=!0,i){case"update":var l=o.grid.getrowid(t);return e==r._changedrecords.length-1?o.grid.updaterow(l,s):o.grid.updaterow(l,s,!1),void(o.grid._updateFromAdapter=!1);case"add":return o.grid.addrow(null,s),void(o.grid._updateFromAdapter=!1);case"remove":var l=o.grid.getrowid(t);return void a.push(l)}}),a.length>0&&(o.grid.deleterow(a,!1),o.grid._updateFromAdapter=!1)}if("update"==i)return}var n=o.totalrecords;l(o,i),"updateData"==i?(o.refresh(),o.grid._updateGridData()):(t.recordstartindex&&this.virtualmode?o.updateview(t.recordstartindex,t.recordstartindex+o.pagesize):o.refresh(),o.update(n!=o.totalrecords))};n(),r.bindBindingUpdate(o.grid.element.id,n)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=t.localdata){r.unbindBindingUpdate(o.grid.element.id),r.dataBind();var n=function(e){var i=o.totalrecords;l(o),"updateData"==e?(o.refresh(),o.grid._updateGridData()):(t.recordstartindex?o.updateview(t.recordstartindex,t.recordstartindex+o.pagesize):o.refresh(),o.update(i!=o.totalrecords))};return n(),void r.bindBindingUpdate(o.grid.element.id,n)}for(var h=0,d={},c=0;c<this.filters.length;c++){var u=this.filters[c].datafield,g=this.filters[c].filter,p=g.getfilters();d[u+"operator"]=g.operator;for(var v=0;v<p.length;v++){p[v].datafield=u;var m=p[v].value;if("datefilter"==p[v].type)if(p[v].value&&p[v].value.toLocaleString){var f=this.grid.getcolumn(p[v].datafield);if(f.cellsformat){var w=this.grid.source.formatDate(p[v].value,f.cellsformat,this.grid.gridlocalization);d["filtervalue"+h]=w?w:p[v].value.toLocaleString()}else d["filtervalue"+h]=m.toString()}else d["filtervalue"+h]=m.toString();else d["filtervalue"+h]=m.toString();d["filtercondition"+h]=p[v].condition,d["filteroperator"+h]=p[v].operator,d["filterdatafield"+h]=u,h++}}d.filterscount=h,d.groupscount=o.groups.length;for(var c=0;c<o.groups.length;c++)d["group"+c]=o.groups[c];void 0==t.recordstartindex&&(t.recordstartindex=0),(void 0==t.recordendindex||0==t.recordendindex)&&(o.grid.height&&-1==o.grid.height.toString().indexOf("%")?(t.recordendindex=parseInt(o.grid.height)/o.grid.rowsheight,t.recordendindex+=2):t.recordendindex=e(window).height()/o.grid.rowsheight,this.pageable&&(t.recordendindex=this.pagesize)),e.extend(d,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pagesize,recordstartindex:t.recordstartindex,recordendindex:t.recordendindex});var b=r._options.data;r._options.data?e.extend(r._options.data,d):(t.data&&e.extend(d,t.data),r._options.data=d);var n=function(){var i=e.jqx.browser.msie&&e.jqx.browser.version<9,s=function(){var e=o.totalrecords;l(o),t.recordstartindex?o.updateview(t.recordstartindex,t.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords)};if(i)try{s()}catch(r){}else s()};r.unbindDownloadComplete(o.grid.element.id),r.bindDownloadComplete(o.grid.element.id,n),r.dataBind(),r._options.data=b}},this.getid=function(t,i,s){if(e(t,i).length>0)return e(t,i).text();if(t&&t.toString().length>0){var r=e(i).attr(t);if(null!=r&&r.toString().length>0)return r}return s},this.getvaluebytype=function(t,i){var s=t;if("date"==i.type){var r=new Date(t);t=("NaN"==r.toString()||"Invalid Date"==r.toString())&&e.jqx.dataFormat?e.jqx.dataFormat.tryparsedate(t):r,null==t&&(t=s)}else if("float"==i.type){var t=parseFloat(t);isNaN(t)&&(t=s)}else if("int"==i.type){var t=parseInt(t);isNaN(t)&&(t=s)}else"bool"==i.type&&(null!=t&&("false"==t.toLowerCase()?t=!1:"true"==t.toLowerCase()&&(t=!0)),t=1==t?!0:0==t?!1:"");return t},this.setpaging=function(e){void 0!=e.pageSize&&(this.pagesize=e.pageSize),void 0!=e.pageNum&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){for(var i=-1,s=0;s<this.filters.length;s++)if(this.filters[s].datafield==e){i=s;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,i){var s=this.filters&&this.filters.length>0&&!this.virtualmode;if(!s&&void 0!=t&&void 0!=e){t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid);var r=this.recordsbyid["id"+e],a=this.records.indexOf(r);return-1==a?!1:(this.records[a]=t,this.cachedrecords&&(this.cachedrecords[a]=t),(1==i||void 0==i)&&this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:r,Data:t},!0)}if(this.filters&&this.filters.length>0){for(var l=this.cachedrecords,r=null,a=-1,o=0;o<l.length;o++)if(l[o].uid==e){r=l[o],a=o;break}if(r){var n=this.that;for(var h in t)n.cachedrecords[a][h]=t[h];return(1==i||void 0==i)&&this.refresh(),!0}}return!1},this.addrow=function(e,t,i,s){if(void 0!=t){if(e)t.uid=e;else{t.uid=this.getid(this.source.id,t,this.totalrecords);for(var r=this.recordsbyid["id"+t.uid];null!=r;){var a=Math.floor(1e4*Math.random()).toString();t.uid=a,r=this.recordsbyid["id"+a]}}return t[this.source.id]||void 0!=this.source.id&&(t[this.source.id]=t.uid),"last"==i?this.records.push(t):"number"==typeof i&&isFinite(i)?this.records.splice(i,0,t):this.records.splice(0,0,t),this.filters&&this.filters.length>0&&("last"==i?this.cachedrecords.push(t):"number"==typeof i&&isFinite(i)?this.cachedrecords.splice(i,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(1==s||void 0==s)&&this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0}return!1},this.deleterow=function(e,t){if(void 0!=e){var i=this.filters&&this.filters.length>0;if(this.recordsbyid["id"+e]&&!i){var s=this.recordsbyid["id"+e],r=this.records.indexOf(s);return this.changedrecords[e]={Type:"Delete",Data:this.records[r]},this.records.splice(r,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(1==t||void 0==t)&&this.refresh(),!0}if(this.filters&&this.filters.length>0){for(var a=this.cachedrecords,s=null,r=-1,l=0;l<a.length;l++)if(a[l].uid==e){s=a[l],r=l;break}if(s)return this.cachedrecords.splice(r,1),(1==t||void 0==t)&&(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1}return!1},this.reload=function(t,i,s,r,a,l,o){var n=this.that,h=new Array,d=t,c=i,u=s,g=r,p=c.length,v=0,m=0;if(this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={},0==this.totalrecords){Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i};var f=Object.size(d);this.totalrecords=f,e.each(this.records,function(){var t=this,i=0;return e.each(t,function(e){n.columns[i++]=e}),!1})}if(this.virtualmode){if(this.pageable)return void this.updateview();var l=0;if(!this.groupable)return void this.updateview();var o=this.totalrecords}else var l=0,o=this.totalrecords;if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){var w=l;w=this.loadgrouprecords(0,l,o,u,m,g,c,p,h)}else v=this.loadflatrecords(l,o,u,m,g,c,p,h);return p>m&&c.splice(m,p-m),this.totalrows=this.groups.length>0&&this.groupable?w:v,h},this.loadflatrecords=function(t,i,s,r,a,l,o,n){var h=this.that,d=t,c=t;i=Math.min(i,this.totalrecords);for(var u=null!=this.sortdata,g=(this.source.id&&("local"==this.source.datatype||"array"==this.source.datatype||""==this.source.datatype),u?this.sortdata:this.records),p=t;i>p;p++){var v={};u?(v=e.extend({},g[p].value),id=v[h.uniqueId],v.boundindex=g[p].index,void 0==v.uid&&(v.uid=h.getid(h.source.id,v,v.boundindex)),h.recordsbyid["id"+v.uid]=g[p].value,h.loadedrecords[d]=v,v.uniqueid=h.generatekey(),h.bounditems[v.boundindex]=v):(v=e.extend({},g[p]),id=v[h.uniqueId],v.boundindex=d,h.loadedrecords[d]=v,void 0==v.uid&&(v.uid=h.getid(h.source.id,v,d)),h.recordsbyid["id"+v.uid]=g[p],v.uniqueid=h.generatekey(),h.bounditems[this.bounditems.length]=v),(r>=o||id!=l[r][h.uniqueId]||a&&a[id])&&(n[n.length]=r),l[r]=v,r++,v.visibleindex=c,c++,d++}if(h.grid.summaryrows){var m=d;e.each(h.grid.summaryrows,function(){var t=e.extend({},this);t.boundindex=i++,h.loadedrecords[m]=t,t.uniqueid=h.generatekey(),h.bounditems[h.bounditems.length]=t,l[r]=t,r++,t.visibleindex=c,c++,m++})}return c},this.updateview=function(e,t){var i=this.that,s=this.pagesize*this.pagenum,r=0,a=new Array,l=this.filters,o=this.updated,n=a.length;if(this.pageable){if(this.virtualmode)if(this.groupable&&0!=this.groups.length){if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(void 0!=this._cachegrouppages[this.pagenum+"_"+this.pagesize])return this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],void(this.totalrows=this.rows.length);var h=this.pagesize*(1+this.pagenum);return h>this.totalrecords&&(h=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,h,l,r,o,a,n,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,void(this.totalrows=this.rows.length)}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),l,r,o,a,n,[]),this.totalrows=a.length}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){var d=this.pagesize;0==d&&(d=Math.min(100,this.totalrecords));var c=d*this.pagenum;if(0==this.loadedrecords.length&&(c=0),null!=e&&null!=t?this.loadflatrecords(e,t,l,r,o,a,n,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),l,r,o,a,n,[]),this.totalrows=this.loadedrecords.length,this.rows=a,a.length>=d)return}if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)a=this._updategroupsinpage(i,l,s,r,n,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var u=this.pagesize*this.pagenum;u<this.pagesize*(1+this.pagenum);u++){var g=u<this.loadedrecords.length?this.loadedrecords[u]:null;null!=g&&((!this.pagesize||s>=this.pagesize*this.pagenum&&s<=this.pagesize*(this.pagenum+1))&&(a[r]=g,r++),s++)}if((0==a.length||a.length<this.pagesize)&&!this.pageable&&this.virtualmode){r=a.length;for(var p=a.length,u=this.pagesize*this.pagenum;u<this.pagesize*(1+this.pagenum)-p;u++){var g={};g.boundindex=u+p,g.visibleindex=u+p,g.uniqueid=i.generatekey(),g.empty=!0,i.bounditems[u+p]=g,a[r]=g,r++}}this.rows=a},this.generatekey=function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(t){if(!this.suspend){void 0==t&&(t=!0);var i=this.rows.length,s=this.totalrows;if(this.filters.length>0&&!this.virtualmode){var r="",a=this.cachedrecords.length,l=new Array;this.totalrecords=0;var o=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var n=this.filters.length;if(null!=this.source&&void 0!=this.source.filter&&void 0!=this.source.localdata)l=this.source.filter(this.filters,o,a),void 0==l&&(l=new Array),this.records=l;else if(null==this.source.filter||void 0==this.source.filter){for(var h=0;a>h;h++){for(var d=o[h],c=void 0,u=0;n>u;u++){var r=this.filters[u].filter,g=d[this.filters[u].datafield],p=r.evaluate(g);c=void 0==c?p:"or"==r.operator?c||p:c&&p}c?(l[l.length]=e.extend({dataindex:h},d),this._dataIndexToBoundIndex[h]={boundindex:l.length-1}):this._dataIndexToBoundIndex[h]=null}this.records=l}if(this.sortdata){var v=this.sortfield;if(this.sortcache[v]){this.sortdata=null;var m=this.sortcache[v].direction;return this.sortcache[v]=null,void this.sortby(this.sortfield,m)}}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;var o=this.cachedrecords;if(this.records=o,this.sortdata){var v=this.sortfield;if(this.sortcache[v]){this.sortdata=null;var m=this.sortcache[v].direction;return this.sortcache[v]=null,void this.sortby(this.sortfield,m)}}}var f=this.reload(this.records,this.rows,this.filter,this.updated,t);this.updated=null,null!=this.rowschangecallback&&(s!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),i!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:i,current:rows.length}}),(f.length>0||i!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:i,current:rows.length,diff:f}}))}},this}}(jQuery);