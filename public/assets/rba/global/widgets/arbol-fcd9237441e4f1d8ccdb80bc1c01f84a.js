!function(e){e.jqx.jqxWidget("jqxPanel","",{}),e.extend(e.jqx._jqxPanel.prototype,{defineInstance:function(){var t={width:null,height:null,disabled:!1,scrollBarSize:e.jqx.utilities.scrollBarSize,sizeMode:"fixed",autoUpdate:!1,autoUpdateInterval:500,touchMode:"auto",horizontalScrollBarMax:null,verticalScrollBarMax:null,touchModeStyle:"auto",rtl:!1,events:["layout"]};return e.extend(!0,this,t),t},createInstance:function(){this.render()},render:function(){15!=e.jqx.utilities.scrollBarSize&&(this.scrollBarSize=e.jqx.utilities.scrollBarSize),this.host.addClass(this.toThemeProperty("jqx-panel")),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-widget-content")),this.host.addClass(this.toThemeProperty("jqx-rc-all"));var t=e("<div id='panelWrapper' style='overflow: hidden; width: 100%; height: 100%; background-color: transparent; -webkit-appearance: none; outline: none; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='panelContent' style='-webkit-appearance: none; -moz-box-sizing: border-box; box-sizing: border-box; width: 100%; height: 100%; outline: none; border: none; padding: 0px; position: absolute; margin: 0px; align:left; valign:top; left: 0px; top: 0px;'/><div id='verticalScrollBar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='horizontalScrollBar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'/></div>");if(!this.host.jqxButton)throw new Error("jqxPanel: Missing reference to jqxbuttons.js.");if(!this.host.jqxScrollBar)throw new Error("jqxPanel: Missing reference to jqxscrollbar.js.");var i=this.host.children();this._rtl=!1,i.length>0&&"rtl"==i.css("direction")&&(this.rtl=!0,this._rtl=!0),this.host.wrapInner(t);var r=this.host.find("#verticalScrollBar");r[0].id=this.element.id+"verticalScrollBar",this.vScrollBar=r.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchMode,theme:this.theme});var s=this.host.find("#horizontalScrollBar");s[0].id=this.element.id+"horizontalScrollBar",this.hScrollBar=s.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchMode,theme:this.theme}),this.content=this.host.find("#panelContent"),this.wrapper=this.host.find("#panelWrapper"),this.content.addClass(this.toThemeProperty("jqx-widget-content")),this.wrapper[0].id=this.wrapper[0].id+this.element.id,this.content[0].id=this.content[0].id+this.element.id,this.bottomRight=this.host.find("#bottomRight").addClass(this.toThemeProperty("jqx-panel-bottomright")).addClass(this.toThemeProperty("jqx-scrollbar-state-normal")),this.bottomRight[0].id="bottomRight"+this.element.id,this.vScrollBar.css("visibility","inherit"),this.hScrollBar.css("visibility","inherit"),this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance;var a=this;this.propertyChangeMap.disabled=function(){a.vScrollBar.jqxScrollBar({disabled:a.disabled}),a.hScrollBar.jqxScrollBar({disabled:a.disabled})},this.vScrollBar.jqxScrollBar({disabled:this.disabled}),this.hScrollBar.jqxScrollBar({disabled:this.disabled}),this._addHandlers(),null==this.width&&(this.width=this.content.width()),null==this.height&&(this.height=this.content.height()),this._arrange(),this.contentWidth=a.content[0].scrollWidth,this.contentHeight=a.content[0].scrollHeight,this.autoUpdate&&a._autoUpdate(),this.propertyChangeMap.autoUpdate=function(){a.autoUpdate?a._autoUpdate():(clearInterval(a.autoUpdateId),a.autoUpdateId=null)},this.addHandler(e(window),"unload",function(){null!=a.autoUpdateId&&(clearInterval(a.autoUpdateId),a.autoUpdateId=null,a.destroy())}),this._updateTouchScrolling(),this._render()},hiddenParent:function(){return e.jqx.isHidden(this.host)},_updateTouchScrolling:function(){var t=this;1==this.touchMode&&e.jqx.mobile.setMobileSimulator(this.element);var i=this.isTouchDevice();i&&(e.jqx.mobile.touchScroll(this.element,t.vScrollInstance.max,function(e,i){if("hidden"!=t.vScrollBar.css("visibility")){var r=t.vScrollInstance.value;t.vScrollInstance.setPosition(r+i)}if("hidden"!=t.hScrollBar.css("visibility")){var r=t.hScrollInstance.value;t.hScrollInstance.setPosition(r+e)}},this.element.id,this.hScrollBar,this.vScrollBar),this._arrange()),this.vScrollBar.jqxScrollBar({touchMode:this.touchMode}),this.hScrollBar.jqxScrollBar({touchMode:this.touchMode})},isTouchDevice:function(){var t=e.jqx.mobile.isTouchDevice();return 1==this.touchMode?t=!0:0==this.touchMode&&(t=!1),t&&0!=this.touchModeStyle&&(this.scrollBarSize=e.jqx.utilities.touchScrollBarSize),t},append:function(e){null!=e&&(this.content.append(e),this._arrange())},setcontent:function(e){this.content[0].innerHTML=e,this._arrange();var t=this;setTimeout(function(){t._arrange()},100)},prepend:function(e){null!=e&&(this.content.prepend(e),this._arrange())},clearcontent:function(){this.content.text(""),this.content.children().remove(),this._arrange()},remove:function(t){null!=t&&(e(t).remove(),this._arrange())},_autoUpdate:function(){var e=this;this.autoUpdateId=setInterval(function(){var t=e.content[0].scrollWidth,i=e.content[0].scrollHeight,r=!1;e.contentWidth!=t&&(e.contentWidth=t,r=!0),e.contentHeight!=i&&(e.contentHeight=i,r=!0),r&&e._arrange()},this.autoUpdateInterval)},_addHandlers:function(){var t=this;this.addHandler(this.vScrollBar,"valueChanged",function(){t._render(t)}),this.addHandler(this.hScrollBar,"valueChanged",function(){t._render(t)}),this.addHandler(this.host,"mousewheel",function(e){t.wheel(e,t)}),this.addHandler(this.wrapper,"scroll",function(){0!=t.wrapper[0].scrollTop&&(t.wrapper[0].scrollTop=0),0!=t.wrapper[0].scrollLeft&&(t.wrapper[0].scrollLeft=0)}),this.addHandler(this.host,"mouseleave",function(){t.focused=!1}),this.addHandler(this.host,"focus",function(){t.focused=!0}),this.addHandler(this.host,"blur",function(){t.focused=!1}),this.addHandler(this.host,"mouseenter",function(){t.focused=!0}),e.jqx.utilities.resize(this.host,function(){e.jqx.isHidden(t.host)||t._arrange(!1)})},resize:function(e,t){this.width=e,this.height=t,this._arrange(!1)},_removeHandlers:function(){this.removeHandler(this.vScrollBar,"valueChanged"),this.removeHandler(this.hScrollBar,"valueChanged"),this.removeHandler(this.host,"mousewheel"),this.removeHandler(this.host,"mouseleave"),this.removeHandler(this.host,"focus"),this.removeHandler(this.host,"blur"),this.removeHandler(this.host,"mouseenter"),this.removeHandler(this.wrapper,"scroll"),this.removeHandler(e(window),"resize."+this.element.id)},wheel:function(t,i){var r=0;if(t.originalEvent&&e.jqx.browser.msie&&t.originalEvent.wheelDelta&&(r=t.originalEvent.wheelDelta/120),t||(t=window.event),t.wheelDelta?r=t.wheelDelta/120:t.detail&&(r=-t.detail/3),r){var s=i._handleDelta(r);return s||t.preventDefault&&t.preventDefault(),s?!1:s}t.preventDefault&&t.preventDefault(),t.returnValue=!1},scrollDown:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value+e.largestep<=e.max?(e.setPosition(e.value+e.largestep),!0):e.value+e.largestep!=e.max?(e.setPosition(e.max),!0):!1},scrollUp:function(){if("hidden"==this.vScrollBar.css("visibility"))return!1;var e=this.vScrollInstance;return e.value-e.largestep>=e.min?(e.setPosition(e.value-e.largestep),!0):e.value-e.largestep!=e.min?(e.setPosition(e.min),!0):!1},_handleDelta:function(e){if(this.focused){var t=this.vScrollInstance.value;0>e?this.scrollDown():this.scrollUp();var i=this.vScrollInstance.value;if(t!=i)return!1}return!0},_render:function(e){void 0==e&&(e=this);var t=e.vScrollInstance.value,i=e.hScrollInstance.value;this.rtl&&"hidden"!=this.hScrollBar[0].style.visibility&&(i=0==this._rtl?e.hScrollInstance.max-i:-e.hScrollInstance.value),e.content.css({left:-i+"px",top:-t+"px"})},scrollTo:function(e,t){void 0!=e&&void 0!=t&&(this.vScrollInstance.setPosition(t),this.hScrollInstance.setPosition(e))},getScrollHeight:function(){return this.vScrollInstance.max},getVScrollPosition:function(){return this.vScrollInstance.value},getScrollWidth:function(){return this.hScrollInstance.max},getHScrollPosition:function(){return this.hScrollInstance.value},_getScrollSize:function(){var t=this.scrollBarSize;return isNaN(t)&&(t=parseInt(t),isNaN(t)?t="17px":t+="px"),this.isTouchDevice()&&(t=e.jqx.utilities.touchScrollBarSize),t=parseInt(t)},_getScrollArea:function(){var t=0;this.content.css("margin-right","0px"),this.content.css("max-width","9999999px"),e.jqx.browser.msie&&e.jqx.browser.version<10&&(t=parseInt(this.content.css("left")),this.content.css("left",0)),this.content.css("overflow","auto"),this.rtl&&this.content.css("direction","rtl");var i=parseInt(this.content[0].scrollWidth);e.each(this.content.children(),function(){i=Math.max(i,this.scrollWidth),i=Math.max(i,e(this).outerWidth())}),e.jqx.browser.msie&&e.jqx.browser.version<10&&this.content.css("left",t);var r=parseInt(this.content[0].scrollHeight);if(this.content.css("overflow","visible"),e.jqx.browser.msie&&e.jqx.browser.version<9){var r=parseInt(this.content[0].scrollHeight);switch(this.sizeMode){case"wrap":var r=parseInt(this.content[0].scrollHeight),i=parseInt(this.content[0].scrollWidth);break;case"horizontalWrap":case"horizontalwrap":break;case"verticalWrap":case"verticalwrap":var r=parseInt(this.content[0].scrollHeight)}}return this.rtl&&this.content.css("direction","ltr"),{width:i,height:r}},_arrange:function(t){t!==!1&&(null!=this.width&&this.host.width(this.width),null!=this.height&&this.host.height(this.height));var i=this._getScrollSize(),r=this.host.width(),s=this.host.height(),a=this._getScrollArea(),n=a.width,o=a.height,h=o-parseInt(Math.round(this.host.height())),l=n-parseInt(Math.round(this.host.width()));void 0!=this.horizontalScrollBarMax&&(l=this.horizontalScrollBarMax),void 0!=this.verticalScrollBarMax&&(h=this.verticalScrollBarMax);var d=function(e,t){var i=5;t>i?(e.vScrollBar.jqxScrollBar({max:t}),e.vScrollBar.css("visibility","inherit")):(e.vScrollBar.jqxScrollBar("setPosition",0),e.vScrollBar.css("visibility","hidden"))},c=function(t,r){r>0?e.jqx.browser.msie&&e.jqx.browser.version<8&&i>=r-10?(t.hScrollBar.css("visibility","hidden"),t.hScrollBar.jqxScrollBar("setPosition",0)):(t.hScrollBar.jqxScrollBar({max:r+4}),t.hScrollBar.css("visibility","inherit")):(t.hScrollBar.css("visibility","hidden"),t.hScrollBar.jqxScrollBar("setPosition",0))};switch(this.sizeMode){case"wrap":return this.host.width(n),this.host.height(o),this.vScrollBar.css("visibility","hidden"),void this.hScrollBar.css("visibility","hidden");case"horizontalWrap":case"horizontalwrap":return this.host.width(n),this.hScrollBar.css("visibility","hidden"),d(this,h),void this._arrangeScrollbars(i,n,s);case"verticalWrap":case"verticalwrap":return this.host.height(o),this.vScrollBar.css("visibility","hidden"),c(this,l),void this._arrangeScrollbars(i,r,s)}d(this,h);var m=2;"hidden"!=this.vScrollBar.css("visibility")&&void 0==this.horizontalScrollBarMax&&(!this.isTouchDevice()&&l>0||l>0)&&(l+=i+m),c(this,l),"hidden"!=this.hScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar({max:h+i+m}),this._arrangeScrollbars(i,r,s)},_arrangeScrollbars:function(t,i,r){var s="hidden"!=this.vScrollBar[0].style.visibility,a=("hidden"!=this.hScrollBar[0].style.visibility,2),n=2;if(this.hScrollBar.height(t),this.hScrollBar.css({top:r-t-a-n+"px",left:"0px"}),this.hScrollBar.width(i-a+"px"),this.vScrollBar.width(t),this.vScrollBar.height(parseInt(r)-a+"px"),this.vScrollBar.css({left:parseInt(i)-parseInt(t)-a-n+"px",top:"0px"}),this.rtl){this.vScrollBar.css({left:"0px"});var o=s?parseInt(t)+"px":0;if("rtl"!=this.content.children().css("direction")){var h=!1;e.jqx.browser.msie&&e.jqx.browser.version<8&&(h=!0),h||this.content.css("padding-left",o)}}else"hidden"!=this.vScrollBar.css("visibility")&&this.content.css("max-width",this.host.width()-this.vScrollBar.outerWidth());"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")?(this.bottomRight.css("visibility","inherit"),this.bottomRight.css({left:1+parseInt(this.vScrollBar.css("left")),top:1+parseInt(this.hScrollBar.css("top"))}),this.bottomRight.width(parseInt(t)+3),this.bottomRight.height(parseInt(t)+3),this.rtl&&(this.bottomRight.css({left:"0px"}),this.hScrollBar.css({left:t+n+"px"})),this.hScrollBar.width(i-1*t-a-n+"px"),this.vScrollBar.height(parseInt(r)-a-t-n+"px")):this.bottomRight.css("visibility","hidden"),this.hScrollInstance.refresh(),this.vScrollInstance.refresh()},destroy:function(){clearInterval(this.autoUpdateId),this.autoUpdateId=null,this.autoUpdate=!1,e.jqx.utilities.resize(this.host,null,!0),this._removeHandlers(),this.removeHandler(e(window),"unload"),this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar.jqxScrollBar("destroy"),this.host.remove()},_raiseevent:function(t,i,r){if(void 0!=this.isInitialized&&1==this.isInitialized){var s=this.events[t],a=new e.Event(s);a.previousValue=i,a.currentValue=r,a.owner=this;var n=this.host.trigger(a);return n}},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1,this.vScrollInstance.value=0,this.hScrollInstance.value=0,this._arrange(),this._render()},propertyChangedHandler:function(e,t,i,r){e.isInitialized&&("rtl"==t&&(this.vScrollBar.jqxScrollBar({rtl:r}),this.hScrollBar.jqxScrollBar({rtl:r}),e._arrange()),e.updating||("scrollBarSize"==t||"width"==t||"height"==t)&&i!=r&&e._arrange(),"touchMode"==t&&"auto"!=r&&e._updateTouchScrolling(),"theme"==t&&(e.host.removeClass(),e.host.addClass(this.toThemeProperty("jqx-panel")),e.host.addClass(this.toThemeProperty("jqx-widget")),e.host.addClass(this.toThemeProperty("jqx-widget-content")),e.host.addClass(this.toThemeProperty("jqx-rc-all")),e.vScrollBar.jqxScrollBar({theme:this.theme}),e.hScrollBar.jqxScrollBar({theme:this.theme}),e.bottomRight.removeClass(),e.bottomRight.addClass(this.toThemeProperty("jqx-panel-bottomright")),e.bottomRight.addClass(this.toThemeProperty("jqx-scrollbar-state-normal")),e.content.removeClass(),e.content.addClass(this.toThemeProperty("jqx-widget-content"))))},invalidate:function(){e.jqx.isHidden(this.host)||this.refresh()},refresh:function(){this._arrange()}})}(jqxBaseFramework),function(e){e.jqx.jqxWidget("jqxTree","",{}),e.extend(e.jqx._jqxTree.prototype,{defineInstance:function(){var t={items:new Array,width:null,height:null,easing:"easeInOutCirc",animationShowDuration:"fast",animationHideDuration:"fast",treeElements:new Array,disabled:!1,enableHover:!0,keyboardNavigation:!0,enableKeyboardNavigation:!0,toggleMode:"dblclick",source:null,checkboxes:!1,checkSize:13,toggleIndicatorSize:16,hasThreeStates:!1,selectedItem:null,touchMode:"auto",allowDrag:!0,allowDrop:!0,searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:700,animationHideDelay:0,submitCheckedItems:!1,dragStart:null,dragEnd:null,rtl:!1,dropAction:"default",events:["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart"],aria:{"aria-activedescendant":{name:"getActiveDescendant",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}};return e.extend(!0,this,t),t},createInstance:function(){var t=this;if(this.host.attr("role","tree"),this.host.attr("data-role","treeview"),this.enableKeyboardNavigation=this.keyboardNavigation,this.propertyChangeMap.disabled=function(i,r,s,a){t.disabled?t.host.addClass(t.toThemeProperty("jqx-tree-disabled")):t.host.removeClass(t.toThemeProperty("jqx-tree-disabled")),e.jqx.aria(t,"aria-disabled",a)},null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("%")&&this.host.height(this.height),this.host.attr("tabindex")||this.host.attr("tabIndex",1),this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-tree-disabled")),e.jqx.aria(this,"aria-disabled",!0)),this.host.jqxDragDrop&&jqxTreeDragDrop(),this.originalInnerHTML=this.element.innerHTML,this.createdTree=!1,this.element.innerHTML.indexOf("UL")){var i=this.host.find("ul:first");i.length>0&&(this.createTree(i[0]),this.createdTree=!0)}if(null!=this.source){var r=this.loadItems(this.source);this.element.innerHTML=r;var i=this.host.find("ul:first");i.length>0&&(this.createTree(i[0]),this.createdTree=!0)}if(this._itemslength=this.items.length,!this.createdTree&&0==this.host.find("ul").length){this.host.append(e("<ul></ul>"));var i=this.host.find("ul:first");i.length>0&&(this.createTree(i[0]),this.createdTree=!0),this.createdTree=!0}1==this.createdTree&&(this._render(),this._handleKeys()),this._updateCheckLayout()},checkItems:function(t,i){var r=this;if(null!=t){var s=0,a=!1,n=0,o=e(t.element).find("li");if(n=o.length,e.each(o,function(){var e=r.itemMapping["id"+this.id].item;0!=e.checked&&(null==e.checked&&(a=!0),s++)}),t!=i)s==n?this.checkItem(t.element,!0,"tree"):s>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree");else{var h=i.checked,o=e(i.element).find("li");e.each(o,function(){r.itemMapping["id"+this.id].item;r.checkItem(this,h,"tree")})}this.checkItems(this._parentItem(t),i)}else{var h=i.checked,o=e(i.element).find("li");e.each(o,function(){r.itemMapping["id"+this.id].item;r.checkItem(this,h,"tree")})}},_getMatches:function(t,i){if(void 0==t||0==t.length)return-1;for(var r=this.items,s=new Array,a=0;a<r.length;a++)this._isVisible(r[a])&&!r[a].disabled&&s.push(r[a]);r=s,void 0!=i&&(r=r.slice(i));var n=new Array;return e.each(r,function(){var i=this.label;i||(i="");var r=e.jqx.string.startsWithIgnoreCase(i.toString(),t);r&&n.push({id:this.id,element:this.element})}),n},_handleKeys:function(){var t=this;this.addHandler(this.host,"keydown",function(i){var r=i.keyCode;if((t.keyboardNavigation||t.enableKeyboardNavigation)&&null!=t.selectedItem){var s=t.selectedItem.element;if(t.incrementalSearch&&!(r>=33&&40>=r)){var a=-1;t._searchString||(t._searchString=""),(8==r||46==r)&&t._searchString.length>=1&&(t._searchString=t._searchString.substr(0,t._searchString.length-1));var n=String.fromCharCode(r),o=!isNaN(parseInt(n)),h=!1;if(r>=65&&97>=r||o||8==r||32==r||46==r){i.shiftKey||(n=n.toLocaleLowerCase()),8!=r&&32!=r&&46!=r&&(t._searchString.length>0&&t._searchString.substr(0,1)==n||(t._searchString+=n)),32==r&&(t._searchString+=" "),t._searchTime=new Date;var l=t.selectedItem;if(l){for(var d=l.id,c=-1,m=0;m<t.items.length;m++)if(t.items[m].id==d){c=m+1;break}var u=t._getMatches(t._searchString,c);if(0==u.length||u.length>0&&u[0].id==d)var u=t._getMatches(t._searchString)}else var u=t._getMatches(t._searchString);if(u.length>0){var l=t.selectedItem;t.selectedItem&&t.selectedItem.id!=u[0].id&&(t.clearSelection(),t.selectItem(u[0].element)),t._lastSearchString=t._searchString}}if(void 0!=t._searchTimer&&clearTimeout(t._searchTimer),(27==r||13==r)&&(t._searchString="",t._lastSearchString=""),t._searchTimer=setTimeout(function(){t._searchString="",t._lastSearchString=""},500),a>=0)return;if(h)return!1}switch(r){case 32:if(t.checkboxes){t.fromKey=!0;var p=e(t.selectedItem.checkBoxElement).jqxCheckBox("checked");return t.checkItem(t.selectedItem.element,!p,"tree"),t.hasThreeStates&&t.checkItems(t.selectedItem,t.selectedItem),!1}return!0;case 33:for(var v=t._getItemsOnPage(),x=t.selectedItem,m=0;v>m;m++)x=t._prevVisibleItem(x);return null!=x?(t.selectItem(x.element),t.ensureVisible(x.element)):(t.selectItem(t._firstItem().element),t.ensureVisible(t._firstItem().element)),!1;case 34:for(var v=t._getItemsOnPage(),f=t.selectedItem,m=0;v>m;m++)f=t._nextVisibleItem(f);return null!=f?(t.selectItem(f.element),t.ensureVisible(f.element)):(t.selectItem(t._lastItem().element),t.ensureVisible(t._lastItem().element)),!1;case 37:case 39:if(37==r&&!t.rtl||39==r&&t.rtl)if(t.selectedItem.hasItems&&t.selectedItem.isExpanded)t.collapseItem(s);else{var g=t._parentItem(t.selectedItem);null!=g&&(t.selectItem(g.element),t.ensureVisible(g.element))}if((39==r&&!t.rtl||37==r&&t.rtl)&&t.selectedItem.hasItems)if(t.selectedItem.isExpanded){var f=t._nextVisibleItem(t.selectedItem);null!=f&&(t.selectItem(f.element),t.ensureVisible(f.element))}else t.expandItem(s);return!1;case 13:return t.selectedItem.hasItems&&(t.selectedItem.isExpanded?t.collapseItem(s):t.expandItem(s)),!1;case 36:return t.selectItem(t._firstItem().element),t.ensureVisible(t._firstItem().element),!1;case 35:return t.selectItem(t._lastItem().element),t.ensureVisible(t._lastItem().element),!1;case 38:var x=t._prevVisibleItem(t.selectedItem);return null!=x&&(t.selectItem(x.element),t.ensureVisible(x.element)),!1;case 40:var f=t._nextVisibleItem(t.selectedItem);return null!=f&&(t.selectItem(f.element),t.ensureVisible(f.element)),!1}}})},_firstItem:function(){var t=null,r=this,s=this.host.find("ul:first"),a=e(s).find("li");for(i=0;i<=a.length-1;i++){var n=a[i];if(t=this.itemMapping["id"+n.id].item,r._isVisible(t))return t}return null},_lastItem:function(){var t=null,r=this,s=this.host.find("ul:first"),a=e(s).find("li");for(i=a.length-1;i>=0;i--){var n=a[i];if(t=this.itemMapping["id"+n.id].item,r._isVisible(t))return t}return null},_parentItem:function(t){if(null==t||void 0==t)return null;var i=t.parentElement;if(!i)return null;var r=null;return e.each(this.items,function(){return this.element==i?(r=this,!1):void 0}),r},_nextVisibleItem:function(e){if(null==e||void 0==e)return null;for(var t=e;null!=t;)if(t=t.nextItem,this._isVisible(t)&&!t.disabled)return t;return null},_prevVisibleItem:function(e){if(null==e||void 0==e)return null;for(var t=e;null!=t;)if(t=t.prevItem,this._isVisible(t)&&!t.disabled)return t;return null},_isVisible:function(e){if(null==e||void 0==e)return!1;if(!this._isElementVisible(e.element))return!1;var t=this._parentItem(e);if(null==t)return!0;if(null!=t){if(!this._isElementVisible(t.element))return!1;if(!t.isExpanded)return!1;for(;null!=t;){if(t=this._parentItem(t),null!=t&&!this._isElementVisible(t.element))return!1;if(null!=t&&!t.isExpanded)return!1}}return!0},_getItemsOnPage:function(){var t=0,i=(this.panel.jqxPanel("getVScrollPosition"),parseInt(this.host.height())),r=0,s=this._firstItem();if(parseInt(e(s.element).height())>0)for(;i>=r;)r+=parseInt(e(s.element).outerHeight()),t++;return t},_isElementVisible:function(t){return null==t?!1:"none"!=e(t).css("display")&&"hidden"!=e(t).css("visibility")?!0:!1},refresh:function(t){if(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height),this.panel){if(null!=this.width&&-1!=this.width.toString().indexOf("%")){var i=this;this.panel.jqxPanel("width","100%"),i.removeHandler(e(window),"resize.jqxtree"+i.element.id),i.addHandler(e(window),"resize.jqxtree"+i.element.id,function(){i._calculateWidth()})}else this.panel.jqxPanel("width",this.host.width());this.panel.jqxPanel("_arrange")}if(this._calculateWidth(),e.jqx.isHidden(this.host)){var i=this;this._hiddenTimer&&clearInterval(this._hiddenTimer),this._hiddenTimer=setInterval(function(){e.jqx.isHidden(i.host)||(clearInterval(i._hiddenTimer),i._calculateWidth())},100)}1!=t&&this.checkboxes&&this._updateCheckLayout(null)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},loadItems:function(t){if(null!=t){var i=this;this.items=new Array;var r="<ul>";return e.map(t,function(e){return void 0==e?null:void(r+=i._parseItem(e))}),r+="</ul>"}},_parseItem:function(e){var t="";if(void 0==e)return null;var i=e.label;!e.label&&e.html&&(i=e.html),i||(i="Item"),"string"==typeof e&&(i=e);var r=!1;void 0!=e.expanded&&e.expanded&&(r=!0);var s=!1;void 0!=e.locked&&e.locked&&(s=!0);var a=!1;void 0!=e.selected&&e.selected&&(a=!0);var n=!1;void 0!=e.disabled&&e.disabled&&(n=!0);var o=!1;void 0!=e.checked&&e.checked&&(o=!0);var h=e.icon,l=e.iconsize;t+="<li",r&&(t+=' item-expanded="true" '),s&&(t+=' item-locked="true" '),n&&(t+=' item-disabled="true" '),a&&(t+=' item-selected="true" '),l&&(t+=' item-iconsize="'+e.iconsize+'" '),null!=h&&void 0!=h&&(t+=' item-icon="'+h+'" '),e.label&&!e.html&&(t+=' item-label="'+i+'" '),null!=e.value&&(t+=' item-value="'+e.value+'" '),void 0!=e.checked&&(t+=' item-checked="'+o+'" ');var d="";return void 0!=e.id?(d=e.id,t+=' id="'+d+'" '):(d=this.createID(),t+=' id="'+d+'" '),t+=">"+i,e.items&&(t+=this.loadItems(e.items)),this._valueList||(this._valueList=new Array),this._valueList[d]=e.value,t+="</li>"},ensureVisible:function(t){if(null!=t&&void 0!=t){var i=this.panel.jqxPanel("getVScrollPosition"),r=this.panel.jqxPanel("getHScrollPosition"),s=parseInt(this.host.height()),a=e(t).position().top;(i>=a||a>=s+i)&&this.panel.jqxPanel("scrollTo",r,a-s+e(t).outerHeight())}},_syncItems:function(t){this._visibleItems=new Array;var i=this;e.each(t,function(){var t=e(this);if("none"!=t.css("display")){var r=t.outerHeight();if(t.height()>0){var s=parseInt(t.offset().top);i._visibleItems[i._visibleItems.length]={element:this,top:s,height:r,bottom:s+r}}}})},hitTest:function(t,i){var r=this,s=null,a=this.host.find(".jqx-item");if(this._syncItems(a),r._visibleItems){var n=parseInt(r.host.offset().left),o=r.host.outerWidth();e.each(r._visibleItems,function(){if(t>=n&&n+o>t&&this.top+5<i&&i<this.top+this.height){var a=e(this.element).parents("li:first");if(a.length>0&&(s=r.getItem(a[0]),null!=s))return s.height=this.height,s.top=this.top,!1}})}return s},addBefore:function(e,t,i){return this.addBeforeAfter(e,t,!0,i)},addAfter:function(e,t,i){return this.addBeforeAfter(e,t,!1,i)},addBeforeAfter:function(t,i,r,s){var a=this,n=new Array;i&&void 0!=i.treeInstance&&(i=i.element),e.isArray(t)?n=t:n[0]=t;var o="",h=this;e.each(n,function(){o+=h._parseItem(this)});var l=e(o);if(a.element.innerHTML.indexOf("UL"))var d=a.host.find("ul:first");void 0==i&&null==i?d.append(l):r?e(i).before(l):e(i).after(l);for(var c=l,m=0;m<c.length;m++){this._createItem(c[m]);var u=e(c[m]).find("li");if(u.length>0)for(var p=0;p<u.length;p++)this._createItem(u[p])}var v=function(t){h._refreshMapping(!1),h._updateItemsNavigation(),t&&h.allowDrag&&h._enableDragDrop&&h._enableDragDrop(),null!=h.selectedItem&&(e(h.selectedItem.titleElement).addClass(h.toThemeProperty("jqx-fill-state-pressed")),e(h.selectedItem.titleElement).addClass(h.toThemeProperty("jqx-tree-item-selected")))};return 0==s?(v(!0),void this._raiseEvent("4",{items:this.getItems()})):(v(!1),h._render(),this._raiseEvent("4",{items:this.getItems()}),void(h.checkboxes&&h._updateCheckLayout(null)))},addTo:function(t,i,r){var s=this,a=new Array;i&&void 0!=i.treeInstance&&(i=i.element),e.isArray(t)?a=t:a[0]=t;var n="",o=this;e.each(a,function(){n+=o._parseItem(this)});var h=e(n);if(s.element.innerHTML.indexOf("UL"))var l=s.host.find("ul:first");if(void 0==i&&null==i)l.append(h);else{i=e(i);var d=i.find("ul:first");if(0==d.length){ulElement=e("<ul></ul>"),e(i).append(ulElement),d=i.find("ul:first");var c=s.itemMapping["id"+i[0].id].item;c.subtreeElement=d[0],c.hasItems=!0,d.addClass(s.toThemeProperty("jqx-tree-dropdown")),o.rtl&&d.addClass(s.toThemeProperty("jqx-tree-dropdown-rtl")),d.append(h);var m=d.find("li:first");c.parentElement=m}else d.append(h)}for(var u=h,p=0;p<u.length;p++){this._createItem(u[p]);var v=e(u[p]).find("li");if(v.length>0)for(var x=0;x<v.length;x++)this._createItem(v[x])}var f=function(t){o._refreshMapping(!1),o._updateItemsNavigation(),t&&o.allowDrag&&o._enableDragDrop&&o._enableDragDrop(),null!=o.selectedItem&&(e(o.selectedItem.titleElement).addClass(o.toThemeProperty("jqx-fill-state-pressed")),e(o.selectedItem.titleElement).addClass(o.toThemeProperty("jqx-tree-item-selected")))};return 0==r?(f(!0),void this._raiseEvent("4",{items:this.getItems()})):(f(!1),o._render(),o.checkboxes&&o._updateCheckLayout(null),void this._raiseEvent("4",{items:this.getItems()}))},updateItem:function(t,i){var r=void 0!=t.treeInstance?t:this.getItem(t);if(!r){var s=t;t=i,i=s;var r=void 0!=t.treeInstance?t:this.getItem(t)}if(r){if("string"==typeof i&&(i={label:i}),i.value&&(r.value=i.value),i.label){r.label=i.label,e.jqx.utilities.html(e(r.titleElement),i.label);var a=e.jqx.browser.msie&&e.jqx.browser.version<8;if(a){e(document.body).append(this._measureItem),this._measureItem.html(e(r.titleElement).text());var n=this._measureItem.width();r.icon&&(n+=20),e(e(r.titleElement).find("img")).length>0&&(n+=20),e(r.titleElement).css("max-width",n+"px"),this._measureItem.remove()}}if(i.icon)if(e(r.element).children(".itemicon").length>0)e(r.element).find(".itemicon")[0].src=i.icon;else{var o=i.iconsize;o||(o=16);var h=e('<img width="'+o+'" height="'+o+'" style="float: left;" class="itemicon" src="'+i.icon+'"/>');e(r.titleElement).prepend(h),h.css("margin-right","4px"),this.rtl&&(h.css("margin-right","0px"),h.css("margin-left","4px"),h.css("float","right"))}return i.expanded&&this.expandItem(r),i.disabled&&this.disableItem(r),i.selected&&this.selectItem(r),!0}return!1},removeItem:function(t,i){if(void 0!=t&&null!=t){void 0!=t.treeInstance&&(t=t.element);var r=this,s=(t.id,-1),a=this.getItem(t);if(a&&(s=this.items.indexOf(a),-1!=s&&function n(t){var i=-1;i=this.items.indexOf(t),-1!=i&&this.items.splice(i,1);var r=e(t.element).find("li"),s=r.length,a=this,o=new Array;if(s>0){e.each(r,function(){var e=a.itemMapping["id"+this.id].item;o.push(e)});for(var h=0;h<o.length;h++)n.apply(this,[o[h]])}}.apply(this,[a])),this.host.find("#"+t.id).length>0&&e(t).remove(),0==i)return void this._raiseEvent("5");r._updateItemsNavigation(),r.allowDrag&&r._enableDragDrop?r._render(!0,!1):r._render(),null!=r.selectedItem&&r.selectedItem.element==t&&(e(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-fill-state-pressed")),e(r.selectedItem.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-selected")),r.selectedItem=null),this._raiseEvent("5"),r.checkboxes&&r._updateCheckLayout(null)}},clear:function(){this.items=new Array,this.itemMapping=new Array;var e=this.host.find("ul:first");e.length>0&&(e[0].innerHTML=""),this.selectedItem=null},disableItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;e.each(i.items,function(){var r=this;return r.element==t?(r.disabled=!0,e(r.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")),e(r.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&r.checkBoxElement&&e(r.checkBoxElement).jqxCheckBox({disabled:!0}),!1):void 0})},_updateInputSelection:function(){if(this.input){if(null==this.selectedItem)this.input.val("");else{var e=this.selectItem.value;null==e&&(e=this.selectedItem.label),this.input.val(e)}if(this.checkboxes){var t=this.getCheckedItems();if(this.submitCheckedItems){for(var i="",r=0;r<t.length;r++){var s=t[r].value;null==s&&(s=t[r].label),i+=r==t.length-1?s:s+","}this.input.val(i)}}}},getCheckedItems:function(){var t=new Array,i=this;return e.each(i.items,function(){var e=this;e.checked&&t.push(e)}),t},getUncheckedItems:function(){var t=new Array,i=this;return e.each(i.items,function(){var e=this;e.checked||t.push(e)}),t},checkAll:function(){var t=this;e.each(t.items,function(){var t=this;t.disabled||(t.checked=!0,e(t.checkBoxElement).jqxCheckBox("_setState",!0))}),this._raiseEvent("6",{element:this,checked:!0})},uncheckAll:function(){var t=this;e.each(t.items,function(){var t=this;t.disabled||(t.checked=!1,e(t.checkBoxElement).jqxCheckBox("_setState",!1))}),this._raiseEvent("6",{element:this,checked:!1})},checkItem:function(t,i,r){if(null==t)return!1;void 0===i&&(i=!0),void 0!=t.treeInstance&&(t=t.element);var s=this,a=!1,n=null;e.each(s.items,function(){var r=this;return r.element!=t||r.disabled?void 0:(a=!0,r.checked=i,n=r,e(r.checkBoxElement).jqxCheckBox({checked:i}),!1)}),a&&(this._raiseEvent("6",{element:t,checked:i}),this._updateInputSelection()),void 0==r&&n&&this.hasThreeStates&&this.checkItems(n,n)},uncheckItem:function(e){this.checkItem(e,!1)},enableItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;e.each(i.items,function(){var r=this;return r.element==t?(r.disabled=!1,e(r.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")),e(r.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&r.checkBoxElement&&e(r.checkBoxElement).jqxCheckBox({disabled:!1}),!1):void 0})},enableAll:function(){var t=this;e.each(t.items,function(){var i=this;i.disabled=!1,e(i.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled")),e(i.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.checkboxes&&i.checkBoxElement&&e(i.checkBoxElement).jqxCheckBox({disabled:!1})
})},lockItem:function(t){if(null==t)return!1;var i=this;e.each(i.items,function(){var e=this;return e.element==t?(e.locked=!0,!1):void 0})},unlockItem:function(t){if(null==t)return!1;var i=this;e.each(i.items,function(){var e=this;return e.element==t?(e.locked=!1,!1):void 0})},getItems:function(){return this.items},getItem:function(e){if(null==e||void 0==e)return null;if(this.itemMapping["id"+e.id]){var t=this.itemMapping["id"+e.id].item;return t}return null},isExpanded:function(e){if(null==e||void 0==e)return!1;var t=this.itemMapping["id"+e.id].item;return null!=t?t.isExpanded:!1},isSelected:function(e){if(null==e||void 0==e)return!1;var t=this.itemMapping["id"+e.id].item;return null!=t?t==this.selectedItem:!1},getPrevItem:function(e){var t=this.getItem(e);void 0!=e.treeInstance&&(t=e);var i=this._prevVisibleItem(t);return i},getNextItem:function(e){var t=this.getItem(e);void 0!=e.treeInstance&&(t=e);var i=this._nextVisibleItem(t);return i},getSelectedItem:function(){return this.selectedItem},val:function(e){if(0==arguments.length||"object"==typeof e)return this.selectedItem;if("string"==typeof e){var t=this.host.find("#"+e);if(t.length>0){var i=this.getItem(t[0]);this.selectItem(i)}}else{var i=this.getItem(e);this.selectItem(i)}},getActiveDescendant:function(){return this.selectedItem?this.selectedItem.element.id:""},clearSelection:function(){this.selectItem(null)},selectItem:function(t){if(!this.disabled){var i=this;if(t&&void 0!=t.treeInstance&&(t=t.element),null==t||void 0==t)return void(null!=i.selectedItem&&(e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=null));if(null==this.selectedItem||this.selectedItem.element!=t){var r=null!=this.selectedItem?this.selectedItem.element:null;r&&e(r).removeAttr("aria-selected"),e.each(i.items,function(){var r=this;this.selected=!1,r.disabled||r.element==t&&(null==i.selectedItem||null!=i.selectedItem&&i.selectedItem.titleElement!=r.titleElement)&&(null!=i.selectedItem&&(e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected"))),e(r.titleElement).addClass(i.toThemeProperty("jqx-fill-state-pressed")),e(r.titleElement).addClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=r,this.selected=!0,e(r.element).attr("aria-selected","true"),e.jqx.aria(i,"aria-activedescendant",r.element.id))}),this._updateInputSelection(),this._raiseEvent("2",{element:t,prevElement:r})}}},collapseAll:function(){this.isUpdating=!0;var t=this,i=t.items,r=this.animationHideDuration;this.animationHideDuration=0,e.each(i,function(){var e=this;1==e.isExpanded&&t._collapseItem(t,e)}),setTimeout(function(){t.isUpdating=!1,t._calculateWidth()},this.animationHideDuration),this.animationHideDuration=r},expandAll:function(){var t=this;this.isUpdating=!0;var i=this.animationShowDuration;this.animationShowDuration=0,e.each(this.items,function(){var e=this;e.hasItems&&t._expandItem(t,e)}),setTimeout(function(){t.isUpdating=!1,t._calculateWidth()},this.animationShowDuration),this.animationShowDuration=i},collapseItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;return e.each(this.items,function(){var e=this;return 1==e.isExpanded&&e.element==t?(i._collapseItem(i,e),!1):void 0}),!0},expandItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;return e.each(i.items,function(){var e=this;0!=e.isExpanded||e.element!=t||e.disabled||e.locked||(i._expandItem(i,e),e.parentElement&&i.expandItem(e.parentElement))}),!0},_getClosedSubtreeOffset:function(t){var i=e(t.subtreeElement),r=-i.outerHeight(),s=-i.outerWidth();return s=0,{left:s,top:r}},_collapseItem:function(t,i){if(null==t||null==i)return!1;if(i.disabled)return!1;if(t.disabled)return!1;if(t.locked)return!1;{var r=e(i.subtreeElement),s=this._getClosedSubtreeOffset(i);s.top,s.left}$treeElement=e(i.element);var a=t.animationHideDelay;a=0,null!=r.data("timer").show&&(clearTimeout(r.data("timer").show),r.data("timer").show=null);var n=function(){if(i.isExpanded=!1,t.checkboxes){var s=r.find(".chkbox");s.stop(),s.css("opacity",1),r.find(".chkbox").animate({opacity:0},50)}var a=e(i.arrow);t._arrowStyle(a,"",i.isExpanded),r.slideUp(t.animationHideDuration,function(){i.isCollapsing=!1,t._calculateWidth();var s=e(i.arrow);t._arrowStyle(s,"",i.isExpanded),r.hide(),t._raiseEvent("1",{element:i.element})})};a>0?r.data("timer").hide=setTimeout(function(){n()},a):n()},_expandItem:function(t,i){if(null==t||null==i)return!1;if(i.isExpanded)return!1;if(i.locked)return!1;if(i.disabled)return!1;if(t.disabled)return!1;var r=e(i.subtreeElement);null!=r.data("timer")&&null!=r.data("timer").hide&&clearTimeout(r.data("timer").hide);var s=(e(i.element),0);if(parseInt(r.css("top"))==s)return void(i.isExpanded=!0);var a=e(i.arrow);if(t._arrowStyle(a,"",i.isExpanded),t.checkboxes){var n=r.find(".chkbox");n.stop(),n.css("opacity",0),n.animate({opacity:1},t.animationShowDuration)}if(r.slideDown(t.animationShowDuration,t.easing,function(){var r=e(i.arrow);i.isExpanded=!0,t._arrowStyle(r,"",i.isExpanded),i.isExpanding=!1,t._raiseEvent("0",{element:i.element}),t._calculateWidth()}),t.checkboxes&&(t._updateCheckItemLayout(i),i.subtreeElement)){var o=e(i.subtreeElement).find("li");e.each(o,function(){var e=t.getItem(this);null!=e&&t._updateCheckItemLayout(e)})}},_calculateWidth:function(){var t=this,i=this.checkboxes?20:0,r=0;if(!this.isUpdating){if(e.each(this.items,function(){var t=e(this.element).height();if(0!=t){var s=e(this.titleElement).outerWidth()+10+i+20*(1+this.level);if(r=Math.max(r,s),this.hasItems){var a=parseInt(e(this.titleElement).css("padding-top"));isNaN(a)&&(a=0),a=2*a,a+=2;var n=(a+e(this.titleElement).height())/2-8.5;e.jqx.browser.msie&&e.jqx.browser.version<9?e(this.arrow).css("margin-top","3px"):parseInt(n)>=0&&e(this.arrow).css("margin-top",parseInt(n)+"px")}}}),this.toggleIndicatorSize>16&&(r=r+this.toggleIndicatorSize-16),t.panel)if(r>this.host.width()){var s=r-this.host.width(),a="hidden"!==t.panel.jqxPanel("vScrollBar").css("visibility")?10:0;s+=a,t.panel.jqxPanel({horizontalScrollBarMax:s})}else t.panel.jqxPanel({horizontalScrollBarMax:0});this.host.find("ul:first").width(r);var n=this.host.width()-30;n>0&&this.host.find("ul:first").css("min-width",n),t.panel&&t.panel.jqxPanel("_arrange")}},_arrowStyle:function(e,t,i){var r=this;if(e.length>0){e.removeClass();var s="";"hover"==t&&(s="-"+t);var a=i?"-expand":"-collapse",n="jqx-tree-item-arrow"+a+s;if(e.addClass(r.toThemeProperty(n)),!this.rtl){var a=i?"-down":"-right";e.addClass(r.toThemeProperty("jqx-icon-arrow"+a))}if(this.rtl){e.addClass(r.toThemeProperty(n+"-rtl"));var a=i?"-down":"-left";e.addClass(r.toThemeProperty("jqx-icon-arrow"+a))}}},_initialize:function(){var t=this;this.host.addClass(t.toThemeProperty("jqx-widget")),this.host.addClass(t.toThemeProperty("jqx-widget-content")),this.host.addClass(t.toThemeProperty("jqx-tree")),this._updateDisabledState();var i=e.jqx.browser.msie&&e.jqx.browser.version<8;e.each(this.items,function(){var r=this;$element=e(r.element);var s=null;if(t.checkboxes&&!r.hasItems&&r.checkBoxElement&&e(r.checkBoxElement).css("margin-left","0px"),i)!r.hasItems&&e(r.element).find("ul").length>0&&e(r.element).find("ul").remove();else{if(!r.hasItems){t.rtl?r.element.style.marginRight=parseInt(t.toggleIndicatorSize)+"px":r.element.style.marginLeft=parseInt(t.toggleIndicatorSize)+"px";var a=e(r.arrow);return a.length>0&&(a.remove(),r.arrow=null),!0}t.rtl?r.element.style.marginRight="0px":r.element.style.marginLeft="0px"}var a=e(r.arrow);a.length>0&&a.remove(),s=e('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>'),s.prependTo($element),t.rtl?s.css("float","right"):s.css("float","left"),s.css("clear","both"),s.width(t.toggleIndicatorSize),t._arrowStyle(s,"",r.isExpanded);var n=parseInt(e(this.titleElement).css("padding-top"));isNaN(n)&&(n=0),n=2*n,n+=2;var o=(n+e(this.titleElement).height())/2-8.5;e.jqx.browser.msie&&e.jqx.browser.version<9?s.css("margin-top","3px"):parseInt(o)>=0&&s.css("margin-top",parseInt(o)+"px"),$element.addClass(t.toThemeProperty("jqx-disableselect")),s.addClass(t.toThemeProperty("jqx-disableselect"));var h="click",l=t.isTouchDevice();l&&(h=e.jqx.mobile.getTouchEventName("touchend")),t.addHandler(s,h,function(){return r.isExpanded?t._collapseItem(t,r):t._expandItem(t,r),!1}),t.addHandler(s,"selectstart",function(){return!1}),t.addHandler(s,"mouseup",function(){return l?void 0:!1}),r.hasItems=e(r.element).find("li").length>0,r.arrow=s[0],r.hasItems||s.css("visibility","hidden"),$element.css("float","none")})},_getOffset:function(t){var i=e(window).scrollTop(),r=e(window).scrollLeft(),s=e.jqx.mobile.isSafariMobileBrowser(),a=e(t).offset(),n=a.top,o=a.left;return null!=s&&s?{left:o-r,top:n-i}:e(t).offset()},_renderHover:function(t,i,r){var s=this;if(!r){var a=e(i.titleElement);s.addHandler(a,"mouseenter",function(){i.disabled||!s.enableHover||s.disabled||(a.addClass(s.toThemeProperty("jqx-fill-state-hover")),a.addClass(s.toThemeProperty("jqx-tree-item-hover")))}),s.addHandler(a,"mouseleave",function(){i.disabled||!s.enableHover||s.disabled||(a.removeClass(s.toThemeProperty("jqx-fill-state-hover")),a.removeClass(s.toThemeProperty("jqx-tree-item-hover")))})}},_updateDisabledState:function(){this.disabled?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_addInput:function(){if(null==this.input){var t=this.host.attr("name");t&&this.host.attr("name",""),this.input=e("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t),this._updateInputSelection()}},render:function(){this._updateItemsNavigation(),this._render()},_render:function(t,i){if(e.jqx.browser.msie&&e.jqx.browser.version<8){var r=this;e.each(this.items,function(){var t=e(this.element),i=t.parent(),r=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13;t.css("min-width",r);var s=parseInt(i.css("min-width"));isNaN(s)&&(s=0);var a=t.css("min-width");s<parseInt(t.css("min-width"))&&i.css("min-width",a),this.titleElement[0].style.width=null})}var r=this;e.data(r.element,"animationHideDelay",r.animationHideDelay),e.data(document.body,"treeel",this),this._initialize();var s=this.isTouchDevice();if(s&&"dblclick"==this.toggleMode&&(this.toggleMode="click"),(void 0==t||1==t)&&e.each(this.items,function(){r._updateItemEvents(r,this)}),this.allowDrag&&this._enableDragDrop&&(void 0==i||1==i)&&this._enableDragDrop(),this._addInput(),this.host.jqxPanel){if(this.host.find("#panel"+this.element.id).length>0)return this.panel.jqxPanel({touchMode:this.touchMode}),void this.panel.jqxPanel("refresh");this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');var a=this.host.find("div:first"),n="fixed";(null==this.height||"auto"==this.height)&&(n="verticalwrap"),(null==this.width||"auto"==this.width)&&(n="fixed"==n?"horizontalwrap":"wrap"),a.jqxPanel({rtl:this.rtl,theme:this.theme,width:"100%",height:"100%",touchMode:this.touchMode,sizeMode:n}),e.jqx.browser.msie&&e.jqx.browser.version<8&&a.jqxPanel("content").css("left","0px"),a.data({nestedWidget:!0}),(null==this.height||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&this.isTouchDevice()&&(this.removeHandler(a,e.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(a,e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(a,e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var o=e.data(a[0],"jqxPanel").instance;null!=o&&(this.vScrollInstance=o.vScrollInstance,this.hScrollInstance=o.hScrollInstance),this.panelInstance=o,e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0),this.host.find("ul").attr("hideFocus",!0)),a[0].className="",this.panel=a}this._raiseEvent("3",this)},focus:function(){try{this.host.focus()}catch(e){}},_updateItemEvents:function(t,i){var r=this.isTouchDevice();r&&(this.toggleMode=e.jqx.mobile.getTouchEventName("touchend"));var s=e(i.element);t.enableRoundedCorners&&s.addClass(t.toThemeProperty("jqx-rc-all"));var a=r?e.jqx.mobile.getTouchEventName("touchend"):"mousedown";t.touchMode===!0&&t.removeHandler(e(i.checkBoxElement),"mousedown"),t.removeHandler(e(i.checkBoxElement),a),t.addHandler(e(i.checkBoxElement),a,function(){return t.disabled||this.treeItem.disabled||(this.treeItem.checked=!this.treeItem.checked,t.checkItem(this.treeItem.element,this.treeItem.checked,"tree"),t.hasThreeStates&&t.checkItems(this.treeItem,this.treeItem)),!1});var n=e(i.titleElement);t.removeHandler(s);var o=this.allowDrag&&this._enableDragDrop;o?(t.removeHandler(n,"mousedown.item"),t.removeHandler(n,"click"),t.removeHandler(n,"dblclick"),t.removeHandler(n,"mouseenter"),t.removeHandler(n,"mouseleave")):t.removeHandler(n),t._renderHover(s,i,r);var h=e(i.subtreeElement);if(h.length>0){var l=i.isExpanded?"block":"none";h.css({overflow:"hidden",display:l}),h.data("timer",{})}t.addHandler(n,"selectstart",function(){return!1}),e.jqx.browser.opera&&t.addHandler(n,"mousedown.item",function(){return!1}),"click"!=t.toggleMode&&t.addHandler(n,"click",function(){t.selectItem(i.element),null!=t.panel&&t.panel.jqxPanel({focused:!0}),n.focus()}),t.addHandler(n,t.toggleMode,function(){return h.length>0&&clearTimeout(h.data("timer").hide),null!=t.panel&&t.panel.jqxPanel({focused:!0}),t.selectItem(i.element),void 0==i.isExpanding&&(i.isExpanding=!1),void 0==i.isCollapsing&&(i.isCollapsing=!1),h.length>0?(i.isExpanded?0==i.isCollapsing&&(i.isCollapsing=!0,t._collapseItem(t,i,!0)):0==i.isExpanding&&(i.isExpanding=!0,t._expandItem(t,i)),!1):void 0})},isTouchDevice:function(){if(void 0!=this._isTouchDevice)return this._isTouchDevice;var t=e.jqx.mobile.isTouchDevice();return 1==this.touchMode?t=!0:0==this.touchMode&&(t=!1),this._isTouchDevice=t,t},createID:function(){return e.jqx.utilities.createId()},createTree:function(t){if(null!=t){var i=this,r=e(t).find("li");this.items=new Array,this.itemMapping=new Array,e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root-rtl")),(this.rtl||e.jqx.browser.msie&&e.jqx.browser.version<8)&&(this._measureItem=e("<span style='position: relative; visibility: hidden;'></span>"),this._measureItem.addClass(this.toThemeProperty("jqx-widget")),this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")),this._measureItem.addClass(this.toThemeProperty("jqx-item")),e(document.body).append(this._measureItem)),e.jqx.browser.msie&&e.jqx.browser.version<8;for(var s=0;s<r.length;s++)this._createItem(r[s]);(this.rtl||e.jqx.browser.msie&&e.jqx.browser.version<8)&&this._measureItem.remove(),this._updateItemsNavigation(),this._updateCheckStates()}},_updateCheckLayout:function(t){var i=this;this.checkboxes&&e.each(this.items,function(){(this.level==t||void 0==t)&&i._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(t){if(this.checkboxes&&"none"!=e(t.titleElement).css("display")){var i=e(t.checkBoxElement),r=e(t.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2;i.css("margin-top",r),this.rtl||(e.jqx.browser.msie&&e.jqx.browser.version<8?t.titleElement.css("margin-left",parseInt(this.checkSize)+25):t.hasItems&&i.css("margin-left",this.toggleIndicatorSize))}},_updateCheckStates:function(){var t=this;t.hasThreeStates?e.each(this.items,function(){t._updateCheckState(this)}):e.each(this.items,function(){null==this.checked&&t.checkItem(this.element,!1,"tree")})},_updateCheckState:function(t){if(null!=t&&void 0!=t){var i=this,r=0,s=!1,a=0,n=e(t.element).find("li");a=n.length,t.checked&&a>0&&e.each(n,function(){var e=i.itemMapping["id"+this.id].item,t=e.element.getAttribute("item-checked");(void 0==t||null==t||"true"==t||1==t)&&i.checkItem(e.element,!0,"tree")}),e.each(n,function(){var e=i.itemMapping["id"+this.id].item;0!=e.checked&&(null==e.checked&&(s=!0),r++)}),a>0&&(r==a?this.checkItem(t.element,!0,"tree"):r>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree"))}},_updateItemsNavigation:function(){for(var t=this.host.find("ul:first"),i=e(t).find("li"),r=0;r<i.length;r++){var s=i[r];if(this.itemMapping["id"+s.id]){var a=this.itemMapping["id"+s.id].item;if(!a)continue;a.prevItem=null,a.nextItem=null,r>0&&this.itemMapping["id"+i[r-1].id]&&(a.prevItem=this.itemMapping["id"+i[r-1].id].item),r<i.length-1&&this.itemMapping["id"+i[r+1].id]&&(a.nextItem=this.itemMapping["id"+i[r+1].id].item)}}},_applyTheme:function(t,i){var r=this;this.host.removeClass("jqx-tree-"+t),this.host.removeClass("jqx-widget-"+t),this.host.removeClass("jqx-widget-content-"+t),this.host.addClass(r.toThemeProperty("jqx-tree")),this.host.addClass(r.toThemeProperty("jqx-widget"));var s=this.host.find("ul:first");e(s).removeClass(r.toThemeProperty("jqx-tree-dropdown-root-"+t)),e(s).addClass(r.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&(e(s).removeClass(r.toThemeProperty("jqx-tree-dropdown-root-rtl-"+t)),e(s).addClass(r.toThemeProperty("jqx-tree-dropdown-root-rtl")));for(var a=e(s).find("li"),n=0;n<a.length;n++){var o=a[n];e(o).children().each(function(){return"ul"==this.tagName||"UL"==this.tagName?(e(this).removeClass(r.toThemeProperty("jqx-tree-dropdown-"+t)),e(this).addClass(r.toThemeProperty("jqx-tree-dropdown")),r.rtl&&(e(this).removeClass(r.toThemeProperty("jqx-tree-dropdown-rtl-"+t)),e(this).addClass(r.toThemeProperty("jqx-tree-dropdown-rtl"))),!1):void 0})}e.each(this.items,function(){var s=this,a=e(s.element);a.removeClass(r.toThemeProperty("jqx-tree-item-li-"+t)),a.addClass(r.toThemeProperty("jqx-tree-item-li")),this.rtl&&(a.removeClass(r.toThemeProperty("jqx-tree-item-li-"+t)),a.addClass(r.toThemeProperty("jqx-tree-item-li"))),e(s.titleElement).removeClass(r.toThemeProperty("jqx-tree-item-"+t)),e(s.titleElement).addClass(r.toThemeProperty("jqx-tree-item")),e(s.titleElement).removeClass("jqx-item-"+t),e(s.titleElement).addClass(r.toThemeProperty("jqx-item"));var n=e(s.arrow);n.length>0&&r._arrowStyle(n,"",s.isExpanded),s.checkBoxElement&&e(s.checkBoxElement).jqxCheckBox({theme:i}),r.enableRoundedCorners&&(a.removeClass("jqx-rc-all-"+t),a.addClass(r.toThemeProperty("jqx-rc-all")))}),this.host.jqxPanel&&this.panel.jqxPanel({theme:i})},_refreshMapping:function(t){for(var i=this.host.find("li"),r=new Array,s=new Array,a=e.data(document.body,"treeItemsStorage"),n=this,o=0;o<i.length;o++){var h=i[o],l=e(h),d=a[h.id];if(null!=d){s[s.length]=d,(void 0==t||1==t)&&this._updateItemEvents(this,d),d.level=l.parents("li").length,d.treeInstance=this;var c=null,m=null;-1!=d.titleElement[0].className.indexOf("jqx-fill-state-pressed")&&(e(d.titleElement).removeClass(n.toThemeProperty("jqx-fill-state-pressed")),e(d.titleElement).removeClass(n.toThemeProperty("jqx-tree-item-selected")));var u=l.children();u.each(function(){return"ul"==this.tagName||"UL"==this.tagName?(d.subtreeElement=this,e(this).addClass(n.toThemeProperty("jqx-tree-dropdown")),n.rtl&&e(this).addClass(n.toThemeProperty("jqx-tree-dropdown-rtl")),!1):void 0});var p=l.parents();p.each(function(){return"li"==this.tagName||"LI"==this.tagName?(m=this.id,c=this,!1):void 0}),d.parentElement=c,d.parentId=m,d.hasItems=e(d.element).find("li").length>0,null!=d&&(r[o]={element:h,item:d},r["id"+h.id]=r[o])}}this.itemMapping=r,this.items=s},_createItem:function(t){if(null!=t&&void 0!=t){var i=t.id;i||(i=this.createID());var r=t,s=e(t);r.id=i;var a=e.data(document.body,"treeItemsStorage");void 0==a&&(a=new Array);var n=this.items.length;this.items[n]=new e.jqx._jqxTree.jqxTreeItem,this.treeElements[i]=this.items[n],a[r.id]=this.items[n],e.data(document.body,"treeItemsStorage",a),n=this.items.length;var o=0,h=this,l=null;s.attr("role","treeitem"),s.children().each(function(){return"ul"==this.tagName||"UL"==this.tagName?(h.items[n-1].subtreeElement=this,e(this).addClass(h.toThemeProperty("jqx-tree-dropdown")),h.rtl&&(e(this).addClass(h.toThemeProperty("jqx-tree-dropdown-rtl")),e(this).css("clear","both")),!1):void 0}),s.parents().each(function(){return"li"==this.tagName||"LI"==this.tagName?(o=this.id,l=this,!1):void 0});var d=t.getAttribute("item-expanded");d=null==d||void 0==d||"true"!=d&&1!=d?!1:!0,r.removeAttribute("item-expanded");var c=t.getAttribute("item-locked");c=null==c||void 0==c||"true"!=c&&1!=c?!1:!0,r.removeAttribute("item-locked");var m=t.getAttribute("item-selected");m=null==m||void 0==m||"true"!=m&&1!=m?!1:!0,r.removeAttribute("item-selected");var u=t.getAttribute("item-disabled");u=null==u||void 0==u||"true"!=u&&1!=u?!1:!0,r.removeAttribute("item-disabled");var p=t.getAttribute("item-checked");p=null==p||void 0==p||"true"!=p&&1!=p?!1:!0;var v=t.getAttribute("item-title");(null==v||void 0==v||"true"!=v&&1!=v)&&(v=!1),r.removeAttribute("item-title");var x=t.getAttribute("item-icon"),f=t.getAttribute("item-iconsize"),g=t.getAttribute("item-label"),_=t.getAttribute("item-value");r.removeAttribute("item-icon"),r.removeAttribute("item-iconsize"),r.removeAttribute("item-label"),r.removeAttribute("item-value");var w=this.items[n-1];w.id=i,void 0==w.value&&(w.value=this._valueList&&this._valueList[i]?this._valueList[i]:_),w.icon=x,w.iconsize=f,w.parentId=o,w.disabled=u,w.parentElement=l,w.element=t,w.locked=c,w.selected=m,w.checked=p,w.isExpanded=d,w.treeInstance=this,this.itemMapping[n-1]={element:r,item:w},this.itemMapping["id"+r.id]=this.itemMapping[n-1];var b=!1,I=!1;if(b=!1,this.rtl&&(e(w.element).css("float","right"),e(w.element).css("clear","both")),!b||!I)if(e(r.firstChild).length>0){if(w.icon){var f=w.iconsize;f||(f=16);var x=e('<img width="'+f+'" height="'+f+'" style="float: left;" class="itemicon" src="'+w.icon+'"/>');e(r).prepend(x),x.css("margin-right","4px"),this.rtl&&(x.css("margin-right","0px"),x.css("margin-left","4px"),x.css("float","right"))}var q=r.innerHTML.indexOf("<ul");if(-1==q&&(q=r.innerHTML.indexOf("<UL")),-1==q)w.originalTitle=r.innerHTML,r.innerHTML='<div style="display: inline-block;">'+r.innerHTML+"</div>",w.titleElement=e(e(r)[0].firstChild);else{var j=r.innerHTML.substring(0,q);j=e.trim(j),w.originalTitle=j,j=e('<div style="display: inline-block;">'+j+"</div>");var y=e(r).find("ul:first");y.remove(),r.innerHTML="",e(r).prepend(j),e(r).append(y),w.titleElement=j,this.rtl&&(j.css("float","right"),y.css("padding-right","10px"))}if(e.jqx.browser.msie&&e.jqx.browser.version<8){e(e(r)[0].firstChild).css("display","inline-block");var T=!1;0==this._measureItem.parents().length&&(e(document.body).append(this._measureItem),T=!0),this._measureItem.css("min-width","20px"),this._measureItem[0].innerHTML=e(w.titleElement).text();var C=this._measureItem.width();w.icon&&(C+=20),e(e(item.titleElement).find("img")).length>0&&(C+=20),e(e(r)[0].firstChild).css("max-width",C+"px"),T&&this._measureItem.remove()}}else w.originalTitle="Item",e(r).append(e("<span>Item</span>")),e(r.firstChild).wrap("<span/>"),w.titleElement=e(r)[0].firstChild,e.jqx.browser.msie&&e.jqx.browser.version<8&&e(r.firstChild).css("display","inline-block");var S=e(w.titleElement),P=this.toThemeProperty("jqx-rc-all");if(this.allowDrag&&S.addClass("draggable"),null==g||void 0==g?(g=w.titleElement,w.label=e.trim(S.text())):w.label=g,e(r).addClass(this.toThemeProperty("jqx-tree-item-li")),this.rtl&&e(r).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")),P+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item"),this.rtl&&(P+=" "+this.toThemeProperty("jqx-tree-item-rtl")),S[0].className=S[0].className+" "+P,w.level=e(t).parents("li").length,w.hasItems=e(t).find("li").length>0,this.rtl&&w.parentElement&&!this.checkboxes,this.checkboxes){if(!this.host.jqxCheckBox)throw new Error("jqxTree: Missing reference to jqxcheckbox.js.");var k=e('<div style="position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>');if(k.width(parseInt(this.checkSize)),k.height(parseInt(this.checkSize)),e(r).prepend(k),this.rtl&&(k.css("float","right"),k.css("position","static")),k.jqxCheckBox({hasInput:!1,checked:w.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:u,theme:this.theme}),this.rtl){var E=5;w.parentElement?k.css("margin-right",E+5+"px"):k.css("margin-right",E+"px")}else S.css("margin-left",parseInt(this.checkSize)+6);w.checkBoxElement=k[0],k[0].treeItem=w;var H=S.outerHeight()/2-1-parseInt(this.checkSize)/2;k.css("margin-top",H),e.jqx.browser.msie&&e.jqx.browser.version<8?(S.css("width","1%"),S.css("margin-left",parseInt(this.checkSize)+25)):w.hasItems&&(this.rtl||k.css("margin-left",this.toggleIndicatorSize))}else e.jqx.browser.msie&&e.jqx.browser.version<8&&S.css("width","1%");u&&this.disableItem(w.element),m&&this.selectItem(w.element),e.jqx.browser.msie&&e.jqx.browser.version<8&&(e(r).css("margin","0px"),e(r).css("padding","0px"))}},destroy:function(){this.removeHandler(e(window),"resize.jqxtree"+this.element.id),this.host.removeClass(),this.isTouchDevice()&&(this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var t=this,i=this.isTouchDevice();e.each(this.items,function(){var r=this,s=e(this.element),a=i?e.jqx.mobile.getTouchEventName("touchend"):"click";t.removeHandler(e(r.checkBoxElement),a);var n=e(r.titleElement);t.removeHandler(s);var o=t.allowDrag&&t._enableDragDrop;o?(t.removeHandler(n,"mousedown.item"),t.removeHandler(n,"click"),t.removeHandler(n,"dblclick"),t.removeHandler(n,"mouseenter"),t.removeHandler(n,"mouseleave")):t.removeHandler(n),$arrowSpan=e(r.arrow),$arrowSpan.length>0&&(t.removeHandler($arrowSpan,a),t.removeHandler($arrowSpan,"selectstart"),t.removeHandler($arrowSpan,"mouseup"),i||(t.removeHandler($arrowSpan,"mouseenter"),t.removeHandler($arrowSpan,"mouseleave")),t.removeHandler(n,"selectstart")),e.jqx.browser.opera&&t.removeHandler(n,"mousedown.item"),"click"!=t.toggleMode&&t.removeHandler(n,"click"),t.removeHandler(n,t.toggleMode)}),this.panel&&(this.panel.jqxPanel("destroy"),this.panel=null),this.host.remove()},_raiseEvent:function(t,i){void 0==i&&(i={owner:null});var r=this.events[t];args=i,args.owner=this;var s=new e.Event(r);s.owner=this,s.args=args;var a=this.host.trigger(s);return a},propertyChangedHandler:function(t,i,r,s){if(void 0!=this.isInitialized&&0!=this.isInitialized){if("submitCheckedItems"==i&&t._updateInputSelection(),"disabled"==i&&t._updateDisabledState(),"theme"==i&&t._applyTheme(r,s),"keyboardNavigation"==i&&(t.enableKeyboardNavigation=s),("width"==i||"height"==i)&&(t.refresh(),t._initialize(),t._calculateWidth(),t.host.jqxPanel)){var a="fixed";(null==this.height||"auto"==this.height)&&(a="verticalwrap"),(null==this.width||"auto"==this.width)&&(a="fixed"==a?"horizontalwrap":"wrap"),t.panel.jqxPanel({sizeMode:a})}if("touchMode"==i&&(t._isTouchDevice=null,s&&(t.enableHover=!1),t._render()),("source"==i||"checkboxes"==i)&&null!=this.source){var n=[];e.each(t.items,function(){this.isExpanded&&(n[n.length]={label:this.label,level:this.level})});var o=t.loadItems(t.source);t.host.jqxPanel?t.panel.jqxPanel("setcontent",o):t.element.innerHTML=o;var h=t.disabled,l=t.host.find("ul:first");l.length>0&&(t.createTree(l[0]),t._render());var d=t,c=d.animationShowDuration;d.animationShowDuration=0,t.disabled=!1,n.length>0&&e.each(t.items,function(){for(var e=0;e<n.length;e++)if(n[e].label==this.label&&n[e].level==this.level){var t=d.getItem(this.element);d._expandItem(d,t)}}),t.disabled=h,d.animationShowDuration=c}"hasThreeStates"==i&&(t._render(),t._updateCheckStates()),"toggleIndicatorSize"==i&&(t._updateCheckLayout(),t._render())}}})}(jqxBaseFramework),function(e){e.jqx._jqxTree.jqxTreeItem=function(e,t){var i={label:null,id:e,parentId:t,parentElement:null,parentItem:null,disabled:!1,selected:!1,locked:!1,checked:!1,level:0,isExpanded:!1,hasItems:!1,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null};return i}}(jqxBaseFramework),function(e){e.jqx.jqxWidget("jqxExpander","",{}),e.extend(e.jqx._jqxExpander.prototype,{defineInstance:function(){var t={width:"auto",height:"auto",expanded:!0,expandAnimationDuration:259,collapseAnimationDuration:250,animationType:"slide",toggleMode:"click",showArrow:!0,arrowPosition:"right",headerPosition:"top",disabled:!1,initContent:null,rtl:!1,easing:"easeInOutSine",aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["expanding","expanded","collapsing","collapsed","resize"]};return e.extend(!0,this,t),t},createInstance:function(){this._isTouchDevice=e.jqx.mobile.isTouchDevice(),e.jqx.aria(this),this._cachedHTMLStructure=this.host.html(),this.render()},expand:function(){if(0==this.disabled&&0==this.expanded&&1==this._expandChecker){var t=this;switch(this._expandChecker=0,this._raiseEvent("0"),this._header.removeClass(this.toThemeProperty("jqx-fill-state-normal")),this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded")),"top"==this.headerPosition?(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"))):"bottom"==this.headerPosition&&(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-hover")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-hover")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"))),this.animationType){case"slide":"top"==this.headerPosition?this._content.slideDown(this.expandAnimationDuration,this.easing,function(){t.expanded=!0,e.jqx.aria(t._header,"aria-expanded",!0),e.jqx.aria(t._content,"aria-hidden",!1),t._raiseEvent("1"),t.initContent&&0==t._initialized&&(t.initContent(),t._initialized=!0)}):"bottom"==this.headerPosition&&(this._content.css({display:"inherit",height:0}),e.jqx.browser.msie&&e.jqx.browser.version<8&&this._content.css("display","block"),1==this._cntntEmpty?this._content.animate({height:0},this.expandAnimationDuration,this.easing,function(){t.expanded=!0,e.jqx.aria(t._header,"aria-expanded",!0),e.jqx.aria(t._content,"aria-hidden",!1),t._raiseEvent("1"),t.initContent&&0==t._initialized&&(t.initContent(),t._initialized=!0)}):this._content.animate({height:this._contentHeight},this.expandAnimationDuration,this.easing,function(){t.expanded=!0,e.jqx.aria(t._header,"aria-expanded",!0),e.jqx.aria(t._content,"aria-hidden",!1),t._raiseEvent("1"),t.initContent&&0==t._initialized&&(t.initContent(),t._initialized=!0)}));break;case"fade":this._content.fadeIn(this.expandAnimationDuration,this.easing,function(){t.expanded=!0,e.jqx.aria(t._header,"aria-expanded",!0),e.jqx.aria(t._content,"aria-hidden",!1),t._raiseEvent("1"),t.initContent&&0==t._initialized&&(t.initContent(),t._initialized=!0)});break;case"none":this._content.css("display","inherit"),this.expanded=!0,e.jqx.aria(t._header,"aria-expanded",!0),e.jqx.aria(t._content,"aria-hidden",!1),this._raiseEvent("1"),this.initContent&&0==this._initialized&&(this.initContent(),this._initialized=!0)}}},collapse:function(){if(0==this.disabled&&1==this.expanded&&0==this._expandChecker){var t=this;switch(this._expandChecker=1,this._raiseEvent("2"),this._header.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded")),this._header.addClass(this.toThemeProperty("jqx-fill-state-normal")),"top"==this.headerPosition?(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),t._hovered&&this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-hover")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"))):"bottom"==this.headerPosition&&(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-expanded-top")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")),t._hovered&&this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-hover"))),this.animationType){case"slide":"top"==this.headerPosition?this._content.slideUp(this.collapseAnimationDuration,this.easing,function(){t.expanded=!1,e.jqx.aria(t._header,"aria-expanded",!1),e.jqx.aria(t._content,"aria-hidden",!0),t._raiseEvent("3")
}):"bottom"==this.headerPosition&&this._content.animate({height:0},this.expandAnimationDuration,function(){t._content.css("display","none"),t.expanded=!1,e.jqx.aria(t._header,"aria-expanded",!1),e.jqx.aria(t._content,"aria-hidden",!0),t._raiseEvent("3")});break;case"fade":this._content.fadeOut(this.collapseAnimationDuration,this.easing,function(){t.expanded=!1,e.jqx.aria(t._header,"aria-expanded",!1),e.jqx.aria(t._content,"aria-hidden",!0),t._raiseEvent("3")});break;case"none":this._content.css("display","none"),this.expanded=!1,e.jqx.aria(t._header,"aria-expanded",!1),e.jqx.aria(t._content,"aria-hidden",!0),this._raiseEvent("3")}}},setHeaderContent:function(e){this._header_text.html(e),this.invalidate()},getHeaderContent:function(){return this._header_text.html()},setContent:function(e){this._content.html(e),this._checkContent(),this.invalidate()},getContent:function(){return this._content.html()},enable:function(){this.disabled=!1,this.refresh(),e.jqx.aria(this,"aria-disabled",!1)},disable:function(){this.disabled=!0,this.refresh(),e.jqx.aria(this,"aria-disabled",!0)},invalidate:function(){e.jqx.isHidden(this.host)||this._setSize()},refresh:function(e){1!=e&&(this._removeHandlers(),1==this.showArrow?this._arrow.css("display","inherit"):this._arrow.css("display","none"),this._setTheme(),this._setSize(),0==this.disabled&&this._toggle(),this._keyBoard())},render:function(){this.widgetID=this.element.id,this._header&&(this._header.removeClass(this.toThemeProperty("jqx-expander-header-content")),this._header.removeClass(this.toThemeProperty("jqx-expander-header")),this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded")),this._header.removeClass(this.toThemeProperty("jqx-widget-header")),this._header_text.removeClass(this.toThemeProperty("jqx-expander-header-content")),this._header_text.removeClass(this.toThemeProperty("jqx-expander-header")),this._header_text.removeClass(this.toThemeProperty("jqx-widget-header")),this._header_text.removeClass(this.toThemeProperty("jqx-expander-header-expanded")),this._header.attr("tabindex",null),this._content.attr("tabindex",null),this._header.css("margin-top",0),this._header[0].innerHTML=this._header_text[0].innerHTML,"bottom"==this.headerPosition&&(this._header.detach(),this.host.prepend(this._header))),this._header_temp=this.host.children("div:eq(0)"),this._header_temp.wrap("<div></div>"),this._header=this.host.children("div:eq(0)"),this._content=this.host.children("div:eq(1)"),"bottom"==this.headerPosition&&(this._header.detach(),this.host.append(this._header)),this._header_text=this._header.children("div:eq(0)");var t=this._header_text[0].className;this._header.addClass(t),this._header_text.removeClass(),this._header_text.addClass(this.rtl?this.toThemeProperty("jqx-expander-header-content-rtl"):this.toThemeProperty("jqx-expander-header-content")),this._header.append("<div></div>"),this._arrow=this._header.children("div:eq(1)"),1==this.showArrow?this._arrow.css("display","inherit"):this._arrow.css("display","none"),this.tI=-1,void 0==this._header.attr("tabindex")&&(this.tI++,this._header.attr("tabindex",this.tI)),void 0==this._content.attr("tabindex")&&(this.tI++,this._content.attr("tabindex",this.tI)),this._setTheme(),this._checkContent();var i="Invalid jqxExpander structure. Please add only two child div elements to your jqxExpander div that will represent the expander's header and content.";try{if(0==this._header.length||0==this._content.length||this.host.children().length<2||this.host.children().length>2)throw i}catch(r){alert(r)}this._expandChecker,this._initialized,1==this.expanded?("top"==this.headerPosition?(this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded"))):"bottom"==this.headerPosition&&(this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-expanded-top"))),this.initContent&&(this._setSize(),this.initContent()),this._initialized=!0,this._expandChecker=0):0==this.expanded&&(this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this._arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),"top"==this.headerPosition?(this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top"))):"bottom"==this.headerPosition&&(this._arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom"))),this._initialized=!1,this._expandChecker=1,this._content.css("display","none")),this._setSize(),0==this.disabled&&this._toggle(),this._keyBoard();var s=this;e.jqx.utilities.resize(this.host,function(){s.invalidate()})},destroy:function(){this.removeHandler(e(window),"resize.expander"+this.widgetID),this.host.remove(),e(this.element).removeData("jqxExpander")},focus:function(){try{0==this.disabled&&this._header.focus()}catch(e){}},propertyChangedHandler:function(e,t,i,r){"expanded"==t?1==r&&0==i?(this.expanded=!1,this.expand()):0==r&&1==i&&(this.expanded=!0,this.collapse()):this.refresh()},_raiseEvent:function(t,i){var r=this.events[t],s=new e.Event(r);s.owner=this,s.args=i;try{var a=this.host.trigger(s)}catch(n){}return a},resize:function(e,t){this.width=e,this.height=t,this._setSize()},_setSize:function(){this.host.width(this.width),this.host.height(this.height),this._header.height("auto"),this._header.css("min-height",this._arrow.height());var e=this.arrowPosition;if(this.rtl)switch(e){case"left":e="right";break;case"right":e="left"}if("right"==e?(this._header_text.css({"float":"left","margin-left":"0px"}),this._arrow.css({"float":"right",position:"relative"})):"left"==e&&("auto"==this.width?(this._header_text.css({"float":"left","margin-left":"17px"}),this._arrow.css({"float":"left",position:"absolute"})):(this._header_text.css({"float":"right","margin-left":"0px"}),this._arrow.css({"float":"left",position:"relative"}))),this._arrow.css("margin-top",this._header_text.height()/2-this._arrow.height()/2),"auto"==this.height)this._content.height("auto"),this._contentHeight=this._content.height();else{this._content.height("auto");var t=Math.round(this.host.height())-Math.round(this._header.outerHeight())-1;0>t&&(t=0),this._contentHeight||(this._contentHeight=this._content.height()),t!=this._contentHeight?(this._content.height(t),this._contentHeight=Math.round(this._content.outerHeight())):this._content.height(this._contentHeight)}},_toggle:function(){var t=this;if(0==this._isTouchDevice)switch(this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled")),this.toggleMode){case"click":this.addHandler(this._header,"click.expander"+this.widgetID,function(){t._animate()});break;case"dblclick":this.addHandler(this._header,"dblclick.expander"+this.widgetID,function(){t._animate()});break;case"none":this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"))}else{if("none"==this.toggleMode)return;this.addHandler(this._header,e.jqx.mobile.getTouchEventName("touchstart")+"."+this.widgetID,function(){t._animate()})}},_animate:function(){1==this.expanded?(this.collapse(),this._header.addClass(this.toThemeProperty("jqx-fill-state-hover")),this._header.addClass(this.toThemeProperty("jqx-expander-header-hover")),"top"==this.headerPosition?(this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-top-hover")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-down-hover"))):"bottom"==this.headerPosition&&(this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow-up-hover")))):(this.expand(),this._header.removeClass(this.toThemeProperty("jqx-fill-state-hover")),this._header.removeClass(this.toThemeProperty("jqx-expander-header-hover")),"top"==this.headerPosition?(this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-top-hover")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-down-hover"))):"bottom"==this.headerPosition&&(this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-bottom-hover")),this._arrow.removeClass(this.toThemeProperty("jqx-expander-arrow-up-hover"))))},_removeHandlers:function(){this.removeHandler(this._header,"click.expander"+this.widgetID),this.removeHandler(this._header,"dblclick.expander"+this.widgetID),this.removeHandler(this._header,"mouseenter.expander"+this.widgetID),this.removeHandler(this._header,"mouseleave.expander"+this.widgetID)},_setTheme:function(){var e=this;this.host.addClass(this.toThemeProperty("jqx-widget")),this._header.addClass(this.toThemeProperty("jqx-widget-header")),this._content.addClass(this.toThemeProperty("jqx-widget-content")),1==this.rtl&&this.host.addClass(this.toThemeProperty("jqx-rtl")),0==this.disabled?(this._header.removeClass(this.toThemeProperty("jqx-expander-header-disabled")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),1==this.expanded?(this._header.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._header.addClass(this.toThemeProperty("jqx-expander-header-expanded"))):(this._header.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._header.removeClass(this.toThemeProperty("jqx-expander-header-expanded"))),this._hovered=!1,e._isTouchDevice||(this.addHandler(this._header,"mouseenter.expander"+this.widgetID,function(){e._hovered=!0,1==e._expandChecker&&(e._header.removeClass(e.toThemeProperty("jqx-fill-state-normal")),e._header.removeClass(e.toThemeProperty("jqx-fill-state-pressed")),e._header.addClass(e.toThemeProperty("jqx-fill-state-hover")),e._header.addClass(e.toThemeProperty("jqx-expander-header-hover")),"top"==e.headerPosition?(e._arrow.addClass(e.expanded?e.toThemeProperty("jqx-icon-arrow-up-hover"):e.toThemeProperty("jqx-icon-arrow-down-hover")),e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-top-hover")),e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-down-hover"))):"bottom"==e.headerPosition&&(e.expanded&&e._arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover")),e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-bottom-hover")),e._arrow.addClass(e.toThemeProperty("jqx-expander-arrow-up-hover"))))}),this.addHandler(this._header,"mouseleave.expander"+this.widgetID,function(){e._hovered=!1,e._header.removeClass(e.toThemeProperty("jqx-fill-state-hover")),e._arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-hover")),e._arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-hover")),e._header.removeClass(e.toThemeProperty("jqx-expander-header-hover")),"top"==e.headerPosition?(e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-top-hover")),e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-down-hover"))):"bottom"==e.headerPosition&&(e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-bottom-hover")),e._arrow.removeClass(e.toThemeProperty("jqx-expander-arrow-up-hover"))),e._header.addClass(1==e._expandChecker?e.toThemeProperty("jqx-fill-state-normal"):e.toThemeProperty("jqx-fill-state-pressed"))}))):(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this._header.addClass(this.toThemeProperty("jqx-expander-header-disabled"))),this.host.addClass(this.toThemeProperty("jqx-expander")),this._header.addClass(this.toThemeProperty("jqx-expander-header")),this._content.addClass(this.toThemeProperty("jqx-expander-content")),"top"==this.headerPosition?this._content.addClass(this.toThemeProperty("jqx-expander-content-bottom")):"bottom"==this.headerPosition&&this._content.addClass(this.toThemeProperty("jqx-expander-content-top")),this._arrow.addClass(this.toThemeProperty("jqx-expander-arrow"))},_checkContent:function(){this._cntntEmpty=/^\s*$/.test(this._content.html()),1==this._cntntEmpty?(this._content.height(0),this._content.addClass(this.toThemeProperty("jqx-expander-content-empty"))):(this._content.height(this._contentHeight),this._content.removeClass(this.toThemeProperty("jqx-expander-content-empty")))},_keyBoard:function(){var e=this;this._focus(),this.addHandler(this.host,"keydown.expander"+this.widgetID,function(t){var i=!1;if((1==e.focusedH||1==e.focusedC)&&0==e.disabled){switch(t.keyCode){case 13:case 32:"none"!=e.toggleMode&&(1==e.focusedH&&e._animate(),i=!0);break;case 38:1==t.ctrlKey&&1==e.focusedC&&e._header.focus(),i=!0;break;case 40:1==t.ctrlKey&&1==e.focusedH&&e._content.focus(),i=!0}return!0}return i&&t.preventDefault&&t.preventDefault(),!i})},_focus:function(){var t=this;this.addHandler(this._header,"focus.expander"+this.widgetID,function(){t.focusedH=!0,e.jqx.aria(t._header,"aria-selected",!0),t._header.addClass(t.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._header,"blur.expander"+this.widgetID,function(){t.focusedH=!1,e.jqx.aria(t._header,"aria-selected",!1),t._header.removeClass(t.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._header_text,"focus.expander"+this.widgetID,function(){t._header.focus()}),this.addHandler(this._arrow,"focus.expander"+this.widgetID,function(){t._header.focus()}),this.addHandler(this._content,"focus.expander"+this.widgetID,function(){t.focusedC=!0,t._content.addClass(t.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._content,"blur.expander"+this.widgetID,function(){t.focusedC=!1,t._content.removeClass(t.toThemeProperty("jqx-fill-state-focus"))})}})}(jqxBaseFramework),function(){}.call(this);