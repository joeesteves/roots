!function(e){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.enabletooltips=!0,this.columngroup=null,this.filterdelay=800,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){var i=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)}else if(this[e.toLowerCase()]){var i=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i)}},this._initfields=function(i){if(null!=i){var r=this.that;if(e.jqx.hasProperty(i,"dataField")&&(this.datafield=e.jqx.get(i,"dataField")),this.displayfield=e.jqx.hasProperty(i,"displayField")?e.jqx.get(i,"displayField"):this.datafield,e.jqx.hasProperty(i,"enableTooltips")&&(this.enabletooltips=e.jqx.get(i,"enableTooltips")),this.text=e.jqx.hasProperty(i,"text")?e.jqx.get(i,"text"):this.displayfield,e.jqx.hasProperty(i,"sortable")&&(this.sortable=e.jqx.get(i,"sortable")),e.jqx.hasProperty(i,"hideable")&&(this.hideable=e.jqx.get(i,"hideable")),e.jqx.hasProperty(i,"hidden")&&(this.hidden=e.jqx.get(i,"hidden")),e.jqx.hasProperty(i,"groupable")&&(this.groupable=e.jqx.get(i,"groupable")),e.jqx.hasProperty(i,"renderer")&&(this.renderer=e.jqx.get(i,"renderer")),e.jqx.hasProperty(i,"align")&&(this.align=e.jqx.get(i,"align")),e.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=e.jqx.get(i,"cellsAlign")),e.jqx.hasProperty(i,"cellsFormat")&&(this.cellsformat=e.jqx.get(i,"cellsFormat")),e.jqx.hasProperty(i,"width")&&(this.width=e.jqx.get(i,"width")),e.jqx.hasProperty(i,"minWidth")&&(this.minwidth=e.jqx.get(i,"minWidth")),e.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=e.jqx.get(i,"maxWidth")),e.jqx.hasProperty(i,"cellsRenderer")&&(this.cellsrenderer=e.jqx.get(i,"cellsRenderer")),e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"checkChange")&&(this.checkchange=e.jqx.get(i,"checkChange")),e.jqx.hasProperty(i,"buttonClick")&&(this.buttonclick=e.jqx.get(i,"buttonClick")),e.jqx.hasProperty(i,"pinned")&&(this.pinned=e.jqx.get(i,"pinned")),e.jqx.hasProperty(i,"visibleIndex")&&(this.visibleindex=e.jqx.get(i,"visibleIndex")),e.jqx.hasProperty(i,"filterable")&&(this.filterable=e.jqx.get(i,"filterable")),e.jqx.hasProperty(i,"filter")&&(this.filter=e.jqx.get(i,"filter")),e.jqx.hasProperty(i,"resizable")&&(this.resizable=e.jqx.get(i,"resizable")),e.jqx.hasProperty(i,"editable")&&(this.editable=e.jqx.get(i,"editable")),e.jqx.hasProperty(i,"initEditor")&&(this.initeditor=e.jqx.get(i,"initEditor")),e.jqx.hasProperty(i,"createEditor")&&(this.createeditor=e.jqx.get(i,"createEditor")),e.jqx.hasProperty(i,"destroyEditor")&&(this.destroyeditor=e.jqx.get(i,"destroyEditor")),e.jqx.hasProperty(i,"getEditorValue")&&(this.geteditorvalue=e.jqx.get(i,"getEditorValue")),e.jqx.hasProperty(i,"validation")&&(this.validation=e.jqx.get(i,"validation")),e.jqx.hasProperty(i,"cellBeginEdit")&&(this.cellbeginedit=e.jqx.get(i,"cellBeginEdit")),e.jqx.hasProperty(i,"cellEndEdit")&&(this.cellendedit=e.jqx.get(i,"cellEndEdit")),e.jqx.hasProperty(i,"className")&&(this.classname=e.jqx.get(i,"className")),e.jqx.hasProperty(i,"cellClassName")&&(this.cellclassname=e.jqx.get(i,"cellClassName")),e.jqx.hasProperty(i,"menu")&&(this.menu=e.jqx.get(i,"menu")),e.jqx.hasProperty(i,"aggregates")&&(this.aggregates=e.jqx.get(i,"aggregates")),e.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesrenderer=e.jqx.get(i,"aggregatesRenderer")),e.jqx.hasProperty(i,"createFilterWidget")&&(this.createfilterwidget=e.jqx.get(i,"createFilterWidget")),e.jqx.hasProperty(i,"filterType")&&(this.filtertype=e.jqx.get(i,"filterType")),e.jqx.hasProperty(i,"filterDelay")&&(this.filterdelay=e.jqx.get(i,"filterDelay")),e.jqx.hasProperty(i,"rendered")&&(this.rendered=e.jqx.get(i,"rendered")),e.jqx.hasProperty(i,"exportable")&&(this.exportable=e.jqx.get(i,"exportable")),e.jqx.hasProperty(i,"filterItems")&&(this.filteritems=e.jqx.get(i,"filterItems")),e.jqx.hasProperty(i,"cellValueChanging")&&(this.cellvaluechanging=e.jqx.get(i,"cellValueChanging")),e.jqx.hasProperty(i,"draggable")&&(this.draggable=e.jqx.get(i,"draggable")),e.jqx.hasProperty(i,"filterCondition")&&(this.filtercondition=e.jqx.get(i,"filterCondition")),e.jqx.hasProperty(i,"threeStateCheckbox")&&(this.threestatecheckbox=e.jqx.get(i,"threeStateCheckbox")),e.jqx.hasProperty(i,"nullable")&&(this.nullable=e.jqx.get(i,"nullable")),e.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=e.jqx.get(i,"columnGroup")),!i instanceof String&&"string"!=typeof i)for(var s in i)if(!r.hasOwnProperty(s)&&!r.hasOwnProperty(s.toLowerCase()))throw t.host.remove(),new Error("jqxGrid: Invalid property name - "+s+".")}},this._initfields(i),this}function i(e,t){return this.setdata=function(e){null!=e&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}e.jqx.jqxWidget("jqxGrid","",{}),e.extend(e.jqx._jqxGrid.prototype,{defineInstance:function(){var t={disabled:!1,width:600,height:400,pagerheight:28,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:25,columnsheight:25,filterrowheight:31,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",pageable:!1,pagermode:"default",pagerbuttonscount:5,groupable:!1,sortable:!1,filterable:!1,filtermode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showtoolbar:!1,toolbarheight:34,showstatusbar:!1,statusbarheight:34,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:new Array,selectedcells:new Array,autobind:!0,selectedcell:null,tableZIndex:799,headerZIndex:299,updatefilterconditions:null,showaggregates:!1,showfilterrow:!1,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:e.jqx.utilities.scrollBarSize,touchscrollbarsize:e.jqx.utilities.touchScrollBarSize,scrollbarautoshow:e.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsreorder:!1,columnsmenuwidth:15,autoshowcolumnsmenubutton:!0,popupwidth:"auto",sorttogglestates:2,rendergridrows:null,enableanimations:!0,enabletooltips:!1,selectionmode:"singlerow",enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:25,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,horizontalscrollbarlargestep:50,keyboardnavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,_updating:!1,_pagescache:new Array,_pageviews:new Array,_cellscache:new Array,_rowdetailscache:new Array,_rowdetailselementscache:new Array,_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],events:["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]};return e.extend(!0,this,t),t},createInstance:function(){this.that=this,this.pagesize=parseInt(this.pagesize),this.toolbarheight=parseInt(this.toolbarheight),this.columnsheight=parseInt(this.columnsheight),this.filterrowheight=parseInt(this.filterrowheight),this.statusbarheight=parseInt(this.statusbarheight),this.groupsheaderheight=parseInt(this.groupsheaderheight);var t="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+this.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";if(this.element.innerText="",this.element.innerHTML="",15!=e.jqx.utilities.scrollBarSize&&(this.scrollbarsize=e.jqx.utilities.scrollBarSize),this.source){if(!this.source.dataBind){if(!e.jqx.dataAdapter)throw new Error("jqxGrid: Missing reference to jqxdata.js");this.source=new e.jqx.dataAdapter(this.source)}var i=this.source._source.datafields;i&&i.length>0&&(this.editmode=this.editmode.toLowerCase(),this.selectionmode=this.selectionmode.toLowerCase())}this.host.attr("role","grid"),this.host.attr("align","left"),this.element.innerHTML=t,this.host.addClass(this.toTP("jqx-grid")),this.host.addClass(this.toTP("jqx-reset")),this.host.addClass(this.toTP("jqx-rc-all")),this.host.addClass(this.toTP("jqx-widget")),this.host.addClass(this.toTP("jqx-widget-content")),this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var r=this.host.find("#verticalScrollBar"+this.element.id),s=this.host.find("#horizontalScrollBar"+this.element.id);if(this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),!r.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(this.editors=new Array,this.vScrollBar=r.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=s.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1}),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.groupsheader=this.host.find("#groupsheader"),this.groupsheader.addClass(this.toTP("jqx-grid-groups-header")),this.groupsheader.addClass(this.toTP("jqx-widget-header")),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance,this.gridtable=null,this.isNestedGrid=this.host.parent()?9999==this.host.parent().css("z-index"):!1,this.touchdevice=this.isTouchDevice(),this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this.rowdetailstemplate&&(void 0==this.rowdetailstemplate.rowdetails&&(this.rowdetailstemplate.rowdetails="<div></div>"),void 0==this.rowdetailstemplate.rowdetailsheight&&(this.rowdetailstemplate.rowdetailsheight=200),void 0==this.rowdetailstemplate.rowdetailshidden&&(this.rowdetailstemplate.rowdetailshidden=!0)),this.showfilterrow&&!this.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(this.autorowheight&&!this.autoheight&&!this.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(this.virtualmode&&null==this.rendergridrows)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(this.virtualmode&&!this.pageable&&this.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!this._testmodules()){if(this._builddataloadelement(),this._cachedcolumns=this.columns,25!=this.rowsheight&&this._measureElement("cell"),(25!=this.columnsheight||this.columngroups)&&this._measureElement("column"),this.source){var i=this.source.datafields;if(null==i&&this.source._source&&(i=this.source._source.datafields),i)for(var a=0;a<this.columns.length;a++){var o=this.columns[a];if(o&&o.cellsformat&&o.cellsformat.length>2)for(var l=0;l<i.length;l++)if(i[l].name==o.datafield&&!i[l].format){i[l].format=o.cellsformat;break}}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this._arrange(),this.pageable&&this._initpager&&this._initpager(),this.tableheight=null;var n=this.that,d=function(){n.content&&(n.content[0].scrollTop=0,n.content[0].scrollLeft=0),n.gridcontent&&(n.gridcontent[0].scrollLeft=0,n.gridcontent[0].scrollTop=0)};this.addHandler(this.content,"mousedown",function(){d()}),this.addHandler(this.content,"scroll",function(){return d(),!1}),this.showfilterrow||(this.showstatusbar||this.showtoolbar||this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),this.enablebrowserselection&&(this.content.removeClass("jqx-disableselect"),this.host.removeClass("jqx-disableselect")),this._resizeWindow(),this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.hasTransform=e.jqx.utilities.hasTransform(this.host),"logical"==this.scrollmode&&(this.vScrollInstance.thumbStep=this.rowsheight,this.vScrollInstance.step=this.rowsheight),e.jqx.isHidden(this.host)||(this.filterable||this.groupable||this.sortable)&&this._initmenu()}},_resizeWindow:function(){var t=this.that;if(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%")){this._updatesizeonwindowresize=!0,e.jqx.utilities.resize(this.host,function(i){var r=e(window).width(),s=e(window).height(),a=t.host.width(),o=t.host.height();if(t.autoheight&&(t._lastHostWidth=s),t._lastHostWidth!=a||t._lastHostHeight!=o){if(t.touchdevice&&t.editcell&&"orientationchange"!==i)return;t._updatesize(t._lastHostWidth!=a,t._lastHostHeight!=o)}t._lastWidth=r,t._lastHeight=s,t._lastHostWidth=a,t._lastHostHeight=o});var i=t.host.width(),r=t.host.height();t._lastHostWidth=i,t._lastHostHeight=r}},_builddataloadelement:function(){if(this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=e('<div style="overflow: hidden; position: absolute;"></div>'),this.showdefaultloadelement){var t=e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),t.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(t)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement)},_measureElement:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");i.addClass(this.toTP("jqx-widget")),e(document.body).append(i),"cell"==t?this._cellheight=i.height():this._columnheight=i.height(),i.remove()},_measureMenuElement:function(){var t=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-menu")),t.addClass(this.toTP("jqx-menu-item-top")),t.addClass(this.toTP("jqx-fill-state-normal")),e(document.body).append(t);var i=t.outerHeight();return t.remove(),i},_measureElementWidth:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>"+t+"</span>");i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),e(document.body).append(i);var r=i.outerWidth()+20;return i.remove(),r},_getBodyOffset:function(){var t=0,i=0;return"0px"!=e("body").css("border-top-width")&&(t=parseInt(e("body").css("border-top-width")),isNaN(t)&&(t=0)),"0px"!=e("body").css("border-left-width")&&(i=parseInt(e("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_testmodules:function(){var t="",i=this.that,r=function(){""!=t.length&&(t+=",")};if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(r(),t+=" jqxmenu.js"),this.host.jqxScrollBar||(r(),t+=" jqxscrollbar.js"),this.host.jqxButton||(r(),t+=" jqxbuttons.js"),e.jqx.dataAdapter||(r(),t+=" jqxdata.js"),this.pageable&&!this.gotopage&&(r(),t+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(r(),t+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(r(),t+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(r(),t+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(r(),t+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(r(),t+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(r(),t+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(r(),t+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(r(),t+=" jqxgrid.selection.js"),""!=t||this.editable||this.filterable||this.pageable){var s=[],a=function(e){switch(e){case"checkbox":i.host.jqxCheckBox||s.checkbox||(s.checkbox=!0,r(),t+=" jqxcheckbox.js");break;case"numberinput":i.host.jqxNumberInput||s.numberinput||(s.numberinput=!0,r(),t+=" jqxnumberinput.js");break;case"datetimeinput":i.host.jqxDateTimeInput||s.datetimeinput?i.host.jqxCalendar||s.calendar||(r(),t+=" jqxcalendar.js"):(r(),s.datetimeinput=!0,t+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":i.host.jqxComboBox||s.combobox?i.host.jqxListBox||s.listbox||(r(),s.listbox=!0,t+=" jqxlistbox.js"):(r(),s.combobox=!0,t+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":i.host.jqxDropDownList||s.dropdownlist?i.host.jqxListBox||s.listbox||(r(),s.listbox=!0,t+=" jqxlistbox.js"):(r(),s.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}};(this.filterable||this.pageable)&&a("dropdownlist");for(var o=0;o<this.columns.length;o++)if(void 0!=this.columns[o]){var l=this.columns[o].columntype;if(a(l),this.filterable&&this.showfilterrow){var l=this.columns[o].filtertype;("checkedlist"==l||"bool"==l)&&a("checkbox"),"date"==l&&a("datetimeinput")}}if(""!=t)throw new Error("jqxGrid: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper.focus();var e=this.that;setTimeout(function(){e.wrapper.focus()},25),this.focused=!0}catch(t){}},hiddenParent:function(){return e.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(t,i){if(!this._loading){var r=this.that;r._newmax=null;var s=r.host.width(),a=r.host.height();r._oldWidth||(r._oldWidth=s),r._oldHeight||(r._oldHeight=a),r._resizeTimer&&clearTimeout(r._resizeTimer);var o=5;r._resizeTimer=setTimeout(function(){if(r.resizingGrid=!0,!e.jqx.isHidden(r.host)){if(r.editcell&&(r.endcelledit(r.editcell.row,r.editcell.column,!0,!0),r._oldselectedcell=null),l!=r._oldHeight||1==i){var a=r.groupable&&r.groups.length>0,o=r.vScrollBar.css("visibility");if(!r.autoheight){if(r.virtualmode&&(r._pageviews=new Array),a||r.rowdetails||r.pageable){r._arrange(),r.prerenderrequired=!0;var l=Math.round(r.host.height())+2*r.rowsheight;realheight=r._gettableheight();var n=Math.round(l/r.rowsheight),d=Math.max(r.dataview.totalrows,r.dataview.totalrecords);r.pageable&&(d=r.pagesize,r.pagesize>Math.max(r.dataview.totalrows,r.dataview.totalrecords)&&r.autoheight?d=Math.max(r.dataview.totalrows,r.dataview.totalrecords):r.autoheight||r.dataview.totalrows<r.pagesize&&(d=Math.max(r.dataview.totalrows,r.dataview.totalrecords)));{d*r.rowsheight,r._getpagesize()}!r.pageable&&r.autoheight&&(n=d),r.virtualsizeinfo&&(r.virtualsizeinfo.visiblerecords=n),r.rendergridcontent(!0,!1),r._renderrows(r.virtualsizeinfo)}else{r._arrange(),r.virtualsizeinfo=r._calculatevirtualheight();var l=Math.round(r.host.height())+2*r.rowsheight;parseInt(l)>=parseInt(r._oldHeight)&&(r.prerenderrequired=!0),r._renderrows(r.virtualsizeinfo)}o!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.setPosition(0),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths())}}if(s!=r._oldWidth||1==t){var h=!1;if(r.editcell&&r.editcell.editor)switch(r.editcell.columntype){case"dropdownlist":if(h=r.editcell.editor.jqxDropDownList("isOpened")||r.editcell.editor.jqxDropDownList("isanimating")&&!r.editcell.editor.jqxDropDownList("ishiding"))return r.editcell.editor.jqxDropDownList({openDelay:0}),r.editcell.editor.jqxDropDownList("open"),void r.editcell.editor.jqxDropDownList({openDelay:250});break;case"combobox":if(h=r.editcell.editor.jqxComboBox("isOpened")||r.editcell.editor.jqxComboBox("isanimating")&&!r.editcell.editor.jqxComboBox("ishiding"))return r.editcell.editor.jqxComboBox({openDelay:0}),r.editcell.editor.jqxComboBox("open"),void r.editcell.editor.jqxComboBox({openDelay:250});break;case"datetimeinput":if(h)return h=r.editcell.editor.jqxDateTimeInput("isOpened")||r.editcell.editor.jqxDateTimeInput("isanimating")&&!r.editcell.editor.jqxDateTimeInput("ishiding"),r.editcell.editor.jqxDateTimeInput({openDelay:0}),r.editcell.editor.jqxDateTimeInput("open"),void r.editcell.editor.jqxDateTimeInput({openDelay:250})}var c=r.hScrollBar.css("visibility");r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths(),0==t&&r._oldWidth>s||i&&0!=r.dataview.rows.length||r._renderrows(r.virtualsizeinfo),c!=r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(0)}r._oldWidth=s,r._oldHeight=l,r.resizingGrid=!1}},o)}},getTouches:function(t){return e.jqx.mobile.getTouches(t)},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){t.scrollmode="logical",t.vScrollInstance.thumbStep=t.rowsheight;var i=e.jqx.mobile.getTouchEventName("touchstart"),r=e.jqx.mobile.getTouchEventName("touchend"),s=e.jqx.mobile.getTouchEventName("touchmove");t.enablehover=!1,t.gridcontent&&(t.removeHandler(t.gridcontent,i+".touchScroll"),t.removeHandler(t.gridcontent,s+".touchScroll"),t.removeHandler(t.gridcontent,r+".touchScroll"),t.removeHandler(t.gridcontent,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t.gridcontent[0],t.vScrollInstance.max,function(e,i){if("visible"==t.vScrollBar.css("visibility")){var r=t.vScrollInstance.value;t.vScrollInstance.setPosition(r+i)}if("visible"==t.hScrollBar.css("visibility")){var r=t.hScrollInstance.value;t.hScrollInstance.setPosition(r+e)}t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),t._overlayElement&&(t.removeHandler(t._overlayElement,i+".touchScroll"),t.removeHandler(t._overlayElement,s+".touchScroll"),t.removeHandler(t._overlayElement,r+".touchScroll"),t.removeHandler(t._overlayElement,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t._overlayElement[0],t.vScrollInstance.max,function(e,i){if("visible"==t.vScrollBar.css("visibility")){var r=t.vScrollInstance.value;t.vScrollInstance.setPosition(r+i)}if("visible"==t.hScrollBar.css("visibility")){var r=t.hScrollInstance.value;t.hScrollInstance.setPosition(r+e)}t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,i,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")}),this.addHandler(this.host,r,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")})))}},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var t=e.jqx.mobile.isTouchDevice();if(this.touchDevice=t,1==this.touchmode){if(e.jqx.browser.msie&&e.jqx.browser.version<9)return this.enablehover=!1,!1;t=!0,e.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=t}else 0==this.touchmode&&(t=!1);return t&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(t,i){if(this._cellscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null!=t){for(var r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);if(t.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=t.pagergotopagestring),t.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=t.pagershowrowsstring),t.pagerrangestring&&(this.gridlocalization.pagerrangestring=t.pagerrangestring),t.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=t.pagernextbuttonstring),t.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=t.pagerpreviousbuttonstring),t.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=t.pagerfirstbuttonstring),t.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=t.pagerlastbuttonstring),t.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=t.groupsheaderstring),t.sortascendingstring&&(this.gridlocalization.sortascendingstring=t.sortascendingstring),t.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=t.sortdescendingstring),t.sortremovestring&&(this.gridlocalization.sortremovestring=t.sortremovestring),t.groupbystring&&(this.gridlocalization.groupbystring=t.groupbystring),t.groupremovestring&&(this.gridlocalization.groupremovestring=t.groupremovestring),t.firstDay&&(this.gridlocalization.firstDay=t.firstDay),t.days&&(this.gridlocalization.days=t.days),t.months&&(this.gridlocalization.months=t.months),t.AM&&(this.gridlocalization.AM=t.AM),t.PM&&(this.gridlocalization.PM=t.PM),t.patterns&&(this.gridlocalization.patterns=t.patterns),t.percentsymbol&&(this.gridlocalization.percentsymbol=t.percentsymbol),t.currencysymbol&&(this.gridlocalization.currencysymbol=t.currencysymbol),t.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=t.currencysymbolposition),void 0!=t.decimalseparator&&(this.gridlocalization.decimalseparator=t.decimalseparator),void 0!=t.thousandsseparator&&(this.gridlocalization.thousandsseparator=t.thousandsseparator),t.filterclearstring&&(this.gridlocalization.filterclearstring=t.filterclearstring),t.filterstring&&(this.gridlocalization.filterstring=t.filterstring),t.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=t.filtershowrowstring),t.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=t.filtershowrowdatestring),t.filterselectallstring&&(this.gridlocalization.filterselectallstring=t.filterselectallstring),t.filterchoosestring&&(this.gridlocalization.filterchoosestring=t.filterchoosestring),t.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=t.filterorconditionstring),t.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=t.filterandconditionstring),t.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=t.filterstringcomparisonoperators),t.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=t.filternumericcomparisonoperators),t.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=t.filterdatecomparisonoperators),t.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=t.filterbooleancomparisonoperators),t.emptydatastring&&(this.gridlocalization.emptydatastring=t.emptydatastring),t.filterselectstring&&(this.gridlocalization.filterselectstring=t.filterselectstring),t.todaystring&&(this.gridlocalization.todaystring=t.todaystring),t.clearstring&&(this.gridlocalization.clearstring=t.clearstring),t.validationstring&&(this.gridlocalization.validationstring=t.validationstring),t.loadtext&&(this.gridlocalization.loadtext=t.loadtext),i!==!1){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var r in this._filterrowcache)e(this._filterrowcache[r]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today"}
},_initmenu:function(){var t=this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()}this.menuitemsarray=new Array,this.gridmenu=e('<div id="gridmenu'+this.element.id+'" style="z-index: 9999999999999;"></div>'),this.host.append(this.gridmenu);var i=e("<ul></ul>"),r='<div class="jqx-grid-sortasc-icon"></div>',s=e("<li>"+r+this.gridlocalization.sortascendingstring+"</li>"),a='<div class="jqx-grid-sortdesc-icon"></div>',o=e("<li>"+a+this.gridlocalization.sortdescendingstring+"</li>"),l='<div class="jqx-grid-sortremove-icon"></div>',n=e("<li>"+l+this.gridlocalization.sortremovestring+"</li>"),d='<div class="jqx-grid-groupby-icon"></div>',h=e("<li>"+d+this.gridlocalization.groupbystring+"</li>"),c=e("<li>"+d+this.gridlocalization.groupremovestring+"</li>"),u=e('<li type="separator"></li>'),g=e('<li class="filter" style="height: 175px;" ignoretheme="true"><div class="filter"></div></li>'),p=this.gridlocalization.sortascendingstring.length,f=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>p&&(p=this.gridlocalization.sortdescendingstring.length,f=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>p&&(p=this.gridlocalization.sortremovestring.length,f=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>p&&(p=this.gridlocalization.groupbystring.length,f=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>p&&(p=this.gridlocalization.groupremovestring.length,f=this.gridlocalization.groupremovestring));var v=200;f=e.trim(f).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");var m=e("<span>"+f+"</span>");m.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(m),v=m.outerWidth()+60,m.remove();var w=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(i.append(s),this.menuitemsarray[0]=s[0],i.append(o),this.menuitemsarray[1]=o[0],i.append(n),this.menuitemsarray[2]=n[0],w=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(i.append(h),this.menuitemsarray[3]=h[0],i.append(c),this.menuitemsarray[4]=c[0],w+=2);var b=this._measureMenuElement(),x=w*b+9,y=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=g[0],this.menuitemsarray[6]=g[0],i.append(u),i.append(g),x+=180,e.jqx.browser.msie&&e.jqx.browser.version<8&&(x+=20);var _=e(g).find("div:first");v+=20,this._initfilterpanel(this,_,"",v),y=!1,this.removeHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t),this.addHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t)}if(this.gridmenu.append(i),e.jqx.browser.msie&&e.jqx.browser.version<8&&this.filterable&&(e("#listBoxfilter1"+this.element.id).css("z-index",4990),e("#listBoxfilter2"+this.element.id).css("z-index",4990),e("#listBoxfilter3"+this.element.id).css("z-index",4990),e("#gridmenu"+this.element.id).css("z-index",5e3),this.addHandler(e("#gridmenu"+this.element.id),"initialized",function(){e("#menuWrappergridmenu"+t.element.id).css("z-index",4980)})),void 0==this.menuitemsarray[0]&&(x=65),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(i){if(27==i.keyCode)t.gridmenu.jqxMenu("close");else if(13==i.keyCode&&t.filterable&&t._buildfilter){var r="block"==e(e.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display"),s="block"==e(e.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display"),a="block"==e(e.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display"),o=e(e.find("#filterclearbutton"+t.element.id)).hasClass("jqx-fill-state-focus");if(o){var l=e.data(document.body,"contextmenu"+t.element.id).column;t._clearfilter(t,t.element,l),t.gridmenu.jqxMenu("close")}else if(!r&&!s&&!a){var l=e.data(document.body,"contextmenu"+t.element.id).column;t.gridmenu.jqxMenu("close"),t._buildfilter(t,g,l)}}}),"auto"!=this.popupwidth&&(v=this.popupwidth),this.gridmenu.jqxMenu({popupZIndex:999999,width:v,height:x,autoCloseOnClick:y,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0}),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",g[0].id,"closeOnClick",!1),this.rtl){var q=this.that;e.each(i.find("li"),function(){e(this).addClass(q.toTP("jqx-rtl"))});var j=function(e){var t=e.find("div");t.css("float","right"),t.css("margin-left","4px"),t.css("margin-right","-4px")};j(n),j(o),j(s),j(h),j(c)}this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var t=this.gridlocalization.sortascendingstring.length,i=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>t&&(t=this.gridlocalization.sortdescendingstring.length,i=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>t&&(t=this.gridlocalization.sortremovestring.length,i=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>t&&(t=this.gridlocalization.groupbystring.length,i=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>t&&(t=this.gridlocalization.groupremovestring.length,i=this.gridlocalization.groupremovestring));var r=200;i=e.trim(i).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");var s=e("<span>"+i+"</span>");s.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(s),r=s.outerWidth()+60,s.remove();var a=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(a=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(a+=2);var o=27*a+3;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(o+=180,r+=20,e.jqx.browser.msie&&e.jqx.browser.version<8&&(o+=20)),void 0==this.menuitemsarray[0]&&(o=65),"auto"!=this.popupwidth&&(r=this.popupwidth),this.gridmenu.jqxMenu({width:r,height:o})},_closemenuafterclick:function(t){var i=null!=t?t.data:this,r=!1;if(void 0==t.target||void 0!=t.target&&void 0==t.target.className.indexOf)return void i.gridmenu.jqxMenu("close");if(-1==t.target.className.indexOf("filter")||-1!=t.target.className.indexOf("jqx-grid-cell-filter")){if(-1!=t.target.className.indexOf("jqx-grid-cell"))return void i.gridmenu.jqxMenu("close");if(!i._hasOpenedMenu||!e(t.target).ischildof(i.gridmenu)){var s=(i.host.coord(),i.gridmenu.coord()),a=t.pageX,o=t.pageY;if(e.each(e(t.target).parents(),function(){return null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")?(r=!0,!1):this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter")?(r=!0,!1):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")?(i.gridmenu.jqxMenu("close"),!1):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column")?(i.gridmenu.jqxMenu("close"),!1):void 0}),!r){try{if("default"===i.filtermode){var l=e(e.find("#filter1"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,n=new Date;if(100>n-l)return;var d=e(e.find("#filter3"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(100>n-d)return;if("block"==e(e.find("#filter3"+i.element.id)).jqxDropDownList("container").css("display"))return;if("block"==e(e.find("#filter1"+i.element.id)).jqxDropDownList("container").css("display"))return;if("block"==e(e.find("#filter2"+i.element.id)).jqxDropDownList("container").css("display"))return;if(i._hasdatefilter&&"div"==e(".filtertext1"+i.element.id)[0].nodeName.toLowerCase()){if("block"==e(".filtertext1"+i.element.id).jqxDateTimeInput("container").css("display"))return;if("block"==e(".filtertext2"+i.element.id).jqxDateTimeInput("container").css("display"))return}}else{var l=e(e.find("#filter1"+i.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup,n=new Date;if(100>n-l)return;var d=e(e.find("#filter1"+i.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup;if(100>n-d)return}}catch(h){}a>=s.left&&a<=s.left+i.gridmenu.width()&&o>=s.top&&o<=s.top+i.gridmenu.height()||i.gridmenu.jqxMenu("close")}}}},_handlemenueevents:function(){var t=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(){t._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(i){for(var r=i.args,s=0;s<t.menuitemsarray.length;s++){var a=t.menuitemsarray[s];if(r==a){if(void 0!=e(r).attr("ignoretheme"))return;var o=e.data(document.body,"contextmenu"+t.element.id),l=o.column;t.filterable&&t.gridmenu.jqxMenu("close");var n=l.displayfield;if(null==n&&(n=l.datafield),null!=o)switch(s){case 0:t.sortby(n,"ascending",null);break;case 1:t.sortby(n,"descending",null);break;case 2:t.sortby(n,null,null);break;case 3:t.addgroup(l.datafield);break;case 4:t.removegroup(l.datafield);break;case 5:var d=e(t.menuitemsarray[6]);e(d).css("display","block");break;case 7:}break}}})},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that;this.hiddens=new Array;var i=this.hiddenboundrows;e.each(i,function(e){if(void 0!=this.index){var i=(this.index,t.getrowvisibleindex(e));t.hiddens[i]=this.hidden}})},_updaterowheights:function(){var t=this.that;this.heights=new Array;var i=this.heightboundrows;e.each(i,function(e){if(void 0!=this.index){var i=(this.index,t.getrowvisibleindex(e));t.heights[i]=this.height}})},_updaterowdetails:function(){var t=this.that;this.details=new Array;var i=this.detailboundrows;e.each(i,function(e){if(void 0!=this.index){var i=(this.index,t.getrowvisibleindex(e));t.details[i]=this.details}})},_getmenuitembyindex:function(e){return void 0==e?null:this.menuitemsarray[e]},openmenu:function(t){if(!this._openingmenu){this._openingmenu=!0,this.closemenu();var i=this.getcolumn(t);if(!i.menu)return!1;this.gridmenu||this._initmenu();var r=i.columnsmenu;e(i.element).trigger("mouseenter");for(var s=this,a=0;a<s.columns.records.length;a++)s.columns.records[a].datafield!=t&&e(s.columns.records[a].element).trigger("mouseleave");setTimeout(function(){"block"==e(r)[0].style.display&&e(r).trigger("click"),s._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){null!=this.gridmenu&&this.gridmenu.jqxMenu("close");var t=e.data(document.body,"contextmenu"+this.element.id);if(null!=t&&this.autoshowcolumnsmenubutton){if(this.enableanimations){e(t.columnsmenu).animate({"margin-left":0},"fast",function(){e(t.columnsmenu).css("display","none")});var i=this.rtl?0:-32;t.column.iconscontainer.animate({"margin-left":i},"fast")}else{e(t.columnsmenu).css("display","none");var i=this.rtl?0:-32;t.column.iconscontainer.css("margin-left",i)}e.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=!1;var r=this._getmenuitembyindex(5);if(r){var s=e(r).find("#filter1"+this.element.id),a=e(r).find("#filter2"+this.element.id),o=e(r).find("#filter3"+this.element.id);s.length>0&&"default"===this.filtermode&&(s.jqxDropDownList("hideListBox"),a.jqxDropDownList("hideListBox"),o.jqxDropDownList("hideListBox"))}}},scrolloffset:function(e,t){null!=e&&null!=t&&void 0!=e&&void 0!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&void 0!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&void 0!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(e){this._updating=!0,this._datachanged=!1,e===!0&&(this._batchupdate=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._batchupdate)return this._batchupdate=!1,this._datachanged=!1,void this.render();if(1==this._datachanged){var e=this.vScrollInstance.value;this.render(!0,!0,!1),this._datachanged=!1,0!=e&&e<this.vScrollInstance.max&&this.scrolltop(e)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block")},hideloadelement:function(){e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var e=this.that;e.focusedfilter&&(e.focusedfilter.focus(),setTimeout(function(){if(e.focusedfilter.focus(),"input"==e.focusedfilter[0].nodeName.toLowerCase()){var t=e.focusedfilter.val().length;try{if("selectionStart"in e.focusedfilter[0])e.focusedfilter[0].setSelectionRange(t,t);else{var i=e.focusedfilter[0].createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}catch(r){}}},10))},databind:function(t,i){if(this.loadingstate!==!0){"block"==this.host.css("display")&&(this.autoshowloadelement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&this.groups.length>0&&(this.groups=new Array);var r=this.that;null==t&&(t={}),t.recordstartindex||(t.recordstartindex=0),t.recordendindex||(t.recordendindex=0),(void 0==t.loadallrecords||null==t.loadallrecords)&&(t.loadallrecords=!0),(void 0==t.sortcomparer||null==t.sortcomparer)&&(t.sortcomparer=null),(void 0==t.filter||null==t.filter)&&(t.filter=null),(void 0==t.sort||null==t.sort)&&(t.sort=null),(void 0==t.data||null==t.data)&&(t.data=null);var s=null;if(null!=t&&(s=void 0!=t._source?t._source.url:t.url),this.dataview=this.dataview||new e.jqx.dataview,e.jqx.dataview.sort&&e.extend(this.dataview,new e.jqx.dataview.sort),e.jqx.dataview.grouping&&e.extend(this.dataview,new e.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,this.dataview.grid=this,this.dataview._clearcaches(),!this.pageable&&this.virtualmode&&(this.loadondemand=!0),!r.initializedcall){if(t._source&&this.sortable&&(void 0!=t._source.sortcolumn&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),void 0!=t._source.sortdirection)){this.dataview.sortfielddirection=t._source.sortdirection;var a=t._source.sortdirection;if("a"==a||"asc"==a||"ascending"==a||1==a)var o=!0;else var o=!1;this.sortdirection=null!=a?{ascending:o,descending:!o}:{ascending:!1,descending:!1}}this.pageable&&t._source&&(void 0!=t._source.pagenum&&(this.dataview.pagenum=t._source.pagenum),void 0!=t._source.pagesize?(this.pagesize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection)),this.filterable&&this.columns&&e.each(this.columns,function(){this.filter&&r.dataview.addfilter(this.datafield,this.filter)})}this._loading=!0,this.dataview.update=function(t){if(!r.pageable&&r.virtualmode&&(r.loadondemand=!0),r._loading=!1,r.dataview.isupdating()&&r.dataview.resumeupdate(!1),r.pageable&&r.pagerrenderer){if(!r._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");r._initpager()}if(r.source&&r.source.sortcolumn&&r.sortby&&!r.virtualmode)r.render(),r.source._source.sort||r.sortby(r.source.sortcolumn,r.source.sortdirection,r.source.sortcomparer),r.source.sortcolumn=null;else{var s=r.vScrollInstance.value,a=r.hScrollInstance.value,o=r.source?r.source.datatype:"array";if("local"!=o||"array"!=o){var l=null==r.virtualsizeinfo||null!=r.virtualsizeinfo&&0==r.virtualsizeinfo.virtualheight;if("cells"==i){var n=!1;if(r.filterable&&r._initfilterpanel&&r.dataview.filters.length&&(n=!0),0==t)return r.vScrollInstance.isScrolling()||r.hScrollInstance.isScrolling()||(r._cellscache=new Array,r._pagescache=new Array,r._renderrows(r.virtualsizeinfo),r.showfilterrow&&r.filterable&&r.filterrow&&r._updatelistfilters(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()),r.sortcolumn&&r.sortby(r.sortcolumn,r.dataview.sortfielddirection,r.source.sortcomparer),r.autoshowloadelement&&(e(r.dataloadelement).css("visibility","hidden"),e(r.dataloadelement).css("display","none")),void(r.virtualmode&&!r._loading&&(r.loadondemand=!0,r._renderrows(r.virtualsizeinfo)));n?i="filter":void 0!=r.sortcolumn&&(i="sort")}!r.virtualmode||l||r.virtualmode&&r.pageable?1==r.initializedcall&&"pagechanged"==i?(s=0,r.groupable&&r.groups.length>0?(r._render(!0,!0,!1,!1,!1),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):(r.rendergridcontent(!0),r.pageable&&r.updatepagerdetails&&(r.updatepagerdetails(),r.autoheight?(r._updatepageviews(),r.autorowheight&&r._renderrows(this.virtualsizeinfo)):r.autorowheight&&(r._updatepageviews(),r._renderrows(this.virtualsizeinfo)))),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):"filter"==i?r.virtualmode?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):r._render(!0,!0,!1,!1,!1):"sort"==i?(r.virtualmode?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):(r._render(!0,!0,!1,!1,!1),r.sortcolumn&&!r.source.sort&&r.sortby(r.sortcolumn,r.dataview.sortfielddirection,r.source.sortcomparer)),r.source.sort&&r._updatefocusedfilter()):"data"==i?r._render(!0,!0,!1,!1,!1):"state"==i?r._render(!0,!0,!1,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode):r._render(!0,!0,!0,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode):r.virtualmode&&1==t&&!r.pageable?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)):r.virtualmode&&!r.pageable&&0==t&&void 0!=i?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates()):r.virtualmode&&0==r.dataview.totalrecords&&r.dataview.filters.length>0?r._render(!0,!0,!0,r.menuitemsarray&&!r.virtualmode):(r._pagescache=new Array,r._renderrows(r.virtualsizeinfo)),r.vScrollInstance.value!=s&&s<=r.vScrollInstance.max&&r.vScrollInstance.setPosition(s),r.hScrollInstance.value!=a&&a<=r.hScrollInstance.max&&r.hScrollInstance.setPosition(a)}}if(r.autoshowloadelement&&(e(r.dataloadelement).css("visibility","hidden"),e(r.dataloadelement).css("display","none")),r.pageable&&(r.pagerrightbutton&&(r.pagerrightbutton.jqxButton({disabled:!1}),r.pagerleftbutton.jqxButton({disabled:!1}),r.pagershowrowscombo.jqxDropDownList({disabled:!1})),r.pagerfirstbutton&&(r.pagerfirstbutton.jqxButton({disabled:!1}),r.pagerlastbutton.jqxButton({disabled:!1}))),r._raiseEvent(11),r.initializedcall)r._updateTouchScrolling();else{var d=function(){r._raiseEvent(0),r.initializedcall=!0,r.isInitialized=!0,r.ready&&r.ready(),r.renderstatusbar&&r.renderstatusbar(r.statusbar),r.rendertoolbar&&r.rendertoolbar(r.toolbar),r.autoloadstate&&r.loadstate&&r.loadstate(null,!0)};if(e.jqx.isHidden(r.host)?(r.readyInterval&&clearInterval(r.readyInterval),r.readyInterval=setInterval(function(){e.jqx.isHidden(r.host)||r.__isRendered&&(clearInterval(r.readyInterval),r.readyInterval=null,d(),r._initmenu())},200)):d(),null!=r.width&&-1!=r.width.toString().indexOf("%")||null!=r.height&&-1!=r.height.toString().indexOf("%"),"hidden"==r.host.css("visibility")){{e.jqx.browser.msie&&e.jqx.browser.version<8}"visible"==r.vScrollBar.css("visibility")&&r.vScrollBar.css("visibility","inherit"),r.autowidth||"visible"==r.hScrollBar.css("visibility")&&r.hScrollBar.css("visibility","inherit"),r._intervalTimer=setInterval(function(){"visible"==r.host.css("visibility")&&(r._updatesize(!0),clearInterval(r._intervalTimer))},100)}}},this.dataview.databind(t),this.dataview.isupdating()&&(void 0!=s?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows()}},scrollto:function(e,t){void 0!=e&&this.hScrollInstance.setPosition(e),void 0!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){if(this.autoheight&&!this.pageable)return!0;var t=this._getpagesize(),i=Math.floor(e/t);if(this._pageviews[i]||this.pageable||this._updatepageviews(),this.groupable&&this.groups.length>0)return!0;var r=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){var i=Math.floor(e/t);if(this.dataview.pagenum!=i){if(this.groupable&&this.groups.length>0)return!0;this.gotopage(i),r=!0}}var s=this.vScrollInstance.value,a=this._gettableheight()-this.rowsheight,o=t*(e/t-i);if(o=Math.round(o),this._pageviews[i]){var l=this._pageviews[i].top,n=l+o*this.rowsheight;if(this.rowdetails)for(var d=t*i;e>d;d++)this.details[d]&&0==this.details[d].rowdetailshidden&&(n+=this.details[d].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=n+this.rowsheight&&(n=this.vScrollInstance.max),s>n?(this.scrolltop(n),r=!0):n>s+a+2&&(this.scrolltop(n-a),r=!0)}else if(this.pageable){var n=o*this.rowsheight;if(this.rowdetails)for(var d=t*i;t*i+o>d;d++)this.details[d]&&0==this.details[d].rowdetailshidden&&(n+=this.details[d].rowdetailsheight);(s>n||n>s+a)&&(this.scrollto(0,n),r=!0)}return r},ensurecellvisible:function(t,i){var r=this.that,s=this.hScrollBar.jqxScrollBar("value"),a=r.hScrollInstance.max;r.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(a=0);var o=this.ensurerowvisible(t),l=0;if(this.columns.records){var n=s;if("hidden"==this.hScrollBar.css("visibility"))return;var d=this.host.width(),h=0,c="visible"==this.vScrollBar.css("visibility")?20:0,u=!1;e.each(this.columns.records,function(){if(this.hidden)return!0;if(this.datafield==i){var e=0,t=r.rtl?a-s:n;return l+this.width>t+d-c?(e=l+this.width-d+c,r.rtl&&(e=a-e),r.scrollleft(e),u=!0):t>=l&&(e=l-this.width,r.rtl&&(e=a-e),r.scrollleft(e),u=!0),0==h?(r.scrollleft(r.rtl?a:0),u=!0):h==r.columns.records.length-1&&"visible"==r.hScrollBar.css("visibility")&&(r.scrollleft(r.rtl?r.hScrollBar.jqxScrollBar("min"):r.hScrollBar.jqxScrollBar("max")),u=!0),!1}h++,l+=this.width}),u||r.scrollleft(n)}return o},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return null==e||null==t?!1:(this.heightboundrows[e]={index:e,height:t},e=this.getrowvisibleindex(e),0>e?!1:(this.rows.records[e]?this.rows.records[e].height=t:(row=new i(this,null),row.height=t,this.rows.replace(e,row)),this.heights[e]=t,this.rendergridcontent(!0),!0))},getrowheight:function(e){return null==e?null:(e=this.getrowvisibleindex(e),0>e?!1:this.rows.records[e]?this.rows.records[e].height:void 0)},setrowdetails:function(t,i,r,s){if(!(void 0==t||null==t||0>t)){var a=t+"_";if(this._rowdetailscache[a]){var o=this._rowdetailscache[a].element;e(o).remove(),this._rowdetailscache[a]=null}var l=this.dataview.generatekey();return this.detailboundrows[t]={index:t,details:{rowdetails:i,rowdetailsheight:r,rowdetailshidden:s,key:l}},t=this.getrowvisibleindex(t),0>t?!1:this._setrowdetails(t,i,r,s,l)}},getcolumn:function(t){var i=null;return this.columns.records&&e.each(this.columns.records,function(){return this.datafield==t||this.displayfield==t?(i=this,!1):void 0}),i},_getcolumnindex:function(t){var i=-1;return this.columns.records&&e.each(this.columns.records,function(){return i++,this.datafield==t?!1:void 0}),i},_getcolumnat:function(e){var t=this.columns.records[e];return t},_getprevvisiblecolumn:function(e){for(var t=this.that;e>0;){e--;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},_getnextvisiblecolumn:function(e){for(var t=this.that;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},getcolumnat:function(e){if(!isNaN(e)){var t=this.columns.records[e];return t}return null},_getcolumn:function(t){var i=null;return e.each(this._columns,function(){return this.datafield==t||this.displayfield==t?(i=this,!1):void 0}),i},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;t=t.toLowerCase();var r=this.getcolumn(e);if(null!=r){var s=r[t];r[t]=i;var a=this._getcolumn(e);switch(null!=a&&(a[t]=i),this._cellscache=new Array,t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo);break;case"editable":case"resizable":case"draggable":if("editable"==t&&i!=s){if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),"checkbox"==r.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))return!1;if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,"pinned"==t&&(this._initializeColumns(),this._preparecolumngroups()),this.rendergridcontent(!0),this.updating())return!1;"hidden"==t&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;r._width=null,r._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(e,t){if(null==e||null==t)return null;t=t.toLowerCase();var i=this.getcolumn(e);return i[t]},setcolumnproperty:function(e,t,i){this._setcolumnproperty(e,t,i)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,i,r,s){if(0==i&&(i=100),null==e||null==i)return!1;if(null!=s)this.details[e]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:s};else{for(var a=null!=this.details[e]?this.details[e].detailskey:null,o={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:a},l=(this.that,0);l<this.detailboundrows.length;l++)if(void 0!=this.detailboundrows[l]){var n=this.detailboundrows[l];if(n.details.detailskey==a){n.details.rowdetailsheight=o.rowdetailsheight,n.details.rowdetailshidden=o.rowdetailshidden,n.details.rowdetails=o.rowdetails;break}}this.details[e]=o}return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(e){return null==e?!1:(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){return null==e?!1:0>e?!1:this.details[e]?this.details[e]:this.rowdetailstemplate?this.rowdetailstemplate:void 0},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e)return!1;if(e=this.getrowvisibleindex(e),0>e)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(e=this.getrowvisibleindex(e),0>e)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){var t=e.visibleindex,i=this._getrowdetails(t);if(null!=i){var r=this.vScrollInstance.value,s=!i.rowdetailshidden,a=this._setrowdetailsvisibility(t,i,s);return 0!==r&&"hidden"!==this.vScrollBar.css("visibility")&&this.vScrollInstance.setPosition(r<=this.vScrollInstance.max?r:this.vScrollInstance.max),a}return!1},_setrowdetailsvisibility:function(e,t,i){if(this.rowdetailstemplate&&(this.details||(this.details=new Array),!this.details[e])){this.details[e]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var r=this.dataview.generatekey();this.details[e].detailskey=r,this.detailboundrows[e]={index:e,details:this.details[e]}}if(null==t)return!1;this.details[e].rowdetailshidden=i;var s=this.details[e];return i?this._raiseEvent(21,{rowindex:e,details:s.rowdetails,height:s.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:s.rowdetails,height:s.rowdetailsheight}),this._setrowdetails(e,s.rowdetails,s.rowdetailsheight,s.rowdetailshidden)},getrowvisibleindex:function(e){if(void 0==e||null==e||0>e)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[e];return void 0==t?-1:t.visibleindex}return this.getrowdisplayindex(e)},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return void 0==e||null==e||0>e?!1:null==e?!1:(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return void 0==e||null==e||0>e?!1:null==e?!1:(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1))},isrowhiddenat:function(e){return null==e?null:(e=this.getrowvisibleindex(e),this.rows.records[e]?this.rows.records[e].hidden:void 0)},_setrowvisibility:function(e,t,i){return null==e?!1:(this.hiddens[e]=t,void 0==i||i?(this.rendergridcontent(!0),!0):!1)},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&void 0!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var t=this.that,r=new Array,s=new Array,a=t.groupable&&t.groups.length>0,o=(this.dataview.totalrecords,this.virtualsizeinfo.virtualheight,0);this.rows.beginupdate();var l=this.dataview.pagesize;this.pageable&&a&&(l=this.dataview.rows.length);for(var n=0;l>n&&!(n>=this.dataview.rows.length);n++){var d=this.dataview.rows[n],h=null;t.rows.records[d.visibleindex]?(h=t.rows.records[d.visibleindex],h.setdata(d)):h=new i(t,d),h.hidden=this.hiddens[h.visibleindex],this.rowdetailstemplate&&(h.rowdetails=this.rowdetailstemplate.rowdetails,h.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,h.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden);var c=this.details[h.visibleindex];if(c?(h.rowdetails=c.rowdetails,h.rowdetailsheight=c.rowdetailsheight,h.rowdetailshidden=c.rowdetailshidden):this.rowdetailstemplate||(h.rowdetails=null),a&&this.pageable&&null!=h.parentbounddata){var u=r[h.parentbounddata.uniqueid];if(null!=u){var g=this._findgroupstate(u.uniqueid);this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,h.parentbounddata,!g,!1),h.hidden=this.hiddens[h.visibleindex]}null!=u&&void 0!=u&&(h.parentrow=u,u.subrows[u.subrows.length++]=h)
}if(!h.hidden){var p=d.visibleindex;this.heights[p]||(this.heights[p]=this.rowsheight),h.height=this.heights[p],this.rowdetails&&h.rowdetails&&!h.rowdetailshidden&&(h.height+=h.rowdetailsheight),r[h.uniqueid]=h,s[o++]=h,h.top=e,e+=h.height;var f=p;t.rows.replace(f,h)}}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&this._pageviews.length>0&&(this._pageviews[0].height=e),this.rows.resumeupdate(),s.length>0&&(this._pagescache[this.dataview.pagenum]=s)}}},_gettableheight:function(){if(void 0!=this.tableheight)return this.tableheight;var e=this.host.height();if(this.columnsheader){var t=this.columnsheader.outerHeight();this.showheader||(t=0)}return e-=t,"visible"==this.hScrollBar[0].style.visibility&&(e-=this.hScrollBar.outerHeight()),this.pageable&&(e-=this.pager.outerHeight()),this._groupsheader()&&(e-=this.groupsheader.outerHeight()),this.showtoolbar&&(e-=this.toolbarheight),this.showstatusbar&&(e-=this.statusbarheight),e>0?(this.tableheight=e,e):this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight,t=Math.round(e/this.rowsheight);return t}return this.autoheight||this.autorowheight?0==this.dataview.totalrows?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0?this.dataview.totalrows:100},_calculatevirtualheight:function(){var e=(this.that,Math.round(this.host.height())+2*this.rowsheight);realheight=this._gettableheight();var t=Math.round(e/this.rowsheight);this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array;var i=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(i=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?i=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(i=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var r=i*this.rowsheight,s=0,a=0,o=0,l=this._getpagesize(),n=l*this.rowsheight,d=0;if(!this.pageable&&this.autoheight&&(t=i),i+l>0)for(;i+l>=d;){if(s+=n,i>d-l&&d>=i){var h=d-i;h>0&&(o-=n,this._pageviews[a-1]={top:o,height:n-h*this.rowsheight});break}this._pageviews[a++]={top:o,height:n},o=s,d+=l}return 1!=this.resizingGrid&&this.vScrollBar.jqxScrollBar({value:0}),r>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),this.vScrollBar.jqxScrollBar("deferred"==this.scrollmode?{max:r}:{max:r-realheight})):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=l,this.dataview.updateview(),{visiblerecords:t,virtualheight:r}},_updatepageviews:function(){if(!this.updating()){this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,i=Math.round(t/this.rowsheight),r=Math.max(this.dataview.totalrows,this.dataview.totalrecords),s=r*this.rowsheight,a=0,o=0,l=0,n=0,d=0,h=this._getpagesize();if(this.pageable)this._updatepagedview&&(s=this._updatepagedview(r,s,0)),this.autoheight&&this._arrange();else for(var c=0;r>c;c++){var u={index:c,height:this.heights[c],hidden:this.hiddens[c],details:this.details[c]};if(void 0==this.heights[c]&&(this.heights[c]=this.rowsheight,u.height=this.rowsheight),void 0==this.hiddens[c]&&(this.hiddens[c]=!1,u.hidden=!1),void 0==this.details[c]&&(this.details[c]=null),u.height!=e.rowsheight&&(s-=e.rowsheight,s+=u.height),u.hidden)s-=u.height;else{o+=u.height;var g=0;this.rowdetails&&(this.rowdetailstemplate&&(u.details||(u.details=this.rowdetailstemplate)),u.details&&u.details.rowdetails&&!u.details.rowdetailshidden&&(g=u.details.rowdetailsheight,o+=g,s+=g)),a+=u.height+g}d++,(d>=h||c==r-1)&&(this._pageviews[l++]={top:n,height:o},o=0,n=a,d=0)}var p=this._gettableheight();if(s>p)if(this.pageable&&this.gotopage&&(s=this._pageviews[0].height,0>s&&(s=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(p>=s||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),s-p>0)if("deferred"!=this.scrollmode){var f=s-p,v=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:f}),f!=v&&this.vScrollBar.jqxScrollBar({value:0})}else this.vScrollBar.jqxScrollBar({value:0,max:s});else this.vScrollBar.jqxScrollBar({value:0,max:s});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.autoheight&&(i=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:i,virtualheight:s}}},updatebounddata:function(e){"data"==e||"sort"==e||"filter"==e||"cells"==e||"pagechanged"==e||"pagesizechanged"==e||this.virtualmode||(this.virtualsizeinfo=null,this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())),this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&this._pageviews.length>0){var e=this._pageviews[0].height;(this.virtualmode||!this.pageable)&&(e=this.virtualsizeinfo.virtualheight);var t=this._gettableheight();if(e>t)if(this.pageable&&this.gotopage&&(e=this._pageviews[0].height,0>e&&(e=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(t>=e||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),e-t>0){var i=e-t;this.vScrollBar.jqxScrollBar({max:i})}else this.vScrollBar.jqxScrollBar({value:0,max:e});else this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(t){if(1!=t){if(e.jqx.isHidden(this.host))return;null!=this.virtualsizeinfo&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var t=this,i=0;i<this.columngroups.length;i++)this.columngroups[i].parent=null,this.columngroups[i].groups=null;for(var i=0;i<this.columns.records.length;i++)this.columns.records[i].parent=null,this.columns.records[i].groups=null;for(var r=function(e){for(var i=0;i<t.columngroups.length;i++){var r=t.columngroups[i];if(r.name===e)return r}return null},i=0;i<this.columngroups.length;i++){var s=this.columngroups[i];if(s.groups||(s.groups=null),s.parentgroup){var a=r(s.parentgroup);a&&(s.parent=a,a.groups||(a.groups=new Array),-1===a.groups.indexOf(s)&&a.groups.push(s))}}for(var i=0;i<this.columns.records.length;i++){var s=this.columns.records[i];if(s.columngroup){var a=r(s.columngroup);a&&(a.groups||(a.groups=new Array),s.parent=a,-1===a.groups.indexOf(s)&&a.groups.push(s))}}for(var o=0,i=0;i<this.columns.records.length;i++){var s=this.columns.records[i],l=s;for(s.level=0;l.parent;)l=l.parent,s.level++;var l=s,n=s.level;for(o=Math.max(o,s.level);l.parent;)l=l.parent,l&&(l.level=--n)}for(var d=function(e){var t=new Array;if(e.columngroup&&t.push(e),e.groups)for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=d(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t},i=0;i<this.columngroups.length;i++){var s=this.columngroups[i],h=d(s);s.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return e=parseInt(e),t=parseInt(t),t>e?-1:e>t?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+o,e=this.columngroupslevel*this.columnsheight}return e},_render:function(t,i,r,s,a){if(null!=this.dataview&&!this._loading&&!this._batchupdate){if(e.jqx.isHidden(this.host)){var o=this;return o.___hiddenTimer&&(clearInterval(o.___hiddenTimer),o.___hiddenTimer=null),void(this.___hiddenTimer=setInterval(function(){e.jqx.isHidden(o.host)||(clearInterval(o.___hiddenTimer),o.render())},300))}if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=void 0!=i?i:!0,this._newmax=null,r)if(this._requiresupdate||0!=s&&this._initmenu(),null==this.columns)this.columns=new e.jqx.collection(this.element);else{var l=this;this.columns&&"observableArray"===this.columns.name&&(this.columns.notifier=function(e){var t=function(){l.columns=l._columns,l.render()};switch(e.type){case"add":t();break;case"update":if("index"===e.name){l.beginupdate();for(var i in e.newValue)l.setcolumnproperty(e.newValue.datafield,i,e.newValue[i]);l.endupdate()}else{var r=e.path.split(".");l.setcolumnproperty(l.columns[r[0]].datafield,e.name,e.newValue)}break;case"delete":t()}}),this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=function(){l.render()}),this._initializeColumns()}this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),1==s&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,e.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),r?(this.filterrow&&this.filterrow.detach(),e.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&e.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var n=this.columnsheight;if(n=this._preparecolumngroups(),this.columnsheader.height(this.showfilterrow&&this.filterable?n+this.filterrowheight:n),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||e("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,r),this.groups.length>0&&this.groupable){var d=this.vScrollBar[0].style.visibility;this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=d&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1}this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),"deferred"==this.scrollmode&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(void 0==a||1==a)&&this._updatelistfilters(!r),this.rendered&&this.rendered("full"),this.__isRendered=!0}},_addoverlayelement:function(){if(this.autoheight)return this._overlayElement&&this._overlayElement.remove(),void this._updateTouchScrolling();var t=e.jqx.utilities.getBrowser();if("msie"==t.browser&&parseInt(t.version)<9||this.isTouchDevice())if(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",18e3),this._overlayElement.css("opacity",.001),this.isTouchDevice())if("hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")){var i=0;"checkbox"==this.selectionmode&&(i+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0)));var r=this._overlayElement.css("left");this._overlayElement.css("left",r+i)}else this._overlayElement&&this._overlayElement.remove();else this.content.prepend(this._overlayElement);this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",18e3),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=e("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",18005),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},rendergridcontent:function(e,t){if(this.updating())return!1;(void 0==e||null==e)&&(e=!1),this._requiresupdate=e;var i=this.prerenderrequired;this.prerenderrequired&&this._arrange();var r=this.that,t=t;if((null==t||void 0==t)&&(t=!0),this.tableheight=null,r.virtualsizeinfo=r.virtualsizeinfo||r._calculatevirtualheight(),r.pageable&&!r.autoheight&&r.dataview.totalrows<r.pagesize&&(r._requiresupdate=!0),t?r._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),r._renderrows(r.virtualsizeinfo),this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0)),i){var s=this.tableheight;this._arrange(),s!=this.tableheight&&this.autoheight&&r._renderrows(r.virtualsizeinfo)}return this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate(),!0},_updatecolumnwidths:function(){var t=this.host.width(),i=t,r="";if(void 0!=this.columns&&void 0!=this.columns.records){var s=this.that,a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;e.each(this.columns.records,function(e,o){if(!this.hidden||!this.hideable)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var o=0,l="hidden"==s.vScrollBar[0].style.visibility?0:s.scrollbarsize+5;s.scrollbarautoshow&&(l=0);var n=i;o=parseFloat(this.width)*n/100,l+=a,void 0!=this._percentagewidth&&(o=parseFloat(this._percentagewidth)*(n-l)/100),o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth),t-=o}else"auto"==this.width||this._width?r+=this.text:t-=this.width});var o=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>o)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var l=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var n=0;n<this.dataview.rows.length;n++)this.dataview.rows[n].group&&0===this.dataview.rows[n].level&&(l+=this.rowsheight);l>o?(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5):"visible"==this.vScrollBar.css("visibility")&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5)}else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;var a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(i-=a,this.columnsheader){var d=this.columnsheader.find("#columntable"+this.element.id);if(0!=d.length){var h=d.find(".jqx-grid-column-header"),c=0;e.each(this.columns.records,function(s){var a=e(h[s]),o=!1,l=this.width;if((-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)&&(l=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*i/100:parseFloat(this.width)*i/100,o=!0),"auto"==this.width||this._width||o)if(o)l<this.minwidth&&"auto"!=this.minwidth&&(l=this.minwidth,this.width=l),l>this.maxwidth&&"auto"!=this.maxwidth&&(l=this.maxwidth,this.width=l),parseInt(a[0].style.width)!=l&&(a.width(l),this.width=l);else{var n=Math.floor(t*(this.text.length/r.length));isNaN(n)&&(n=this.minwidth),1/0==n&&(n=0),0>n&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),n=10+$element.width(),$element.remove()),n<this.minwidth&&(n=this.minwidth),n>this.maxwidth&&(n=this.maxwidth),this._width="auto",this.width=n,a.width(this.width)}else parseInt(a[0].style.width)!=this.width&&a.width(this.width);parseInt(a[0].style.left)!=c&&a.css("left",c),this.hidden&&this.hideable||(c+=this.width),this._requirewidthupdate=!0}),this.columnsheader.width(2+c),d.width(this.columnsheader.width()),this.columnsheader[0].style.visibility=0==c?"hidden":"inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.autowidth&&this._arrange()}}}},_rendercolumnheaders:function(){var t=this.that;if(!this.prerenderrequired)return this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),void(this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()));this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var i=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');i[0].cells=new Array;var r=0,s=0,a="",o=this.host.width(),l=o,n=new Array,d=new Array,h=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(e.each(this.columns.records,function(e,i){if(!this.hidden||!this.hideable)if("auto"==this.width||this._width)a+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)o-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)o-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var i=0,r="hidden"==t.vScrollBar[0].style.visibility?0:t.scrollbarsize+5;r+=h,i=parseFloat(this.width)*(l-r)/100,i<this.minwidth&&"auto"!=this.minwidth&&(i=this.minwidth),i>this.maxwidth&&"auto"!=this.maxwidth&&(i=this.maxwidth),o-=i}else"string"==typeof this.width&&(this.width=parseInt(this.width)),o-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),n[n.length]=this):d[d.length]=this}),this.rtl){var c=0;n.reverse();for(var u=this.columns.records.length-1;u>=this.columns.records.length-n.length;u--)this.columns.replace(u,n[c++]);for(var g=0;g<d.length;g++)this.columns.replace(g,d[g])}else{for(var u=0;u<n.length;u++)this.columns.replace(u,n[u]);for(var g=0;g<d.length;g++)this.columns.replace(n.length+g,d[g])}var p=this.headerZIndex,f=t.groupable?t.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&f++;var v=t.columnsheader.height();this.showfilterrow&&(this.columngroups?v-=this.filterrowheight:v=this.columnsheight);var m=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>m&&!this.scrollbarautoshow)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var w=0;if(this.pageable){if(this.pageable)for(var b=0;b<this.dataview.rows.length;b++)this.dataview.rows[b].group&&0===this.dataview.rows[b].level&&(w+=this.rowsheight)}else var w=this.dataview.loadedrootgroups.length*this.rowsheight;w>m&&(o-=this.scrollbarsize+5,l-=this.scrollbarsize+5)}else o-=this.scrollbarsize+5,l-=this.scrollbarsize+5;else this.autoheight||(o-=this.scrollbarsize+5,l-=this.scrollbarsize+5);l-=h;var x=function(e,i){var r=t.columngroupslevel*t.columnsheight;return r-=i.level*t.columnsheight};if(e.each(this.columns.records,function(n){this.height=t.columnsheight,t.columngroups&&t.columngroups.length&&(this.height=x(this.datafield,this),v=this.height);var d=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(d+=" "+t.toTP("jqx-grid-column-header-rtl"));var h=t.rtl?150+p+1:150+p-1,c=t.rtl?p++:p--,u=e('<div role="columnheader" style="z-index: '+c+';position: absolute; height: 100%;" class="'+d+'"><div style="height: 100%; width: 100%;"></div></div>');t.columngroups&&(u[0].style.height=v+"px",u[0].style.bottom="0px",this.pinned&&(u[0].style.zIndex=h)),this.uielement=u,""!=this.classname&&this.classname&&u.addClass(this.classname);var g=this.width,m=!1;if(null===this.width&&(this.width="auto"),(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)&&(g=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*l/100:parseFloat(this.width)*l/100,m=!0),"auto"==this.width||this._width||m){if(m)g<this.minwidth&&"auto"!=this.minwidth&&(g=this.minwidth),g>this.maxwidth&&"auto"!=this.maxwidth&&(g=this.maxwidth),(void 0==this._percentagewidth||-1!=this.width.toString().indexOf("%"))&&(this._percentagewidth=this.width),u.width(g),this.width=g;else if(!this.hidden){var w=Math.floor(o*(this.text.length/a.length));isNaN(w)&&(w=this.minwidth),0>w&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),w=10+$element.width(),$element.remove()),w<this.minwidth&&(w=this.minwidth),w>this.maxwidth&&(w=this.maxwidth),this._width="auto",this.width=w,g=this.width,u.width(this.width)}}else g<this.minwidth&&"auto"!=this.minwidth&&(g=this.minwidth,this.width=g),g>this.maxwidth&&"auto"!=this.maxwidth&&(g=this.maxwidth,this.width=g),u[0].style.width=parseInt(g)+"px";this.hidden&&this.hideable&&u.css("display","none");var b=e(u.children()[0]),y=t.rtl?t.toTP("jqx-grid-column-menubutton")+" "+t.toTP("jqx-grid-column-menubutton-rtl"):t.toTP("jqx-grid-column-menubutton");y+=" "+t.toTP("jqx-icon-arrow-down");var _=e('<div style="height: '+v+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+y+'" style="width: 100%; height:100%;"></div></div>');t.enableanimations||_.css("margin-left",-16),t.rtl&&_.css("left","0px"),this.columnsmenu=_[0],i[0].cells[n]=u[0],_[0].style.width=parseInt(t.columnsmenuwidth)+"px";var q=t.columnsmenu,j=!1,z=!1,k=t.groupable&&f>0&&f>r||t.rowdetails&&f>r;if(t.rtl&&(k=t.groupable&&f>0&&f>r||t.rowdetails&&f>r,k&=n>t.columns.records.length-1-f),k)r++,q&=!1,this.sortable=!1,this.editable=!1,z=!0;else{var S=null!=this.renderer?this.renderer(this.text,this.align,v):t._rendercolumnheader(this.text,this.align,v,t);null==S&&(S=t._rendercolumnheader(this.text,this.align,v,t)),null!=this.renderer&&(S=e(S)),q&=!0,j=!0}if(t.WinJS?MSApp.execUnsafeLocalFunction(function(){b.append(e(S))}):this.renderer?b.append(e(S)):S&&(b[0].innerHTML=S),null!=S){var I=e('<div class="iconscontainer" style="height: '+v+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+v+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+v+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+" "+t.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+v+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>');_.addClass(t.toTP("jqx-widget-header")),b.append(I);var T=I.children();this.sortasc=T[1],this.sortdesc=T[2],this.filtericon=T[0],this.iconscontainer=I,t.rtl&&(I.css("margin-left","0px"),I.css("left","0px"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left")),!t.autoshowfiltericon&&this.filterable&&e(this.filtericon).css("display","block")}if(this.element=u[0],q&&(t._handlecolumnsmenu(t,b,u,_,this),this.menu||_.hide()),i.append(u),t.groupable&&j){if(u[0].id=t.dataview.generatekey(),!t._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");t._handlecolumnstogroupsdragdrop(this,u)}t.columnsreorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,u);var C=this;if(t.addHandler(u,"click",function(e){return C.checkboxcolumn?!0:(t.sorttogglestates>0&&t._togglesort&&(t._loading||t._togglesort(C)),e.preventDefault(),void t._raiseEvent(7,{column:C.getcolumnproperties(),datafield:C.datafield,originalEvent:e}))}),C.resizable&&t.columnsresize&&!z){var D=!1,B="mousemove";t.isTouchDevice()&&t.touchmode!==!0&&(D=!0,B=e.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(u,B,function(i){var r=parseInt(i.pageX),s=5,a=parseInt(u.coord().left);if(t.hasTransform&&(a=e.jqx.utilities.getOffset(u).left),t.resizing)return!0;if(t._handlecolumnsresize){if(D){var o=t.getTouches(i),l=o[0];return r=l.pageX,s=40,r>=a+C.width-s?(t.resizablecolumn={columnelement:u,column:C},u.css("cursor","col-resize")):(u.css("cursor",""),t.resizablecolumn=null),!0}var n=C.width;if(t.rtl&&(n=0),r>=a+n-s){if(a+n+s>=r)return t.resizablecolumn={columnelement:u,column:C},u.css("cursor","col-resize"),!1;u.css("cursor",""),t.resizablecolumn=null}else u.css("cursor",""),a+n-s>r&&(C._animating||C._menuvisible||u.mouseenter()),t.resizablecolumn=null}})}if(u.css("left",s),this.hidden&&this.hideable||(s+=g),C.rendered){var P=C.rendered(e(b[0].firstChild),C.align,v);P&&null!=I&&I.hide()}if(C.checkboxcolumn){if(I&&I.hide(),!t.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");b.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"></div>');var H=b.find("div:first");H.jqxCheckBox({_canFocus:!1,disabled:t.disabled,disabledContainer:!0,theme:t.theme,enableContainerClick:!1,width:16,height:16,animationShowDelay:0,animationHideDelay:0}),C.checkboxelement=H;var A=H.data().jqxCheckBox.instance;t._checkboxcolumn=C,A.updated=function(e,i,r){t._checkboxcolumnupdating=!0,t.disabled&&(H.jqxCheckBox({disabled:t.disabled}),i=r),i?t.selectallrows():t.unselectallrows(),t._checkboxcolumnupdating=!1}}}),this.columnsheader.width(s>0?2+s:s),this.columnsrow=i,t.columnsheader.append(i),this.showfilterrow&&this._updatefilterrow){if(i.height(this.columngroups?this.columngroupslevel*this.columnsheight:this.columnsheight),!this.filterrow){var y=e("<div></div>");y[0].id="filterrow."+this.element.id,y.height(this.filterrowheight),this.filterrow=y}this.filterrow.width(2+s),this.columnsheader.append(this.filterrow),this._updatefilterrow()}i[0].style.visibility=0==s?"hidden":"inherit",i.width(s),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(this.columngroups){for(var t=0,i=0;i<this.columns.records.length;i++)this.columns.records[i].pinned&&t++;var r=this.headerZIndex-t+this.columns.records.length,s=this.that,a=s.toTP("jqx-grid-column-header")+" "+s.toTP("jqx-grid-columngroup-header")+" "+s.toTP("jqx-widget-header");s.rtl&&(a+=" "+s.toTP("jqx-grid-columngroup-header-rtl"));var o=this.columnsheader.find("#columntable"+this.element.id);o.find("jqx-grid-columngroup-header").remove();for(var l=0;l<this.columngroupslevel-1;l++)for(var i=0;i<this.columngroups.length;i++){var n=this.columngroups[i],d=n.level;if(d===l){var h=d*this.columnsheight,c=99999;if(n.groups){var u=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=u(r):r.hidden||(t+=r.width,c=Math.min(parseFloat(r.element.style.left),c))}return t};n.width=u(n),n.left=c;var g=this.columnsheight,p=r--,f=e('<div role="columnheader" style="z-index: '+p+';position: absolute;" class="'+a+'"></div>'),v=e(this._rendercolumnheader(n.text,n.align,this.columnsheight,this));if(n.renderer){var v=e("<div style='height: 100%; width: 100%;'></div>"),m=n.renderer(n.text,n.align,g);v.html(m)}f.append(v),f[0].style.left=c+"px",0===c&&(f[0].style.borderLeftColor="transparent"),f[0].style.top=h+"px",f[0].style.height=g+"px",f[0].style.width=-1+n.width+"px",o.append(f),n.element=f,n.rendered&&n.rendered(v,n.align,g)}}}}},_resizecolumngroups:function(){if(this.columngroups)for(var e=0;e<this.columngroups.length;e++){var t=this.columngroups[e],i=t.level,r=i*this.columnsheight,s=99999;if(t.groups){var a=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=a(r):r.hidden||(t+=r.width,s=Math.min(parseFloat(r.element.style.left),s))}return t};t.width=a(t),t.left=s;var o=this.columnsheight,l=t.element;l[0].style.left=s+"px",l[0].style.top=r+"px",l[0].style.height=o+"px",l[0].style.width=-1+t.width+"px"}}},_handlecolumnsmenu:function(t,i,r,s,a){t.dragmousedown=null,s[0].id=t.dataview.generatekey(),i.append(s),r[0].columnsmenu=s[0],a.element=r[0];var o=this.columnsmenuwidth+1,l=function(){if(!a.menu)return!1;if(!t.resizing){if(a._menuvisible&&t._hasOpenedMenu)return!1;if(a._animating=!0,t.menuitemsarray&&t.menuitemsarray.length>0)if(t.enableanimations){s.css("display","block"),s.stop(),a.iconscontainer.stop(),t.rtl?(s.css("margin-left",-o),s.animate({"margin-left":"0px"},"fast",function(){s.css("display","block"),a._animating=!1,a._menuvisible=!0})):(s.css("margin-left","0px"),s.animate({"margin-left":-o},"fast",function(){s.css("display","block"),a._animating=!1,a._menuvisible=!0}));var e=t.rtl?o:-(32+o);a.iconscontainer.animate({"margin-left":e},"fast")}else{s.css("display","block");var e=t.rtl?16:-48;a.iconscontainer.css("margin-left",e+"px"),a._animating=!1,a._menuvisible=!0}}},n="mouseenter";if(t.isTouchDevice()&&(n="touchstart"),t.addHandler(r,n,function(i){var s=parseInt(i.pageX),o=t.columnsresize&&a.resizable?3:0,n=parseInt(r.coord().left);t.hasTransform&&(n=e.jqx.utilities.getOffset(r).left);var d=a.width;if(t.rtl&&(d=0),0!=o&&s>=n+d-o&&n+d+o>=s)return!1;var h=t.vScrollInstance.isScrolling();a.menu&&t.autoshowcolumnsmenubutton&&!h&&!t.disabled&&l()}),!t.autoshowcolumnsmenubutton){s.css("display","block");var d=t.rtl?16:-48;a.iconscontainer.css("margin-left",d+"px"),s.css(t.rtl?{"margin-left":"0px"}:{"margin-left":-o})}t.addHandler(r,"mouseleave",function(){if(t.menuitemsarray&&t.menuitemsarray.length>0&&a.menu){var i=e.data(document.body,"contextmenu"+t.element.id);if(void 0!=i&&s[0].id==i.columnsmenu.id)return;if(t.autoshowcolumnsmenubutton)if(t.enableanimations){t.rtl?s.css("margin-left","0px"):s.css("margin-left",-o),s.stop(),a.iconscontainer.stop(),t.rtl?s.animate({"margin-left":-o},"fast",function(){s.css("display","none"),a._menuvisible=!1
}):s.animate({"margin-left":0},"fast",function(){s.css("display","none"),a._menuvisible=!1});var r=t.rtl?0:-32;a.iconscontainer.animate({"margin-left":r},"fast")}else{s.css("display","none");var r=t.rtl?0:-32;a.iconscontainer.css("margin-left",r+"px"),a._menuvisible=!1}}});var h=!0,c="",u=e(a.filtericon);t.addHandler(s,"mousedown",function(){t.gridmenu||t._initmenu(),h=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),c=e.data(document.body,"contextmenu"+t.element.id),null!=c&&(c=c.column.datafield)}),t.addHandler(u,"mousedown",function(){t.gridmenu||t._initmenu(),h=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),c=e.data(document.body,"contextmenu"+t.element.id),null!=c&&(c=c.column.datafield)});var g=function(){if(!a.menu)return!1;if(t.gridmenu||t._initmenu(),t.disabled)return!1;for(var i=0;i<t.columns.records.length;i++)t.columns.records[i].datafield!=a.datafield&&(t.columns.records[i]._menuvisible=!1);var r=s.coord(!0),o=s.height();if(!h&&(h=!0,c==a.datafield))return t._closemenu(),!1;var l=t.host.coord(!0);t.hasTransform&&(l=e.jqx.utilities.getOffset(t.host),r=e.jqx.utilities.getOffset(s)),l.left+t.host.width()>parseInt(r.left)+t.gridmenu.width()?t.gridmenu.jqxMenu("open",r.left,r.top+o):t.gridmenu.jqxMenu("open",s.width()+r.left-t.gridmenu.width(),r.top+o),t.gridmenu.width()<100&&t._arrangemenu(),t._hasOpenedMenu=!0;var n=t._getmenuitembyindex(0),d=t._getmenuitembyindex(1),u=t._getmenuitembyindex(2),g=t._getmenuitembyindex(3),p=t._getmenuitembyindex(4),f=t._getmenuitembyindex(5);if(null!=n&&null!=d&&null!=u){var v=a.sortable&&t.sortable;if(t.gridmenu.jqxMenu("disable",n.id,!v),t.gridmenu.jqxMenu("disable",d.id,!v),t.gridmenu.jqxMenu("disable",u.id,!v),void 0!=a.displayfield)if(t.sortcolumn==a.displayfield){var m=t.getsortinformation();v&&(m.sortdirection.ascending?t.gridmenu.jqxMenu("disable",n.id,!0):t.gridmenu.jqxMenu("disable",d.id,!0))}else t.gridmenu.jqxMenu("disable",u.id,!0)}if(null!=g&&null!=p&&(t.groupable&&a.groupable?t.groups&&-1!=t.groups.indexOf(a.datafield)?(t.gridmenu.jqxMenu("disable",g.id,!0),t.gridmenu.jqxMenu("disable",p.id,!1)):(t.gridmenu.jqxMenu("disable",g.id,!1),t.gridmenu.jqxMenu("disable",p.id,!0)):(t.gridmenu.jqxMenu("disable",p.id,!0),t.gridmenu.jqxMenu("disable",g.id,!0))),null!=f){t._updatefilterpanel(t,f,a);var w=0;t.sortable&&t._togglesort&&t.showsortmenuitems&&(w+=3),t.groupable&&t.addgroup&&t.showgroupmenuitems&&(w+=2);var b=27*w+3;e.jqx.browser.msie&&e.jqx.browser.version<8&&(b+=20,e(f).height(190)),t.filterable&&t.showfiltermenuitems&&(a.filterable?(t.gridmenu.height(b+180),e(f).css("display","block")):(t.gridmenu.height(b),e(f).css("display","none")))}e.data(document.body,"contextmenu"+t.element.id,{column:a,columnsmenu:s[0]})};t.addHandler(u,"click",function(){return a.menu?(t.showfilterrow||("block"!=s[0].style.display&&r.trigger("mouseenter"),setTimeout(function(){"block"!=s[0].style.display&&r.trigger("mouseenter"),g()},200)),!1):!1}),t.addHandler(s,"click",function(){return a.menu?(g(),!1):!1}),t.isTouchDevice()&&t.addHandler(s,e.jqx.mobile.getTouchEventName("touchstart"),function(){return a.menu?(t._hasOpenedMenu?t._closemenu():g(),!1):!1})},_removecolumnhandlers:function(t){var i=this.that,r=e(t.element);if(r.length>0){i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave");var s=e(t.filtericon);if(i.removeHandler(s,"mousedown"),i.removeHandler(s,"click"),i.removeHandler(r,"click"),i.removeHandler(r,"mousemove"),i.columnsreorder&&(i.removeHandler(r,"mousedown.drag"),i.removeHandler(r,"mousemove.drag")),i.removeHandler(r,"dragstart"),r[0].columnsmenu){var a=e(r[0].columnsmenu);i.removeHandler(a,"click"),i.removeHandler(a,"mousedown"),i.removeHandler(a,e.jqx.mobile.getTouchEventName("touchstart"))}}},_rendercolumnheader:function(e,t,i,r){var s="4px";if(r.columngroups?(s=i/2-this._columnheight/2,0>s&&(s=4),s+="px"):25!=this.columnsheight&&(s=this.columnsheight/2-this._columnheight/2,0>s&&(s=4),s+="px"),this.enableellipsis)return'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; margin-bottom: "+s+"; margin-top: "+s+';"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>";if("center"==t||"middle"==t)return'<div style="padding-bottom: 2px; text-align: center; margin-top: '+s+';"><a href="#">'+e+"</a></div>";var a='<a style="margin-top: '+s+"; float: "+t+';" href="#">'+e+"</a>";return a},_renderrows:function(t,i){var r=this.that;if((this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(r.prerenderrequired=!0),!this.pageable&&(this.autoheight||this.autorowheight)&&(this.virtualmode||this.unboundmode)){var s=this.source.totalrecords;isNaN(s)||null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length!=s&&(r.prerenderrequired=!0)}!this.autoheight&&!this.autorowheight||r.prerenderrequired||this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?r.prerenderrequired=!0:this.pageable||(r.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?r.prerenderrequired=!0:this.pageable||(r.prerenderrequired=!0))),r._prerenderrows(t),r._requiresupdate&&(r._requiresupdate=!1,r._updatepageviews());var a=function(){r._loading||(r.WinJS?MSApp.execUnsafeLocalFunction(function(){r._rendervisualrows()}):r._rendervisualrows(),r.virtualmode&&r.showaggregates&&r._updateaggregates&&r.refreshaggregates())},o=e.jqx.browser.msie&&e.jqx.browser.version<10;if(this.virtualmode){var l=function(){if(r.rendergridrows){var e=r._startboundindex;void 0==e&&(e=0);var t=e+1+r.dataview.pagesize;if(null!=e&&null!=t){var s=r.source._source?!0:!1,a=s?r.source._source.recordstartindex:r.source.recordstartindex;if(a!=e||1==i){if(s){if(t>=r.source._source.totalrecords&&(t=r.source._source.totalrecords,e=t-r.dataview.pagesize-1,0>e&&(e=0),r.source._source.recordendindex==t&&r.source._source.recordstartindex==e))return;r.source._source.recordstartindex=e,r.source._source.recordendindex=t}else r.source.recordstartindex=e,r.source.recordendindex=t;r.updatebounddata("cells")}}}};this.loadondemand&&(a(),l(),this.loadondemand=!1);var n=void 0==this._browser?this._isIE10():this._browser;this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?a():this.autoheight?a():n||o||navigator&&-1!=navigator.userAgent.indexOf("Safari")?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){a()},5)):a()}else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var d=this._getfirstvisualrow();if(null!=d){var h=function(){if(null==d)return"";var t="<table>",i=r.deferreddatafields;null==i&&r.columns.records.length>0&&(i=new Array,i.push(r.columns.records[0].displayfield));for(var s=0;s<i.length;s++){var a=i[s],o=r._getcolumnbydatafield(a);if(o){var l=r._getcellvalue(o,d);""!=o.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(l)?l=e.jqx.dataFormat.formatdate(l,o.cellsformat,r.gridlocalization):e.jqx.dataFormat.isNumber(l)&&(l=e.jqx.dataFormat.formatnumber(l,o.cellsformat,r.gridlocalization))),t+="<tr><td>"+l+"</td></tr>"}}return t+="</table>"},c=this.scrollfeedback?this.scrollfeedback(d.bounddata):h(d.bounddata);c!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=c,this._scrollelementcontent=c)}return this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),void(this._scrolltimer=setInterval(function(){r.hScrollInstance.isScrolling()||r.vScrollInstance.isScrolling()||(a(),r._scrollelement.css("visibility","hidden"),r._scrollelementoverlay.css("visibility","hidden"),clearInterval(r._scrolltimer),d&&r.ensurerowvisible(d.visibleindex))},100))}navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1),void 0!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5);var n=void 0==this._browser?this._isIE10():this._browser;if((n||o)&&(this._updatedelay=5),n&&this.hScrollInstance.isScrolling())return void a();if(e.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0),null!=this.updatedelay&&(this._updatedelay=this.updatedelay),0==this._updatedelay)a();else{var u=this._jqxgridrendertimer;null!=u&&clearTimeout(u),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(u=setTimeout(function(){a()},this._updatedelay),this._jqxgridrendertimer=u):(this._jqxgridrendertimer=u,a())}}if(r.autorowheight&&!r.autoheight&&this._pageviews.length>0){var g=this._gettableheight(),p=this._pageviews[0].height;if(p>g)if(this.pageable&&this.gotopage&&(p=this._pageviews[0].height,0>p&&(p=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(g>=p||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),p-g>0){if("deferred"!=this.scrollmode){var f=p-g,v=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:f}),Math.round(f)!=Math.round(v)&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:p});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=p)}},scrolling:function(){var e=this.vScrollInstance.isScrolling(),t=this.hScrollInstance.isScrolling();return{vertical:e,horizontal:t}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(e.value=0,t=0);var i=parseInt(t);if(null!=this.table){var r=this.table[0].rows.length,s=this.columnsrow,a=this.groupable&&this.groups.length>0?this.groups.length:0,o=this.columns.records.length-a,l=this.columns.records,n=0==this.dataview.rows.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),n&&!this._haspinned){for(var d=0;r>d;d++)for(var h=this.table[0].rows[d],c=0;a+o>c;c++){var u=h.cells[c];if(void 0!=u){var g=l[c];if(g.pinned&&(u.style.marginLeft=i+"px",0==d)){var p=s[0].cells[c];p.style.marginLeft=i+"px"}}}this.table[0].style.marginLeft=-i+"px",s[0].style.marginLeft=-i+"px"}else if(this._haspinned||void 0==this._haspinned){for(var d=0;r>d;d++)for(var h=this.table[0].rows[d],c=0;a+o>c;c++){var u=h.cells[c];if(void 0!=u){var g=l[c];if(g.pinned){if(0==i&&""==u.style.marginLeft)continue;var f=null,v=null;if(this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(v=this.filterrow[0].cells[c]),this.showaggregates&&this.statusbar[0].cells&&(f=this.statusbar[0].cells[c]),this.rtl){if(u.style.marginLeft=-parseInt(t)+"px",0==d){var p=s[0].cells[c];p.style.marginLeft=-parseInt(t)+"px",f&&(f.style.marginLeft=-parseInt(t)+"px"),v&&(v.style.marginLeft=-parseInt(t)+"px")}}else if(u.style.marginLeft=i+"px",0==d){var p=s[0].cells[c];p.style.marginLeft=i+"px",f&&(f.style.marginLeft=i+"px"),v&&(v.style.marginLeft=i+"px")}}}}this.table[0].style.marginLeft=-i+"px",s[0].style.marginLeft=-i+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-i+"px",s[0].style.marginLeft=-i+"px");if(this.showaggregates&&this.statusbar[0].cells){var m=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(m=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-i+m+"px"}this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-i+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var t=0;t<this._rowdetailselementscache.length;t++)e(this._rowdetailselementscache[t]).css("display","none")},_getvisualcolumnsindexes:function(e,t,i,r,s){if(this.rowdetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:i+r};var a=0,o=-1,l=i+r,n=!1;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var d=0;i+r>d;d++){if(n||this.columns.records[d].pinned&&(n=!0),this.columns.records[d].hidden||(a+=this.columns.records[d].width),a>=e&&-1==o&&(o=d),a>t+e){l=d;break}}return l++,l>i+r&&(l=i+r),(-1==o||n)&&(o=0),{start:o,end:l}},_getfirstvisualrow:function(){var e=this.vScrollInstance,t=e.value,i=parseInt(t);if(0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"visible"!=this.vScrollBar[0].style.visibility&&(i=0),!this.pageable){var r=this._findvisiblerow(i,this._pageviews);if(-1==r)return null;r!=this.dataview.pagenum?(this.dataview.pagenum=r,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var s=this._findvisiblerow(i,this._pagescache[this.dataview.pagenum]),a=this._pagescache[this.dataview.pagenum];return a&&a[0]?a[s]:void 0},_rendervisualrows:function(){if(this.virtualsizeinfo){var t=this.vScrollInstance,i=this.hScrollInstance,r=t.value,s=i.value,a=parseInt(r),o=parseInt(s),l=this._gettableheight(),n=void 0!=this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&(l+=29),"deferred"==this.scrollmode&&0!=this._newmax&&a>this._newmax&&null!=this._newmax&&(a=this._newmax);var d=t.isScrolling()||i.isScrolling()||this._keydown,h=this.groupable&&this.groups.length>0;if(this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&void 0==this.editrow&&this._hidecelleditor(!1),void 0!=this.editrow&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"hidden"==this.vScrollBar[0].style.visibility&&(a=0),!this.pageable){var c=this._findvisiblerow(a,this._pageviews);if(-1==c)return this._clearvisualrows(),this._renderemptyrow(),void this._updaterowdetailsvisibility();c!=this.dataview.pagenum?(this.dataview.pagenum=c,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var u=this.groupable&&this.groups.length>0?this.groups.length:0;if(this.columns.records){var g=this.columns.records.length-u,p=this._findvisiblerow(a,this._pagescache[this.dataview.pagenum]),f=this._pagescache[this.dataview.pagenum],v=p;0>v&&(v=0);var m=0,w=0,b=0,x=0,y=this.virtualsizeinfo.visiblerecords,_=this.groupable?this.groups.length:0,q=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(q+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(y=this.dataview.pagesize),h&&(q=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(q+=" "+this.toTP("jqx-touch")),this.autorowheight&&(q+=" jqx-grid-cell-wrap");var j=this.rowsheight,z=this._rendercell,k=!0,S=this._getvisualcolumnsindexes(o,n,u,g,h),I=S.start,T=S.end;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(v=0),v>=0){this._updaterowdetailsvisibility(),this._startboundindex=null!=f?f[v].bounddata.boundindex:0,this._startvisibleindex=null!=f?f[v].bounddata.visibleindex:0;for(var C=0;y>C&&y>w;C++){var D=void 0!=f?f[v+C]:null;if(null==D){if(v=-C,this._pagescache[this.dataview.pagenum+1])f=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var B=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){f=void 0;break}this.dataview.pagenum++,f=void 0,this._pageviews[this.dataview.pagenum].height>0&&(this.dataview.updateview(),this._loadrows(),f=this._pagescache[this.dataview.pagenum])}while(void 0==f&&this.dataview.pagenum<B)}void 0!=f&&(D=f[v+C])}if(null!=D){if(D.hidden)continue;if(this._endboundindex=this._startboundindex+C,this._endvisibleindex=this._startvisibleindex+C,0==C){var P=Math.abs(a-D.top);this.table[0].style.top=-P+"px",x=-P}var H=this.table[0].rows[w];if(!H)continue;parseInt(H.style.height)!=D.height&&(H.style.height=parseInt(D.height)+"px"),b+=D.height;var A=this.rowdetails&&D.rowdetails,M=!D.rowdetailshidden;A&&M&&(H.style.height=parseInt(D.height-D.rowdetailsheight)+"px",y++);for(var L=this._isrowselected(k,D),E=I;T>E;E++){var O=E;this._rendervisualcell(z,q,L,A,M,h,_,H,D,O,w,d)}if(void 0!=D.group&&this._rendergroup&&this._rendergroup(_,H,D,u,g,w,n),this.autorowheight&&(this.autoheight||this.pageable)){for(var j=this.rowsheight,E=I;T>E;E++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[E].datafield&&this.editcell.row==this.getboundindex(D)?j=Math.max(j,this.editcell.editor.height()):H.cells[E].firstChild&&(j=Math.max(j,8+parseInt(H.cells[E].firstChild.offsetHeight)));H.style.height=parseInt(j)+"px",this.heights[this._startboundindex+C]=j,A&&M&&(j+=D.rowdetailsheight),D.height=j}if(this.visiblerows[this.visiblerows.length]=D,this.hittestinfo[this.hittestinfo.length]={row:D,visualrow:H,details:!1},A&&M){w++;var H=this.table[0].rows[w];this._renderrowdetails(q,H,D,u,g,w),this.visiblerows[this.visiblerows.length]=D,this.hittestinfo[this.hittestinfo.length]={row:D,visualrow:H,details:!0}}if(!this.autorowheight&&b+x>=l)break}else cansetheight=!0,this._clearvisualrow(o,h,w,u,g),l>=b+m+x&&(m+=j);w++}if(this._horizontalvalue=o,m>0&&"visible"==this.vScrollBar[0].style.visibility){var N=(parseInt(this.table.css("top")),this._pageviews[this._pageviews.length-1]),F=t.max,G=N.top+N.height-l;"visible"==this.hScrollBar.css("visibility")&&(G+=this.scrollbarsize+20),F==G||this.autorowheight||G>=0&&("deferred"!=this.scrollmode?(t.max=G,t.setPosition(t.max)):this._newmax!=G&&(this._newmax=G,this._rendervisualrows()))}}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;for(var W=0,Y=0,R=0;R<this.visiblerows.length;R++){var K=this.visiblerows[R];K.top=W,W+=K.height,Y+=K.height;var A=this.rowdetails&&K.rowdetails,M=!K.rowdetailshidden,H=this.table[0].rows[R];A&&M&&R++;for(var E=I;T>E;E++){var U=this.columns.records[E];if(!U.hidden&&!U.cellsrenderer){var X=H.cells[E],V=0;if(X.firstChild){var V=(K.height-parseInt(X.firstChild.offsetHeight)-8)/2;if(A&&M)var V=(K.height-K.rowdetailsheight-e(X.firstChild).height()-8)/2}else var V=(K.height-parseInt(e(X).height())-8)/2;if(V>=0&&(V=parseInt(V)+4,X.firstChild&&-1==X.firstChild.className.indexOf("jqx-grid-groups-row")&&"checkbox"!=U.columntype&&"button"!=U.columntype)){if(this.editable&&this.editcell&&this.editcell.column==U.datafield&&this.editcell.row==this.getboundindex(K))continue;X.firstChild.style.marginTop=V+"px"}}}}this._pageviews[0]&&(this._pageviews[0].height=Y),this._arrange()}this._renderemptyrow()}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var t=this.table[0].rows[0];if(t)for(var i=!1,r=0;r<t.cells.length;r++){var s=e(t.cells[r]);"none"==s.css("display")||i||(s.width()==this.host.width()||s.text()==this.gridlocalization.emptydatastring)&&(s[0].checkbox=null,s[0].button=null,i=!0,s[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var t=!1,i=this.toTP("jqx-grid-cell");if(this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0){var r=this.table[0].rows[0];this.table[0].style.top="0px";for(var s=0;s<r.cells.length;s++){var a=e(r.cells[s]);if("none"!=a.css("display")&&!t){a[0].checkbox=null,a[0].button=null,a[0].className=i,t=!0,a[0].innerHTML="";var o=e("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");o.text(this.gridlocalization.emptydatastring),a.append(o);var l=0;this.oldhscroll||(l=parseInt(this.table[0].style.marginLeft),this.rtl&&(a.css("z-index",999),a.css("overflow","visible"))),o.css("left",-l-o.width()/2),o.css("top",this._gettableheight()/2-o.height()/2),e.jqx.browser.msie&&e.jqx.browser.version<8&&(o.css("margin-left","0px"),o.css("left",this.host.width()/2-o.width()/2));var n=Math.abs(parseInt(this.table[0].style.top));isNaN(n)&&(n=0),e(r).height(this._gettableheight()+n),a.css("margin-left","0px"),a.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())}a.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance,i=t.value,r=parseInt(i),s=this.groupable&&this.groups.length>0;if(this.columns.records)for(var a=0;e>a;a++)this._clearvisualrow(r,s,a,0,this.columns.records.length)},_iscellselected:function(e,t,i){var r=!1,s=0;if(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(s=this.dataview.pagesize*this.dataview.pagenum),this.groups.length>0&&this.pageable&&this.groupable){var a=this.getrowboundindexbyid(t.bounddata.uid);for(var o in this.selectedcells)o==a+"_"+i&&(r=!0);return r}if(e&&null!=t.bounddata)if("singlerow"!=this.selectionmode){if(this.dataview.filters.length>0)if(this.virtualmode||void 0==t.bounddata.dataindex)for(var o in this.selectedcells)o==s+t.bounddata.boundindex+"_"+i&&(r=!0);else for(var o in this.selectedcells)o==s+t.bounddata.dataindex+"_"+i&&(r=!0);else for(var o in this.selectedcells)if(o==s+t.bounddata.boundindex+"_"+i){r=!0;break}}else if(this.dataview.filters.length>0){if(this.virtualmode||void 0==t.bounddata.dataindex){for(var o in this.selectedcells)if(o==s+t.bounddata.boundindex+"_"+i){r=!0;break}}else for(var o in this.selectedcells)if(o==s+t.bounddata.dataindex+"_"+i){r=!0;break}}else for(var o in this.selectedcells)if(o==s+t.bounddata.boundindex==this.selectedrowindex){r=!0;break}return r},_isrowselected:function(e,t){var i=!1,r=0;if(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(r=this.dataview.pagesize*this.dataview.pagenum),this.groupable&&this.groups.length>0&&this.pageable){var s=this.getrowboundindexbyid(t.bounddata.uid);return void 0==s||-1==s?!1:(-1!=this.selectedrowindexes.indexOf(s)&&(i=!0),i||(i=s==this.selectedrowindex&&-1!=this.selectedrowindex),i)}return e&&null!=t.bounddata&&("singlerow"!=this.selectionmode?this.dataview.filters.length>0?this.virtualmode||void 0==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):this.dataview.filters.length>0?this.virtualmode||void 0==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(i=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i},_rendervisualcell:function(t,i,r,s,a,o,l,n,d,h,c,u){var g=this.columns.records[h];if(g.hidden){var p=n.cells[h];return void(p.innerHTML="")}cellvalue=this._getcellvalue(g,d);var p=n.cells[h],f=i;if(-1!=this.selectionmode.indexOf("cell")&&(r=this.dataview.filters.length>0?this.selectedcells[d.bounddata.dataindex+"_"+g.datafield]?!0:!1:this.selectedcells[d.boundindex+"_"+g.datafield]?!0:!1,this.editcell&&this.editcell.row===d.boundindex&&this.editcell.column===g.datafield&&"checkbox"!==g.columntype&&(r=!1),(this.virtualmode||this.groupable&&this.groups.length>0&&this.pageable)&&(r=this._iscellselected(!0,d,g.datafield))),""!=g.cellclassname&&g.cellclassname)if("string"==typeof g.cellclassname)f+=" "+g.cellclassname;else{var v=g.cellclassname(this.getboundindex(d),g.datafield,cellvalue,d.bounddata);v&&(f+=" "+v)}var m=this.showsortcolumnbackground&&this.sortcolumn&&g.displayfield==this.sortcolumn;if(m&&(f+=" "+this.toTP("jqx-grid-cell-sort")),g.filter&&this.showfiltercolumnbackground&&(f+=" "+this.toTP("jqx-grid-cell-filter")),(g.pinned&&this.showpinnedcolumnbackground||g.grouped)&&(f+=o?" "+this.toTP("jqx-grid-cell-pinned"):" "+this.toTP("jqx-grid-cell-pinned")),this.altrows&&void 0==d.group){var w=d.visibleindex;w>=this.altstart&&(this.altstart+w)%(1+this.altstep)==0&&(f+=m?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),g.filter&&this.showfiltercolumnbackground&&(f+=" "+this.toTP("jqx-grid-cell-filter-alt")),g.pinned&&this.showpinnedcolumnbackground&&(f+=" "+this.toTP("jqx-grid-cell-pinned-alt")))}if(l>=h){if(o||this.rowdetails){var b=e(p),x=this.columns.records[h].width;p.style.width!=parseInt(x)+"px"&&b.width(x)}}else if((o||this.rowdetails)&&this._hiddencolumns){var b=e(p),x=this.columns.records[h].width;parseInt(p.style.width)!=x&&b.width(x)}var y=!0;if(this.rowdetails&&s&&(a&&!o?f+=" "+this.toTP("jqx-grid-details-cell"):o&&(f+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(void 0==d.group&&h==n.cells.length-l-1){var _=this.toThemeProperty("jqx-icon-arrow-down");if(a)f+=" "+this.toTP("jqx-grid-group-expand-rtl"),f+=" "+_;else{f+=" "+this.toTP("jqx-grid-group-collapse-rtl");var _=this.toThemeProperty("jqx-icon-arrow-left");f+=" "+_}return y=!1,p.title="",p.innerHTML="",void(p.className!=f&&(p.className=f))}}else if(void 0==d.group&&h==l){var _=this.toThemeProperty("jqx-icon-arrow-down");if(a)f+=" "+this.toTP("jqx-grid-group-expand"),f+=" "+_;else{f+=" "+this.toTP("jqx-grid-group-collapse");var _=this.toThemeProperty("jqx-icon-arrow-right");f+=" "+_}return y=!1,p.title="",p.innerHTML="",void(p.className!=f&&(p.className=f))}return r&&y&&h>=l&&(f+=" "+this.toTP("jqx-grid-cell-selected"),f+=" "+this.toTP("jqx-fill-state-pressed")),p.className!=f&&(p.className=f),void 0!=d.group?(cellvalue="",p.title="",void(p.innerHTML="")):void t(this,g,d,cellvalue,p,u)},_rendercell:function(t,i,r,s,a,o){var l=s+"_"+i.visibleindex;if("number"==i.columntype||null!=i.cellsrenderer)var l=r.uniqueid+"_"+i.visibleindex;if("number"==i.columntype&&(s=r.visibleindex),t.editcell&&void 0==t.editrow)if("selectedrow"==t.editmode&&i.editable&&t.editable){if(t.editcell.row==t.getboundindex(r)&&t._showcelleditor)return void(t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,a,!1,!1):t._showcelleditor(t.editcell.row,i,a,t.editcell.init))}else if(t.editcell.row==t.getboundindex(r)&&t.editcell.column==i.datafield&&(t.editcell.element=a,t.editcell.editing&&t._showcelleditor))return void(t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init,!1):t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init));var n=t._defaultcellsrenderer(s,i),d=t._cellscache[l];if(d){if("inline"==i.columntype){if(t._renderinlinecell(t,a,i,r,s),null!=i.cellsrenderer){var h=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata);void 0!=h&&(a.innerHTML=h)}return}if("checkbox"==i.columntype){if(t.host.jqxCheckBox){""===s&&(s=null);var c=0==a.innerHTML.toString().length;if(!a.checkbox||t.groupable||c?t._rendercheckboxcell(t,a,i,r,s):(a.checkboxrow=t.getboundindex(r),""==s&&(s=!1),"1"==s&&(s=!0),"0"==s&&(s=!1),1==s&&(s=!0),0==s&&(s=!1),"true"==s&&(s=!0),"false"==s&&(s=!1),null!=s||i.threestatecheckbox||(s=!1),i.checkboxcolumn&&(s=!1,t.dataview.filters.length>0&&!t.virtualmode&&void 0!=r.bounddata.dataindex?-1!=t.selectedrowindexes.indexOf(r.bounddata.dataindex)&&(s=!0):-1!=t.selectedrowindexes.indexOf(r.bounddata.boundindex)&&(s=!0)),t.disabled||(a.checkboxinstance?a.checkboxinstance._setState(s):a.checkbox.jqxCheckBox("_setState",s))),null!=i.cellsrenderer){var h=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata);void 0!=h&&(a.innerHTML=h)}return}}else if("button"==i.columntype&&t.host.jqxButton)return""==s&&(s=!1),null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),""==a.innerHTML&&(a.buttonrow=t.getboundindex(r),a.button=null,t._renderbuttoncell(t,a,i,r,s)),void(a.button&&!t.groupable?(a.buttonrow=t.getboundindex(r),a.button.val(s)):t._renderbuttoncell(t,a,i,r,s));var u=d.element;if(null!=i.cellsrenderer||a.childNodes&&0==a.childNodes.length||t.groupable||t.rowdetails)a.innerHTML!=u&&(a.innerHTML=u);else if(a.innerHTML.indexOf("editor")>=0)a.innerHTML=u;else if(o){var g=u.indexOf(">"),p=u.indexOf("</"),f=u.substring(g+1,p),v=a.childNodes[0];if(f.indexOf(">")>=0)a.innerHTML=u;else if(v.childNodes[0])f!=v.childNodes[0].nodeValue&&(f.indexOf("&")>=0?a.innerHTML=u:v.childNodes[0].nodeValue=f);else{var m=document.createTextNode(f);v.appendChild(m)}}else a.innerHTML!=u&&(a.innerHTML=u);return void(t.enabletooltips&&i.enabletooltips&&(a.title=d.title))}if("checkbox"==i.columntype)return t._rendercheckboxcell(t,a,i,r,s),t._cellscache[l]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(a.title=s));if("button"==i.columntype)return null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),t._renderbuttoncell(t,a,i,r,s),t._cellscache[l]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(a.title=s));if("number"==i.columntype)s=r.visibleindex;else if("inline"==i.columntype)return t._renderinlinecell(t,a,i,r,s),t._cellscache[l]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(a.title=s));var u=null;u=null!=i.cellsrenderer?i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata):n,null==u&&(u=n);var w=s;return t.enabletooltips&&i.enabletooltips&&(""!=i.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(s)?w=e.jqx.dataFormat.formatdate(w,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(s)&&(w=e.jqx.dataFormat.formatnumber(w,i.cellsformat,this.gridlocalization))),a.title=w),t.WinJS?e(a).html(u):a.innerHTML=u,t._cellscache[l]={element:a.innerHTML,title:w},!0},_isIE10:function(){if(void 0==this._browser){var t=e.jqx.utilities.getBrowser();if("msie"==t.browser&&parseInt(t.version)>9)this._browser=!0;else if(this._browser=!1,"msie"==t.browser){var i="Browser CodeName: "+navigator.appCodeName;i+="Browser Name: "+navigator.appName,i+="Browser Version: "+navigator.appVersion,i+="Platform: "+navigator.platform,i+="User-agent header: "+navigator.userAgent,-1!=i.indexOf("Zune 4.7")&&(this._browser=!0)}}return this._browser},_renderinlinecell:function(t,i){e(i);i.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(t,i,r,s,a){if(t.host.jqxCheckBox){var o=e(i);if(""===a&&(a=r.threestatecheckbox?null:!1),"1"==a&&(a=!0),"0"==a&&(a=!1),1==a&&(a=!0),0==a&&(a=!1),"true"==a&&(a=!0),"false"==a&&(a=!1),r.checkboxcolumn){a=!1;var l=this.getboundindex(s);-1!=this.selectedrowindexes.indexOf(l)&&(a=!0)}if(0==o.find(".jqx-checkbox").length){i.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>',e(i.firstChild).jqxCheckBox({disabled:t.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:r.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:t.theme,checked:a}),this.editable&&r.editable&&e(i.firstChild).jqxCheckBox({locked:!1}),r.checkboxcolumn&&e(i.firstChild).jqxCheckBox({locked:!1}),i.checkbox=e(i.firstChild),i.checkboxinstance=i.checkbox.data().jqxCheckBox.instance,i.checkboxrow=this.getboundindex(s);var n=e.data(i.firstChild,"jqxCheckBox").instance;n.updated=function(s,a,o){if(t.disabled){a=o;for(var l=t.table[0].rows.length,n=t._getcolumnindex(r.datafield),d=0;l>d;d++){var h=t.table[0].rows[d].cells[n].firstChild;h&&e(h).jqxCheckBox({disabled:t.disabled})}}if(r.editable&&!t.disabled){var l=t.table[0].rows.length,n=t._getcolumnindex(r.datafield);if(void 0==t.editrow){if(r.cellbeginedit){var c=r.cellbeginedit(i.checkboxrow,r.datafield,r.columntype,!a);if(0==c)return void t.setcellvalue(i.checkboxrow,r.datafield,!a,!0)}if("selectedrow"!==t.editmode)for(var d=0;l>d;d++){var h=t.table[0].rows[d].cells[n].firstChild;h&&e(h).jqxCheckBox("destroy")}t.editcell&&0==t.editcell.validated?t.setcellvalue(i.checkboxrow,r.datafield,!a,!0):"selectedrow"!==t.editmode||null==t.editcell?(t._raiseEvent(17,{rowindex:i.checkboxrow,datafield:r.datafield,value:o,columntype:r.columntype}),t.setcellvalue(i.checkboxrow,r.datafield,a,!0),t._raiseEvent(18,{rowindex:i.checkboxrow,datafield:r.datafield,oldvalue:o,value:a,columntype:r.columntype})):t.setcellvalue(i.checkboxrow,r.datafield,a,!1,!1)}}else r.checkboxcolumn&&(t.editcell&&t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t.disabled||(a?t.selectrow(i.checkboxrow):t.unselectrow(i.checkboxrow),t.autosavestate&&t.savestate&&t.savestate()))}}else i.checkboxrow=this.getboundindex(s),e(i.firstChild).jqxCheckBox("_setState",a)}},_renderbuttoncell:function(t,i,r,s,a){if(t.host.jqxButton){var o=e(i);if(""==a&&(a=!1),0==o.find(".jqx-button").length){i.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',e(i.firstChild).val(a),e(i.firstChild).attr("hideFocus","true"),e(i.firstChild).jqxButton({disabled:t.disabled,theme:t.theme,height:t.rowsheight-4,width:r.width-4}),i.button=e(i.firstChild),i.buttonrow=t.getboundindex(s);
var l=this.isTouchDevice();if(l){var n=e.jqx.mobile.getTouchEventName("touchend");t.addHandler(e(i.firstChild),n,function(e){r.buttonclick&&r.buttonclick(i.buttonrow,e)})}else t.addHandler(e(i.firstChild),"click",function(e){r.buttonclick&&r.buttonclick(i.buttonrow,e)})}else i.buttonrow=t.getboundindex(s),e(i.firstChild).val(a)}},_clearvisualrow:function(t,i,r,s,a){var o=this.toTP("jqx-grid-cell");i&&(o=" "+this.toTP("jqx-grid-group-cell")),o+=" "+this.toTP("jqx-grid-cleared-cell");for(var l=this.table[0].rows,n=0;s+a>n;n++)if(l[r]){var d=l[r].cells[n];d.className!=o&&(d.className=o);var h=this.columns.records[n];if(this._horizontalvalue!=t&&!h.pinned&&1==this.oldhscroll){d.style.marginLeft=-t+"px"}var c=h.width;c<h.minwidth&&(c=h.minwidth),c>h.maxwidth&&(c=h.maxwidth),parseInt(d.style.width)!=c&&(e(d)[0].style.width="auto"!=c?c+"px":c),""!=d.title&&(d.title=""),""!=d.innerHTML&&(d.innerHTML="")}l[r]&&parseInt(l[r].style.height)!=this.rowsheight&&(l[r].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(e){var t=this._findgroup(e);return null==t?!1:t.expanded},_findgroup:function(e){var t=null;return this.expandedgroups[e]?this.expandedgroups[e]:t},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(t){if(void 0==this._columnsbydatafield&&(this._columnsbydatafield=new Array),this._columnsbydatafield[t])return this._columnsbydatafield[t];var i=t,r=null;return e.each(this.columns.records,function(){return this.datafield==t?(i=this.text,r=this,!1):void 0}),this._columnsbydatafield[t]={label:i,column:r},this._columnsbydatafield[t]},_getcolumnbydatafield:function(t){if(void 0==this.__columnsbydatafield&&(this.__columnsbydatafield=new Array),this.__columnsbydatafield[t])return this.__columnsbydatafield[t];var i=t,r=null;return e.each(this.columns.records,function(){return this.datafield==t||this.displayfield==t?(i=this.text,r=this,!1):void 0}),this.__columnsbydatafield[t]=r,this.__columnsbydatafield[t]},isscrollingvertically:function(){var e=this.vScrollBar.jqxScrollBar("isScrolling");return e},_renderrowdetails:function(t,i,r,s,a){if(void 0!=i){var o=e(i),l=0,n=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&this.groups.length>0)for(var d=0;a>=d;d++){var h=e(i.cells[d]);h[0].innerHTML="",h[0].className="jqx-grid-details-cell"}var h=e(i.cells[l]);if("none"==h[0].style.display){for(var c=i.cells[l],u=2,g=l;void 0!=c&&"none"==c.style.display&&10>u;)c=i.cells[g+u-1],u++;h=e(c)}if(this.rtl)for(var p=s;a>p;p++)i.cells[p].innerHTML="",i.cells[p].className="jqx-grid-details-cell";h.css("width","100%"),o.height(r.rowdetailsheight),h[0].className=t;var f=this.getboundindex(r),v=f+"_";if(this._rowdetailscache[v]){var m=this._rowdetailscache[v],w=m.html;if(this.initrowdetails){if(this._rowdetailscache[v].element){var b=this._rowdetailscache[v].element,x=h.coord(),y=this.gridcontent.coord(),_=parseInt(x.top)-parseInt(y.top),q=parseInt(x.left)-parseInt(y.left);this.rtl&&(q=0),e(b).css("top",_),e(b).css("left",q),e(b).css("display","block"),e(b).width(this.host.width()-n),this.layoutrowdetails&&this.layoutrowdetails(f,b,this.element,this.getrowdata(f))}}else h[0].innerHTML=w}else{h[0].innerHTML="",this.enablerowdetailsindent||(n=0);var j='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+n+'px;">'+r.rowdetails+"</div>";if(this.rtl)var j='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+n+'px;">'+r.rowdetails+"</div>";if(this._rowdetailscache[v]={id:i.id,html:j},this.initrowdetails){var b=e(j)[0];e(this.gridcontent).prepend(e(b)),e(b).css("position","absolute"),e(b).width(this.host.width()-n),e(b).height(h.height());var x=h.coord();e(b).css("z-index",9999),this.isTouchDevice()&&e(b).css("z-index",99999),e(b).addClass(this.toThemeProperty("jqx-widget-content"));var x=h.coord(),y=this.gridcontent.coord(),_=parseInt(x.top)-parseInt(y.top),q=parseInt(x.left)-parseInt(y.left);e(b).css("top",_),e(b).css("left",q),this.content[0].scrollTop=0,this.content[0].scrollLeft=0;var z=e(e(b).children()[0]);""!=z[0].id&&(z[0].id=z[0].id+f),this.initrowdetails(f,b,this.element,this.getrowdata(f)),this._rowdetailscache[v].element=b,this._rowdetailselementscache[f]=b}else h[0].innerHTML=j}}},_defaultcellsrenderer:function(t,i){""!=i.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(t)?t=e.jqx.dataFormat.formatdate(t,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(t)&&(t=e.jqx.dataFormat.formatnumber(t,i.cellsformat,this.gridlocalization)));var r="4px";if(25!=this.rowsheight&&(r=this.rowsheight/2-this._cellheight/2,0>r&&(r=4),r+="px"),this.enableellipsis){if("center"==i.cellsalign||"middle"==i.cellsalign)return'<div style="text-overflow: ellipsis; overflow: hidden; padding-bottom: 2px; text-align: center; margin-top: '+r+';">'+t+"</div>";if("left"==i.cellsalign)return'<div style="overflow: hidden; text-overflow: ellipsis; padding-bottom: 2px; text-align: left; margin-right: 2px; margin-left: 4px; margin-top: '+r+';">'+t+"</div>";if("right"==i.cellsalign)return'<div style="overflow: hidden;  text-overflow: ellipsis; padding-bottom: 2px; text-align: right; margin-right: 2px; margin-left: 4px; margin-top: '+r+';">'+t+"</div>"}return"center"==i.cellsalign||"middle"==i.cellsalign?'<div style="text-align: center; margin-top: '+r+';">'+t+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+r+"; float: "+i.cellsalign+';">'+t+"</span>"},getcelltext:function(t,i){if(null==t||null==i)return null;var r=this.getcellvalue(t,i),s=this.getcolumn(i);return s&&""!=s.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,s.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(r=e.jqx.dataFormat.formatnumber(r,s.cellsformat,this.gridlocalization))),r},getcelltextbyid:function(t,i){if(null==t||null==i)return null;var r=this.getcellvaluebyid(t,i),s=this.getcolumn(i);return s&&""!=s.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,s.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(r=e.jqx.dataFormat.formatnumber(r,s.cellsformat,this.gridlocalization))),r},_getcellvalue:function(e,t){var i=null;return i=t.bounddata[e.datafield],null!=e.displayfield&&(i=t.bounddata[e.displayfield]),null==i&&(i=""),i},getcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e,s="";return isNaN(i)||(r=this.getrowdata(i)),null!=r&&(s=r[t]),this._getcellresult(s,e,t)},getrenderedcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e,s="";return isNaN(i)||(r=this.getrenderedrowdata(i)),null!=r&&(s=r[t]),this._getcellresult(s,e,t)},_getcellresult:function(e,t,i){var r=this.getcolumn(i);if(null==r||void 0==r)return null;var s=r.getcolumnproperties(),a=s.hidden,o=s.width,l=s.pinned,n=s.cellsalign,d=s.cellsformat,h=this.getrowheight(t);return 0==h?null:{value:e,row:t,column:i,datafield:i,width:o,height:h,hidden:a,pinned:l,align:n,format:d}},setcellvaluebyid:function(e,t,i,r,s){var a=this.getrowboundindexbyid(e);return this.setcellvalue(a,t,i,r,s)},getcellvaluebyid:function(e,t){var i=this.getrowboundindexbyid(e);return this.getcellvalue(i,t)},setcellvalue:function(t,i,r,s,a){if(null==t||null==i)return!1;var o=parseInt(t),l=o,n=t;isNaN(o)||(n=this.getrowdata(o));var d=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(d=!0),this.virtualmode&&(this._pagescache=new Array),this.sortcache&&(this.sortcache={});var h="",c="";if(null==n||n[i]===r)return this._updating||0==s||this._renderrows(this.virtualsizeinfo),!1;if(null!==n[i]||""!==r){var u=this._getcolumnbydatafield(i),g="string",p=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(p){var f="";e.each(p,function(){return this.name==u.displayfield?(this.type&&(f=this.type),!1):void 0}),f&&(g=f),c=n[u.displayfield]}if(h=n[i],!u.nullable||null!=r&&""!==r&&u.nullable&&void 0===r.label){if(e.jqx.dataFormat.isNumber(h)||"number"==g||"float"==g||"int"==g||"decimal"==g&&"date"!=g)r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0);else if((e.jqx.dataFormat.isDate(h)||"date"==g)&&""!=r){var v=r;v=new Date(v),"Invalid Date"!=v&&null!=v?r=v:"Invalid Date"==v&&(v=new Date,r=v)}if(n[i]===r)return void(this._updating||0==s||this._renderrows(this.virtualsizeinfo))}var m=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name;if(n[i]=r,m){var w=this.source._source.localdata;w._updating||(w._updating=!0,w[t][i]=r,w._updating=!1)}var b=this.getrenderedrowdata(o,!0);if(b){if(b[i]=r,null!=r&&null!=r.label){var u=this._getcolumnbydatafield(i);n[u.displayfield]=r.label,b[u.displayfield]=r.label,n[i]=r.value,b[i]=r.value,m&&!w._updating&&(w._updating=!0,w[t][i]=r.value,w[t][u.displayfield]=r.label,w._updating=!1)}if(d&&void 0!=n.dataindex&&(l=n.dataindex,this.dataview.cachedrecords[n.dataindex][i]=r,null!=r&&void 0!=r.label&&(this.dataview.cachedrecords[n.dataindex][i]=r.value,this.dataview.cachedrecords[n.dataindex][u.displayfield]=r.label)),this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var x=o;d&&void 0!=n.dataindex&&(x=n.dataindex);var y=this.source._source._localdata()[x];this.source.suspendKO=!0;var _=y;if(_[i]&&_[i].subscribe)null!=r&&null!=r.label?(_[u.displayfield](r.label),_[i](r.value)):_[i](r);else{var p=this.source._source.datafields,q=null;if(p&&e.each(p,function(){return this.name==i?(q=this.map,!1):void 0}),null==q)null!=r&&null!=r.label?(_[i]=r.value,_[u.displayfield]=r.label):_[i]=r;else{var j=q.split(this.source.mapChar);if(j.length>0){for(var z=_,k=0;k<j.length-1;k++)z=z[j[k]];z[j[j.length-1]]=r}}this.source._source._localdata.replace(y,e.extend({},_))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){var S=this.getsortinformation();this.sortcolumn==i&&(this.dataview.clearsortdata(),this.dataview.sortby(S.sortcolumn,S.sortdirection.ascending))}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=new Array,this.source.updaterow&&(void 0==a||1==a)){var I=!1,T=this.that,C=function(e){0==e&&(T.setcellvalue(t,i,h,!0,!1),h!=c&&T.setcellvalue(t,T.getcolumn(i).displayfield,c,!0,!1))};try{var D=this.getrowid(o);I=this.source.updaterow(D,n,C),void 0==I&&(I=!0)}catch(B){return I=!1,T.setcellvalue(t,i,h,!0,!1),void(h!=c&&T.setcellvalue(t,T.getcolumn(i).displayfield,c,!0,!1))}}var P=this.vScrollInstance.value;if(this._updating&&1!=s&&(s=!1),1==s||void 0==s){var T=this.that,H=function(){T.pageable&&T.updatepagerdetails&&(T.updatepagerdetails(),(T.autoheight||T.autorowheight)&&T._updatepageviews())},A=this.groupable&&this.groups.length>0;d&&!A?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),H(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!A?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),H(),this._renderrows(this.virtualsizeinfo)):this.groupable&&this.groups.length>0?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable&&-1!=this.groups.indexOf(i)?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}if(this.vScrollInstance.setPosition(P),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow){var M=this.getcolumn(i).filtertype;("list"==M||"checkedlist"==M)&&this._updatelistfilters(!0)}return this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:r,value:r,oldvalue:h}),!0}}},getcellvalue:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e;if(isNaN(i)||(r=this.getrowdata(i)),null!=r){var s=r[t];return s}return null},getrows:function(){var t=this.dataview.records.length;if(this.virtualmode){for(var i=new Array,r=0;r<this.dataview.records.length;r++){var s=this.dataview.records[r];s&&i.push(s)}void 0===this.dataview.records.length&&e.each(this.dataview.records,function(){var e=this;e&&i.push(e)});var a=0;return this.pageable&&(a=this.dataview.pagenum*this.dataview.pagesize),i.length>this.source._source.totalrecords-a?i.slice(0,this.source._source.totalrecords-a):i}if(this.dataview.sortdata){for(var i=new Array,r=0;t>r;r++){var o={};o=e.extend({},this.dataview.sortdata[r].value),i[r]=o}return i}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);for(var i=this.getboundrows(),r=0;r<i.length;r++)if(i[r]&&i[r].uid==e)return r;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t)return t;var i=this.getrowboundindexbyid(e);return this.getboundrows()[i]},getrowdata:function(e){if(void 0==e&&(e=0),this.virtualmode){var t=this.dataview.records[e];return t}var t=this.getboundrows()[e];return t},getrenderedrowdata:function(e,t){if(void 0==e&&(e=0),this.virtualmode){var i=this.getrowvisibleindex(e),r=this.dataview.loadedrecords[i];return r}var i=this.getrowvisibleindex(e);if(i>=0){if(this.groupable&&this.groups.length>0)var r=this.dataview.loadedrecords[i];else{var r=this.dataview.loadedrecords[i];if(this.pageable&&(void 0==t||0==t))var r=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e]}return r}return null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){for(var t=this.getdisplayrows(),i=0;i<t.length;i++)if(void 0!==t[i].dataindex){if(t[i].dataindex===e)return t[i].visibleindex}else if(t[i].boundindex===e)return t[i].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.groupable&&this.groups.length>0&&this.pageable&&e.bounddata&&(t=this.getrowboundindexbyid(e.bounddata.uid)),this.dataview.filters.length>0&&(e.bounddata?void 0!==e.bounddata.dataindex&&(t=e.bounddata.dataindex):void 0!==e.dataindex&&(t=e.dataindex)),t},getrowboundindex:function(e){var t=this.getdisplayrows()[e];return t?void 0!==t.dataindex?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var e=[],t=0;t<this.dataview.pagesize;t++){var i=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum];if(void 0==i)break;e.push(i)}return e}if(void 0!=this._startboundindex&&void 0!=this._endboundindex){for(var e=[],t=this._startvisibleindex;t<=this._endvisibleindex;t++){var i=this.dataview.loadedrecords[t];if(void 0==i)break;e.push(i)}return e}return this.dataview.loadedrecords},getrowid:function(e){if(void 0==e&&(e=0),this.virtualmode){var t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];if(i)return i.uid}else{var i=null,r=this.dataview.filters.length>0;if(e>=0&&e<this.dataview.bounditems.length&&!r){if(this.groupable&&this.groups.length>0)var t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];else var t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];if(i)return i.uid}if(this.dataview.filters.length>0){var i=this.getboundrows()[e];return i&&null!=i.uid?i.uid:null}}return null},_updateGridData:function(e){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),"updaterow"==e?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&this.groups.length>0?(this.dataview.reloaddata(),this.render()):(this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,r){if(void 0!=t&&void 0!=i){var s=this.that,a=!1;s._datachanged=!0;var o=function(t,i,s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var a=!1;e.isArray(i)?(e.each(i,function(e){a=t.dataview.updaterow(this,s[e],!1)}),t.dataview.refresh()):a=t.dataview.updaterow(i,s);var o=t.vScrollInstance.value;if((void 0==r||1==r)&&(void 0==t._updating||0==t._updating)&&t._updateGridData("updaterow"),t.showaggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var l=t.dataview.recordsbyid["id"+i],n=t.dataview.records.indexOf(l),d=t.source._source._localdata()[n];t.source.suspendKO=!0,t.source._source._localdata.replace(d,e.extend({},l)),t.source.suspendKO=!1}var h=t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name;if(h&&!t.source._source.localdata._updating){t.source._source.localdata._updating=!0;var c=t.getrowboundindexbyid(i);t.source._source.localdata.set(c,s),t.source._source.localdata._updating=!1}return t.vScrollInstance.setPosition(o),a};if(this.source.updaterow){var l=function(e){1==e||void 0==e?o(s,t,i):a=!1};try{a=this.source.updaterow(t,i,l),void 0==a&&(a=!0)}catch(n){a=!1}}else a=o(s,t,i);return a}return!1},deleterow:function(t,i){if(void 0!=t){this._datachanged=!0;var r=!1,s=this.that,a=this.getrowboundindexbyid(t);void 0!=a&&(this.selectedrowindexes.indexOf(a)>=0&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(a),1),this.selectedrowindex==a&&(this.selectedrowindex=-1));var o=function(t,r){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var s=!1,o=t.vScrollInstance.value;if(e.isArray(r))e.each(r,function(){s=t.dataview.deleterow(this,!1)}),t.dataview.refresh();else var s=t.dataview.deleterow(r);(void 0==t._updating||0==t._updating)&&(void 0==i||1==i)&&(t._render(!0,!0,!1,!1),"visible"!=t.vScrollBar.css("visibility")&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo))),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1);var l=t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name;if(l&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,t.source._source.localdata.splice(a,1),t.source._source.localdata._updating=!1)),t.dataview.sortby){var n=t.getsortinformation();t.dataview.clearsortdata(),t.dataview.sortby(n.sortcolumn,n.sortdirection?n.sortdirection.ascending:null)}return t.vScrollInstance.setPosition(o),s};if(this.source.deleterow){var l=function(e){(1==e||void 0==e)&&o(s,t)};try{this.source.deleterow(t,l),void 0==r&&(r=!0)}catch(n){r=!1}}else r=o(s,t);return r}return!1},addrow:function(t,i,r){if(void 0!=i){this._datachanged=!0,void 0==r&&(r="last");var s=!1,a=this.that;if(null==t){var o=this.dataview.filters&&this.dataview.filters.length>0,l=o?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(e.isArray(i)){var n=new Array;e.each(i,function(e){var t=a.dataview.getid(a.dataview.source.id,i[e],l+e);n.push(t)}),t=n}else for(t=this.dataview.getid(this.dataview.source.id,i,l);null!=this.dataview.recordsbyid["id"+t];)t++}var d=function(t,i,r,s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var a=t.vScrollInstance.value,o=!1;e.isArray(r)?(e.each(r,function(e){void 0!=this.dataindex&&delete this.dataindex;var r=null;null!=i&&null!=i[e]&&(r=i[e]),o=t.dataview.addrow(r,this,s,!1)}),t.dataview.refresh()):(void 0!=r&&void 0!=r.dataindex&&delete r.dataindex,o=t.dataview.addrow(i,r,s)),(void 0==t._updating||0==t._updating)&&(t._render(!0,!0,!1,!1),t.invalidate()),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1);var l=t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name;if(l&&!t.source._source.localdata._updating){t.source._source.localdata._updating=!0;var n=t.getrowboundindexbyid(i);t.source._source.localdata.set(n,r),t.source._source.localdata._updating=!1}return t.vScrollInstance.setPosition("deferred"!=t.scrollmode?a:0),o};if(this.source.addrow){var h=function(e,s){(1==e||void 0==e)&&(void 0!=s&&(t=s),d(a,t,i,r))};try{s=this.source.addrow(t,i,r,h),void 0==s&&(s=!0)}catch(c){s=!1}if(0==s)return!1}else d(this,t,i,r);return s}return!1},_findvisiblerow:function(e,t){void 0==e&&(e=parseInt(this.vScrollInstance.value));var i=0;(void 0==t||null==t)&&(t=this.rows.records);for(var r=t.length;r>=i;){mid=parseInt((i+r)/2);var s=t[mid];if(void 0==s)break;if(s.top>e&&s.top+s.height>e)r=mid-1;else{if(!(s.top<e&&s.top+s.height<e))return mid;i=mid+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(e){var t=this.that;if(void 0!=t.gridcontent){void 0==t.table&&(t.table=t.gridcontent.find("#contenttable"+t.element.id));var i=t.groupable&&t.groups.length>0,r=0,s=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(s=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),s=t.dataview.rows.length)),t.groupable||t.pageable||!t.autoheight&&!t.autorowheight||(s=t.dataview.totalrecords),t.rowdetails&&(s+=t.dataview.pagesize),t.columns.records){for(var a=t.columns.records.length,o=t.table[0].rows,l=0;s>l;l++){var n=o[l];if(!n)break;for(var d=n.cells,h=0,c=0;a>c;c++){var u=t.columns.records[c],g=u.width,p=d[c];parseInt(p.style.left)!=h&&(p.style.left=h+"px"),parseInt(p.style.width)!=g&&(p.style.width=g+"px"),u.hidden&&u.hideable?p.style.display="none":h+=parseFloat(g)}0==r&&(t.table.width(parseFloat(h)+2),r=h)}t.showaggregates&&t._updateaggregates&&t._updateaggregates(),t.showfilterrow&&t.filterable&&t._updatefilterrowui&&t._updatefilterrowui(),t._updatescrollbarsafterrowsprerender(),i&&t._renderrows(t.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var e=this.that,t=e.hScrollBar[0].style.visibility,i=0,r=e.vScrollBar[0].style.visibility;"visible"==r&&(i=e.scrollbarsize+3),e.scrollbarautoshow&&(i=0);var s=e.element.style.width;if(s=s.toString().indexOf("%")>=0?e.host.width():parseInt(s),parseInt(e.table[0].style.width)-2>s-i){if("visible"!=t&&(e.autowidth||(e.hScrollBar[0].style.visibility="visible"),e._arrange()),"visible"==r){if("deferred"==e.scrollmode||e.virtualmode)e._updatevscrollbarmax();else if(e.virtualsizeinfo){var a=e.virtualsizeinfo.virtualheight-e._gettableheight();!isNaN(a)&&a>0&&("hidden"!=t?e.vScrollBar.jqxScrollBar("max",a+e.scrollbarsize+4):e.vScrollBar.jqxScrollBar("max",a))}}else i=-2;e.hScrollBar.jqxScrollBar("max",i+e.table.width()-e.host.width())}else"hidden"!=t&&(e.hScrollBar.css("visibility","hidden"),e._arrange());e._renderhorizontalscroll()},_prerenderrows:function(t){var i=this.that;if(1==i.prerenderrequired){if(i.prerenderrequired=!1,i.editable&&i._destroyeditors&&i._destroyeditors(),void 0==i.gridcontent)return;i.gridcontent.find("#contenttable"+i.element.id).remove(),null!=i.table&&(i.table.remove(),i.table=null),i.table=e('<div id="contenttable'+i.element.id+'" style="overflow: hidden; position: relative;" height="100%"></div>'),i.gridcontent.addClass(i.toTP("jqx-grid-content")),i.gridcontent.addClass(i.toTP("jqx-widget-content")),i.gridcontent.append(i.table);var r=i.groupable&&i.groups.length>0,s=0;i.table[0].rows=new Array;var a=i.toTP("jqx-grid-cell");r&&(a=" "+i.toTP("jqx-grid-group-cell"));var o=t.visiblerecords;if(i.pageable&&(i.autoheight||i.autorowheight)&&(o=i.dataview.pagesize,i.groupable&&(i.dataview.updateview(),o=i.dataview.rows.length,o<i.dataview.pagesize&&(o=i.dataview.pagesize))),i.pageable||!i.autoheight&&!i.autorowheight||(o=i.dataview.totalrecords),i.groupable&&i.groups.length>0&&(i.autoheight||i.autorowheight)&&!i.pageable&&(o=i.dataview.rows.length),i.rowdetails&&(o+=i.autoheight||i.autorowheight?i.dataview.pagesize:o),!i.columns.records)return;var l=i.columns.records.length;e.jqx.browser.msie&&e.jqx.browser.version>8&&i.table.css("opacity","0.99"),e.jqx.browser.mozilla,-1!=navigator.userAgent.indexOf("Safari")&&i.table.css("opacity","0.99");var n=e.jqx.browser.msie&&e.jqx.browser.version<8;n&&i.host.attr("hideFocus","true");var d=i.tableZIndex;o*l>d&&(d=o*l);var h=(0==i.dataview.records.length,i.isTouchDevice(),"");i._hiddencolumns=!1;for(var c=0;o>c;c++){var u='<div role="row" style="position: relative; height='+i.rowsheight+'px;" id="row'+c+i.element.id+'">';if(n){var u='<div role="row" style="position: relative; z-index: '+d+"; height:"+i.rowsheight+'px;" id="row'+c+i.element.id+'">';d--}for(var g=0,p=0;l>p;p++){var f=i.columns.records[p],v=f.width;if(v<f.minwidth&&(v=f.minwidth),v>f.maxwidth&&(v=f.maxwidth),i.rtl){var m=d-l+2*p,w='<div role="gridcell" style="left: '+g+"px; z-index: "+m+"; width:"+v+"px;";d--}else var w='<div role="gridcell" style="left: '+g+"px; z-index: "+d--+"; width:"+v+"px;";f.hidden&&f.hideable?(w+="display: none;",i._hiddencolumns=!0,d++):g+=v,w+='" class="'+a+'"></div>',u+=w}0==s&&(i.table.width(parseInt(g)+2),s=g),u+="</div>",h+=u}i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(h)}):i.table[0].innerHTML=h,i.table[0].rows=new Array;for(var b=i.table.children(),c=0;o>c;c++){var x=b[c];i.table[0].rows.push(x),x.cells=new Array;for(var y=e(x).children(),p=0;l>p;p++)x.cells.push(y[p])}if(0==o){var g=0;if(i.showemptyrow){var u=e('<div style="position: relative;" id="row0'+i.element.id+'"></div>');i.table.append(u),u.height(i.rowsheight),i.table[0].rows[0]=u[0],i.table[0].rows[0].cells=new Array}for(var p=0;l>p;p++){var f=i.columns.records[p],v=f.width;if(i.showemptyrow){var w=e('<div style="position: absolute; height: 100%; left: '+g+"px; z-index: "+d--+"; width:"+v+'px;" class="'+a+'"></div>');w.height(i.rowsheight),u.append(w),i.table[0].rows[0].cells[p]=w[0]}v<f.minwidth&&(v=f.minwidth),v>f.maxwidth&&(v=f.maxwidth),f.hidden&&f.hideable||(g+=v)}i.table.width(parseInt(g)+2),s=g}i._updatescrollbarsafterrowsprerender(),i.rendered&&i.rendered("rows"),i._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null;this.tableheight=null;var i=this.that,r=!1,s=!1;if(null!=i.width&&-1!=i.width.toString().indexOf("px")?e=i.width:void 0==i.width||isNaN(i.width)||(e=i.width),null!=i.width&&-1!=i.width.toString().indexOf("%")&&(e=i.width,r=!0),i.scrollbarautoshow&&(i.vScrollBar[0].style.display="none",i.hScrollBar[0].style.display="none",i.vScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex,i.hScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex),i.autowidth){for(var a=0,o=0;o<i.columns.records.length;o++){var l=i.columns.records[o].width;"auto"==l?(l=i._measureElementWidth(i.columns.records[o].text),a+=l):a+=l}"hidden"!=i.vScrollBar.css("visibility")&&(a+=i.scrollbarsize+4),e=a,i.width=e}null!=i.height&&-1!=i.height.toString().indexOf("px")?t=i.height:void 0==i.height||isNaN(i.height)||(t=i.height),null!=i.height&&-1!=i.height.toString().indexOf("%")&&(t=i.height,s=!0);var n=function(){var e=0,t=i.showheader&&null!=i.columnsheader?i.columnsheader.height()+2:0;return e+=t,i.pageable&&(e+=i.pagerheight),i._groupsheader()&&(e+=i.groupsheaderheight),i.showtoolbar&&(e+=i.toolbarheight),i.showstatusbar&&(e+=i.statusbarheight),"visible"==i.hScrollBar[0].style.visibility&&(e+=20),e};if(i.autoheight&&i.virtualsizeinfo)if(i.pageable&&i.gotopage){var d=0;t=d+(i._pageviews[0]?i._pageviews[0].height:0),t+=n(),i.showemptyrow&&0==i.dataview.totalrecords&&(t+=i.rowsheight)}else{var d=i.host.height()-i._gettableheight();i._pageviews.length>0?(t=d+i._pageviews[i._pageviews.length-1].height+i._pageviews[i._pageviews.length-1].top,i.vScrollBar[0].style.visibility="hidden"):(t=n(),i.showemptyrow&&(t+=i.rowsheight))}else i.autoheight&&(t=i.dataview.totalrecords*i.rowsheight,i._loading&&(t=250,i.dataloadelement.height(t)),t+=n(),t>1e4&&(t=1e4));null!=e?(e=parseInt(e),r?i.element.style.width=i.width:i.element.style.width!=parseInt(i.width)+"px"&&(i.element.style.width=parseInt(i.width)+"px"),r&&(e=i.host.width(),2>=e&&(e=600,i.host.width(e)),i._oldWidth||(i._oldWidth=e))):i.host.width(250),null!=t?(s||(t=parseInt(t)),s?i.element.style.height=i.height:i.element.style.height!=parseInt(t)+"px"&&(i.element.style.height=parseInt(t)+"px"),s&&!i.autoheight&&(t=i.host.height(),0==t&&(t=400,i.host.height(t)),i._oldHeight||(i._oldHeight=t))):i.host.height(250),i.autoheight&&(i.tableheight=null,i._gettableheight());var h=0;if(i.showtoolbar?(i.toolbar.width(e),i.toolbar.height(i.toolbarheight-1),i.toolbar.css("top",0),h+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.toolbar[0].style.height="0px",i.showstatusbar?(i.statusbar.width(i.showaggregates?i.table?Math.max(e,i.table.width()):e:e),i.statusbar.height(i.statusbarheight)):i.statusbar[0].style.height="0px",i._groupsheader()){i.groupsheader.width(e),i.groupsheader.height(i.groupsheaderheight),i.groupsheader.css("top",h);var c=i.groupsheader.height()+1;h+=c,t>c&&(t-=parseInt(c))}else{i.groupsheader[0].style.width!=e+"px"&&(i.groupsheader[0].style.width=parseInt(e)+"px"),i.groupsheader[0].style.height="0px",i.groupsheader[0].style.top!=h+"px"&&i.groupsheader.css("top",h);var c=i.showgroupsheader&&i.groupable?i.groupsheaderheight:0,u=h+c+"px";i.content[0].style.top!=u&&i.content.css("top",h+i.groupsheaderheight)}var g=i.scrollbarsize;isNaN(g)&&(g=parseInt(g),isNaN(g)?g="17px":g+="px"),g=parseInt(g);var p=4,f=2,v=0;"visible"==i.vScrollBar[0].style.visibility&&(v=g+p),"visible"==i.hScrollBar[0].style.visibility&&(f=g+p+2);var m=0;i.pageable&&(m=i.pagerheight,f+=i.pagerheight),i.showstatusbar&&(f+=i.statusbarheight,m+=i.statusbarheight),i.hScrollBar[0].style.height!=g+"px"&&(i.hScrollBar[0].style.height=parseInt(g)+"px"),(i.hScrollBar[0].style.top!=h+t-p-g-m+"px"||"0px"!=i.hScrollBar[0].style.left)&&i.hScrollBar.css({top:h+t-p-g-m+"px",left:"0px"});var w=i.hScrollBar[0].style.width,b=!1,x=!1;0==v?w!=e-2+"px"&&(i.hScrollBar.width(e-2),b=!0):w!=e-g-p+"px"&&(i.hScrollBar.width(e-g-p+"px"),b=!0),i.autoheight||(i.vScrollBar[0].style.width!=g+"px"&&(i.vScrollBar.width(g),x=!0),i.vScrollBar[0].style.height!=parseInt(t)-f+"px"&&(i.vScrollBar.height(parseInt(t)-f+"px"),x=!0),(i.vScrollBar[0].style.left!=parseInt(e)-parseInt(g)-p+"px"||i.vScrollBar[0].style.top!=h+"px")&&i.vScrollBar.css({left:parseInt(e)-parseInt(g)-p+"px",top:h})),i.rtl&&(i.vScrollBar.css({left:"0px",top:h}),"hidden"!=i.vScrollBar.css("visibility")&&i.hScrollBar.css({left:g+2}));var y=i.vScrollInstance;y.disabled=i.disabled,i.autoheight||x&&y.refresh();var _=i.hScrollInstance;_.disabled=i.disabled,b&&_.refresh(),i.autowidth&&(i.hScrollBar[0].style.visibility="hidden"),i.statusbarheight=parseInt(i.statusbarheight),i.toolbarheight=parseInt(i.toolbarheight);var q=function(e){"visible"==e.vScrollBar[0].style.visibility&&"visible"==e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(g)+3),e.bottomRight.height(parseInt(g)+4),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(g)+4+e.statusbarheight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight}))):e.bottomRight[0].style.visibility="hidden"};if(q(this),i.content[0].style.width!=e-v+"px"&&i.content.width(e-v),i.content[0].style.height!=t-f+3+"px"&&i.content.height(t-f+3),i.scrollbarautoshow&&(i.content[0].style.width!=e+"px"&&i.content.width(e),i.content[0].style.height!=t+"px"&&i.content.height(t)),i.content[0].style.top!=h+"px"&&i.content.css("top",h),i.rtl&&(i.content.css("left",v),i.scrollbarautoshow&&i.content.css("left","0px"),i.table)){var j=i.table.width();e-v>j&&i.content.css("left",e-j)}if(i.showstatusbar&&(i.statusbar.css("top",h+t-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.showaggregates&&("visible"==i.hScrollBar.css("visibility")&&(i.hScrollBar.css({top:h+t-p-g-m+i.statusbarheight+"px"}),i.statusbar.css("top",1+h+t-g-5-i.statusbarheight-(i.pageable?i.pagerheight:0))),q(this)),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.statusbar.css("left",i.content.css("left")):i.statusbar.css("left","0px"))),i.pageable?(i.pager.width(e),i.pager.height(i.pagerheight),i.pager.css("top",h+t-i.pagerheight-1)):i.pager[0].style.height="0px",null!=i.table){var z=-2;
if("visible"==i.vScrollBar[0].style.visibility&&(z=i.scrollbarsize+3),"visible"==i.hScrollBar[0].style.visibility){var k=z+i.table.width()-i.host.width();k>=0&&i.hScrollBar.jqxScrollBar("max",k),"visible"==i.hScrollBar[0].style.visibility&&0==k&&(i.hScrollBar[0].style.visibility="hidden",i._arrange())}}e!=parseInt(i.dataloadelement[0].style.width)&&(i.dataloadelement[0].style.width=i.element.style.width),t!=parseInt(i.dataloadelement[0].style.height)&&(i.dataloadelement[0].style.height=i.element.style.height),i._hostwidth=e},destroy:function(){if(delete e.jqx.dataFormat.datescache,delete this.gridlocalization,e.jqx.utilities.resize(this.host,null,!0),this.table&&this.table[0]){for(var t=this.table[0].rows.length,i=0;t>i;i++){for(var r=this.table[0].rows[i],s=r.cells,a=s.length,o=0;a>o;o++)e(r.cells[o]).remove(),r.cells[o]=null,delete r.cells[o];r.cells=null,r.cells&&delete r.cells,e(this.table[0].rows[i]).remove(),this.table[0].rows[i]=null}try{delete this.table[0].rows}catch(l){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(var i=0;i<this.columns.records.length;i++){var n=this.columns.records[i];this._removecolumnhandlers(this.columns.records[i]),n.element&&(e(n.element).remove(),e(n.sortasc).remove(),e(n.sortdesc).remove(),e(n.filtericon).remove(),e(n.menu).remove(),n.element=null,n.uielement=null,n.sortasc=null,n.sortdesc=null,n.filtericon=null,n.menu=null,delete n.element,delete n.uielement,delete n.sortasc,delete n.sortdesc,delete n.filtericon,delete n.menu,delete this.columnsrow[0].cells[i])}try{delete this.columnsrow[0].cells}catch(l){}delete this.columnsrow}if(e.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(e(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(e(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(e(document),"selectstart."+this.element.id),this.removeHandler(e(document),"mousedown.resize"+this.element.id),this.removeHandler(e(document),"mouseup.resize"+this.element.id),this.removeHandler(e(document),"mousemove.resize"+this.element.id),this.isTouchDevice()){var d=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,h=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,c=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),d),this.removeHandler(e(document),h),this.removeHandler(e(document),c)}if(this.removeHandler(e(document),"mousedown.reorder"+this.element.id),this.removeHandler(e(document),"mouseup.reorder"+this.element.id),this.removeHandler(e(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()){var d=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,h=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,c=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id;this.removeHandler(e(document),d),this.removeHandler(e(document),h),this.removeHandler(e(document),c)}if(this.removeHandler(e(window),"resize."+this.element.id),this.groupable){var d="mousemove.grouping"+this.element.id,h="mousedown.grouping"+this.element.id,c="mouseup.grouping"+this.element.id;this.removeHandler(e(document),d),this.removeHandler(e(document),h),this.removeHandler(e(document),c)}if(this.columnsreorder){var d="mousemove.reorder"+this.element.id,h="mousedown.reorder"+this.element.id,c="mouseup.reorder"+this.element.id;this.removeHandler(e(document),d),this.removeHandler(e(document),h),this.removeHandler(e(document),c),delete this.columnsbounds}if(this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader.remove(),delete this.columnsheader,this.selectionarea.remove(),delete this.selectionarea,this.menuitemsarray&&this.menuitemsarray.length)for(var u=this.menuitemsarray.length,i=0;u>i;i++)e(this.menuitemsarray[i]).remove();delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent.remove(),delete this.gridcontent,this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var i=this.source?this.source.datafields:null;null==i&&this.source&&this.source._source&&(i=this.source._source.datafields);var r=i?i.length>0:!1;if(this.autogeneratecolumns){var s=new Array;if(i)e.each(i,function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};s.push(e)});else if(this.source.records.length>0){var a=this.source.records[0];for(obj in a)if("uid"!=obj){var o={width:100,datafield:obj,text:obj};s.push(o)}}this.columns=s}if(this.columns&&this.columns.records)for(var l=0;l<this.columns.records.length;l++)this._removecolumnhandlers(this.columns.records[l]);var n=this.that,d=new e.jqx.collection(this.element),h=0;if(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.groupable&&e.each(this.groups,function(){var e=new t(n,this);e.visibleindex=h++,e.width=n.groupindentwidth,d.add(e),e.grouped=!0,e.filterable=!1,e.sortable=!1,e.editable=!1,e.resizable=!1,e.draggable=!1}),this.rowdetails&&this.showrowdetailscolumn){var o=new t(n,this);o.visibleindex=h++,o.width=n.groupindentwidth,o.pinned=!0,o.editable=!1,o.filterable=!1,o.draggable=!1,o.groupable=!1,o.resizable=!1,d.add(o),n._haspinned=!0}if("checkbox"==this.selectionmode){var o=new t(n,null);o.visibleindex=h++,o.width=n.groupindentwidth,o.checkboxcolumn=!0,o.editable=!1,o.columntype="checkbox",o.groupable=!1,o.draggable=!1,o.filterable=!1,o.resizable=!1,o.datafield="_checkboxcolumn",d.add(o)}var c=new Array;e.each(this.columns,function(e){if(void 0!=n.columns[e]){var i=new t(n,this);if(i.visibleindex=h++,void 0!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(n._haspinned=!0),null==this.datafield)n.source&&n.source._source&&"array"==n.source._source.datatype&&(r||(n.source._source.datafields?n.source._source.datafields.push({name:e.toString()}):(n.source._source.datafields=new Array,n.source._source.datafields.push({name:e.toString()}))),this.datafield=e.toString(),this.displayfield=e.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else{if(c[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");c[this.datafield]=!0}d.add(i)}}),this.rtl&&d.records.reverse(),this.columns=d},_initializeRows:function(){var t=new e.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=t},_raiseEvent:function(t,i){if(void 0==i&&(i={owner:null}),this._trigger!==!1){var r=this.events[t];this._camelCase||(r=r.toLowerCase()),args=i,args.owner=this;var s=new e.Event(r);s.owner=this,s.args=args;var a=this.host.trigger(s);return i=s.args,a}},wheel:function(e,t){if(t.autoheight&&"visible"!=t.hScrollBar.css("visibility"))return e.returnValue=!0,!0;var i=0;if(e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var r=t._handleDelta(i);return r&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),void 0!=e.stopPropagation&&e.stopPropagation()),r?(r=!1,e.returnValue=r,r):!1}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;0>e?this.scrollDown():this.scrollUp();var i=this.vScrollInstance.value;if(t!=i)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){var t=this.hScrollInstance.value;this.hScrollInstance.setPosition(e>0?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.value-2*this.horizontalscrollbarstep:0:this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.value+2*this.horizontalscrollbarstep:this.hScrollInstance.max);var i=this.hScrollInstance.value;if(t!=i)return!0}return!1},scrollDown:function(){if("hidden"!=this.vScrollBar.css("visibility")){var e=this.vScrollInstance;e.setPosition(e.value+this.rowsheight<=e.max?parseInt(e.value)+this.rowsheight:e.max)}},scrollUp:function(){if("hidden"!=this.vScrollBar.css("visibility")){var e=this.vScrollInstance;e.setPosition(e.value-this.rowsheight>=e.min?parseInt(e.value)-this.rowsheight:e.min)}},_removeHandlers:function(){var t=this.that;t.removeHandler(t.vScrollBar,"valueChanged"),t.removeHandler(t.hScrollBar,"valueChanged"),t.vScrollInstance.valueChanged=null,t.hScrollInstance.valueChanged=null;var i="mousedown.jqxgrid";t.isTouchDevice()&&(i=e.jqx.mobile.getTouchEventName("touchend")),t.removeHandler(t.host,"dblclick.jqxgrid"),t.removeHandler(t.host,i),t.removeHandler(t.content,"mousemove",t._mousemovefunc),t.removeHandler(t.host,"mouseleave.jqxgrid"),t.removeHandler(t.content,"mouseenter"),t.removeHandler(t.content,"mouseleave"),t.removeHandler(t.content,"mousedown"),t.removeHandler(t.content,"scroll"),t.removeHandler(t.content,"selectstart."+t.element.id),t.removeHandler(t.host,"dragstart."+t.element.id),t.removeHandler(t.host,"keydown.edit"+t.element.id),t.removeHandler(e(document),"keydown.edit"+t.element.id),t.removeHandler(e(document),"keyup.edit"+t.element.id),t._mousemovedocumentfunc&&t.removeHandler(e(document),"mousemove.selection"+t.element.id,t._mousemovedocumentfunc),t.removeHandler(e(document),"mouseup.selection"+t.element.id),t._mousewheelfunc&&t.removeHandler(t.host,"mousewheel",t._mousewheelfunc),t.editable&&t.removeHandler(e(document),"mousedown.gridedit"+t.element.id),t.host.off&&(t.content.off("mousemove"),t.host.off("mousewheel"))},_addHandlers:function(){var t=this.that,i=t.isTouchDevice();i||t.addHandler(t.host,"dragstart."+t.element.id,function(){return!1}),t.scrollbarautoshow&&(t.addHandler(t.host,"mouseenter.gridscroll"+t.element.id,function(){t.vScrollBar.fadeIn("fast"),t.hScrollBar.fadeIn("fast")}),t.addHandler(t.host,"mouseleave.gridscroll"+t.element.id,function(){t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()||(t.vScrollBar.fadeOut("fast"),t.hScrollBar.fadeOut("fast"))})),t.editable&&t.addHandler(e(document),"mousedown.gridedit"+t.element.id,function(e){if(t.editable&&t.begincelledit&&t.editcell&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var i=t.host.coord(),r=t.host.width(),s=t.host.height(),a=!1,o=!1,l=!1;if((e.pageY<i.top||e.pageY>i.top+s)&&(a=!0,o=!0),(e.pageX<i.left||e.pageX>i.left+r)&&(a=!0,l=!0),a){if(t.editcell&&t.editcell.editor)switch(t.editcell.columntype){case"datetimeinput":if(t.editcell.editor.jqxDateTimeInput&&t.editcell.editor.jqxDateTimeInput("container")&&"block"==t.editcell.editor.jqxDateTimeInput("container")[0].style.display){var n=t.editcell.editor.jqxDateTimeInput("container").coord().top,d=t.editcell.editor.jqxDateTimeInput("container").coord().top+t.editcell.editor.jqxDateTimeInput("container").height();if(!o||!(e.pageY<n||e.pageY>d))return;a=!0,t.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(t.editcell.editor.jqxComboBox&&t.editcell.editor.jqxComboBox("container")&&"block"==t.editcell.editor.jqxComboBox("container")[0].style.display){var n=t.editcell.editor.jqxComboBox("container").coord().top,d=t.editcell.editor.jqxComboBox("container").coord().top+t.editcell.editor.jqxComboBox("container").height();if(!o||!(e.pageY<n||e.pageY>d))return;a=!0,t.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(t.editcell.editor.jqxDropDownList&&t.editcell.editor.jqxDropDownList("container")&&"block"==t.editcell.editor.jqxDropDownList("container")[0].style.display){var n=t.editcell.editor.jqxDropDownList("container").coord().top,d=t.editcell.editor.jqxDropDownList("container").coord().top+t.editcell.editor.jqxDropDownList("container").height();if(!o||!(e.pageY<n||e.pageY>d))return;a=!0,t.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":for(var h=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],c=function(i){var r=t.editcell.editor.data();if(r[i]&&r[i].instance.container&&"block"==r[i].instance.container[0].style.display){var s=r[i].instance,l=s.container.coord().top,n=s.container.coord().top+s.container.height();return o&&(e.pageY<l||e.pageY>n)?(a=!0,s.close(),!0):!1}},u=0;u<h.length;u++){var g=c(h[u]);if(0==g)return}}t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t._oldselectedcell=null}}}),t.vScrollInstance.valueChanged=function(e){t.virtualsizeinfo&&(t._closemenu(),"physical"!=t.scrollmode?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):void 0!=t.currentScrollValue&&Math.abs(t.currentScrollValue-e.currentValue)>=5?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue),t.pageable||t.groupable||!t.dataview.virtualmode||(t.loadondemandupdate&&clearTimeout(t.loadondemandupdate),t.loadondemandupdate=setTimeout(function(){t.loadondemand=!0,t._renderrows(t.virtualsizeinfo)},100)),i&&(t._lastScroll=new Date))},t.hScrollInstance.valueChanged=function(){if(t.virtualsizeinfo){t._closemenu();{var r=function(){t._renderhorizontalscroll(),t._renderrows(t.virtualsizeinfo),t.editcell&&!t.editrow&&t._showcelleditor&&t.editcell.editing&&(t.hScrollInstance.isScrolling()||t._showcelleditor(t.editcell.row,t.getcolumn(t.editcell.column),t.editcell.element,t.editcell.init))};void 0==t._browser?t._isIE10():t._browser}navigator&&-1!=navigator.userAgent.indexOf("Safari")?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){r()},1)):e.jqx.browser.msie?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){r()},.01)):r(),i&&(t._lastScroll=new Date)}},t._mousewheelfunc=t._mousewheelfunc||function(e){return!t.editcell&&t.enablemousewheel?(t.wheel(e,t),!1):void 0},t.removeHandler(t.host,"mousewheel",t._mousewheelfunc),t.addHandler(t.host,"mousewheel",t._mousewheelfunc);var r="mousedown.jqxgrid";i&&(r=e.jqx.mobile.getTouchEventName("touchend")),t.addHandler(t.host,r,function(i){if(t.isTouchDevice()){if(t._newScroll=new Date,t._newScroll-t._lastScroll<500)return!1;if(e(i.target).ischildof(t.vScrollBar))return!1;if(e(i.target).ischildof(t.hScrollBar))return!1}t._mousedown=new Date;var r=t._handlemousedown(i,t);return t.isNestedGrid&&(t.resizablecolumn||t.columnsreorder||i.stopPropagation()),t._lastmousedown=new Date,r}),i||(t.addHandler(t.host,"dblclick.jqxgrid",function(i){if(t.editable&&t.begincelledit&&"dblclick"==t.editmode)t._handledblclick(i,t);else if(e.jqx.browser.msie&&e.jqx.browser.version<9){t._handlemousedown(i,t)}return t.mousecaptured=!1,t._lastmousedown=new Date,!0}),t._mousemovefunc=function(e){return t._handlemousemove?t._handlemousemove(e,t):void 0},t.addHandler(t.content,"mousemove",t._mousemovefunc),t._handlemousemoveselection&&(t._mousemovedocumentfunc=function(e){return t._handlemousemoveselection?t._handlemousemoveselection(e,t):void 0},t.addHandler(e(document),"mousemove.selection"+t.element.id,t._mousemovedocumentfunc)),t.addHandler(e(document),"mouseup.selection"+t.element.id,function(e){t._handlemouseupselection&&t._handlemouseupselection(e,t)}));try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var s=null;if(window.parent&&document.referrer&&(s=document.referrer),s&&-1!=s.indexOf(document.location.host)){var a=function(e){if(t._handlemouseupselection)try{t._handlemouseupselection(e,t)}catch(i){}};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",a,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",a)}}}catch(o){}t.focused=!1,i||(t.addHandler(t.content,"mouseenter",function(){t.focused=!0,t.wrapper&&(t.wrapper.attr("tabindex",1),t.content.attr("tabindex",2)),t._overlayElement&&(t._overlayElement[0].style.visibility=t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()?"visible":"hidden")}),t.addHandler(t.content,"mouseleave",function(){t._handlemousemove&&t.enablehover&&t._clearhoverstyle(),t._overlayElement&&(t._overlayElement[0].style.visibility="hidden"),t.focused=!1}),(t.groupable||t.columnsreorder)&&t.addHandler(e(document),"selectstart."+t.element.id,function(){return t.__drag===!0?!1:void 0}),t.addHandler(t.content,"selectstart."+t.element.id,function(i){return t.enablebrowserselection?!0:t.showfilterrow&&e(i.target).ischildof(t.filterrow)?!0:t.editcell?void(i.stopPropagation&&i.stopPropagation()):!1}),t.addHandler(e(document),"keyup.edit"+t.element.id,function(){t._keydown=!1}),t.addHandler(e(document),"keydown.edit"+t.element.id,function(i){t._keydown=!0&&!t.editcell;var r=i.charCode?i.charCode:i.keyCode?i.keyCode:0;if(t.handlekeyboardnavigation){var s=t.handlekeyboardnavigation(i);if(1==s)return!1}if(t.editable&&t.editcell&&(13==r||27==r)&&t._handleeditkeydown&&(a=t._handleeditkeydown(i,t)),27==r&&(t.mousecaptured=!1,"visible"==t.selectionarea.css("visibility")&&t.selectionarea.css("visibility","hidden")),e.jqx.browser.msie&&e.jqx.browser.version<8&&t.focused&&!t.isNestedGrid){if(13==r&&0==a)return a;var a=!0,r=i.charCode?i.charCode:i.keyCode?i.keyCode:0;if(!t.editcell&&t.editable&&"programmatic"!=t.editmode&&t._handleeditkeydown&&(a=t._handleeditkeydown(i,t)),a&&t.keyboardnavigation&&t._handlekeydown)return a=t._handlekeydown(i,t),a||(i.preventDefault&&i.preventDefault(),void 0!=i.stopPropagation&&i.stopPropagation()),a}return!0}),t.addHandler(t.host,"keydown.edit"+t.element.id,function(i){var r=!0;if(t.handlekeyboardnavigation){var s=t.handlekeyboardnavigation(i);if(1==s)return!1}return t.editable&&"programmatic"!=t.editmode&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t),t.isNestedGrid&&i.stopPropagation()),e.jqx.browser.msie&&e.jqx.browser.version<8?t.isNestedGrid&&r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),i.stopPropagation()):r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),t.isNestedGrid&&i.stopPropagation()),r||(i.preventDefault&&i.preventDefault(),void 0!=i.stopPropagation&&i.stopPropagation()),r}))},_hittestrow:function(t,i){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){void 0==t&&(t=0);var r=this.vScrollInstance,s=this.hScrollInstance,a=r.value;"visible"!=this.vScrollBar.css("visibility")&&(a=0);var o=s.value;"visible"!=this.hScrollBar.css("visibility")&&(o=0),"deferred"==this.scrollmode&&null!=this._newmax&&a>this._newmax&&(a=this._newmax);{var l=parseInt(a)+i;parseInt(o)+t}if(null!=this.visiblerows&&0!=this.visiblerows.length){var n=!1,d=this._findvisiblerow(l,this.visiblerows);if(d>=0){var h=this.visiblerows[d],c=this.rowdetails&&h.rowdetails,u=!h.rowdetailshidden;if(c){var g=this.visiblerows[d-1];if(g==h&&(h=g,d--),u){var p=e(this.hittestinfo[d].visualrow).position().top+parseInt(this.table.css("top")),f=e(this.hittestinfo[d].visualrow).height();i>=p&&p+f>=i||(d++,h=this.visiblerows[d],n=!0)}}}return{index:d,row:h,details:n}}}},getcellatposition:function(t,i){var r=this.that,s=this.showheader?this.columnsheader.height()+2:0,a=this._groupsheader()?this.groupsheader.height():0,o=this.showtoolbar?this.toolbarheight:0;a+=o;var l=this.host.coord();this.hasTransform&&(l=e.jqx.utilities.getOffset(this.host));var n=t-l.left,d=i-s-l.top-a,h=this._hittestrow(n,d),c=h.row,u=h.index,g=this.table[0].rows[u];if(this.dataview&&0==this.dataview.records.length){for(var p=this.table[0].rows,f=0,v=0;v<p.length;v++){if(d>=f&&d<f+this.rowsheight){g=p[v];break}f+=this.rowsheight}c={boundindex:v}}if(null==g)return!0;for(var m=this.hScrollInstance,w=m.value,b=0,v=(this.groupable?this.groups.length:0,0);v<g.cells.length;v++){var x=parseInt(e(this.columnsrow[0].cells[v]).css("left")),t=x-w;if(r.columns.records[v].pinned&&(t=x),!r.columns.records[v].hidden){var y=t+e(this.columnsrow[0].cells[v]).width();if(y>=n&&n>=t){b=v;break}}}if(null!=c){var _=this._getcolumnat(b);return{row:this.getboundindex(c),column:_.datafield,value:this.getcellvalue(this.getboundindex(c),_.datafield)}}return null},_handlemousedown:function(t,i){if(null==t.target)return!0;if(i.disabled)return!0;if(e(t.target).ischildof(this.columnsheader))return!0;var r;t.which?r=3==t.which:t.button&&(r=2==t.button);var s;if(t.which?s=2==t.which:t.button&&(s=1==t.button),s)return!0;if(this.showstatusbar){if(e(t.target).ischildof(this.statusbar))return!0;if(t.target==this.statusbar[0])return!0}if(this.showtoolbar){if(e(t.target).ischildof(this.toolbar))return!0;if(t.target==this.toolbar[0])return!0}if(this.pageable){if(e(t.target).ischildof(this.pager))return!0;if(t.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&e(t.target).ischildof(this.pager))return!0;var a=this.showheader?this.columnsheader.height()+2:0,o=this._groupsheader()?this.groupsheader.height():0,l=this.showtoolbar?this.toolbarheight:0;o+=l;var n=this.host.coord();if(this.hasTransform){n=e.jqx.utilities.getOffset(this.host);var d=this._getBodyOffset();n.left-=d.left,n.top-=d.top}var h=parseInt(t.pageX),c=parseInt(t.pageY);if(this.isTouchDevice()){var u=i.getTouches(t),g=u[0];h=parseInt(g.pageX),c=parseInt(g.pageY),1==i.touchmode&&void 0!=g._pageX&&(h=parseInt(g._pageX),c=parseInt(g._pageY))}var p=h-n.left,f=c-a-n.top-o;if(this.pageable&&!this.autoheight&&this.gotopage){var v=this.pager.coord().top-n.top-o-a;if(f>v)return}var m=this._hittestrow(p,f);if(m&&!m.details){var w=m.row,b=m.index,x=t.target.className,y=this.table[0].rows[b];if(null==y)return i.editable&&i.begincelledit&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!0;i.mousecaptured=!0,i.mousecaptureposition={left:t.pageX,top:t.pageY-o,clickedrow:y};var _=this.hScrollInstance,q=_.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(q=_.max-_.value);var j=-1,z=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(q-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(q=-parseInt(this.content.css("left"))));for(var k=0;k<y.cells.length;k++){var S=parseInt(e(this.columnsrow[0].cells[k]).css("left")),h=S-q;i.columns.records[k].pinned&&!i.rtl&&(h=S);var I=this._getcolumnat(k);if(null==I||!I.hidden){var T=h+e(this.columnsrow[0].cells[k]).width();if(T>=p&&p>=h){j=k,i.mousecaptureposition.clickedcell=k;break}}}if(this.rtl&&this._haspinned)for(var k=y.cells.length-1;k>=0&&i.columns.records[k].pinned;k--){var S=e(this.columnsrow[0].cells[k]).coord().left-this.host.coord().left,h=S,I=this._getcolumnat(k);if(null==I||!I.hidden){var T=h+e(this.columnsrow[0].cells[k]).width();if(T>=p&&p>=h){j=k,i.mousecaptureposition.clickedcell=k;break}}}if(null!=w&&j>=0){this._raiseEvent(1,{rowindex:this.getboundindex(w),visibleindex:w.visibleindex,row:w,group:w.group,rightclick:r,originalEvent:t});var I=this._getcolumnat(j),C=this.getcellvalue(this.getboundindex(w),I.datafield);if(this.editable&&this.editcell&&I.datafield==this.editcell.column&&this.getboundindex(w)==this.editcell.row&&(this.mousecaptured=!1),this._raiseEvent(8,{rowindex:this.getboundindex(w),column:I?I.getcolumnproperties():null,row:w,visibleindex:w.visibleindex,datafield:I?I.datafield:null,columnindex:j,value:C,rightclick:r,originalEvent:t}),this.isTouchDevice())if("checkbox"==I.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(b,I.datafield),!0}else if("button"==I.columntype&&this._overlayElement)return I.buttonclick&&I.buttonclick(y.cells[j].buttonrow,t),!0;var D=!1;if(null!=this._lastmousedown&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(w)&&(this._raiseEvent(22,{rowindex:this.getboundindex(w),row:w,visibleindex:w.visibleindex,group:w.group,rightclick:r,originalEvent:t}),this._clickedcolumn==I.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(w),row:w,visibleindex:w.visibleindex,column:I?I.getcolumnproperties():null,datafield:I?I.datafield:null,columnindex:j,value:C,rightclick:r,originalEvent:t}),D=!0,this._clickedrowindex=-1,this._clickedcolumn=null,t.isPropagationStopped&&t.isPropagationStopped()))return!1;if(r)return!0;D||(this._clickedrowindex=this.getboundindex(w),this._clickedcolumn=I.datafield);var B=e.jqx.utilities.getBrowser();if("msie"==B.browser&&parseInt(B.version)<=7&&(0==j&&this.rowdetails&&(x="jqx-grid-group-collapse"),z>0&&z>=j&&(x="jqx-grid-group-collapse")),-1!=x.indexOf("jqx-grid-group-expand")||-1!=x.indexOf("jqx-grid-group-collapse"))this.rtl?z>0&&j>y.cells.length-z-1&&this._togglegroupstate?this._togglegroupstate(w.bounddata,!0):j==y.cells.length-1-z&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(w.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):z>0&&z>j&&this._togglegroupstate?this._togglegroupstate(w.bounddata,!0):j==z&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(w.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=w.boundindex){var P=this.selectedrowindexes.slice(0),H=!1;if("none"!=i.selectionmode&&"checkbox"!=i.selectionmode&&this._selectrowwithmouse){("multiplecellsadvanced"==i.selectionmode||"multiplecellsextended"==i.selectionmode||"multiplerowsextended"==i.selectionmode||"multiplerowsadvanced"==i.selectionmode)&&(t.ctrlKey||t.shiftKey||t.metaKey||(i.selectedrowindexes=new Array,i.selectedcells=new Array));var A=!1,M=this.getboundindex(w);(i._oldselectedrow===M||"none"===i.selectionmode)&&(A=!0),-1==i.selectionmode.indexOf("cell")?("singlerow"!=i.selectionmode||i.selectedrowindex!=M&&"singlerow"==i.selectionmode)&&(this._applyrowselection(M,!0,!1,null,I.datafield),this._selectrowwithmouse(i,m,P,I.datafield,t.ctrlKey||t.metaKey,t.shiftKey)):null!=I.datafield&&(this._selectrowwithmouse(i,m,P,I.datafield,t.ctrlKey||t.metaKey,t.shiftKey),t.shiftKey||this._applycellselection(M,I.datafield,!0,!1)),i._oldselectedcell&&i._oldselectedcell.datafield==i.selectedcell.datafield&&i._oldselectedcell.rowindex==i.selectedcell.rowindex&&(H=!0),i._oldselectedcell=i.selectedcell,i._oldselectedrow=M}if(i.autosavestate&&i.savestate&&i.savestate(),i.editable&&i.begincelledit&&"programmatic"!=i.editmode){if(t.isPropagationStopped&&t.isPropagationStopped())return!1;if("selectedrow"==i.editmode){if(A&&!i.editcell){if("checkbox"!==I.columntype){i.beginrowedit(this.getboundindex(w))}}else if(i.editcell&&!A&&"none"!=i.selectionmode){i.endrowedit(i.editcell.row)}}else{var L="click"==i.editmode||H&&"selectedcell"==i.editmode;if(-1==i.selectionmode.indexOf("cell")&&"dblclick"!=i.editmode&&(L=!0),L&&void 0!=w.boundindex&&I.editable){{i.begincelledit(this.getboundindex(w),I.datafield,I.defaulteditorvalue)}-1!=i.selectionmode.indexOf("cell")&&i._applycellselection(M,I.datafield,!1,!1)}-1!=i.selectionmode.indexOf("cell")&&"selectedcell"==i.editmode&&!H&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0)}return!0}}}return!0}},_columnPropertyChanged:function(){},_rowPropertyChanged:function(){},_serializeObject:function(t){if(null==t)return"";var i="";return e.each(t,function(e){var t=this;e>0&&(i+=", "),i+="[";var r=0;for(obj in t)r>0&&(i+=", "),i+="{"+obj+":"+t[obj]+"}",r++;i+="]"}),i},propertyChangedHandler:function(t,i,r,s){if(void 0!=this.isInitialized&&0!=this.isInitialized)switch(i=i.toLowerCase()){case"enablebrowserselection":t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect"));break;case"columnsheight":(25!=t.columnsheight||t.columngroups)&&t._measureElement("column"),t._render(!0,!0,!0,!1,!1);break;case"rowsheight":s!=r&&(25!=t.rowsheight&&t._measureElement("cell"),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refresh());break;case"scrollMode":t.vScrollInstance.thumbStep=t.rowsheight;break;case"showdefaultloadelement":t._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":t._initmenu();break;case"touchmode":r!=s&&(t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:s}),t.hScrollBar.jqxScrollBar({touchMode:s}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._addHandlers());break;case"autoshowcolumnsmenubutton":r!=s&&t._rendercolumnheaders();break;case"rendergridrows":r!=s&&t.updatebounddata();break;case"editmode":r!=s&&(t._removeHandlers(),t._addHandlers());break;case"source":t.updatebounddata(),t.virtualmode&&!t._loading&&(t.loadondemand=!0,t._renderrows(t.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":t._initgroupsheader&&t._initgroupsheader();break;case"showgroupsheader":r!=s&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader(),t._renderrows(t.virtualsizeinfo));break;case"theme":s!=r&&(e.jqx.utilities.setTheme(r,s,t.host),t.gridmenu&&t.gridmenu.jqxMenu({theme:s}),t.pageable&&t._updatepagertheme(),t.filterable&&t._updatefilterrowui(!0));break;case"showtoolbar":case"toolbarheight":r!=s&&(t._arrange(),t.refresh());break;case"showstatusbar":r!=s&&(t.statusbar&&(s?t.statusbar.show():t.statusbar.hide()),t._arrange(),t.refresh());break;case"statusbarheight":r!=s&&(t._arrange(),t.refresh());break;case"filterable":case"showfilterrow":r!=s&&t.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":r!=s&&t.rendergridcontent();
break;case"showrowdetailscolumn":r!=s&&t.render();break;case"scrollbarsize":r!=s&&t._arrange();break;case"width":case"height":r!=s&&(t._updatesize(!0,!0),t._resizeWindow(),t.virtualmode&&!t._loading&&t.vScrollInstance.setPosition(0));break;case"altrows":case"altstart":case"altstep":r!=s&&t._renderrows(t.virtualsizeinfo);break;case"groupsheaderheight":r!=s&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader());break;case"pagerheight":r!=s&&t._initpager();break;case"selectedrowindex":t.selectrow(s);break;case"selectionmode":r!=s&&("none"==s&&(t.selectedrowindexes=new Array,t.selectedcells=new Array,t.selectedrowindex=-1),t._renderrows(t.virtualsizeinfo),"checkbox"==s&&t._render(!1,!1,!0,!1,!1));break;case"showheader":s?t.columnsheader.css("display","block"):t.columnsheader.css("display","none");break;case"virtualmode":r!=s&&(t.dataview.virtualmode=t.virtualmode,t.dataview.refresh(!1),t._render(!1,!1,!1));break;case"columnsmenu":r!=s&&t.render();break;case"columngroups":t._render(!0,!0,!0,!1,!1);break;case"columns":if(t._serializeObject(t._cachedcolumns)!==t._serializeObject(s)){var a=!1;t.filterable&&r&&r.records&&e.each(r.records,function(){this.filter&&(a=!0),t.dataview.removefilter(this.displayfield,this.filter)}),t._columns=null,t._filterrowcache=[],t.render(),a&&t.applyfilters(),t._cachedcolumns=t.columns,t.removesort&&t.removesort()}else t._initializeColumns();break;case"autoheight":r!=s&&t._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":r!=s&&t._initpager&&(t.pagershowrowscombo&&(t.pagershowrowscombo.jqxDropDownList("destroy"),t.pagershowrowscombo=null),t.pagerrightbutton&&(t.removeHandler(t.pagerrightbutton,"mousedown"),t.removeHandler(t.pagerrightbutton,"mouseup"),t.removeHandler(t.pagerrightbutton,"click"),t.pagerrightbutton.jqxButton("destroy"),t.pagerrightbutton=null),t.pagerleftbutton&&(t.removeHandler(t.pagerleftbutton,"mousedown"),t.removeHandler(t.pagerleftbutton,"mouseup"),t.removeHandler(t.pagerleftbutton,"click"),t.pagerleftbutton.jqxButton("destroy"),t.removeHandler(e(document),"mouseup.pagerbuttons"+t.element.id),t.pagerleftbutton=null),t.pagerdiv.remove(),t._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(r!=s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(!t.host.jqxDropDownList||!t.host.jqxListBox)return void t._testmodules();if(t._initpager){if("pageable"!=i&&"pagermode"!=i&&"string"==typeof s){var o="The expected value type is: Int.";if("pagesize"!=i)var o="The expected value type is: Array of Int values.";throw new Error("Invalid Value for: "+i+". "+o)}t.dataview.pageable=t.pageable,t.dataview.pagenum=0,t.dataview.pagesize=t._getpagesize(),t.virtualmode&&t.updatebounddata(),t.dataview.refresh(!0),t._initpager(),"pagesizeoptions"==i&&null!=s&&s.length>0&&(t.pagesize=parseInt(s[0]),t.dataview.pagesize=parseInt(s[0]),t.prerenderrequired=!0,t._requiresupdate=!0,t.dataview.pagenum=-1,t.gotopage(0))}t._render(!1,!1,!1)}break;case"groups":t._serializeObject(r)!==t._serializeObject(s)&&(t.dataview.groups=s,t._refreshdataview(),t._render(!0,!0,!0,!1));break;case"groupable":r!=s&&(t.dataview.groupable=t.groupable,t.dataview.pagenum=0,t.dataview.refresh(!1),t._render(!1,!1,!0));break;case"renderstatusbar":null!=s&&t.renderstatusbar(t.statusbar);break;case"rendertoolbar":null!=s&&t.rendertoolbar(t.toolbar);break;case"disabled":s?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),e.jqx.aria(t,"aria-disabled",t.disabled),t.pageable&&(t.pagerrightbutton&&(t.pagerrightbutton.jqxButton({disabled:s}),t.pagerleftbutton.jqxButton({disabled:s}),t.pagershowrowscombo.jqxDropDownList({disabled:s}),t.pagergotoinput.attr("disabled",s)),t.pagerfirstbutton&&(t.pagerfirstbutton.jqxButton({disabled:s}),t.pagerlastbutton.jqxButton({disabled:s}))),t.vScrollBar.jqxScrollBar({disabled:s}),t.hScrollBar.jqxScrollBar({disabled:s}),t.filterable&&t.showfilterrow&&t._updatefilterrowui(!0)}}}),e.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return void 0==this.records[e]?!0:!1},this.initialize=function(e){1>e&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null==e?!1:(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return null==e||void 0==e?!1:null==t?!1:e>=0?e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t):!1},this.remove=function(e){if(null==e||void 0==e)return!1;var t=this.records.indexOf(e);return-1!=t?(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0):!1},this.removeAt=function(e){if(null==e||void 0==e)return!1;if(0>e)return!1;if(e<this.records.length){var t=this.records[e];return this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0}return!1},this},e.jqx.dataview=function(){return this.self=this,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,this.that=this,this.destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,void 0==e&&(e=!0),this.refresh(e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(t,i){var r=t._source?!0:!1,s=null;r?(s=t,t=t._source):s=new e.jqx.dataAdapter(t,{autoBind:!1});var a=function(e){s.recordids=[],s.records=new Array,s.cachedrecords=new Array,s.originaldata=new Array,s._options.virtualmode=e.virtualmode,s._options.totalrecords=e.totalrecords,s._options.originaldata=e.originaldata,s._options.recordids=e.recordids,s._options.cachedrecords=new Array,s._options.pagenum=e.pagenum,s._options.pageable=e.pageable,void 0!=t.type&&(s._options.type=t.type),void 0!=t.formatdata&&(s._options.formatData=t.formatdata),void 0!=t.contenttype&&(s._options.contentType=t.contenttype),void 0!=t.async&&(s._options.async=t.async),void 0!=t.updaterow&&(s._options.updaterow=t.updaterow),void 0!=t.addrow&&(s._options.addrow=t.addrow),void 0!=t.deleterow&&(s._options.deleterow=t.deleterow),0==e.pagesize&&(e.pagesize=10),s._options.pagesize=e.pagesize},o=function(i){if(i.totalrecords=s.totalrecords,i.virtualmode){var r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize};if(void 0!=t.recordstartindex&&(r.startindex=parseInt(t.recordstartindex)),void 0!=t.recordendindex?r.endindex=parseInt(t.recordendindex):i.grid.pageable||(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords)),t.recordendindex||(i.grid.pageable?r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize}:(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords))),r.data=s.records,i.grid.rendergridrows&&i.totalrecords>0){var a=0;if(t.records=i.grid.rendergridrows(r),t.records.length&&(a=t.records.length),t.records&&!t.records[r.startindex]){var o=new Array,l=r.startindex;e.each(t.records,function(){o[l]=this,l++,a++}),t.records=o}if(0==a&&t.records&&e.each(t.records,function(){a++}),a>0&&a<r.endindex-r.startindex&&!i.grid.groupable)for(var n=t.records[0],d=0;d<r.endindex-r.startindex-a;d++){var h={};for(obj in n)h[obj]="";t.records.push&&t.records.push(h)}}t.records&&0!=i.totalrecords||(t.records=new Array),i.originaldata=t.records,i.records=t.records,i.cachedrecords=t.records}else i.originaldata=s.originaldata,i.records=s.records,i.recordids=s.recordids,i.cachedrecords=s.cachedrecords};a(this),this.source=t,void 0!==i&&(uniqueId=i);var l=this.that;switch(t.datatype){case"local":case"array":default:if(null==t.localdata&&(t.localdata=[]),null!=t.localdata){s.unbindBindingUpdate(l.grid.element.id),(!l.grid.autobind&&l.grid.isInitialized||l.grid.autobind)&&s.dataBind();var n=function(i){if(void 0!=i&&""!=i){var r=s._changedrecords[0];if(r){var a=new Array;e.each(s._changedrecords,function(e){var t=this.index,r=this.record;switch(l.grid._updateFromAdapter=!0,i){case"update":var o=l.grid.getrowid(t);return e==s._changedrecords.length-1?l.grid.updaterow(o,r):l.grid.updaterow(o,r,!1),void(l.grid._updateFromAdapter=!1);case"add":return l.grid.addrow(null,r),void(l.grid._updateFromAdapter=!1);case"remove":var o=l.grid.getrowid(t);return void a.push(o)}}),a.length>0&&(l.grid.deleterow(a,!1),l.grid._updateFromAdapter=!1)}if("update"==i)return}var n=l.totalrecords;o(l,i),null===t.localdata.notifier&&"observableArray"==t.localdata.name&&(t.localdata.notifier=function(i){if(!this._updating){this._updating=!0;var r=l.grid.getrowid(i.index);switch(i.type){case"add":var a=e.extend({},i.object[i.index]),o=s.getid(t.id,a,i.index);l.grid.addrow(o,a);break;case"delete":l.grid.deleterow(r);break;case"update":if(i.path&&i.path.split(".").length>1){var n=i.path.split(".");l.grid.setcellvalue(i.index,n[n.length-1],i.newValue)}else{var a=e.extend({},i.object[i.index]);l.grid.updaterow(r,a)}}this._updating=!1}}),"updateData"==i?(l.refresh(),l.grid._updateGridData()):(t.recordstartindex&&this.virtualmode?l.updateview(t.recordstartindex,t.recordstartindex+l.pagesize):l.refresh(),l.update(n!=l.totalrecords))};n(),s.bindBindingUpdate(l.grid.element.id,n)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=t.localdata){s.unbindBindingUpdate(l.grid.element.id),(!l.grid.autobind&&l.grid.isInitialized||l.grid.autobind)&&s.dataBind();var n=function(e){var i=l.totalrecords;o(l),"updateData"==e?(l.refresh(),l.grid._updateGridData()):(t.recordstartindex&&l.virtualmode?l.updateview(t.recordstartindex,t.recordstartindex+l.pagesize):l.refresh(),l.update(i!=l.totalrecords))};return n(),void s.bindBindingUpdate(l.grid.element.id,n)}for(var d=0,h={},c=0;c<this.filters.length;c++){var u=this.filters[c].datafield,g=this.filters[c].filter,p=g.getfilters();h[u+"operator"]=g.operator;for(var f=0;f<p.length;f++){p[f].datafield=u;var v=p[f].value;if("datefilter"==p[f].type)if(p[f].value&&p[f].value.toLocaleString){var m=this.grid.getcolumn(p[f].datafield);if(m.cellsformat){var w=this.grid.source.formatDate(p[f].value,m.cellsformat,this.grid.gridlocalization);h["filtervalue"+d]=w?w:p[f].value.toLocaleString()}else h["filtervalue"+d]=v.toString()}else h["filtervalue"+d]=v.toString();else h["filtervalue"+d]=v.toString(),p[f].data&&(h["filterid"+d]=p[f].data.toString()),p[f].id&&(h["filterid"+d]=p[f].id.toString());h["filtercondition"+d]=p[f].condition,h["filteroperator"+d]=p[f].operator,h["filterdatafield"+d]=u,d++}}h.filterscount=d,h.groupscount=l.groups.length;for(var c=0;c<l.groups.length;c++)h["group"+c]=l.groups[c];void 0==t.recordstartindex&&(t.recordstartindex=0),(void 0==t.recordendindex||0==t.recordendindex)&&(l.grid.height&&-1==l.grid.height.toString().indexOf("%")?(t.recordendindex=parseInt(l.grid.height)/l.grid.rowsheight,t.recordendindex+=2,t.recordendindex=parseInt(t.recordendindex)):(t.recordendindex=e(window).height()/l.grid.rowsheight,t.recordendindex=parseInt(t.recordendindex)),this.pageable&&(t.recordendindex=this.pagesize)),this.pageable&&(t.recordstartindex=this.pagenum*this.pagesize,t.recordendindex=(this.pagenum+1)*this.pagesize),e.extend(h,{sortdatafield:l.sortfield,sortorder:l.sortfielddirection,pagenum:l.pagenum,pagesize:l.grid.pagesize,recordstartindex:t.recordstartindex,recordendindex:t.recordendindex});var b=s._options.data;s._options.data?e.extend(s._options.data,h):(t.data&&e.extend(h,t.data),s._options.data=h);var n=function(){var i=e.jqx.browser.msie&&e.jqx.browser.version<9,r=function(){var e=l.totalrecords;o(l),t.recordstartindex&&l.virtualmode?l.updateview(t.recordstartindex,t.recordstartindex+l.pagesize):l.refresh(),l.update(e!=l.totalrecords)};if(i)try{r()}catch(s){}else r()};s.unbindDownloadComplete(l.grid.element.id),s.bindDownloadComplete(l.grid.element.id,n),!l.grid.autobind&&l.grid.isInitialized||l.grid.autobind?s.dataBind():l.grid.isInitialized||l.grid.autobind||n(),s._options.data=b}},this.getid=function(t,i,r){if(e(t,i).length>0)return e(t,i).text();if(t&&t.toString().length>0){var s=e(i).attr(t);if(null!=s&&s.toString().length>0)return s}return r},this.getvaluebytype=function(t,i){var r=t;if("date"==i.type){var s=new Date(t);t=("NaN"==s.toString()||"Invalid Date"==s.toString())&&e.jqx.dataFormat?e.jqx.dataFormat.tryparsedate(t):s,null==t&&(t=r)}else if("float"==i.type){var t=parseFloat(t);isNaN(t)&&(t=r)}else if("int"==i.type){var t=parseInt(t);isNaN(t)&&(t=r)}else"bool"==i.type&&(null!=t&&("false"==t.toLowerCase()?t=!1:"true"==t.toLowerCase()&&(t=!0)),t=1==t?!0:0==t?!1:"");return t},this.setpaging=function(e){void 0!=e.pageSize&&(this.pagesize=e.pageSize),void 0!=e.pageNum&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,i){var r=this.filters&&this.filters.length>0&&!this.virtualmode;if(!r&&void 0!=t&&void 0!=e){t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid);var s=this.recordsbyid["id"+e],a=this.records.indexOf(s);return-1==a?!1:(this.records[a]=t,this.cachedrecords&&(this.cachedrecords[a]=t),(1==i||void 0==i)&&this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:s,Data:t},!0)}if(this.filters&&this.filters.length>0){for(var o=this.cachedrecords,s=null,a=-1,l=0;l<o.length;l++)if(o[l].uid==e){s=o[l],a=l;break}if(s){var n=this.that;for(var d in t)n.cachedrecords[a][d]=t[d];return(1==i||void 0==i)&&this.refresh(),!0}}return!1},this.addrow=function(e,t,i,r){if(void 0!=t){if(!e||this.recordsbyid["id"+e]){t.uid=this.getid(this.source.id,t,this.totalrecords);for(var s=this.recordsbyid["id"+t.uid];null!=s;){var a=Math.floor(1e4*Math.random()).toString();t.uid=a,s=this.recordsbyid["id"+a]}}else t.uid=e;return t[this.source.id]||void 0!=this.source.id&&(t[this.source.id]=t.uid),"last"==i?this.records.push(t):"number"==typeof i&&isFinite(i)?this.records.splice(i,0,t):this.records.splice(0,0,t),this.filters&&this.filters.length>0&&("last"==i?this.cachedrecords.push(t):"number"==typeof i&&isFinite(i)?this.cachedrecords.splice(i,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(1==r||void 0==r)&&this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0}return!1},this.deleterow=function(e,t){if(void 0!=e){var i=this.filters&&this.filters.length>0;if(this.recordsbyid["id"+e]&&!i){var r=this.recordsbyid["id"+e],s=this.records.indexOf(r);return this.changedrecords[e]={Type:"Delete",Data:this.records[s]},this.records.splice(s,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(1==t||void 0==t)&&this.refresh(),!0}if(this.filters&&this.filters.length>0){for(var a=this.cachedrecords,r=null,s=-1,o=0;o<a.length;o++)if(a[o].uid==e){r=a[o],s=o;break}if(r)return this.cachedrecords.splice(s,1),(1==t||void 0==t)&&(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1}return!1},this.reload=function(t,i,r,s,a,o,l){var n=this.that,d=new Array,h=t,c=i,u=r,g=s,p=c.length,f=0,v=0;if(this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={},0==this.totalrecords){Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i};var m=Object.size(h);this.totalrecords=m,e.each(this.records,function(){var t=this,i=0;return e.each(t,function(e){n.columns[i++]=e}),!1})}if(this.virtualmode){if(this.pageable)return void this.updateview();var o=0;if(!this.groupable)return void this.updateview();var l=this.totalrecords}else var o=0,l=this.totalrecords;if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){var w=o;w=this.loadgrouprecords(0,o,l,u,v,g,c,p,d)}else f=this.loadflatrecords(o,l,u,v,g,c,p,d);return p>v&&c.splice(v,p-v),this.totalrows=this.groups.length>0&&this.groupable?w:f,d},this.loadflatrecords=function(t,i,r,s,a,o,l,n){var d=this.that,h=t,c=t;i=Math.min(i,this.totalrecords);for(var u=null!=this.sortdata,g=(this.source.id&&("local"==this.source.datatype||"array"==this.source.datatype||""==this.source.datatype),u?this.sortdata:this.records),p=t;i>p;p++){var f={};u?(f=e.extend({},g[p].value),id=f[d.uniqueId],f.boundindex=g[p].index,void 0==f.uid&&(f.uid=d.getid(d.source.id,f,f.boundindex)),d.recordsbyid["id"+f.uid]=g[p].value,d.loadedrecords[h]=f,f.uniqueid=d.generatekey(),d.bounditems[f.boundindex]=f):(f=e.extend({},g[p]),id=f[d.uniqueId],f.boundindex=h,d.loadedrecords[h]=f,void 0==f.uid&&(f.uid=d.getid(d.source.id,f,h)),d.recordsbyid["id"+f.uid]=g[p],f.uniqueid=d.generatekey(),d.bounditems[this.bounditems.length]=f),(s>=l||id!=o[s][d.uniqueId]||a&&a[id])&&(n[n.length]=s),o[s]=f,s++,f.visibleindex=c,c++,h++}if(d.grid.summaryrows){var v=h;e.each(d.grid.summaryrows,function(){var t=e.extend({},this);t.boundindex=i++,d.loadedrecords[v]=t,t.uniqueid=d.generatekey(),d.bounditems[d.bounditems.length]=t,o[s]=t,s++,t.visibleindex=c,c++,v++})}return c},this.updateview=function(e,t){var i=this.that,r=this.pagesize*this.pagenum,s=0,a=new Array,o=this.filters,l=this.updated,n=a.length;if(this.pageable){if(this.virtualmode)if(this.groupable&&0!=this.groups.length){if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(void 0!=this._cachegrouppages[this.pagenum+"_"+this.pagesize])return this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],void(this.totalrows=this.rows.length);var d=this.pagesize*(1+this.pagenum);return d>this.totalrecords&&(d=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,d,o,s,l,a,n,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,void(this.totalrows=this.rows.length)}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,s,l,a,n,[]),this.totalrows=a.length}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){var h=this.pagesize;0==h&&(h=Math.min(100,this.totalrecords));var c=h*this.pagenum;if(0==this.loadedrecords.length&&(c=0),null!=e&&null!=t?this.loadflatrecords(e,t,o,s,l,a,n,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,s,l,a,n,[]),this.totalrows=this.loadedrecords.length,this.rows=a,a.length>=h)return}if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)a=this._updategroupsinpage(i,o,r,s,n,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var u=this.pagesize*this.pagenum;u<this.pagesize*(1+this.pagenum);u++){var g=u<this.loadedrecords.length?this.loadedrecords[u]:null;null!=g&&((!this.pagesize||r>=this.pagesize*this.pagenum&&r<=this.pagesize*(this.pagenum+1))&&(a[s]=g,s++),r++)}if((0==a.length||a.length<this.pagesize)&&!this.pageable&&this.virtualmode){s=a.length;for(var p=a.length,u=this.pagesize*this.pagenum;u<this.pagesize*(1+this.pagenum)-p;u++){var g={};g.boundindex=u+p,g.visibleindex=u+p,g.uniqueid=i.generatekey(),g.empty=!0,i.bounditems[u+p]=g,a[s]=g,s++}}this.rows=a},this.generatekey=function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(t){if(!this.suspend){void 0==t&&(t=!0);var i=this.rows.length,r=this.totalrows;if(this.filters.length>0&&!this.virtualmode){var s="",a=this.cachedrecords.length,o=new Array;this.totalrecords=0;var l=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var n=this.filters.length;if(null!=this.source&&void 0!=this.source.filter&&void 0!=this.source.localdata)o=this.source.filter(this.filters,l,a),void 0==o&&(o=new Array),this.records=o;else if(null==this.source.filter||void 0==this.source.filter){for(var d=0;a>d;d++){for(var h=l[d],c=void 0,u=0;n>u;u++){var s=this.filters[u].filter,g=h[this.filters[u].datafield],p=s.evaluate(g);c=void 0==c?p:"or"==s.operator?c||p:c&&p}c?(o[o.length]=e.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:o.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=o}if(this.sortdata){var f=this.sortfield;if(this.sortcache[f]){this.sortdata=null;var v=this.sortcache[f].direction;return this.sortcache[f]=null,void this.sortby(this.sortfield,v)}}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;var l=this.cachedrecords;if(this.records=l,this.sortdata){var f=this.sortfield;if(this.sortcache[f]){this.sortdata=null;var v=this.sortcache[f].direction;return this.sortcache[f]=null,void this.sortby(this.sortfield,v)}}}var m=this.reload(this.records,this.rows,this.filter,this.updated,t);this.updated=null,null!=this.rowschangecallback&&(r!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),i!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:i,current:rows.length}}),(m.length>0||i!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:i,current:rows.length,diff:m}}))}},this}}(jqxBaseFramework),function(e){e.extend(e.jqx._jqxGrid.prototype,{selectallrows:function(){this._trigger=!1;var e=this.virtualmode?this.dataview.totalrecords:this.dataview.loadedrecords.length;this.selectedrowindexes=new Array;for(var t=this.dataview.loadedrecords,i=0;e>i;i++){var r=t[i];if(r){var s=this.getboundindex(r);void 0!=s&&(this.selectedrowindexes[i]=s)}else this.selectedrowindexes[i]=i}"checkbox"!=this.selectionmode||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}),this._renderrows(this.virtualsizeinfo),this._trigger=!0,"checkbox"==this.selectionmode&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},unselectallrows:function(){this._trigger=!1;var e=this.virtualmode?this.dataview.totalrecords:this.dataview.loadedrecords.length;this.selectedrowindexes=new Array;for(var t=this.dataview.loadedrecords,i=0;e>i;i++){var r=t[i];r?delete this.selectedrowindexes[i]:this.selectedrowindexes[i]=i}"checkbox"!=this.selectionmode||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}),this._renderrows(this.virtualsizeinfo),this._trigger=!0,"checkbox"==this.selectionmode&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},selectrow:function(e,t){this._applyrowselection(e,!0,t),t!==!1&&this._updatecheckboxselection()},_updatecheckboxselection:function(){if("checkbox"==this.selectionmode){var e=this.getrows();if(e&&this._checkboxcolumn){if(0===e.length)return void this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});var t=e.length;this.groupable&&(t=this.dataview.loadedrecords.length),this.virtualmode&&(t=this.source._source.totalrecords);var i=this.selectedrowindexes.length;this._checkboxcolumn.checkboxelement.jqxCheckBox(i===t?{checked:!0}:0===i?{checked:!1}:{checked:null})}}},unselectrow:function(e,t){this._applyrowselection(e,!1,t),t!==!1&&this._updatecheckboxselection()},selectcell:function(e,t){this._applycellselection(e,t,!0)},unselectcell:function(e,t){this._applycellselection(e,t,!1)},clearselection:function(e,t){if(this._trigger=!1,this.selectedrowindex=-1,this._oldselectedcell=null,t!==!1)for(var i=0;i<this.selectedrowindexes.length;i++)this._raiseEvent(3,{rowindex:this.selectedrowindexes[i]});return this.selectedrowindexes=new Array,this.selectedcells=new Array,"checkbox"!=this.selectionmode||this._checkboxcolumnupdating||this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}),!1===e?void(this._trigger=!0):(this._renderrows(this.virtualsizeinfo),this._trigger=!0,void("checkbox"==this.selectionmode&&this._raiseEvent(3,{rowindex:this.selectedrowindexes})))},getselectedrowindex:function(){if(-1==this.selectedrowindex)for(var e=0;e<this.selectedrowindexes.length;e++)return this.selectedrowindexes[e];return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},getselectedcell:function(){if(!this.selectedcell)return null;var e=this.selectedcell;return e.row=this.selectedcell.rowindex,e.column=this.selectedcell.datafield,e.value=this.getcellvalue(e.row,e.column),e},getselectedcells:function(){var e=new Array;for(obj in this.selectedcells)e[e.length]=this.selectedcells[obj];return e},_getcellsforcopypaste:function(){var e=new Array;if(-1==this.selectionmode.indexOf("cell"))for(var t=this.selectedrowindexes,i=0;i<t.length;i++)for(var r=t[i],s=0;s<this.columns.records.length;s++){var a=(r+"_"+this.columns.records[s].datafield,{rowindex:r,datafield:this.columns.records[s].datafield});e.push(a)}return e},deleteselection:function(){var e=this,t=e.getselectedcells();if(-1==this.selectionmode.indexOf("cell")&&(t=this._getcellsforcopypaste()),null!=t&&t.length>0){for(var i=0;i<t.length;i++){var r=t[i],s=e.getcolumn(r.datafield),a=e.getcellvalue(r.rowindex,r.datafield);if(s&&""!==a){var o=null;"checkbox"==s.columntype&&(s.threestatecheckbox||(o=!1)),e._raiseEvent(17,{rowindex:r.rowindex,datafield:r.datafield,value:a}),i==t.length-1?(e.setcellvalue(r.rowindex,r.datafield,o,!0),s.displayfield!=s.datafield&&e.setcellvalue(r.rowindex,s.displayfield,o,!0)):(e.setcellvalue(r.rowindex,r.datafield,o,!1),s.displayfield!=s.datafield&&e.setcellvalue(r.rowindex,s.displayfield,o,!0)),e._raiseEvent(18,{rowindex:r.rowindex,datafield:r.datafield,oldvalue:a,value:o})}}this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}},copyselection:function(){var t="",i=this;this.clipboardselection={},this._clipboardselection=[];var r=i.getselectedcells();if(-1==this.selectionmode.indexOf("cell")&&(r=this._getcellsforcopypaste()),null!=r&&r.length>0){for(var s=999999999999999,a=-1,o=0;o<r.length;o++){var l=r[o],n=i.getcolumn(l.datafield);if(null!=n){var d=i.getcelltext(l.rowindex,l.datafield),h=this.getrowdisplayindex(l.rowindex);this.clipboardselection[h]||(this.clipboardselection[h]={}),this.clipboardselection[h][l.datafield]=d,s=Math.min(s,h),a=Math.max(a,h)}}for(var c=s;a>=c;c++){var u=0;this._clipboardselection[this._clipboardselection.length]=new Array,void 0!=this.clipboardselection[c]&&e.each(this.clipboardselection[c],function(e,r){u>0&&(t+="	");var s=r;null==r&&(s=""),i._clipboardselection[i._clipboardselection.length-1][u]=s,u++,t+=s}),a>c&&(t+="\r\n")}}return this.clipboardselectedtext=t,t},pasteselection:function(){var e=this.getselectedcells();if(-1==this.selectionmode.indexOf("cell")&&(e=this._getcellsforcopypaste()),null!=e&&e.length>0){var t=e[0].rowindex,i=this.getrowdisplayindex(t),r=e[0].datafield,s=this._getcolumnindex(r);if(this.selectedrowindexes=new Array,this.selectedcells=new Array,!this._clipboardselection)return;for(var a=0;a<this._clipboardselection.length;a++)for(var o=0;o<this._clipboardselection[a].length;o++){var l=this.getcolumnat(s+o);if(l){var n=this.getrowboundindex(i+a),d=this.getcell(n,l.datafield),h=null;if(h=this._clipboardselection[a][o],null!=h){if(l.cellsformat&&(-1!=l.cellsformat.indexOf("p")||-1!=l.cellsformat.indexOf("c")||-1!=l.cellsformat.indexOf("n")||-1!=l.cellsformat.indexOf("f"))){h.indexOf(this.gridlocalization.currencysymbol)>-1&&(h=h.replace(this.gridlocalization.currencysymbol,""));var c=function(e,t,i){var r=e;if(t==i)return e;for(var s=r.indexOf(t);-1!=s;)r=r.replace(t,i),s=r.indexOf(t);return r};h=c(h,this.gridlocalization.thousandsseparator,""),h=h.replace(this.gridlocalization.decimalseparator,"."),h.indexOf(this.gridlocalization.percentsymbol)>-1&&(h=h.replace(this.gridlocalization.percentsymbol,""));for(var u="",g=0;g<h.length;g++){var p=h.substring(g,g+1);"-"===p&&(u+="-"),"."===p&&(u+="."),null!=p.match(/^[0-9]+$/)&&(u+=p)}h=u,h=h.replace(/ /g,""),h=new Number(h),isNaN(h)&&(h="")}this._raiseEvent(17,{rowindex:n,datafield:d.datafield,value:h}),this.setcellvalue(n,d.column,h,!1),this._raiseEvent(18,{rowindex:n,datafield:d.datafield,oldvalue:this.getcellvalue(d.rowindex,d.datafield),value:h}),this._applycellselection(n,d.datafield,!0,!1)}}}this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)}},_applyrowselection:function(e,t,i,r){if(null==e)return!1;var s=this.selectedrowindex;if("singlerow"==this.selectionmode&&(t?this._raiseEvent(2,{rowindex:e,row:this.getrowdata(e)}):this._raiseEvent(3,{rowindex:e,row:this.getrowdata(e)}),this._raiseEvent(3,{rowindex:s}),this.selectedrowindexes=new Array,this.selectedcells=new Array),1==r&&(this.selectedrowindexes=new Array),this.dataview.filters.length>0){var a=this.getrowdata(e);a&&void 0!==a.dataindex?e=a.dataindex:a&&void 0===a.dataindex&&void 0!=a.uid&&(e=this.getrowboundindexbyid(a.uid))}var o=this.selectedrowindexes.indexOf(e);if(t)this.selectedrowindex=e,-1==o?(this.selectedrowindexes.push(e),"singlerow"!=this.selectionmode&&this._raiseEvent(2,{rowindex:e,row:this.getrowdata(e)})):"multiplerows"==this.selectionmode&&(this.selectedrowindexes.splice(o,1),this._raiseEvent(3,{rowindex:this.selectedrowindex,row:this.getrowdata(e)}),this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1);else if(o>=0||"singlerow"==this.selectionmode||"multiplerowsextended"==this.selectionmode||"multiplerowsadvanced"==this.selectionmode){var l=this.selectedrowindexes[o];this.selectedrowindexes.splice(o,1),this._raiseEvent(3,{rowindex:l,row:this.getrowdata(e)}),this.selectedrowindex=-1}return(void 0==i||i)&&this._rendervisualrows(),!0},_applycellselection:function(e,t,i,r){if(null==e)return!1;if(null==t)return!1;this.selectedrowindex;if("singlecell"==this.selectionmode){var s=this.selectedcell;null!=s&&this._raiseEvent(16,{rowindex:s.rowindex,datafield:s.datafield}),this.selectedcells=new Array}if("multiplecellsextended"==this.selectionmode||"multiplecellsadvanced"==this.selectionmode){var s=this.selectedcell;null!=s&&this._raiseEvent(16,{rowindex:s.rowindex,datafield:s.datafield})}var a=e+"_"+t;if(this.dataview.filters.length>0){var o=this.getrowdata(e);if(o&&void 0!==o.dataindex){e=o.dataindex;var a=e+"_"+t}else if(o&&void 0===o.dataindex&&o.uid){e=this.getrowboundindexbyid(o.uid);var a=e+"_"+t}}var l={rowindex:e,datafield:t};return i?(this.selectedcell=l,this.selectedcells[a]?("multiplecells"==this.selectionmode||"multiplecellsextended"==this.selectionmode||"multiplecellsadvanced"==this.selectionmode)&&(delete this.selectedcells[a],this.selectedcells.length>0&&this.selectedcells.length--,this._raiseEvent(16,l)):(this.selectedcells[a]=l,this.selectedcells.length++,this._raiseEvent(15,l))):(delete this.selectedcells[a],this.selectedcells.length>0&&this.selectedcells.length--,this._raiseEvent(16,l)),(void 0==r||r)&&this._rendervisualrows(),!0
},_getcellindex:function(t){var i=-1;return e.each(this.selectedcells,function(){return i++,this[t]?!1:void 0}),i},_clearhoverstyle:function(){if(void 0!=this.hoveredrow&&-1!=this.hoveredrow&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()){var e=this.table.find(".jqx-grid-cell-hover");e.length>0&&(e.removeClass(this.toTP("jqx-grid-cell-hover")),e.removeClass(this.toTP("jqx-fill-state-hover"))),this.hoveredrow=-1}},_clearselectstyle:function(){for(var t=this.table[0].rows.length,i=this.table[0].rows,r=this.toTP("jqx-grid-cell-selected"),s=this.toTP("jqx-fill-state-pressed"),a=this.toTP("jqx-grid-cell-hover"),o=this.toTP("jqx-fill-state-hover"),l=0;t>l;l++)for(var n=i[l],d=n.cells.length,h=n.cells,c=0;d>c;c++){var u=h[c],g=e(u);-1!=u.className.indexOf("jqx-grid-cell-selected")&&(g.removeClass(r),g.removeClass(s)),-1!=u.className.indexOf("jqx-grid-cell-hover")&&(g.removeClass(a),g.removeClass(o))}},_selectpath:function(e,t){var i=this,r=this._lastClickedCell?Math.min(this._lastClickedCell.row,e):0,s=this._lastClickedCell?Math.max(this._lastClickedCell.row,e):0;if(s>=r){var a=this._getcolumnindex(this._lastClickedCell.column),o=this._getcolumnindex(t),l=Math.min(a,o),n=Math.max(a,o);this.selectedcells=new Array;for(var d=this.dataview.loadedrecords,h=r;s>=h;h++)for(var c=l;n>=c;c++){var e=d[h];this._applycellselection(i.getboundindex(e),i._getcolumnat(c).datafield,!0,!1)}this._rendervisualrows()}},_selectrowpath:function(e){if("multiplerowsextended"==this.selectionmode){var t=this._lastClickedCell?Math.min(this._lastClickedCell.row,e):0,i=this._lastClickedCell?Math.max(this._lastClickedCell.row,e):0,r=this.dataview.loadedrecords;if(i>=t){this.selectedrowindexes=new Array;for(var s=t;i>=s;s++){var e=r[s],a=this.getrowboundindex(s);this._applyrowselection(a,!0,!1)}this._rendervisualrows()}}},_selectrowwithmouse:function(e,t,i,r,s,a){var o=t.row;if(void 0!=o){var l=t.index;if(void 0!=this.hittestinfo[l]){var n=this.hittestinfo[l].visualrow;if(!this.hittestinfo[l].details){{n.cells[0].className}if(!o.group){if("multiplerows"==this.selectionmode||"multiplecells"==this.selectionmode||"checkbox"==this.selectionmode||-1!=this.selectionmode.indexOf("multiple")&&(1==a||1==s)){var d=this.getboundindex(o);if(this.dataview.filters.length>0){var h=this.getrowdata(d);if(h&&(d=h.dataindex,void 0==d))var d=this.getboundindex(o)}var c=-1!=i.indexOf(d),u=this.getboundindex(o)+"_"+r;if(-1!=this.selectionmode.indexOf("cell")){var g=void 0!=this.selectedcells[u];if(void 0!=this.selectedcells[u]&&g?this._selectcellwithstyle(e,!1,l,r,n):this._selectcellwithstyle(e,!0,l,r,n),a&&void 0==this._lastClickedCell){var p=this.getselectedcells();p&&p.length>0&&(this._lastClickedCell={row:p[0].rowindex,column:p[0].datafield})}a&&this._lastClickedCell&&(this._selectpath(o.visibleindex,r),this.mousecaptured=!1,"visible"==this.selectionarea.css("visibility")&&this.selectionarea.css("visibility","hidden"))}else{if(c?s?this._applyrowselection(this.getboundindex(o),!1):this._selectrowwithstyle(e,n,!1,r):this._selectrowwithstyle(e,n,!0,r),a&&void 0==this._lastClickedCell){var f=this.getselectedrowindexes();f&&f.length>0&&(this._lastClickedCell={row:f[0],column:r})}if(a&&this._lastClickedCell){this.selectedrowindexes=new Array;for(var v=this._lastClickedCell?Math.min(this._lastClickedCell.row,o.visibleindex):0,m=this._lastClickedCell?Math.max(this._lastClickedCell.row,o.visibleindex):0,w=this.dataview.loadedrecords,b=v;m>=b;b++){var o=w[b];o&&this._applyrowselection(this.getboundindex(o),!0,!1,!1)}this._rendervisualrows()}}}else this._clearselectstyle(),this._selectrowwithstyle(e,n,!0,r),-1!=this.selectionmode.indexOf("cell")&&this._selectcellwithstyle(e,!0,l,r,n);a||(this._lastClickedCell={row:o.visibleindex,column:r})}}}}},_selectcellwithstyle:function(t,i,r,s,a){var o=e(a.cells[t._getcolumnindex(s)]);o.removeClass(this.toTP("jqx-grid-cell-hover")),o.removeClass(this.toTP("jqx-fill-state-hover")),i?(o.addClass(this.toTP("jqx-grid-cell-selected")),o.addClass(this.toTP("jqx-fill-state-pressed"))):(o.removeClass(this.toTP("jqx-grid-cell-selected")),o.removeClass(this.toTP("jqx-fill-state-pressed")))},_selectrowwithstyle:function(t,i,r){var s=i.cells.length,a=0;t.rowdetails&&t.showrowdetailscolumn?this.rtl?(s-=1,s-=this.groups.length):a=1+this.groups.length:this.groupable&&(this.rtl?s-=this.groups.length:a=this.groups.length);for(var o=a;s>o;o++){var l=i.cells[o];r?(e(l).removeClass(this.toTP("jqx-grid-cell-hover")),e(l).removeClass(this.toTP("jqx-fill-state-hover")),-1==t.selectionmode.indexOf("cell")&&(e(l).addClass(this.toTP("jqx-grid-cell-selected")),e(l).addClass(this.toTP("jqx-fill-state-pressed")))):(e(l).removeClass(this.toTP("jqx-grid-cell-hover")),e(l).removeClass(this.toTP("jqx-grid-cell-selected")),e(l).removeClass(this.toTP("jqx-fill-state-hover")),e(l).removeClass(this.toTP("jqx-fill-state-pressed")))}},_handlemousemoveselection:function(t,i){if(i.hScrollInstance.isScrolling()||i.vScrollInstance.isScrolling())return!1;if(("multiplerowsextended"==i.selectionmode||"multiplecellsextended"==i.selectionmode||"multiplecellsadvanced"==i.selectionmode)&&i.mousecaptured){if(i.multipleselectionbegins){var r=i.multipleselectionbegins(t);if(r===!1)return!0}var s=this.showheader?this.columnsheader.height()+2:0,a=this._groupsheader()?this.groupsheader.height():0,o=this.showtoolbar?this.toolbarheight:0;a+=o;var l=this.host.coord();if(this.hasTransform){l=e.jqx.utilities.getOffset(this.host);var n=this._getBodyOffset();l.left-=n.left,l.top-=n.top}"0px"===this.host.css("border-top-width")&&(a-=2);var d=t.pageX,h=t.pageY-a;if(Math.abs(this.mousecaptureposition.left-d)>3||Math.abs(this.mousecaptureposition.top-h)>3){var c=parseInt(this.columnsheader.coord().top);this.hasTransform&&(c=e.jqx.utilities.getOffset(this.columnsheader).top),d<l.left&&(d=l.left),d>l.left+this.host.width()&&(d=l.left+this.host.width());var u=l.top+s;u>h&&(h=u+5);var g=parseInt(Math.min(i.mousecaptureposition.left,d)),p=-5+parseInt(Math.min(i.mousecaptureposition.top,h)),f=parseInt(Math.abs(i.mousecaptureposition.left-d)),v=parseInt(Math.abs(i.mousecaptureposition.top-h));if(g-=l.left,p-=l.top,this.selectionarea.css("visibility","visible"),"multiplecellsadvanced"==i.selectionmode){var d=g,m=d+f,w=i.hScrollInstance,b=w.value;this.rtl&&("hidden"!=this.hScrollBar.css("visibility")&&(b=w.max-w.value),"hidden"!=this.vScrollBar[0].style.visibility);var x=i.table[0].rows[0],y=0,_=i.mousecaptureposition.clickedcell,q=_,j=!1,z=0,k=x.cells.length;i.mousecaptureposition.left<=t.pageX&&(z=_);for(var S=z;k>S;S++){var I=parseInt(e(this.columnsrow[0].cells[S]).css("left")),T=I-b;if(i.columns.records[S].pinned)T=I;else{var C=this._getcolumnat(S);if(!(null!=C&&C.hidden||i.groupable&&i.groups.length>0&&S<i.groups.length)){var D=T+e(this.columnsrow[0].cells[S]).width();if(i.mousecaptureposition.left>t.pageX){if(D>=d&&d>=T){q=S,j=!0;break}}else if(D>=m&&m>=T){q=S,j=!0;break}}}}j||(i.mousecaptureposition.left>t.pageX?e.each(this.columns.records,function(e){return i.groupable&&i.groups.length>0&&e<i.groups.length?!0:this.pinned||this.hidden?void 0:(q=e,!1)}):(!i.groupable||i.groupable&&!i.groups.length>0)&&(q=x.cells.length-1));var B=_;_=Math.min(_,q),q=Math.max(B,q),p+=5,p+=a;for(var P=(i.table[0].rows.indexOf(i.mousecaptureposition.clickedrow),0),H=-1,A=-1,M=0,S=0;S<i.table[0].rows.length;S++){var L=e(i.table[0].rows[S]);0==S&&(M=L.coord().top);var E=L.height(),O=M-l.top;if(-1==H&&O+E>=p){for(var N=!1,F=0;F<i.groups.length;F++){var G=L[0].cells[F].className;if(-1!=G.indexOf("jqx-grid-group-collapse")||-1!=G.indexOf("jqx-grid-group-expand")){N=!0;break}}if(N)continue;H=S}if(M+=E,i.groupable&&i.groups.length>0){for(var N=!1,F=0;F<i.groups.length;F++){var G=L[0].cells[F].className;if(-1!=G.indexOf("jqx-grid-group-collapse")||-1!=G.indexOf("jqx-grid-group-expand")){N=!0;break}}if(N)continue;for(var y=0,W=i.groups.length;W<L[0].cells.length;W++){var Y=L[0].cells[W];""==e(Y).html()&&y++}if(y==L[0].cells.length-i.groups.length)continue}if(-1!=H&&(P+=E),O+E>p+v){A=S;break}}if(-1!=H){p=e(i.table[0].rows[H]).coord().top-l.top-a-2;var R=0;this.filterable&&this.showfilterrow&&(R=this.filterrowheight),parseInt(i.table[0].style.top)<0&&p<this.rowsheight+R&&(p-=parseInt(i.table[0].style.top),P+=parseInt(i.table[0].style.top)),v=P;var K=e(this.columnsrow[0].cells[_]),U=e(this.columnsrow[0].cells[q]);if(g=parseInt(K.css("left")),f=parseInt(U.css("left"))-parseInt(g)+U.width()-2,g-=b,i.editcell&&i.editable&&i.endcelledit&&(_!=q||H!=A)){if(0==i.editcell.validated)return;i.endcelledit(i.editcell.row,i.editcell.column,!0,!0)}}}this.selectionarea.width(f),this.selectionarea.height(v),this.selectionarea.css("left",g),this.selectionarea.css("top",p)}}},_handlemouseupselection:function(t,i){if(this.selectionarea){if("visible"!=this.selectionarea[0].style.visibility)return i.mousecaptured=!1,!0;if(i.mousecaptured&&("multiplerowsextended"==i.selectionmode||"multiplerowsadvanced"==i.selectionmode||"multiplecellsextended"==i.selectionmode||"multiplecellsadvanced"==i.selectionmode)&&(i.mousecaptured=!1,"visible"==this.selectionarea.css("visibility"))){this.selectionarea.css("visibility","hidden");var r=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0;"0px"===this.host.css("border-top-width")&&(s-=2);var a=this.showtoolbar?this.toolbarheight:0;s+=a;var o=this.selectionarea.coord(),l=this.host.coord();this.hasTransform&&(l=e.jqx.utilities.getOffset(this.host),o=e.jqx.utilities.getOffset(this.selectionarea));var n=o.left-l.left,d=o.top-r-l.top-s,h=d,c=n+this.selectionarea.width(),u=n,g=new Array,p=new Array;if("multiplerowsextended"==i.selectionmode){for(;d<h+this.selectionarea.height();){var f=this._hittestrow(n,d),v=f.row,m=f.index;-1!=m&&(p[m]||(p[m]=!0,g[g.length]=f)),d+=20}var h=0;e.each(g,function(){var e=this.row;"none"!=i.selectionmode&&i._selectrowwithmouse&&(t.ctrlKey||t.metaKey?i._applyrowselection(i.getboundindex(e),!0,!1,!1):0==h?i._applyrowselection(i.getboundindex(e),!0,!1,!0):i._applyrowselection(i.getboundindex(e),!0,!1,!1),h++)})}else{"multiplecellsadvanced"==i.selectionmode&&(d+=2);var w=i.hScrollInstance,b=w.value;this.rtl&&("hidden"!=this.hScrollBar.css("visibility")&&(b=w.max-w.value),"hidden"!=this.vScrollBar[0].style.visibility&&(b-=this.scrollbarsize+4));var x=i.table[0].rows[0],y=i.selectionarea.height();!t.ctrlKey&&!t.metaKey&&y>0&&(i.selectedcells=new Array);for(var _=y;h+_>d;){var f=i._hittestrow(n,d);if(f){var v=f.row,m=f.index;if(-1!=m&&!p[m]){p[m]=!0;for(var q=0;q<x.cells.length;q++){var j=parseInt(e(i.columnsrow[0].cells[q]).css("left"))-b,z=j+e(i.columnsrow[0].cells[q]).width();(u>=j&&z>=u||c>=j&&z>=c||j>=u&&c>=j)&&i._applycellselection(i.getboundindex(v),i._getcolumnat(q).datafield,!0,!1)}}d+=5}else d+=5}}i.autosavestate&&i.savestate&&i.savestate(),i._renderrows(i.virtualsizeinfo)}}},selectprevcell:function(e,t){var i=this._getcolumnindex(t),r=(this.columns.records.length,this._getprevvisiblecolumn(i));null!=r&&(this.clearselection(),this.selectcell(e,r.datafield))},selectnextcell:function(e,t){var i=this._getcolumnindex(t),r=(this.columns.records.length,this._getnextvisiblecolumn(i));null!=r&&(this.clearselection(),this.selectcell(e,r.datafield))},_getfirstvisiblecolumn:function(){for(var e=this.columns.records.length,t=0;e>t;t++){var i=this.columns.records[t];if(!i.hidden&&null!=i.datafield)return i}return null},_getlastvisiblecolumn:function(){for(var e=this.columns.records.length,t=e-1;t>=0;t--){var i=this.columns.records[t];if(!i.hidden&&null!=i.datafield)return i}return null},_handlekeydown:function(t,i){if(i.groupable&&i.groups.length>0)return!0;if(i.disabled)return!1;var r=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(i.editcell&&"multiplecellsadvanced"!=i.selectionmode)return!0;if(i.editcell&&"multiplecellsadvanced"==i.selectionmode){if(!(r>=33&&40>=r))return!0;if(t.altKey)return i._cancelkeydown=!1,!0;if(void 0!=i._cancelkeydown&&0!=i._cancelkeydown)return i._cancelkeydown=!1,!0;if("selectedrow"===i.editmode)return!0;if(i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),i._cancelkeydown=!1,i.editcell&&!i.editcell.validated)return i._rendervisualrows(),i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!1}if("none"==i.selectionmode)return!0;if(i.showfilterrow&&i.filterable&&this.filterrow&&e(t.target).ischildof(this.filterrow))return!0;if(i.pageable&&e(t.target).ischildof(this.pager))return!0;if(this.showtoolbar&&e(t.target).ischildof(this.toolbar))return!0;if(this.showstatusbar&&e(t.target).ischildof(this.statusbar))return!0;var s=!1;if(t.altKey)return!0;if((t.ctrlKey||t.metaKey)&&this.clipboard){var a=String.fromCharCode(r).toLowerCase();if("c"==a||"x"==a){var o=this.copyselection();if(window.clipboardData)window.clipboardData.setData("Text",o);else{var l=e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');l.val(o),e("body").append(l),l.select(),setTimeout(function(){document.designMode="off",l.select(),l.remove(),i.focus()},100)}}else if("v"==a){var n=e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');e("body").append(n),n.select();var d=this;setTimeout(function(){d._clipboardselection=new Array;for(var e=n.val(),t=e.split("\n"),i=0;i<t.length;i++)if(t[i].split("	").length>0){var r=t[i].split("	");if(1==r.length&&i==t.length-1&&""==r[0])continue;r.length>0&&d._clipboardselection.push(r)}d.pasteselection(),n.remove(),d.focus()},100)}"x"==a&&(this.deleteselection(),this.host.focus())}var h=Math.round(i._gettableheight()),c=Math.round(h/i.rowsheight),u=i.getdatainformation();switch(i.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":var g=i.getselectedcell();if(null!=g){var p=this.getrowvisibleindex(g.rowindex),f=p,v=g.datafield,m=i._getcolumnindex(v),w=(i.columns.records.length,function(e,a,o){var l=function(e,t){var r=i.dataview.loadedrecords[e];if(void 0!=r&&null!=t){(o||void 0==o)&&i.clearselection();var a=i.getboundindex(r);return i.selectcell(a,t),i._oldselectedcell=i.selectedcell,s=!0,i.ensurecellvisible(e,t),!0}return!1};if(l(e,a)||(i.ensurecellvisible(e,a),l(e,a),i.virtualmode&&i.host.focus()),t.shiftKey&&9!=r){if(("multiplecellsextended"==i.selectionmode||"multiplecellsadvanced"==i.selectionmode)&&i._lastClickedCell){i._selectpath(e,a);var n=i.dataview.loadedrecords[e],d=i.getboundindex(n);return void(i.selectedcell={rowindex:d,datafield:a})}}else t.shiftKey||(i._lastClickedCell={row:e,column:a})}),b=t.shiftKey&&"singlecell"!=i.selectionmode&&"multiplecells"!=i.selectionmode,x=function(){w(0,v,!b)},y=function(){var e=u.rowscount-1;w(e,v,!b)},_=9==r&&!t.shiftKey,q=9==r&&t.shiftKey;(_||q)&&(b=!1);var j=t.ctrlKey||t.metaKey;if(j&&37==r){var z=i._getfirstvisiblecolumn(m);null!=z&&w(f,z.datafield)}else if(j&&39==r){var k=i._getlastvisiblecolumn(m);null!=k&&w(f,k.datafield)}else if(39==r||_){var S=i._getnextvisiblecolumn(m);null!=S?w(f,S.datafield,!b):_||(s=!0)}else if(37==r||q){var z=i._getprevvisiblecolumn(m);null!=z?w(f,z.datafield,!b):q||(s=!0)}else if(36==r)x();else if(35==r)y();else if(33==r)if(f-c>=0){var I=f-c;w(I,v,!b)}else x();else if(34==r)if(u.rowscount>f+c){var I=f+c;w(I,v,!b)}else y();else 38==r?j?x():f>0?w(f-1,v,!b):s=!0:40==r&&(j?y():u.rowscount>f+1?w(f+1,v,!b):s=!0)}break;case"singlerow":case"multiplerows":case"multiplerowsextended":case"multiplerowsadvanced":var f=i.getselectedrowindex();if(null==f||-1==f)return!0;f=this.getrowvisibleindex(f);var T=function(e,a){var o=function(e){var t=i.dataview.loadedrecords[e];if(void 0!=t){var r=i.getboundindex(t),o=i.selectedrowindex;(a||void 0==a)&&i.clearselection(),i.selectedrowindex=o,i.selectrow(r,!1);var l=i.ensurerowvisible(e);return(!l||i.autoheight||i.groupable)&&i._rendervisualrows(),s=!0,!0}return!1};if(o(e)||(i.ensurerowvisible(e),o(e,a),i.virtualmode&&setTimeout(function(){o(e,a)},25),i.virtualmode&&i.host.focus()),t.shiftKey&&9!=r){if("multiplerowsextended"==i.selectionmode&&i._lastClickedCell)return i._selectrowpath(e),void(i.selectedrowindex=i.getrowboundindex(e))}else t.shiftKey||(i._lastClickedCell={row:e},i.selectedrowindex=i.getrowboundindex(e))},b=t.shiftKey&&"singlerow"!=i.selectionmode&&"multiplerows"!=i.selectionmode,x=function(){T(0,!b)},y=function(){var e=u.rowscount-1;T(e,!b)},j=t.ctrlKey||t.metaKey;if(36==r||j&&38==r)x();else if(35==r||j&&40==r)y();else if(33==r)if(f-c>=0){var I=f-c;T(I,!b)}else x();else if(34==r)if(u.rowscount>f+c){var I=f+c;T(I,!b)}else y();else 38==r?f>0?T(f-1,!b):s=!0:40==r&&(u.rowscount>f+1?T(f+1,!b):s=!0)}return s?(i.autosavestate&&i.savestate&&i.savestate(),!1):!0},_handlemousemove:function(t,i){if(!i.vScrollInstance.isScrolling()&&!i.hScrollInstance.isScrolling()){var r,s,a,o,l;if(i.enablehover||"multiplerows"==i.selectionmode){r=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0;var n=this.showtoolbar?this.toolbarheight:0;if(s+=n,a=this.host.coord(),this.hasTransform){a=e.jqx.utilities.getOffset(this.host);var d=this._getBodyOffset();a.left-=d.left,a.top-=d.top}o=t.pageX-a.left,l=t.pageY-r-a.top-s}if("multiplerowsextended"!=i.selectionmode&&"multiplecellsextended"!=i.selectionmode&&"multiplecellsadvanced"!=i.selectionmode||1!=i.mousecaptured){if(!i.enablehover)return!0;if(!i.disabled&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()){var h=this._hittestrow(o,l);if(h){var c=h.row,u=h.index;if((-1==this.hoveredrow||-1==u||this.hoveredrow!=u||-1!=this.selectionmode.indexOf("cell")||"checkbox"==this.selectionmode)&&(this._clearhoverstyle(),-1!=u&&void 0!=c)){var g=this.hittestinfo[u].visualrow;if(null!=g&&!(this.hittestinfo[u].details||t.clientX>e(g).width()+e(g).coord().left)){var p=0,f=g.cells.length;if(i.rowdetails&&i.showrowdetailscolumn?this.rtl?(f-=1,f-=this.groups.length):p=1+this.groups.length:this.groupable&&(this.rtl?f-=this.groups.length:p=this.groups.length),0!=g.cells.length){var v=g.cells[p].className;if(!(c.group||this.selectionmode.indexOf("row")>=0&&-1!=v.indexOf("jqx-grid-cell-selected")))if(this.hoveredrow=u,-1==this.selectionmode.indexOf("cell")&&"checkbox"!=this.selectionmode)for(var m=p;f>m;m++){var w=g.cells[m];e(w).addClass(this.toTP("jqx-grid-cell-hover")),e(w).addClass(this.toTP("jqx-fill-state-hover")),this.cellhover&&this.cellhover(w,t.pageX,t.pageY)}else{var b=-1,x=this.hScrollInstance,y=x.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(y=x.max-x.value);for(var m=p;f>m;m++){var _=parseInt(e(this.columnsrow[0].cells[m]).css("left"))-y,q=_+e(this.columnsrow[0].cells[m]).width();if(q>=o&&o>=_){b=m;break}}if(-1!=b){var w=g.cells[b];if(this.cellhover&&this.cellhover(w,t.pageX,t.pageY),-1==w.className.indexOf("jqx-grid-cell-selected")){if(this.editcell){var j=this._getcolumnat(b);if(j&&this.editcell.row==u&&this.editcell.column==j.datafield)return}e(w).addClass(this.toTP("jqx-grid-cell-hover")),e(w).addClass(this.toTP("jqx-fill-state-hover"))}}}}}}}}}}}})}(jqxBaseFramework),function(e){e.extend(e.jqx._jqxGrid.prototype,{autoresizecolumns:function(t,i){"cells"!=t&&"all"!=t&&"column"!=t&&(t="all");var r=this.that,s=this.getrows();this.pageable&&(s=this.dataview.rows,this.groupable&&(s=this.dataview.records)),i=void 0==i?0:parseInt(i);var a=s.length;if(void 0==a&&void 0!=s){var o=new Array;e.each(s,function(){o.push(this)}),s=o,a=s.length}var l=e("<span></span>");l.addClass(this.toThemeProperty("jqx-widget")),l.addClass(this.toThemeProperty("jqx-grid-cell")),e(document.body).append(l);var n=[],d=[],h=[],c=[],u=r.host.width();"hidden"!=r.vScrollBar[0].style.visibility&&(u-=this.scrollbarsize+5),0>u&&(u=0);for(var g=0;a>g;g++)for(var p=s[g],f=0;f<this.columns.records.length;f++){var v=this.columns.records[f];if(!(v.hidden||this.groups.length>0&&f<=this.groups.length-1)){void 0==d[v.displayfield]&&(d[v.displayfield]=0),void 0==h[v.displayfield]&&(h[v.displayfield]="");var m=p[v.displayfield];if(""!=v.cellsformat)e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(m)?m=e.jqx.dataFormat.formatdate(m,v.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(m)&&(m=e.jqx.dataFormat.formatnumber(m,v.cellsformat,this.gridlocalization)));else if(v.cellsrenderer){var w=r._defaultcellsrenderer(m,v),b=v.cellsrenderer(g,v.datafield,m,w,v.getcolumnproperties(),p);void 0!=b&&(m=e(b).text())}if((void 0==t||"cells"==t||"all"==t)&&null!=m){var n=m.toString().length,x=m.toString(),y=x.replace(/[^A-Z]/g,"").length;if(n>d[v.displayfield]&&(d[v.displayfield]=n,h[v.displayfield]=m,c[v.displayfield]=y),n>0&&n>=y){var _=20*y+15*(n-y),q=20*c[v.displayfield]+15*(d[v.displayfield]-c[v.displayfield]);_>q&&_>0&&q>0&&(d[v.displayfield]=n,h[v.displayfield]=m,c[v.displayfield]=y)}}if("column"==t||"all"==t){if(v.text.toString().length>d[v.displayfield]){h[v.displayfield]=v.text,d[v.displayfield]=v.text.length;var x=v.text.toString(),y=x.replace(/[^A-Z]/g,"").length;c[v.displayfield]=y}var m=v.text,n=m.toString().length,x=m.toString(),y=x.replace(/[^A-Z]/g,"").length;if(n>0&&n>=y){var _=20*y+15*(n-y),q=20*c[v.displayfield]+15*(d[v.displayfield]-c[v.displayfield]);_>q&&_>0&&q>0&&(d[v.displayfield]=n,h[v.displayfield]=m,c[v.displayfield]=y)}}}}if(this.columns.records){for(var f=0;f<this.columns.records.length;f++){var v=this.columns.records[f];if(v.displayfield){void 0==h[v.displayfield]&&(h[v.displayfield]=v.text),l[0].innerHTML=h[v.displayfield].toString();var j=l.outerWidth()+10;if(l.children().length>0&&(j=l.children().outerWidth()+10),e.jqx.browser.msie&&e.jqx.browser.version<8&&(j+=10),this.filterable&&this.showfilterrow&&(j+=5),j+=i,j>v.maxwidth&&(j=v.maxwidth),void 0!=v._width&&(v.__width=v._width),v._width=null,"auto"==v.maxwidth||j<=v.maxwidth){var z=v.width;j<v.minwidth&&(j=v.minwidth),v.width=j,void 0!=v._percentagewidth&&(v._percentagewidth=null),this._raiseEvent(14,{columntext:v.text,column:v.getcolumnproperties(),datafield:v.datafield,displayfield:v.displayfield,oldwidth:z,newwidth:j})}}}l.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);for(var f=0;f<this.columns.records.length;f++){var v=this.columns.records[f];void 0!=v.__width&&(v._width=v.__width)}}},autoresizecolumn:function(t,i,r){if("cells"!=i&&"all"!=i&&"column"!=i&&(i="all"),void 0==t)return!1;var s=this.getrows();this.pageable&&(s=this.dataview.rows,this.groupable&&(s=this.dataview.records));var a=this.getcolumn(t);if(void 0==a)return!1;r=void 0==r?0:parseInt(r);var o=s.length,l=e("<span></span>");l.addClass(this.toThemeProperty("jqx-widget")),l.addClass(this.toThemeProperty("jqx-grid-cell")),e(document.body).append(l);var n=0,d="",h=0,c=this.that,u=c.host.width();if("hidden"!=c.vScrollBar[0].style.visibility&&(u-=this.scrollbarsize+5),0>u&&(u=0),void 0==i||"cells"==i||"all"==i)for(var g=0;o>g;g++){var p=s[g][a.displayfield];if(""!=a.cellsformat)e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(p)?p=e.jqx.dataFormat.formatdate(p,a.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(p)&&(p=e.jqx.dataFormat.formatnumber(p,a.cellsformat,this.gridlocalization)));else if(a.cellsrenderer){var f=a.cellsrenderer(g,a,p);void 0!=f&&(p=e(f).text())}if(null!=p){var v=p.toString().length,m=p.toString(),w=m.replace(/[^A-Z]/g,"").length;if(v>n&&(n=v,d=p,h=w),v>0&&v>=w){var b=20*w+15*(v-w),x=20*h+15*(n-h);b>x&&b>0&&x>0&&(n=v,d=p,h=w)}}}if("column"==i||"all"==i){a.text.toString().length>n&&(d=a.text);var p=a.text.toString(),v=p.toString().length,m=p.toString(),w=m.replace(/[^A-Z]/g,"").length;if(v>0&&v>=w){var b=20*w+15*(v-w),x=20*h+15*(n-h);b>x&&b>0&&x>0&&(n=v,d=p,h=w)}}void 0==d&&(d=a.text),l[0].innerHTML=d;var y=l.outerWidth()+10;if(e.jqx.browser.msie&&e.jqx.browser.version<8&&(y+=5),this.filterable&&this.showfilterrow&&(y+=5),y+=r,l.remove(),y>a.maxwidth&&(y=a.maxwidth),"auto"==a.maxwidth||y<=a.maxwidth){var _=a.width;y<a.minwidth&&(y=a.minwidth),a.width=y,void 0!=a._width&&(a.__width=a._width),a._width=null,void 0!=a._percentagewidth&&(a._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:a.text,column:a.getcolumnproperties(),datafield:t,displayfield:a.displayfield,oldwidth:_,newwidth:y}),this._renderrows(this.virtualsizeinfo),void 0!=a._width&&(a._width=a.__width)}},_handlecolumnsresize:function(){var t=this.that;if(this.columnsresize){var i=!1;t.isTouchDevice()&&t.touchmode!==!0&&(i=!0);var r="mousemove.resize"+this.element.id,s="mousedown.resize"+this.element.id,a="mouseup.resize"+this.element.id;if(i)var r=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,s=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),r),this.addHandler(e(document),r,function(r){var s=e.data(document.body,"contextmenu"+t.element.id);if(null!=s&&t.autoshowcolumnsmenubutton)return!0;if(null!=t.resizablecolumn&&!t.disabled&&t.resizing&&null!=t.resizeline){var a=(t.resizablecolumn.columnelement,t.host.coord()),o=parseInt(t.resizestartline.coord().left),l=o-t._startcolumnwidth,n=t.resizablecolumn.column.minwidth;n="auto"==n?0:parseInt(n);var d=t.resizablecolumn.column.maxwidth;d="auto"==d?0:parseInt(d);var h=r.pageX;if(i){var c=t.getTouches(r),u=c[0];h=u.pageX}l+=n;var g=d>0?o+d:0,p=0==d?!0:t._startcolumnwidth+h-o<d?!0:!1;if(t.rtl)var p=!0;if(p)if(t.rtl){if(h>=a.left&&h<=a.left+t.host.width()&&(t.resizeline.css("left",h),i))return!1}else if(h>=a.left&&h>=l&&(0!=g&&r.pageX<g?t.resizeline.css("left",h):0==g&&t.resizeline.css("left",h),i))return!1}return i||null==t.resizablecolumn?void 0:!1}),this.removeHandler(e(document),s),this.addHandler(e(document),s,function(i){var r=e.data(document.body,"contextmenu"+t.element.id);if(null!=r&&t.autoshowcolumnsmenubutton)return!0;if(null!=t.resizablecolumn&&!t.disabled){var s=t.resizablecolumn.columnelement;if(s.coord().top+s.height()+5<i.pageY)return void(t.resizablecolumn=null);if(s.coord().top-5>i.pageY)return void(t.resizablecolumn=null);t._startcolumnwidth=t.resizablecolumn.column.width,t.resizablecolumn.column._width=null,e(document.body).addClass("jqx-disableselect"),e(document.body).addClass("jqx-position-reset"),t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect"),t._mouseDownResize=new Date,t.resizing=!0,t._resizecolumn=t.resizablecolumn.column,t.resizeline=t.resizeline||e('<div style="position: absolute;"></div>'),t.resizestartline=t.resizestartline||e('<div style="position: absolute;"></div>'),t.resizebackground=t.resizebackground||e('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),t.resizebackground.css("opacity",.01),t.resizebackground.css("cursor","col-resize"),t.resizeline.css("cursor","col-resize"),t.resizestartline.css("cursor","col-resize"),t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")),t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")),e(document.body).append(t.resizeline),e(document.body).append(t.resizestartline),e(document.body).append(t.resizebackground);var a=t.resizablecolumn.columnelement.coord();t.resizebackground.css("left",t.host.coord().left),t.resizebackground.css("top",t.host.coord().top),t.resizebackground.width(t.host.width()),t.resizebackground.height(t.host.height()),t.resizebackground.css("z-index",9999);var o=function(e){t.rtl?e.css("left",parseInt(a.left)):e.css("left",parseInt(a.left)+t._startcolumnwidth);var i=t._groupsheader(),r=i?t.groupsheader.height():0,s=t.showtoolbar?t.toolbarheight:0;r+=s;var o=t.showstatusbar?t.statusbarheight:0;r+=o;var l=0;t.pageable&&(l=t.pagerheight);var n="visible"==t.hScrollBar.css("visibility")?17:0;e.css("top",parseInt(a.top)),e.css("z-index",99999),e.height(t.columngroups?t.host.height()+t.resizablecolumn.columnelement.height()-l-r-n-t.columngroupslevel*t.columnsheight:t.host.height()-l-r-n),t.enableanimations?e.show("fast"):e.show()};o(t.resizeline),o(t.resizestartline),t.dragmousedown=null}});var o=function(){if(e(document.body).removeClass("jqx-disableselect"),e(document.body).removeClass("jqx-position-reset"),(t.showfilterrow||t.showstatusbar||t.showtoolbar||t.enablebrowserselection)&&(t.host.removeClass("jqx-disableselect"),t.content.removeClass("jqx-disableselect")),t.resizing){t._mouseUpResize=new Date;var i=t._mouseUpResize-t._mouseDownResize;if(200>i)return t.resizing=!1,void(null!=t._resizecolumn&&null!=t.resizeline&&"block"==t.resizeline.css("display")&&(t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove()));if(t.resizing=!1,!t.disabled){var r=t.host.width();if("hidden"!=t.vScrollBar[0].style.visibility&&(r-=20),0>r&&(r=0),null!=t._resizecolumn&&null!=t.resizeline&&"block"==t.resizeline.css("display")){var s=parseInt(t.resizeline.css("left")),a=parseInt(t.resizestartline.css("left")),o=t._startcolumnwidth+s-a;if(t.rtl)var o=t._startcolumnwidth-s+a;var l=t._resizecolumn.width;t._closemenu(),o<t._resizecolumn.minwidth&&(o=t._resizecolumn.minwidth),t._resizecolumn.width=o,void 0!=t._resizecolumn._percentagewidth&&(t._resizecolumn._percentagewidth=o/r*100);for(var n=0;n<t._columns.length;n++)if(t._columns[n].datafield===t._resizecolumn.datafield){t._columns[n].width=t._resizecolumn.width,t._columns[n].width<t._resizecolumn.minwidth&&(t._columns[n].width=t._resizecolumn.minwidth);break}var d=t.hScrollBar[0].style.visibility;t._updatecolumnwidths(),t._updatecellwidths(),t._raiseEvent(14,{columntext:t._resizecolumn.text,column:t._resizecolumn.getcolumnproperties(),datafield:t._resizecolumn.datafield,oldwidth:l,newwidth:o}),t._renderrows(t.virtualsizeinfo),t.autosavestate&&t.savestate&&t.savestate(),d!=t.hScrollBar[0].style.visibility&&t.hScrollInstance.setPosition(0),t.rtl&&t._arrange(),t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove(),t.resizablecolumn=null}else t.resizablecolumn=null}}};try{if(""!=document.referrer||window.frameElement){var l=null;if(null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(l=document.referrer),l&&-1!=l.indexOf(document.location.host)){var n=function(){o()};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",n,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",n)}}}catch(d){}this.removeHandler(e(document),a),this.addHandler(e(document),a,function(){var i=e.data(document.body,"contextmenu"+t.element.id);return null!=i&&t.autoshowcolumnsmenubutton?!0:void o()})}}})}(jqxBaseFramework),function(e){e.extend(e.jqx._jqxGrid.prototype,{_updatefilterrowui:function(t){for(var i=this.columns.records.length,r=0,s=this,a=0;i>a;a++){var o=this.columns.records[a],l=o.width;l<o.minwidth&&(l=o.minwidth),l>o.maxwidth&&(l=o.maxwidth);var n=e(this.filterrow[0].cells[a]);n.css("left",r);var d=!0;if(n.width()==l&&(d=!1),t&&(d=!0),n.width(l),n[0].left=r,o.hidden&&o.hideable?n.css("display","none"):r+=l,d)if(o.createfilterwidget&&"custom"==o.filtertype)o.createfilterwidget(o,n);else if(o.filterable){var h=function(t,i){var r=e(i.children()[0]);r.width(l-10),r.attr("disabled",t.disabled)};switch(o.filtertype){case"number":case"input":e(n.children()[0]).width(l),n.find("input").width(l-30),n.find("input").attr("disabled",s.disabled),e(n.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:s.theme,disabled:s.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?e(n.children()[0]).jqxDateTimeInput({theme:s.theme,disabled:s.disabled,width:l-10}):h(this,n);break;case"textbox":case"default":h(this,n);break;case"list":case"checkedlist":this.host.jqxDropDownList?e(n.children()[0]).jqxDropDownList({theme:s.theme,disabled:s.disabled,width:l-10}):h(this,n);break;case"bool":case"boolean":this.host.jqxCheckBox?e(n.children()[0]).jqxCheckBox({theme:s.theme,disabled:s.disabled}):h(this,n)}}}var c=e(this.filterrow.children()[0]);c.width(parseInt(r)+2),c.height(this.filterrowheight)},clearfilterrow:function(t){if(this._disablefilterrow=!0,this.columns.records){for(var i=this.columns.records.length,r=0;i>r;r++){var s=this.columns.records[r],a=e(this.filterrow[0].cells[r]);if(("string"!=typeof t||s.displayfield==t)&&s.filterable){var o=function(t,i){var r=e(i.children()[0]);r.val(""),r[0]&&(t["_oldWriteText"+r[0].id]="")};switch(s.filtertype){case"number":case"input":if(a.find("input").val(""),this.host.jqxDropDownList){var l=e(e(e(a).children()[0]).children()[1]);l.jqxDropDownList("clearSelection");var n=0;if(0==n){var d=this._getfiltersbytype("number"==s.filtertype?"number":"string"),h=d.indexOf("contains");-1!=h&&null==s.filtercondition&&(n=h)}l.jqxDropDownList({selectedIndex:n}),l.jqxDropDownList("ensureVisible",n)}break;case"date":case"range":this.host.jqxDateTimeInput?e(a.children()[0]).jqxDateTimeInput("setDate",null):o(this,a);break;case"textbox":case"default":o(this,a);break;
case"list":this.host.jqxDropDownList?e(a.children()[0]).jqxDropDownList("clearSelection"):o(this,a);break;case"checkedlist":this.host.jqxDropDownList?e(a.children()[0]).jqxDropDownList("checkAll",!1):o(this,a);break;case"bool":case"boolean":this.host.jqxCheckBox?e(a.children()[0]).jqxCheckBox({checked:null}):o(this,a)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var t=this.columns.records.length,i=this.that,r=0;t>r;r++){var s=new e.jqx.filter,a=this.columns.records[r];if(a.filterable&&null!==a.datafield){var o=i._getcolumntypebydatafield(a),l=i._getfiltertype(o),n=1,d=!0,h=(a.filtertype,function(e,t,r){var s=!0;if(e._filterwidget){var a=e._filterwidget.val();if(""!=a){var o="equal";if("stringfilter"==t)var o="contains";if("numericfilter"==t&&","==i.gridlocalization.decimalseparator&&a.indexOf(i.gridlocalization.decimalseparator)>=0&&(a=a.replace(i.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var l=0;if(-1!=a.indexOf(">")&&(o="greater_than",l=1),-1!=a.indexOf("<")&&(o="less_than",l=1),-1!=a.indexOf("=")&&("greater_than"==o?(o="greater_than_or_equal",l=2):"less_than"==o?(o="less_than_or_equal",l=2):(o="equal",l=1)),0!=l&&(a=a.substring(l),a.length<1))return!1}if(void 0!=e.filtercondition&&(o=e.filtercondition),"datefilter"==t)var d=r.createfilter(t,a,o,null,e.cellsformat,i.gridlocalization);else var d=r.createfilter(t,a,o);r.addfilter(n,d)}else s=!1}return s});switch(a.filtertype){case"range":case"date":if(a._filterwidget.jqxDateTimeInput)if("range"==a.filtertype){var c=a._filterwidget.jqxDateTimeInput("getRange");if(null!=c&&null!=c.from&&null!=c.to){var u="GREATER_THAN_OR_EQUAL",g=new Date(0);g.setHours(0),g.setMinutes(0),g.setFullYear(c.from.getFullYear(),c.from.getMonth(),c.from.getDate());var p=new Date(0);p.setHours(0),p.setMinutes(0),p.setFullYear(c.to.getFullYear(),c.to.getMonth(),c.to.getDate()),p.setHours(c.to.getHours()),p.setMinutes(c.to.getMinutes()),p.setSeconds(c.to.getSeconds());var f=s.createfilter(l,g,u);s.addfilter(0,f);var v="LESS_THAN_OR_EQUAL",m=s.createfilter(l,p,v);s.addfilter(0,m)}else d=!1}else{var c=a._filterwidget.jqxDateTimeInput("getDate");if(null!=c){var g=new Date(0);g.setHours(0),g.setMinutes(0),g.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());var f=s.createfilter(l,g,"EQUAL");s.addfilter(0,f)}else d=!1}else d=h(a,l,s);break;case"input":if(a._filterwidget){var c=a._filterwidget.find("input").val(),w=a._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),b=s.getoperatorsbyfiltertype(l)[w];if(i.updatefilterconditions){var x=i.updatefilterconditions(l,s.getoperatorsbyfiltertype(l));void 0!=x&&s.setoperatorsbyfiltertype(l,x);var b=s.getoperatorsbyfiltertype(l)[w]}var y="NULL"==b||"NOT_NULL"==b,_="EMPTY"==b||"NOT_EMPTY"==b;void 0!=c&&c.length>0||y||_?(f=s.createfilter(l,c,b,null,a.cellsformat,i.gridlocalization),s.addfilter(0,f)):d=!1}else d=!1;break;case"number":if(a._filterwidget){var c=a._filterwidget.find("input").val();","==i.gridlocalization.decimalseparator&&c.indexOf(i.gridlocalization.decimalseparator)>=0&&(c=c.replace(i.gridlocalization.decimalseparator,"."));var w=a._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),b=s.getoperatorsbyfiltertype(l)[w];if(i.updatefilterconditions){var x=i.updatefilterconditions(l,s.getoperatorsbyfiltertype(l));void 0!=x&&s.setoperatorsbyfiltertype(l,x);var b=s.getoperatorsbyfiltertype(l)[w]}var y="NULL"==b||"NOT_NULL"==b,_="EMPTY"==b||"NOT_EMPTY"==b;void 0!=c&&c.length>0||y||_?(f=s.createfilter(l,new Number(c),b,null,a.cellsformat,i.gridlocalization),s.addfilter(0,f)):d=!1}else d=!1;break;case"textbox":case"default":d=h(a,l,s);break;case"bool":case"boolean":if(a._filterwidget.jqxCheckBox){var c=a._filterwidget.jqxCheckBox("checked");if(null!=c){var u="equal",q=s.createfilter(l,c,u);s.addfilter(n,q)}else d=!1}else d=h(a,l,s);break;case"list":var j=a._filterwidget.jqxDropDownList("listBox");if(j.selectedIndex>0){var z=j.getItem(j.selectedIndex),c=z.label,k=z.value,u="equal";""===c&&(u="NULL");var q=s.createfilter(l,c,u);s.addfilter(n,q),k!==c&&(q.data=k)}else d=!1;break;case"checkedlist":if(a._filterwidget.jqxDropDownList){var j=a._filterwidget.jqxDropDownList("listBox"),S=j.getCheckedItems();if(0==S.length){for(var I=1;I<j.items.length;I++){var c=j.items[I].label,k=j.items[I].value,u="not_equal";""===c&&(u="NULL");var q=s.createfilter(l,c,u);k!==c&&(q.data=k),s.addfilter(0,q)}d=!0}else if(S.length!=j.items.length)for(var I=0;I<S.length;I++){var c=S[I].label,k=S[I].value,u="equal";""===c&&(u="NULL");var q=s.createfilter(l,c,u);k!==c&&(q.data=k),s.addfilter(n,q)}else d=!1}else d=h(a,l,s)}this._loading||(d?this.addfilter(a.displayfield,s,!1):this.removefilter(a.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var t=e('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),i=0,r=this.columns.records.length,s=this.toThemeProperty("jqx-grid-cell");s+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),s+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var a=r+10,o=new Array,l=this.that;this.filterrow[0].cells=o,t.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(t),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var n=!1,d=new Array,h=0;r>h;h++){var c=this.columns.records[h],u=c.width;u<c.minwidth&&(u=c.minwidth),u>c.maxwidth&&(u=c.maxwidth);var g=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+s+'"></div>');t.append(g),g.css("left",i),this.rtl?(g.css("z-index",a++),g.css("border-left-width","1px")):g.css("z-index",a--),"auto"==u&&(u=0),g[0].style.width=parseFloat(u)+"px",g[0].left=i,c.hidden&&c.hideable?g.css("display","none"):i+=u,o[o.length]=g[0];var p=!0;if(this.rtl){if(this.groupable){var f=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+f+h>r-1&&(p=!1)}this.showrowdetailscolumn&&this.rowdetails&&h==r-1&&(p=!1)}else{if(this.groupable){var f=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+f>h&&(p=!1)}this.showrowdetailscolumn&&this.rowdetails&&0==h&&(p=!1)}if(p)if("custom"==c.filtertype&&c.createfilterwidget){var v=function(){l._applyfilterfromfilterrow()};c.createfilterwidget(c,g,v)}else c.filterable&&(this._filterrowcache[c.datafield]?(n=!0,g.append(this._filterrowcache[c.datafield]),c._filterwidget=this._filterrowcache[c.datafield]):(this._addfilterwidget(c,g,u),d[c.datafield]=c._filterwidget))}this._filterrowcache=d,e.jqx.browser.msie&&e.jqx.browser.version<8&&t.css("z-index",a--),t.width(parseFloat(i)+2),this.filterrow.addClass(s),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),n&&this._updatefilterrowui(!0)},_addfilterwidget:function(t,i,r){for(var s=this.that,a="",o=0;o<s.dataview.filters.length;o++){var l=s.dataview.filters[o];if(l.datafield&&l.datafield==t.datafield){a=l.filter.getfilters()[0].value;break}}var n=function(i,s){var o=e('<input autocomplete="off" type="textarea"/>');o[0].id=e.jqx.utilities.createId(),o.addClass(i.toThemeProperty("jqx-widget")),o.addClass(i.toThemeProperty("jqx-input")),o.addClass(i.toThemeProperty("jqx-rc-all")),o.addClass(i.toThemeProperty("jqx-widget-content")),i.rtl&&o.css("direction","rtl"),i.disabled&&o.attr("disabled",!0),o.attr("disabled",!1),o.appendTo(s),o.width(r-10),o.height(i.filterrowheight-10),o.css("margin","4px"),t.createfilterwidget&&t.createfilterwidget(t,s,o),t._filterwidget=o,o.focus(function(){return i.content[0].scrollLeft=0,setTimeout(function(){i.content[0].scrollLeft=0},10),i.focusedfilter=o,o.addClass(i.toThemeProperty("jqx-fill-state-focus")),!1}),o.blur(function(){o.removeClass(i.toThemeProperty("jqx-fill-state-focus"))}),o.keydown(function(e){"13"==e.keyCode&&i._applyfilterfromfilterrow(),o[0]._writeTimer&&clearTimeout(o[0]._writeTimer),o[0]._writeTimer=setTimeout(function(){i._loading||i["_oldWriteText"+o[0].id]!=o.val()&&(i._applyfilterfromfilterrow(),i["_oldWriteText"+o[0].id]=o.val())},t.filterdelay),i.focusedfilter=o}),i.host.removeClass("jqx-disableselect"),i.content.removeClass("jqx-disableselect"),o.val(a)};switch(null!=t.datatype&&("number"==t.filtertype&&("string"==t.datatype||"date"==t.datatype||"bool"==t.datatype)&&(t.filtertype="textbox"),"date"==t.filtertype&&("string"==t.datatype||"number"==t.datatype||"bool"==t.datatype)&&(t.filtertype="textbox"),"bool"==t.filtertype&&("string"==t.datatype||"number"==t.datatype||"date"==t.datatype)&&(t.filtertype="textbox")),t.filtertype){case"number":case"input":var d=e("<div></div>");d.width(i.width()),d.height(this.filterrowheight),i.append(d);var r=i.width()-20,h=function(i,r){var o=e('<input style="float: left;" autocomplete="off" type="textarea"/>');return s.rtl&&(o.css("float","right"),o.css("direction","rtl")),o[0].id=e.jqx.utilities.createId(),o.addClass(s.toThemeProperty("jqx-widget")),o.addClass(s.toThemeProperty("jqx-input")),o.addClass(s.toThemeProperty("jqx-rc-all")),o.addClass(s.toThemeProperty("jqx-widget-content")),o.appendTo(i),o.width(r-10),s.disabled&&o.attr("disabled",!0),o.attr("disabled",!1),o.height(s.filterrowheight-10),o.css("margin","4px"),o.css("margin-right","2px"),o.focus(function(){s.focusedfilter=o,o.addClass(s.toThemeProperty("jqx-fill-state-focus"))}),o.blur(function(){o.removeClass(s.toThemeProperty("jqx-fill-state-focus"))}),o.keydown(function(e){"13"==e.keyCode&&s._applyfilterfromfilterrow(),o[0]._writeTimer&&clearTimeout(o[0]._writeTimer),o[0]._writeTimer=setTimeout(function(){s._loading||s["_oldWriteText"+o[0].id]!=o.val()&&(s._applyfilterfromfilterrow(),s["_oldWriteText"+o[0].id]=o.val())},t.filterdelay),s.focusedfilter=o}),o.val(a),o};h(d,r);var c=s._getfiltersbytype("number"==t.filtertype?"number":"string"),u=e("<div class='filter' style='float: left;'></div>");u.css("margin-top","4px"),u.appendTo(d),s.rtl&&u.css("float","right");var g=0;if(null!=t.filtercondition){var o=new e.jqx.filter,p=o.getoperatorsbyfiltertype("number"==t.filtertype?"numericfilter":"stringfilter"),f=p.indexOf(t.filtercondition.toUpperCase());-1!=f&&(g=f)}var v=170;if("input"==t.filtertype&&(v=240,0==g)){var f=c.indexOf("contains");-1!=f&&null==t.filtercondition&&(g=f)}u.jqxDropDownList({disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:g,width:18,height:21,dropDownHeight:150,dropDownWidth:v,source:c,theme:s.theme}),u.jqxDropDownList({selectionRenderer:function(){return""}}),u.jqxDropDownList("setContent",""),u.find(".jqx-dropdownlist-content").hide(),t.createfilterwidget&&t.createfilterwidget(t,i,d),t._filterwidget=d;var m=null;this.addHandler(u,"select",function(){var e=u.jqxDropDownList("getSelectedItem").label;t._filterwidget.find("input").val().length>0&&!s.refreshingfilter&&s._applyfilterfromfilterrow(),"input"!=t.filtertype||s.refreshingfilter?0!=t._filterwidget.find("input").val().length||s.refreshingfilter||("null"==m||"not null"==m||"null"==e||"not null"==e)&&s._applyfilterfromfilterrow():s._applyfilterfromfilterrow(),m=e});break;case"textbox":case"default":default:n(this,i);break;case"none":break;case"date":case"range":if(this.host.jqxDateTimeInput){var w=e("<div></div>");w.css("margin","4px"),w.appendTo(i);var b={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring};w.jqxDateTimeInput({readonly:!0,disabled:s.disabled,localization:b,rtl:s.rtl,showFooter:!0,formatString:t.cellsformat,selectionMode:t.filtertype,value:null,theme:this.theme,width:r-10,height:this.filterrowheight-10}),t.createfilterwidget&&t.createfilterwidget(t,i,w),t._filterwidget=w,this.addHandler(w,"valueChanged",function(){s.refreshingfilter||(s._applyfilterfromfilterrow(),s.focusedfilter=null)})}else n(this,i);break;case"list":case"checkedlist":if(this.host.jqxDropDownList){var x=this._getfilterdataadapter(t),y=!1,u=e("<div></div>");u.css("margin","4px");var _=t.datafield,q="checkedlist"==t.filtertype?!0:!1,v=150>r?220:"auto";x.dataBind();var j=x.records,z=j.length<8?!0:!1;y=z,u.appendTo(i),u.jqxDropDownList({disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,checkboxes:q,dropDownWidth:v,source:x.records,autoDropDownHeight:z,theme:this.theme,width:r-10,height:this.filterrowheight-10,displayMember:t.displayfield,valueMember:_}),t.createfilterwidget&&t.createfilterwidget(t,i,u);var k=u.jqxDropDownList("listBox");if(q){u.jqxDropDownList({selectionRenderer:function(){var e='<span class="'+s.toThemeProperty("jqx-item")+'" style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>";return e}});var S=e('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>");if(S.addClass(this.toThemeProperty("jqx-item")),void 0!=k){y||k.host.height(200),k.insertAt(s.gridlocalization.filterselectallstring,0),u.jqxDropDownList("setContent",S);{var I=!0;new Array}k.checkAll(!1),s.addHandler(k.host,"checkChange",function(e){if(u[0]._selectionChanged=!0,I)if(e.args.label!=s.gridlocalization.filterselectallstring){I=!1,k.host.jqxListBox("checkIndex",0,!0,!1);var t=k.host.jqxListBox("getCheckedItems"),i=k.host.jqxListBox("getItems");1==t.length?k.host.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&k.host.jqxListBox("indeterminateIndex",0,!0,!1),I=!0}else I=!1,e.args.checked?k.host.jqxListBox("checkAll",!1):k.host.jqxListBox("uncheckAll",!1),I=!0})}}else k.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),u.jqxDropDownList({selectedIndex:0});t._filterwidget=u;{u.jqxDropDownList("dropdownlistWrapper")}"list"==t.filtertype?this.addHandler(u,"select",function(e){s.refreshingfilter||e.args&&"none"!=e.args.type&&(s._applyfilterfromfilterrow(),s.focusedfilter=null)}):this.addHandler(u,"close",function(){u[0]._selectionChanged&&(s._applyfilterfromfilterrow(),s.focusedfilter=null,u[0]._selectionChanged=!1)})}else n(this,i);break;case"bool":case"boolean":if(this.host.jqxCheckBox){var T=e('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>');T.appendTo(i),T.jqxCheckBox({disabled:s.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),t.createfilterwidget&&t.createfilterwidget(t,i,T),a===!0||"true"==a?T.jqxCheckBox({checked:!0}):(a===!1||"false"==a)&&T.jqxCheckBox({checked:!1}),t._filterwidget=T,this.addHandler(T,"change",function(e){s.refreshingfilter||e.args&&(s.focusedfilter=null,s._applyfilterfromfilterrow())})}else n(this,i)}},_getfilterdataadapter:function(t){var i=this.source._source?!0:!1;if(i){var r={localdata:this.source.records,datatype:this.source.datatype,async:!1},s=this;dataadapter=new e.jqx.dataAdapter(r,{autoBind:!1,autoSort:!0,autoSortField:t.displayfield,async:!1,uniqueDataFields:[t.displayfield],beforeLoadComplete:function(e){var i=new Array;if(t.cellsformat){for(var r=s._getcolumntypebydatafield(t),a=0;a<e.length;a++){i.push(e[a]);var o=e[a][t.displayfield];e[a][t.displayfield+"JQValue"]=o,"date"===r?e[a][t.displayfield]=dataadapter.formatDate(o,t.cellsformat,s.gridlocalization):("number"===r||"float"===r||"int"===r)&&(e[a][t.displayfield]=dataadapter.formatNumber(o,t.cellsformat,s.gridlocalization))}return i}return e}})}else dataadapter=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[t.displayfield],autoSort:!0,autoSortField:t.displayfield,async:!1});if(t.filteritems&&t.filteritems.length>0){var r={localdata:t.filteritems,datatype:this.source.datatype,async:!1};dataadapter=new e.jqx.dataAdapter(r,{autoBind:!1,async:!1})}else if(t.filteritems){if(t.filteritems._source)return t.filteritems._options.autoBind=!1,t.filteritems._options.async=!1,t.filteritems;if(e.isFunction(t.filteritems))return t.filteritems()}return dataadapter},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var t=this.that,i=this.columns.records.length,r=0;i>r;r++){var s=this.columns.records[r];if(s.filterable&&s.filter){var a=s.filter.getfilters();if(a.length>0){var o=a[0].value,l=s._filterwidget,n=s._filterwidget.parent();if(null!=l)switch(s.filtertype){case"number":if(n.find("input").val(o),this.host.jqxDropDownList){var d=s.filter.getoperatorsbyfiltertype("numericfilter");l.find(".filter").jqxDropDownList("selectIndex",d.indexOf(a[0].condition))}break;case"input":if(n.find("input").val(o),this.host.jqxDropDownList){var d=s.filter.getoperatorsbyfiltertype("stringfilter");l.find(".filter").jqxDropDownList("selectIndex",d.indexOf(a[0].condition))}break;case"date":case"range":if(this.host.jqxDateTimeInput){var o=s.filter.getfilterat(0).filtervalue;if(void 0!=o){if(s.filter.getfilterat(1))var h=s.filter.getfilterat(1).filtervalue;else h=o;"range"==s.filtertype?e(n.children()[0]).jqxDateTimeInput("setRange",new Date(o),new Date(h)):e(n.children()[0]).jqxDateTimeInput("setDate",new Date(o))}}else l.val(o);break;case"textbox":case"default":l.val(o),t["_oldWriteText"+l[0].id]=o;break;case"bool":case"boolean":this.host.jqxCheckBox?e(n.children()[0]).jqxCheckBox({checked:o}):l.val(o)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){for(var t=(this.that,this.columns.records.length),i=0;t>i;i++){var r=this.columns.records[i];if(r.filterable){var s=r._filterwidget;if("list"==r.filtertype||"checkedlist"==r.filtertype)this.removeHandler(s,"select"),this.removeHandler(s,"close"),s.jqxDropDownList("destroy");else if("date"==r.filtertype)this.removeHandler(s,"valueChanged"),s.jqxDateTimeInput("destroy");else if("bool"==r.filtertype)this.removeHandler(s,"change"),s.jqxCheckBox("destroy");else if("number"==r.filtertype){var a=s.find(".jqx-input");this.removeHandler(a,"keydown");var o=e(s.children()[1]);o.jqxDropDownList("destroy")}else this.removeHandler(s,"keydown");s.remove()}}},_updatelistfilters:function(t,i){for(var r=this.that,s=this.columns.records.length,a=0;s>a;a++){var o=this.columns.records[a];if(o.filterable&&("list"==o.filtertype||"checkedlist"==o.filtertype)){var l=o._filterwidget;if(t){var n=this._getfilterdataadapter(o);l.jqxDropDownList({source:n});var d=l.jqxDropDownList("getItems"),h=!0;if(d.length!=n.records.length+1&&(h=!1),h)for(var c=1;c<d.length;c++)if(d[c].label!=n.records[c-1][o.displayfield]){h=!1;break}if(h&&!i)continue}else if(void 0==o.filter){l.jqxDropDownList("renderSelection");continue}var u="checkedlist"==o.filtertype?!0:!1,d=l.jqxDropDownList("getItems"),g=l.jqxDropDownList("listBox");if(l.jqxDropDownList("dataBind"),u){if(l.jqxDropDownList({selectionRenderer:function(){return r.gridlocalization.filterselectstring}}),g.insertAt(this.gridlocalization.filterselectallstring,0),l.jqxDropDownList("setContent",this.gridlocalization.filterselectstring),g.checkAll(!1),o.filter){for(var p=o.filter.getfilters(),c=0;c<g.items.length;c++){var f=g.items[c].label,v=void 0;e.each(p,function(){var e;"NOT_EQUAL"==this.condition?e=f==this.value?!1:!0:"EQUAL"==this.condition&&(e=f==this.value?!0:!1),v=void 0==v&&void 0!==e?e:"EQUAL"==this.condition?v||e:v&&e}),v?g.checkIndex(c,!1,!1):g.uncheckIndex(c,!1,!1)}g._updateCheckedItems();var m=g.getCheckedItems().length;g.items.length!=m&&m>0&&g.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(g.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),l.jqxDropDownList({selectedIndex:0}),o.filter){for(var p=o.filter.getfilters(),w=-1,c=0;c<g.items.length;c++){var f=g.items[c].label;e.each(p,function(){return"NOT_EQUAL"==this.condition?!0:f==this.value?(w=c,!1):void 0})}-1!=w&&g.selectIndex(w)}d.length<8?l.jqxDropDownList("autoDropDownHeight",!0):l.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var t=this.that;if(this.filterable){if(!this.columns.records)return;e.each(this.columns.records,function(){var i=!1;t.autoshowfiltericon?this.filter?(e(this.filtericon).show(),i=!0):e(this.filtericon).hide():this.filterable&&(e(this.filtericon).show(),i=!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})}},_initcolumntypes:function(){if(this.columns&&this.columns.records){var t=this.source._source.datafields;if(t)for(var i=0;i<this.columns.records.length;i++){var r=this.columns.records[i];if(!r.datatype){var s="";e.each(t,function(){return this.name==r.displayfield?(this.type&&(s=this.type),!1):void 0}),r.datatype=""!=s?s:""}}}},_getcolumntypebydatafield:function(t){var i=this.that,r="string",s=i.source.datafields||(i.source._source?i.source._source.datafields:null);if(s){var a="";if(e.each(s,function(){return this.name==t.displayfield?(this.type&&(a=this.type),!1):void 0}),a)return a}if(null!=t){if(void 0==this.dataview.cachedrecords)return r;var o=null;if(this.virtualmode)e.each(this.dataview.cachedrecords,function(){return o=this[t.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return r;if(o=this.dataview.cachedrecords[0][t.displayfield],null!=o&&""==o.toString())return"string"}if(null!=o)if("boolean"==typeof o)r="boolean";else if(e.jqx.dataFormat.isNumber(o))r="number";else{var l=new Date(o);if("NaN"==l.toString()||"Invalid Date"==l.toString())if(e.jqx.dataFormat){if(l=e.jqx.dataFormat.tryparsedate(o),null!=l){if(l&&l.getFullYear()&&1970==l.getFullYear()&&0==l.getMonth()&&1==l.getDate()){var n=new Number(o);return isNaN(n)?"string":"number"}return"date"}r="string"}else r="string";else r="date"}}return r},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(t,i,r){var s=e(i).find("#filter1"+t.element.id),a=e(i).find("#filter2"+t.element.id),o=e(i).find("#filter3"+t.element.id),l=e(i).find(".filtertext1"+t.element.id),n=e(i).find(".filtertext2"+t.element.id),d=l.val(),h=n.val(),c=t._getcolumntypebydatafield(r),u=(t._getfiltersbytype(c),new e.jqx.filter),g=t._getfiltertype(c);if("default"===t.filtermode){var p=s.jqxDropDownList("selectedIndex"),f=a.jqxDropDownList("selectedIndex"),v=o.jqxDropDownList("selectedIndex"),m=null,w=null;if(t.updatefilterconditions){var b=t.updatefilterconditions(g,u.getoperatorsbyfiltertype(g));void 0!=b&&u.setoperatorsbyfiltertype(g,b)}var x=!1,y=u.getoperatorsbyfiltertype(g)[p],o=u.getoperatorsbyfiltertype(g)[v],_="NULL"==y||"NOT_NULL"==y,q="EMPTY"==y||"NOT_EMPTY"==y;void 0==y&&(y=u.getoperatorsbyfiltertype(g)[0]),void 0==o&&(o=u.getoperatorsbyfiltertype(g)[0]),(d.length>0||_||q)&&(m=u.createfilter(g,d,y,null,r.cellsformat,t.gridlocalization),u.addfilter(f,m),x=!0);var j="NULL"==o||"NOT_NULL"==o,z="EMPTY"==o||"NOT_EMPTY"==o;if((h.length>0||j||z)&&(w=u.createfilter(g,h,o,null,r.cellsformat,t.gridlocalization),u.addfilter(f,w),x=!0),x){var k=r.displayfield;this.addfilter(k,u,!0)}else this._clearfilter(t,i,r)}else{var S=!1,I=s.data().jqxListBox.instance,T=I.getCheckedItems();if(0==T.length){for(var C=1;C<I.items.length;C++){var D=I.items[C].value,B="not_equal";if(D.indexOf("|")>=0||D.indexOf(" AND ")>=0||D.indexOf(" OR ")>=0||D.indexOf(" and ")>=0||D.indexOf(" or ")>=0){D=D.replace("|",""),D=D.replace("AND",""),D=D.replace("OR",""),D=D.replace("and",""),D=D.replace("or","");var B="equal"}var P=u.createfilter(g,D,B,null);u.addfilter(0,P)}S=!0}else if(T.length!=I.items.length){S=!0;for(var C=0;C<T.length;C++)if(t.gridlocalization.filterselectallstring!==T[C].value){var D=T[C].value,B="equal",P=u.createfilter(g,D,B,null),H=1;u.addfilter(H,P)}}else S=!1;if(S){var k=r.displayfield;this.addfilter(k,u,!0)}else{var k=r.displayfield;this.removefilter(k,!0)}}},_clearfilter:function(e,t,i){var r=i.displayfield;this.removefilter(r,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),s=this._getcolumn(e);void 0!=r&&null!=r&&(r.filter=t,s.filter=t,this.dataview.addfilter(e,t),1==i&&void 0!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);void 0!=i&&null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),(1==t||t!==!1)&&this.applyfilters("remove"))},applyfilters:function(t){if(this.dataview.filters.length>=0&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter){var i=-1;this.pageable?(i=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=i)}if(this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof t&&e.isEmptyObject(t)&&this.refreshfilterrow(),void this._raiseEvent(13,{filters:this.dataview.filters});this.selectedrowindexes,this.that;if(this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection){var r=this.sortdirection.ascending?"asc":"desc";this._loading?this.sortby(this.sortcolumn,r,null,!1,!1):this.sortby(this.sortcolumn,r,null,!1)}this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&this.columns.records.length>0&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates()):(this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&"string"!=typeof t&&e.isEmptyObject(t)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(t){var i=this.that;if(this.showfilterrow&&this.clearfilterrow(),this.columns.records){var r=1==t||t!==!1;e.each(this.columns.records,function(){i.removefilter(this.displayfield,!r)})}t!==!1&&(1==t||t!==!1)&&this.applyfilters("clear")},_destroyfilterpanel:function(){var t=e(e.find("#filterclearbutton"+this.element.id)),i=e(e.find("#filterbutton"+this.element.id)),r=e(e.find("#filter1"+this.element.id)),s=e(e.find("#filter2"+this.element.id)),a=e(e.find("#filter3"+this.element.id)),o=e(e.find(".filtertext1"+this.element.id)),l=e(e.find(".filtertext2"+this.element.id));o.length>0&&l.length>0&&(o.removeClass(),l.removeClass(),o.remove(),l.remove()),t.length>0&&(t.jqxButton("destroy"),i.jqxButton("destroy"),this.removeHandler(t,"click"),this.removeHandler(i,"click")),r.length>0&&r.jqxDropDownList("destroy"),s.length>0&&s.jqxDropDownList("destroy"),a.length>0&&a.jqxDropDownList("destroy")},_updatefilterpanel:function(t,i,r){(null==t||void 0==t)&&(t=this);var s=t._getcolumntypebydatafield(r),a=t._getfiltersbytype(s);if(!t.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");var o=e(i),l=o.find("#filterclearbutton"+t.element.id),n=o.find("#filterbutton"+t.element.id),d=o.find("#filter1"+t.element.id),h=o.find("#filter2"+t.element.id),c=o.find("#filter3"+t.element.id),u=o.find(".filtertext1"+t.element.id),g=o.find(".filtertext2"+t.element.id);if(this._hasdatefilter){var p=u.parent(),f=g.parent();if(p.children().remove(),f.children().remove(),"date"==r.filtertype){t._showwhere.text(t.gridlocalization.filtershowrowdatestring);var v=e("<div class='filtertext1"+t.element.id+"' style='margin-top: 3px; margin-bottom: 3px;'></div>");p.append(v);var m=function(e){var i={calendar:t.gridlocalization,todayString:t.gridlocalization.todaystring,clearString:t.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:t.disabled,localization:i,rtl:t.rtl,width:t._filterpanelwidth-15,height:20,value:null,formatString:r.cellsformat,theme:t.theme})};m(v);var v=e("<div class='filtertext2"+t.element.id+"' style='margin-top: 3px; margin-bottom: 3px;'></div>");f.append(v),m(v)}else{t._showwhere.text(t.gridlocalization.filtershowrowstring);var v=e("<input class='filtertext1"+t.element.id+"' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input>");p.append(v);var m=function(e){e.addClass(t.toThemeProperty("jqx-input")),e.addClass(t.toThemeProperty("jqx-widget-content")),e.addClass(t.toThemeProperty("jqx-rc-all")),e.width(t._filterpanelwidth-15)};m(v);var v=e("<input class='filtertext2"+t.element.id+"' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input>");f.append(v),m(v)}var u=o.find(".filtertext1"+t.element.id),g=o.find(".filtertext2"+t.element.id)}if(u.val(""),g.val(""),this.removeHandler(n,"click"),this.addHandler(n,"click",function(){t._buildfilter(t,i,r),t._closemenu()}),this.removeHandler(l,"click"),this.addHandler(l,"click",function(){t._clearfilter(t,i,r),t._closemenu()}),"default"===this.filtermode){if(d.jqxDropDownList("source")!=a&&(d.jqxDropDownList({enableBrowserBoundsDetection:!1,source:a}),c.jqxDropDownList({enableBrowserBoundsDetection:!1,source:a})),"boolean"==s||"bool"==s)d.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),c.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0});else{var w=!1;a&&a.length&&a.length<5&&(w=!0),d.jqxDropDownList({autoDropDownHeight:w,selectedIndex:2}),c.jqxDropDownList({autoDropDownHeight:w,selectedIndex:2})}h.jqxDropDownList({selectedIndex:0});var b=r.filter,x=new e.jqx.filter,y="";switch(s){case"number":case"int":case"float":case"decimal":y="numericfilter",_=x.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":y="booleanfilter",_=x.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":y="datefilter",_=x.getoperatorsbyfiltertype("datefilter");break;case"string":y="stringfilter",_=x.getoperatorsbyfiltertype("stringfilter")}if(null!=b){{var p=b.getfilterat(0),f=b.getfilterat(1);b.getoperatorat(0)}if(t.updatefilterconditions){var _=[],q=t.updatefilterconditions(y,_);if(void 0!=q){for(var j=0;j<q.length;j++)q[j]=q[j].toUpperCase();b.setoperatorsbyfiltertype(y,q),_=q}}var z="default";if(null!=p){var k=_.indexOf(p.comparisonoperator),S=p.filtervalue;u.val(S),d.jqxDropDownList({selectedIndex:k,animationType:z})}if(null!=f){var I=_.indexOf(f.comparisonoperator),T=f.filtervalue;g.val(T),c.jqxDropDownList({selectedIndex:I,animationType:z})}h.jqxDropDownList(void 0==b.getoperatorat(0)?{selectedIndex:0,animationType:z}:"and"==b.getoperatorat(0)||0==b.getoperatorat(0)?{selectedIndex:0}:{selectedIndex:1})}t.updatefilterpanel&&t.updatefilterpanel(d,c,h,u,g,n,l,b,y,_),(!this._hasdatefilter||this._hasdatefilter&&"date"!=r.filtertype)&&(u.focus(),setTimeout(function(){u.focus()},10))}else{var C=t._getfilterdataadapter(r),y=t._getfiltertype(s);d.jqxListBox(r.cellsformat?{displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:C}:{displayMember:r.displayfield,valueMember:r.displayfield,source:C}),d.jqxListBox("insertAt",t.gridlocalization.filterselectallstring,0);var D=d.data().jqxListBox.instance;D.checkAll(!1);if(r.filter){D.uncheckAll(!1);for(var B=r.filter.getfilters(),P=0;P<D.items.length;P++){var H=D.items[P].value;e.each(B,function(){if("NOT_EQUAL"==this.condition){if(H!=this.value)return D.uncheckIndex(P,!1,!1),!1}else if("EQUAL"==this.condition&&H==this.value)return D.checkIndex(P,!1,!1),!1
})}D._updateCheckedItems();var A=D.getCheckedItems().length;D.items.length!=A&&A>0&&D.host.jqxListBox("indeterminateIndex",0,!0,!1),A===D.items.length-1&&D.host.jqxListBox("checkIndex",0,!0,!1)}}},_initfilterpanel:function(t,i,r,s){(null==t||void 0==t)&&(t=this),i[0].innerHTML="";var a=e("<div class='filter' style='margin-left: 7px;'></div>");i.append(a);var o=e("<div class='filter' style='margin-top: 3px; margin-bottom: 3px;'></div>");o.text(t.gridlocalization.filtershowrowstring),this._showwhere=o;var l=e("<div class='filter' id='filter1"+t.element.id+"'></div>"),n=e("<div class='filter' id='filter2"+t.element.id+"' style='margin-bottom: 3px;'></div>"),d=e("<div class='filter' id='filter3"+t.element.id+"'></div>"),h=t._getcolumntypebydatafield(r);if(!l.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var c=t._getfiltersbytype(h);if(this._hasdatefilter=!1,this._filterpanelwidth=s,this.columns&&this.columns.records)for(var u=0;u<this.columns.records.length;u++)if("date"==this.columns.records[u].filtertype){this._hasdatefilter=!0;break}var g=e("<div class='filter'><input class='filtertext1"+t.element.id+"' style='height: 20px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),p=g.find("input");p.addClass(this.toThemeProperty("jqx-input")),p.addClass(this.toThemeProperty("jqx-widget-content")),p.addClass(this.toThemeProperty("jqx-rc-all")),p.width(s-15);var f=e("<div class='filter'><input class='filtertext2"+t.element.id+"' style='height: 20px; margin-top: 3px;' type='text'></input></div>"),v=f.find("input");v.addClass(this.toThemeProperty("jqx-input")),v.addClass(this.toThemeProperty("jqx-widget-content")),v.addClass(this.toThemeProperty("jqx-rc-all")),v.width(s-15),t.rtl&&(p.css("direction","rtl"),v.css("direction","rtl"));var m=e("<div class='filter' style='height: 25px; margin-left: 20px; margin-top: 7px;'></div>"),w=e('<span tabIndex=0 id="filterbutton'+t.element.id+'" class="filterbutton" style="padding: 4px 12px; margin-left: 2px;">'+t.gridlocalization.filterstring+"</span>");m.append(w);var b=e('<span tabIndex=0 id="filterclearbutton'+t.element.id+'" class="filterclearbutton" style="padding: 4px 12px; margin-left: 5px;">'+t.gridlocalization.filterclearstring+"</span>");m.append(b),w.jqxButton({height:20,theme:t.theme}),b.jqxButton({height:20,theme:t.theme});var x=function(e){if(e){if(-1!=e.text().indexOf("case sensitive")){var i=e.text();i=i.replace("case sensitive","match case"),e.text(i)}return e.css("font-family",t.host.css("font-family")),e.css("font-size",t.host.css("font-size")),e.css("top","1px"),e.css("position","relative"),e}return""};if("default"===this.filtermode){a.append(o),a.append(l),l.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:s-15,height:20,dropDownHeight:150,dropDownWidth:s-15,selectionRenderer:x,source:c,theme:t.theme}),a.append(g);var y=new Array;y[0]=t.gridlocalization.filterandconditionstring,y[1]=t.gridlocalization.filterorconditionstring,n.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:20,source:y,selectionRenderer:x,theme:t.theme}),a.append(n),d.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:s-15,height:20,dropDownHeight:150,dropDownWidth:s-15,selectionRenderer:x,source:c,theme:t.theme}),a.append(d),a.append(f)}else{a.append(o),a.append(l),l.jqxListBox({rtl:t.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:s-15,height:120,theme:t.theme});var _=!0;t.addHandler(l,"checkChange",function(e){if(_)if(e.args.label!=t.gridlocalization.filterselectallstring){_=!1,l.jqxListBox("checkIndex",0,!0,!1);var i=l.jqxListBox("getCheckedItems"),r=l.jqxListBox("getItems");1==i.length?l.jqxListBox("uncheckIndex",0,!0,!1):r.length!=i.length&&l.jqxListBox("indeterminateIndex",0,!0,!1),_=!0}else _=!1,e.args.checked?l.jqxListBox("checkAll",!1):l.jqxListBox("uncheckAll",!1),_=!0})}a.append(m),t.updatefilterpanel&&t.updatefilterpanel(l,d,n,g,f,w,b,null,null,c)}})}(jqxBaseFramework),function(e){e.jqx.dataview.sort=function(){this.sortby=function(t,i,r){var s=Object.prototype.toString;if(null==i)return this.sortdata=null,void this.refresh();void 0==i&&(i=!0),i="a"==i||"asc"==i||"ascending"==i||1==i?!0:!1;var a=t;this.sortfield=t,this.sortfielddirection=i?"asc":"desc",void 0==this.sortcache&&(this.sortcache={}),this.sortdata=[];var o=[],l=!1;if("constructor"==a&&(a=""),!this.virtualmode&&null!=this.sortcache[a]){var n=this.sortcache[a];o=n._sortdata,n.direction==i?o.reverse():(!n.direction&&i&&o.reverse(),l=!0),o.length<this.totalrecords&&(this.sortcache={},l=!1,o=[])}Object.prototype.toString="function"==typeof t?t:function(){return this[t]};var d=this.records,h=(this.that,"");if(this.source.datafields&&e.each(this.source.datafields,function(){return this.name==t?(this.type&&(h=this.type),!1):void 0}),0==o.length)if(d.length)for(var c=d.length,u=0;c>u;u++){var g=d[u];if(null!=g){var p=g,f=p.toString();o.push({sortkey:f,value:p,index:u})}}else{var v=!1;for(obj in d){var g=d[obj];if(void 0==g){v=!0;break}var p=g;o.push({sortkey:p.toString(),value:p,index:obj})}v&&e.each(d,function(e,t){o.push({sortkey:t.toString(),value:t,index:e})})}if(!l)if(null==r){this._sortcolumntype=h;var m=this;o.sort(function(e,t){return m._compare(e,t,h)})}else o.sort(r);i||o.reverse(),Object.prototype.toString=s,this.sortdata=o,this.sortcache[a]={_sortdata:o,direction:i},this.reload(this.records,this.rows,this.filters,this.updated,!0)},this.clearsortdata=function(){this.sortcache={},this.sortdata=null},this._compare=function(t,i,r){var t=t.sortkey,i=i.sortkey;if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return-1;if(null!==t&&null===i)return 1;if(e.jqx.dataFormat)if(r&&""!=r)switch(r){case"number":case"int":case"float":return i>t?-1:t>i?1:0;case"date":case"time":return i>t?-1:t>i?1:0;case"string":case"text":t=String(t).toLowerCase(),i=String(i).toLowerCase()}else{if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return i>t?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return i>t?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase())}try{if(i>t)return-1;if(t>i)return 1}catch(s){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)}},e.extend(e.jqx._jqxGrid.prototype,{_rendersortcolumn:function(){var t=this.that,i=this.getsortcolumn();if(this.sortdirection){var r=function(i,r){var s=t.getcolumn(i);s&&(r.ascending?e.jqx.aria(s.element,"aria-sort","ascending"):r.descending?e.jqx.aria(s.element,"aria-sort","descending"):e.jqx.aria(s.element,"aria-sort","none"))};this._oldsortinfo&&this._oldsortinfo.column&&r(this._oldsortinfo.column,{ascending:!1,descending:!1}),r(i,this.sortdirection)}this._oldsortinfo={column:i,direction:this.sortdirection},this.sortdirection&&e.each(this.columns.records,function(){var r=e.data(document.body,"groupsortelements"+this.displayfield);null==i||this.displayfield!=i?(e(this.sortasc).hide(),e(this.sortdesc).hide(),null!=r&&(r.sortasc.hide(),r.sortdesc.hide())):t.sortdirection.ascending?(e(this.sortasc).show(),e(this.sortdesc).hide(),null!=r&&(r.sortasc.show(),r.sortdesc.hide())):(e(this.sortasc).hide(),e(this.sortdesc).show(),null!=r&&(r.sortasc.hide(),r.sortdesc.show()))})},getsortcolumn:function(){return void 0!=this.sortcolumn?this.sortcolumn:null},removesort:function(){this.sortby(null)},sortby:function(e,t,i,r,s){if(this._loading&&s!==!1)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e&&(t=null,e=this.sortcolumn),void 0!=e){var a=this.that;if(void 0==i&&null!=a.source.sortcomparer&&(i=a.source.sortcomparer),ascending="a"==t||"asc"==t||"ascending"==t||1==t?!0:!1,a.sortdirection=null!=t?{ascending:ascending,descending:!ascending}:{ascending:!1,descending:!1},a.sortcolumn=null!=t?e:null,a.source.sort||a.virtualmode){if(a.dataview.sortfield=e,a.dataview.sortfielddirection=null==t?"":ascending?"asc":"desc",a.source.sort&&!this._loading)return a.source.sort(e,t),void a._raiseEvent(6,{sortinformation:a.getsortinformation()})}else a.dataview.sortby(e,t,i);if(r===!1)return;a.groupable&&a.groups.length>0?(a._render(!0,!1,!1),a._updategroupheadersbounds&&a.showgroupsheader&&a._updategroupheadersbounds()):(a.pageable&&a.dataview.updateview(),a._updaterowsproperties(),a.rendergridcontent(!0)),a._raiseEvent(6,{sortinformation:a.getsortinformation()})}},_togglesort:function(e){var t=this.that;if(!this.disabled&&e.sortable&&t.sortable){var i=t.getsortinformation(),r=null;null!=i.sortcolumn&&i.sortcolumn==e.displayfield?(r=i.sortdirection.ascending,r=t.sorttogglestates>1?1==r?!1:null:!r):r=!0,t.sortby(e.displayfield,r,null)}}})}(jqxBaseFramework),function(e){e.extend(e.jqx._jqxGrid.prototype,{_initpager:function(){var t=this.that,i=this.gridlocalization.pagergotopagestring,r=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),s=(this.pagerheight-17)/2;if(this.pagerdiv=this.pagerdiv||e('<div style="width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.vScrollBar.jqxScrollBar({thumbSize:0});if(this.pagerrenderer){this.pagerdiv.children().remove();var a=this.pagerrenderer();null!=a&&this.pagerdiv.append(e(a)),this.pager.append(this.pagerdiv)}else{if(this.pagerdiv.css("top",s),this.pager.append(this.pagerdiv),this.pagergotoinput=this.pagergotoinput||e('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'),this.pagergoto=this.pagergoto||e('<div style="float: right; margin-right: 7px;"></div>'),this.pagerrightbutton=this.pagerrightbutton||e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagerleftbutton=this.pagerleftbutton||e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagerdetails=this.pagerdetails||e('<div style="margin-right: 7px; float: right;"></div>'),this.pagershowrows=this.pagershowrows||e('<div style="margin-right: 7px; float: right;"></div>'),this.pagerbuttons=e('<div style="margin-right: 3px; float: right;"></div>'),this.pagershowrowscombo&&this.pagershowrowscombo.jqxDropDownList&&(this.pagershowrowscombo.remove(),this.pagershowrowscombo=null),this.pagergotoinput.attr("disabled",this.disabled),this.pagerfirstbutton=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-left: 3px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagerlastbutton=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),this.pagershowrowscombo=this.pagershowrowscombo||e('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>'),this.pagerdiv.children().remove(),this.pagershowrowscombo[0].id="gridpagerlist"+this.element.id,this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.removeHandler(this.pagerfirstbutton,"mousedown"),this.removeHandler(this.pagerfirstbutton,"mouseup"),this.removeHandler(this.pagerfirstbutton,"click"),this.removeHandler(this.pagerlastbutton,"mousedown"),this.removeHandler(this.pagerlastbutton,"mouseup"),this.removeHandler(this.pagerlastbutton,"click"),this.pagerleftbutton.attr("title",this.gridlocalization.pagerpreviousbuttonstring),this.pagerrightbutton.attr("title",this.gridlocalization.pagernextbuttonstring),"simple"==this.pagermode){e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.pagerbuttons.css("overflow","visible"),this.pagerbuttons.css("padding","3px")),this.pagerfirstbutton.attr("title",this.gridlocalization.pagerfirstbuttonstring),this.pagerlastbutton.attr("title",this.gridlocalization.pagerlastbuttonstring);var o=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");o.addClass(this.toThemeProperty("jqx-icon-arrow-first")),this.pagerfirstbutton.wrapInner(o);var l=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");l.addClass(this.toThemeProperty("jqx-icon-arrow-last")),this.pagerlastbutton.wrapInner(l),this.rtl?(this.pagerdiv.append(this.pagerlastbutton),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerbuttons),this.pagerdiv.append(this.pagerleftbutton),this.pagerdiv.append(this.pagerfirstbutton)):(this.pagerdiv.append(this.pagerfirstbutton),this.pagerdiv.append(this.pagerleftbutton),this.pagerdiv.append(this.pagerbuttons),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerlastbutton)),this.pagerlastbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerfirstbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme});var n=this.rtl?"right":"left";this.pagerbuttons.css("float",n),this.pagerlastbutton.css("float",n),this.pagerfirstbutton.css("float",n),this.pagerrightbutton.css("float",n),this.pagerleftbutton.css("float",n),this.pagerdetails.css("float",this.rtl?"left":"right"),this.rtl?(this.pagerdetails.css("margin-left","7px"),this.pagerdetails.css("margin-right","0px")):(this.pagerdetails.css("margin-left","0px"),this.pagerdetails.css("margin-right","7px")),this.pagergotoinput.hide(),this.pagershowrowscombo.hide(),this.pagergoto.hide(),this.pagershowrows.hide()}else this.pagergotoinput.show(),this.pagershowrowscombo.show(),this.pagergoto.show(),this.pagershowrows.show(),this.rtl||(this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerleftbutton));this.pagerrightbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerleftbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerleftbutton.find(".jqx-icon-arrow-left").remove(),this.pagerrightbutton.find(".jqx-icon-arrow-right").remove();var d=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");d.addClass(this.toThemeProperty("jqx-icon-arrow-left")),this.pagerleftbutton.wrapInner(d);var h=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");h.addClass(this.toThemeProperty("jqx-icon-arrow-right")),this.pagerrightbutton.wrapInner(h),this.rtl||this.pagerdiv.append(this.pagerdetails),"simple"!=this.pagermode&&(this.rtl?(this.pagerdiv.append(this.pagergoto),this.pagerdiv.append(this.pagergotoinput),this.pagerdiv.append(this.pagershowrows),this.pagerdiv.append(this.pagershowrowscombo),this.pagerdiv.append(this.pagerdetails),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerleftbutton)):(this.pagerdiv.append(this.pagershowrowscombo),this.pagerdiv.append(this.pagershowrows),this.pagerdiv.append(this.pagergotoinput),this.pagerdiv.append(this.pagergoto)));var c=this.pagesizeoptions;if(!this.pagershowrowscombo.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");this.pagershowrowscombo.jqxDropDownList({rtl:this.rtl,disabled:this.disabled,source:c,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:"auto",height:16,theme:this.theme});for(var u=0,g=0;g<c.length;g++)this.pagesize>=c[g]&&(u=g);this.pagershowrows[0].innerHTML=r,this.pagergoto[0].innerHTML=i,this.updatepagerdetails(),this.pagershowrowscombo.jqxDropDownList({selectedIndex:u}),this.pagerpageinput=this.pagergotoinput.find("input"),this.pagerpageinput.addClass(this.toThemeProperty("jqx-input")),this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content")),this.rtl&&this.pagerpageinput.css("direction","rtl");var t=this.that;this.removeHandler(this.pagershowrowscombo,"select"),this.addHandler(this.pagershowrowscombo,"select",function(e){if(e.args){t.vScrollInstance&&t.vScrollInstance.setPosition(0),null!=t.editcell&&t.endcelledit&&t.endcelledit(t.editcell.row,t.editcell.column,!0,!1);var i=e.args.index,r=t.dataview.pagenum*t.dataview.pagesize,s=c[i],a=t.pagesize;t.pagesize=parseInt(s),isNaN(t.pagesize)&&(t.pagesize=10),t.pagershowrowscombo.jqxDropDownList(s>=100?{width:"auto"}:{width:44}),t.dataview.pagesize=t.pagesize;var o=Math.floor(r/t.dataview.pagesize);t.prerenderrequired=!0,t._requiresupdate=!0,t._raiseEvent(10,{pagenum:o,oldpagesize:a,pagesize:t.dataview.pagesize}),t.gotopage(o),t.autoheight&&t._updatesizeonwindowresize&&(t._updatesize(!0),setTimeout(function(){t._updatesize(!0)},500))}});var p=this.pagergotoinput.find("input");p.addClass(this.toThemeProperty("jqx-grid-pager-input")),p.addClass(this.toThemeProperty("jqx-rc-all")),this.removeHandler(p,"keydown"),this.removeHandler(p,"change"),this.addHandler(p,"keydown",function(e){if(e.keyCode>=65&&e.keyCode<=90)return!1;if("13"==e.keyCode){var i=p.val();return i=parseInt(i),isNaN(i)||t.gotopage(i-1),!1}}),this.addHandler(p,"change",function(){var e=p.val();e=parseInt(e),isNaN(e)||t.gotopage(e-1)}),this.addHandler(this.pagerrightbutton,"mouseenter",function(){h.addClass(t.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseenter",function(){d.addClass(t.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mouseleave",function(){h.removeClass(t.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseleave",function(){d.removeClass(t.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mousedown",function(){h.addClass(t.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerrightbutton,"mouseup",function(){h.removeClass(t.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerleftbutton,"mousedown",function(){d.addClass(t.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(this.pagerleftbutton,"mouseup",function(){d.removeClass(t.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(e(document),"mouseup.pagerbuttons"+this.element.id,function(){h.removeClass(t.toThemeProperty("jqx-icon-arrow-right-selected")),d.removeClass(t.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(this.pagerrightbutton,"click",function(){t.pagerrightbutton.jqxButton("disabled")||(t.rtl?t.gotoprevpage():t.gotonextpage())}),this.addHandler(this.pagerleftbutton,"click",function(){t.pagerleftbutton.jqxButton("disabled")||(t.rtl?t.gotonextpage():t.gotoprevpage())});var f=this;if("simple"===this.pagermode){var v=this.pagerfirstbutton,m=this.pagerlastbutton;this.addHandler(m,"mouseenter",function(){l.addClass(f.toThemeProperty("jqx-icon-arrow-last-hover"))}),this.addHandler(v,"mouseenter",function(){o.addClass(f.toThemeProperty("jqx-icon-arrow-first-hover"))}),this.addHandler(m,"mouseleave",function(){l.removeClass(f.toThemeProperty("jqx-icon-arrow-last-hover"))}),this.addHandler(v,"mouseleave",function(){o.removeClass(f.toThemeProperty("jqx-icon-arrow-first-hover"))}),this.addHandler(m,"mousedown",function(){l.addClass(f.toThemeProperty("jqx-icon-arrow-last-selected"))}),this.addHandler(v,"mousedown",function(){o.addClass(f.toThemeProperty("jqx-icon-arrow-first-selected"))}),this.addHandler(m,"mouseup",function(){l.removeClass(f.toThemeProperty("jqx-icon-arrow-last-selected"))}),this.addHandler(v,"mouseup",function(){o.removeClass(f.toThemeProperty("jqx-icon-arrow-first-selected"))}),this.addHandler(e(document),"mouseup.pagerbuttons"+name+this.element.id,function(){h.removeClass(f.toThemeProperty("jqx-icon-arrow-right-selected")),d.removeClass(f.toThemeProperty("jqx-icon-arrow-left-selected")),l&&(l.removeClass(f.toThemeProperty("jqx-icon-arrow-last-selected")),o.removeClass(f.toThemeProperty("jqx-icon-arrow-first-selected")))}),this.addHandler(v,"click",function(){if(!v.jqxButton("disabled"))if(f.rtl){var e=f.dataview.totalrecords,t=Math.ceil(e/f.pagesize);f.gotopage(t-1)}else f.gotopage(0)}),this.addHandler(m,"click",function(){if(!m.jqxButton("disabled"))if(f.rtl)f.gotopage(0);else{var e=f.dataview.totalrecords,t=Math.ceil(e/f.pagesize);f.gotopage(t-1)}})}}this.vScrollBar.jqxScrollBar("refresh"),this._arrange()},_updatepagertheme:function(){if(null!=this.pagershowrowscombo){this.pagershowrowscombo.jqxDropDownList({theme:this.theme}),this.pagerrightbutton.jqxButton({theme:this.theme}),this.pagerleftbutton.jqxButton({theme:this.theme}),this.pagerpageinput.removeClass();var t=this.pagergotoinput.find("input");t.removeClass(),t.addClass(this.toThemeProperty("jqx-grid-pager-input")),t.addClass(this.toThemeProperty("jqx-rc-all")),this.pagerpageinput.addClass(this.toThemeProperty("jqx-input")),this.pagerpageinput.addClass(this.toThemeProperty("jqx-widget-content")),this.pagerleftbutton.find(".jqx-icon-arrow-left").remove(),this.pagerrightbutton.find(".jqx-icon-arrow-right").remove();var i=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");i.addClass(this.toThemeProperty("jqx-icon-arrow-left")),this.pagerleftbutton.wrapInner(i);var r=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");if(r.addClass(this.toThemeProperty("jqx-icon-arrow-right")),this.pagerrightbutton.wrapInner(r),"simple"==this.pagermode){e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.pagerbuttons.css("overflow","visible"),this.pagerbuttons.css("padding","3px")),this.pagerfirstbutton.attr("title",this.gridlocalization.pagerfirstbuttonstring),this.pagerlastbutton.attr("title",this.gridlocalization.pagerlastbuttonstring);var s=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");s.addClass(this.toThemeProperty("jqx-icon-arrow-first")),this.pagerfirstbutton.wrapInner(s);var a=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");a.addClass(this.toThemeProperty("jqx-icon-arrow-last")),this.pagerlastbutton.wrapInner(a),this.pagerdiv.append(this.pagerfirstbutton),this.pagerdiv.append(this.pagerleftbutton),this.pagerdiv.append(this.pagerbuttons),this.pagerdiv.append(this.pagerrightbutton),this.pagerdiv.append(this.pagerlastbutton),this.pagerlastbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerfirstbutton.jqxButton({cursor:"pointer",disabled:this.disabled,theme:this.theme}),this.pagerbuttons.css("float","left"),this.pagerlastbutton.css("float","left"),this.pagerfirstbutton.css("float","left"),this.pagerrightbutton.css("float","left"),this.pagerleftbutton.css("float","left"),this.pagergotoinput.hide(),this.pagershowrowscombo.hide(),this.pagergoto.hide(),this.pagershowrows.hide()}else this.pagergotoinput.show(),this.pagershowrowscombo.show(),this.pagergoto.show(),this.pagershowrows.show();var o=function(e,t){e.removeHandler(t,"mouseenter"),e.removeHandler(t,"mouseleave"),e.removeHandler(t,"mousedown"),e.removeHandler(t,"mouseup")};o(this,this.pagerrightbutton),o(this,this.pagerleftbutton);var l=this.that;this.addHandler(this.pagerrightbutton,"mouseenter",function(){r.addClass(l.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseenter",function(){i.addClass(l.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mouseleave",function(){r.removeClass(l.toThemeProperty("jqx-icon-arrow-right-hover"))}),this.addHandler(this.pagerleftbutton,"mouseleave",function(){i.removeClass(l.toThemeProperty("jqx-icon-arrow-left-hover"))}),this.addHandler(this.pagerrightbutton,"mousedown",function(){r.addClass(l.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerrightbutton,"mouseup",function(){r.removeClass(l.toThemeProperty("jqx-icon-arrow-right-selected"))}),this.addHandler(this.pagerleftbutton,"mousedown",function(){i.addClass(l.toThemeProperty("jqx-icon-arrow-left-selected"))}),this.addHandler(this.pagerleftbutton,"mouseup",function(){i.removeClass(l.toThemeProperty("jqx-icon-arrow-left-selected"))})}},gotopage:function(e){if((null==e||void 0==e)&&(e=0),-1==e&&(e=0),!(0>e)){var t=this.dataview.totalrecords;this.summaryrows&&(t+=this.summaryrows.length);var i=this.pagenum;this._raiseEvent(25,{oldpagenum:this.dataview.pagenum,pagenum:e,pagesize:this.dataview.pagesize});var r=Math.ceil(t/this.pagesize);if(e>=r&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),e>0&&(e=r-1),0>e&&(e=0)),(this.dataview.pagenum!=e||this._requiresupdate)&&this.pageable){if(this.source.pager&&this.source.pager(e,this.dataview.pagesize,this.dataview.pagenum),this.dataview.pagenum=e,this.virtualmode){if(this.hiddens=new Array,this.expandedgroups=new Array,this.rendergridrows){var s=e*this.dataview.pagesize,a=s+this.dataview.pagesize;if(null!=s&&null!=a)return this.pagerrightbutton&&(this.pagerrightbutton.jqxButton({disabled:!0}),this.pagerleftbutton.jqxButton({disabled:!0}),this.pagershowrowscombo.jqxDropDownList({disabled:!0})),this.pagerfirstbutton&&(this.pagerfirstbutton.jqxButton({disabled:!0}),this.pagerlastbutton.jqxButton({disabled:!0})),this.updatebounddata("pagechanged"),this._raiseEvent(9,{pagenum:e,oldpagenum:i,pagesize:this.dataview.pagesize}),this.updatepagerdetails(),void(this.autosavestate&&this.savestate&&this.savestate())}}else this.dataview.updateview();if(this._loadrows(),this._updatepageviews(),this.tableheight=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.updatepagerdetails(),this.autoheight||this.autorowheight){var o=this.host.height()-this._gettableheight();height=o+this._pageviews[0].height,height!=this.host.height()&&(this._arrange(),this._updatepageviews(),this.autorowheight&&this._renderrows(this.virtualsizeinfo))}null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.focus(),this._raiseEvent(9,{pagenum:e,oldpagenum:i,pagesize:this.dataview.pagesize}),this.autosavestate&&this.savestate&&this.savestate()}}},gotoprevpage:function(){if(this.dataview.pagenum>0)this.gotopage(this.dataview.pagenum-1);else if("simple"!=this.pagermode){var e=this.dataview.totalrecords;this.summaryrows&&(e+=this.summaryrows.length);var t=Math.ceil(e/this.pagesize);this.gotopage(t-1)}},gotonextpage:function(){var e=this.dataview.totalrecords;this.summaryrows&&(e+=this.summaryrows.length);var t=Math.ceil(e/this.pagesize);this.dataview.pagenum<t-1?this.gotopage(this.dataview.pagenum+1):"simple"!=this.pagermode&&this.gotopage(0)},updatepagerdetails:function(){if(null!=this.pagerdetails&&this.pagerdetails.length>0){var t=this.dataview.pagenum*this.pagesize,i=(this.dataview.pagenum+1)*this.pagesize;i>=this.dataview.totalrecords&&(i=this.dataview.totalrecords);var r=this.dataview.totalrecords;this.summaryrows&&(r+=this.summaryrows.length,(this.dataview.pagenum+1)*this.pagesize>this.dataview.totalrecords&&(i=r)),t++;var s=Math.ceil(r/this.dataview.pagesize);if(s>=1&&s--,s++,"simple"!==this.pagermode){var a=this.pagergotoinput.find("input");a.val(this.dataview.pagenum+1)}else{var o="",l=this.pagerbuttonscount;0!=l&&l||(l=5);var n=0;for(this.rtl&&(n=l-1);this.rtl&&n>=0||!this.rtl&&l>n;){var d=1+n,h=this.dataview.pagenum/l,c=Math.floor(h);d+=c*l;var u=this.toTP("jqx-grid-pager-number");if(u+=" "+this.toTP("jqx-rc-all"),d>s)break;if(this.rtl||0==n&&d>l&&(o+="<a class='"+u+"' tabindex=-1 href='javascript:;' data-page='"+(-1+d)+"'>...</a>"),this.dataview.pagenum===d-1&&(u+=" "+this.toTP("jqx-fill-state-pressed")),this.rtl){if(n===l-1){var u=this.toTP("jqx-grid-pager-number");u+=" "+this.toTP("jqx-rc-all"),s>=1+d&&(o+="<a class='"+u+"' tabindex=-1 href='javascript:;' data-page='"+(1+d)+"'>...</a>")}this.dataview.pagenum===d-1&&(u+=" "+this.toTP("jqx-fill-state-pressed")),o+="<a class='"+u+"' tabindex=-1 href='javascript:;' data-page='"+d+"'>"+d+"</a>"}else if(o+="<a class='"+u+"' tabindex=-1 href='javascript:;' data-page='"+d+"'>"+d+"</a>",n===l-1){var u=this.toTP("jqx-grid-pager-number");u+=" "+this.toTP("jqx-rc-all"),s>=1+d&&(o+="<a class='"+u+"' tabindex=-1 href='javascript:;' data-page='"+(1+d)+"'>...</a>")}if(this.rtl){var u=this.toTP("jqx-grid-pager-number");u+=" "+this.toTP("jqx-rc-all"),0==n&&d>l&&(o+="<a class='"+u+"' tabindex=-1 href='javascript:;' data-page='"+(-1+d)+"'>...</a>")}this.rtl?n--:n++}var g=this.pagerbuttons.find("a");this.removeHandler(g,"click"),this.removeHandler(g,"mouseenter"),this.removeHandler(g,"mouseleave"),this.pagerbuttons[0].innerHTML=o;var p=this,f=function(){p.addHandler(g,"click",function(t){var i=e(t.target).attr("data-page");return p.gotopage(parseInt(i)-1),!1}),p.addHandler(g,"mouseenter",function(t){e(t.target).addClass(p.toTP("jqx-fill-state-hover"))}),p.addHandler(g,"mouseleave",function(t){e(t.target).removeClass(p.toTP("jqx-fill-state-hover"))})},g=this.pagerbuttons.find("a");f(g)}this.pagergotoinput.attr("title","1 - "+s),0==i&&t>i&&(t=0),this.pagerdetails[0].innerHTML=this.rtl?r+this.gridlocalization.pagerrangestring+i+"-"+t:t+"-"+i+this.gridlocalization.pagerrangestring+r,t>i&&this.gotoprevpage()}},_updatepagedview:function(e,t,i){var r=this.that;this.dataview.rows.length!=this.dataview.pagesize&&this.dataview.updateview();for(var s=this.dataview.rows.length,a=0;s>a;a++){var o=this.dataview.rows[a].visibleindex,l={index:o,height:this.heights[o],hidden:this.hiddens[o],details:this.details[o]};if(void 0==this.heights[o]&&(this.heights[o]=this.rowsheight,l.height=this.rowsheight),void 0==this.hiddens[o]&&(this.hiddens[o]=!1,l.hidden=!1),void 0==this.details[o]&&(this.details[o]=null),l.height!=r.rowsheight&&(t-=r.rowsheight,t+=l.height),l.hidden)t-=l.height;else{i+=l.height;var n=0;this.rowdetails&&l.details&&l.details.rowdetails&&!l.details.rowdetailshidden&&(n=l.details.rowdetailsheight,i+=n,t+=n)}}return this._pageviews[0]={top:0,height:i},t}})}(jqxBaseFramework),function(e){e.jqx.dataview.grouping=function(){this.loadgrouprecords=function(t,i,r,s,a,o,l,n,d){for(var h=t,c=this,u=new Array,g=0;g<c.groups.length;g++)u[g]=c.generatekey();var p=new Array,f=0,u=u,v=new Array,m=i,w=i,b=c.groups.length;this.loadedrecords=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this.sortedgroups=new Array;var x=null!=this.sortdata,y=x?this.sortdata:this.records;if(this.pageable){var _=Object.prototype.toString,q=this.groups[0];if(Object.prototype.toString="function"==typeof q?q:function(){return this[q]},x){var j=this.sortfield;Object.prototype.toString="function"==typeof q?q:function(){return this[q]+" "+this[j]}}var z=new Array,k=0;y[i]||(e.each(y,function(e){z[i+e++]=this}),y=z),x?y.sort(function(t,i){var t=t.value,i=i.value;if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return 1;if(null!==t&&null===i)return-1;if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return i>t?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return i>t?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(i>t)return-1;if(t>i)return 1}catch(r){}return 0}):y.sort&&y.sort(function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return 1;if(null!==t&&null===i)return-1;if(t=t.toString(),i=i.toString(),e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return i>t?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return i>t?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(i>t)return-1;if(t>i)return 1}catch(r){}return 0}),Object.prototype.toString=_}if(this.virtualmode){for(var z=new Array,k=0,m=0;r-i>m;m++)y[m]?z[i+k++]=y[m]:y[i+k]&&(z[i+k]=y[i+k],k++);m=0,y=z}for(var S=i;r>S;S++){var I={};I=x?e.extend({},y[S].value):e.extend({},y[S]),id=I[c.uniqueId],(a>=n||id!=l[a][c.uniqueId]||o&&o[id])&&(d[d.length]=a);for(var T=new Array,C=0,g=0;b>g;g++){var D=c.groups[g],B=I[D];null==B&&(B=""),T[C++]={value:B,hash:u[g]}}if(T.length!=b)break;for(var P=null,H="",A=-1,M=0;M<T.length;M++){A++;var L=T[M].value,E=T[M].hash;if(H=H+"_"+E+"_"+L,void 0==v[H]||null==v[H]){if(null==P)P={group:L,subItems:new Array,subGroups:new Array,level:0},p[f++]=P,P.uniqueid=c.generatekey(),c.loadedgroupsByKey[L]=P;else{var O={group:L,subItems:new Array,subGroups:new Array,parentItem:P,level:P.level+1};c.loadedgroupsByKey[P.uniqueid+"_"+L]=O,O.uniqueid=c.generatekey(),P.subGroups[P.subGroups.length++]=O,P=O}v[H]=P}else P=v[H]}null!=P?(void 0==I.uid&&(I.uid=this.getid(this.source.id,I,m)),x?(I.boundindex=y[S].index,this.recordsbyid["id"+I.uid]=y[S].value):(I.boundindex=m,this.recordsbyid["id"+I.uid]=y[S]),this.bounditems[I.boundindex]=I,this.sortedgroups[m]=I,I.uniqueid=c.generatekey(),I.parentItem=P,I.level=P.level+1,P.subItems[P.subItems.length++]=I):(void 0==I.uid&&(I.uid=this.getid(this.source.id,I,m)),x?(I.boundindex=y[S].index,this.recordsbyid["id"+I.uid]=y[S].value):(I.boundindex=m,this.recordsbyid["id"+I.uid]=y[S]),this.sortedgroups[m]=I,this.bounditems[I.boundindex]=I,I.uniqueid=c.generatekey()),a++,m++,w++
}var N=function(e,i,r){for(var s=0;s<i.subItems.length;s++)i.subItems[s].visibleindex=t+r,e.rows[r]=i.subItems[s],e.loadedrecords[r]=i.subItems[s],r++;return r},F=function(e,i,r){var s=function(i){if(1==e.aggregates){var s=i,a={};null!=s&&(a.level=s.level,a.visibleindex=t+r,a.uniqueid=e.generatekey(),e.rows[r]=a,e.loadedrecords[r++]=a,a.totalsrow=!0,i.subItems.length>0?(s=i.subItems[i.subItems.length-1],a.parentItem=s.parentItem,a.parentItem.subItems&&(a.parentItem.subItems[a.parentItem.subItems.length]=a)):i.subGroups.length>0&&(s=i.subGroups[i.subGroups.length-1],a.level=s.level,a.parentItem=i,i.subGroups[i.subGroups.length]=a))}};for(subGroup in i.subGroups){var a=i.subGroups[subGroup];a.subGroups&&(e.loadedgroups[e.loadedgroups.length]=a,a.visibleindex=t+r,e.rows[r]=a,e.loadedrecords[r]=a,r++,a.subGroups.length>0?r=F(e,a,r):a.subItems.length>0&&(r=N(e,a,r)),s(a))}return i.subItems.length>0&&(r=N(e,i,r)),s(i),r},G=p.length;this.loadedgroups=new Array,this.rows=new Array;for(var h=0,m=0;G>m;m++){var D=p[m];this.loadedrootgroups[m]=D,this.loadedgroups[this.loadedgroups.length]=D,D.visibleindex=t+h,this.rows[h]=D,this.loadedrecords[h]=D,h++,h=F(this,D,h)}return h},this._updategroupsinpage=function(t,i,r,s,a,o,l){var n=new Array,d=[];if(this.groupable&&this.groups.length>0){for(var h=0,c=new Array,u=new Array,g=0;g<t.groups.length;g++)u[g]=t.generatekey();var p=0,f=new Array,v=0;l>this.totalrecords&&(l=this.totalrecords);for(var m=o;l>m;m++){var w=e.extend({},t.sortedgroups[m]);if(id=w[t.uniqueId],!t.pagesize||r>=t.pagesize*t.pagenum&&r<t.pagesize*(t.pagenum+1)){(s>=a||id!=n[s][t.uniqueId]||updated&&updated[id])&&(d[d.length]=s);for(var b=new Array,x=0,g=0;g<t.groups.length;g++){var y=t.groups[g],_=w[y];null==_&&(_=""),b[x++]={value:_,hash:u[g]}}if(b.length!=t.groups.length)break;for(var q=null,j="",z=-1,k=0;k<b.length;k++){z++;var S=b[k].value,I=b[k].hash;if(j=j+"_"+I+"_"+S,void 0==c[j]||null==c[j]){if(null==q){q={group:S,subItems:new Array,subGroups:new Array,level:0},f[v++]=q;var T=t.loadedgroupsByKey[S];void 0!=T&&(q.visibleindex=T.visibleindex,q.uniqueid=T.uniqueid)}else{var C={group:S,subItems:new Array,subGroups:new Array,parentItem:q,level:q.level+1},T=t.loadedgroupsByKey[q.uniqueid+"_"+S];C.visibleindex=T.visibleindex,C.uniqueid=T.uniqueid,q.subGroups[q.subGroups.length++]=C,q=C}c[j]=q}else q=c[j]}null!=q&&(w.parentItem=q,w.level=q.level+1,q.subItems[q.subItems.length++]=w),s++}p++,r++}for(var D=function(t,i,r){for(var s=0;s<i.subItems.length;s++)n[r]=e.extend({},i.subItems[s]),r++;return r},B=function(e){var t=!1;for(subGroup in e.subGroups){var i=e.subGroups[subGroup];if(i.subGroups){if(i.subGroups.length>0){var r=B(i);if(r)return t=!0,!0}if(i.subItems.length>0)return t=!0,!0}}return e.subItems.length>0?(t=!0,!0):t},P=function(e,t,i){for(subGroup in t.subGroups){var r=t.subGroups[subGroup];r.subGroups&&B(r)&&(n[i]=r,i++,r.subGroups.length>0?i=P(e,r,i):r.subItems.length>0&&(i=D(e,r,i)))}return t.subItems.length>0&&(i=D(e,t,i)),i},p=0;p<f.length;p++){var y=f[p];B(y)&&(n[h]=y,h++,h=P(this,y,h))}}return n}},e.extend(e.jqx._jqxGrid.prototype,{_initgroupsheader:function(){if(this.groupsheader.css("visibility","hidden"),this._groupsheader()){this.groupsheader.css("visibility","inherit");var t=this,i=this.gridlocalization.groupsheaderstring;this.groupsheaderdiv=this.groupsheaderdiv||e('<div style="width: 100%; position: relative;"></div>'),this.groupsheaderdiv.height(this.groupsheaderheight),this.groupsheaderdiv.css("top",0),this.groupsheader.append(this.groupsheaderdiv),this.groupheadersbounds=new Array;var r=this.groups.length;this.groupsheaderdiv.children().remove(),this.groupsheaderdiv[0].innerHTML="";var s=new Array;if(r>0)e.each(this.groups,function(i){var a=this,o=t._getColumnText(this),l=o.label,n=t._rendergroupcolumn(l,a);if(n.addClass(t.toThemeProperty("jqx-grid-group-column")),t.groupsheaderdiv.append(n),t.closeablegroups){var d=e(n.find(".jqx-icon-close"));t.isTouchDevice()&&t.touchmode!==!0?t.addHandler(d,"touchstart",function(){return t.removegroupat(i),!1}):t.addHandler(d,"click",function(){return t.removegroupat(i),!1})}if(t.sortable&&t.addHandler(n,"click",function(){var e=t.getcolumn(a);return null!=e&&t._togglesort(e),!1}),s[s.length]=n,t._handlegroupstocolumnsdragdrop(this,n),r-1>i){var h=n.height(),c=e('<div style="float: left; position: relative;"></div>');t.rtl&&c.css("float","right"),c.width(t.groupindentwidth/3),c.height(1),c.css("top",h/2),c.addClass(t.toThemeProperty("jqx-grid-group-column-line")),t.groupsheaderdiv.append(c)}});else{var a=e('<div style="position: relative;">'+i+"</div>");this.groupsheaderdiv.append(a),this.rtl&&a.addClass(this.toThemeProperty("jqx-rtl"))}this._groupheaders=s,this._updategroupheadersbounds()}},_updategroupheadersbounds:function(){var t=this,i=this.groupsheaderdiv.children().outerHeight(),r=(this.groupsheader.height()-i)/2;this.groupsheaderdiv.css("top",r),this.rtl?this.groupsheaderdiv.css("right",r):this.groupsheaderdiv.css("left",r),this.rtl&&this._groupheaders.reverse(),e.each(this._groupheaders,function(e){var i=this.coord();t.groupheadersbounds[e]={left:i.left,top:i.top,width:this.outerWidth(),height:this.outerHeight(),index:e}})},addgroup:function(e){if(e){var t=this;t.groups!==t.dataview.groups&&(t.dataview.groups=t.groups),t.groups[t.groups.length]=e,t.refreshgroups(),this._raiseEvent(12,{type:"Add",index:t.groups[t.groups.length],groups:t.groups})}},insertgroup:function(e,t){if(void 0!=e&&null!=e&&e>=0&&e<=this.groups.length&&t){var i=this;i.groups!==i.dataview.groups&&(i.dataview.groups=i.groups),i.groups.splice(e,0,t.toString()),i.refreshgroups(),this._raiseEvent(12,{type:"Insert",index:e,groups:i.groups})}},refreshgroups:function(){this._refreshdataview(),this._render(!0,!0,!0,!1)},_insertaftergroup:function(e,t){var i=this._getGroupIndexByDataField(e);this.insertgroup(i+1,t)},_insertbeforegroup:function(e,t){var i=this._getGroupIndexByDataField(e);this.insertgroup(i,t)},removegroupat:function(e){if(e>=0&&null!=e&&void 0!=e){var t=this;return t.groups!==t.dataview.groups&&(t.dataview.groups=t.groups),t.groups.splice(e,1),t.refreshgroups(),t.virtualmode&&t.updatebounddata(),this._raiseEvent(12,{type:"Remove",index:e,groups:t.groups}),!0}return!1},cleargroups:function(){var e=this;return e.groups=[],e.dataview.groups=e.groups,e.refreshgroups(),this._raiseEvent(12,{type:"Clear",index:-1,groups:e.groups}),!0},removegroup:function(e){if(null==e)return!1;var t=this.groups.indexOf(e.toString());return this.removegroupat(t)},getrootgroupscount:function(){var e=this.dataview.loadedrootgroups.length;return e},collapsegroup:function(e){return this._setrootgroupstate(e,!1)},expandgroup:function(e){return this._setrootgroupstate(e,!0)},collapseallgroups:function(e){this._setbatchgroupstate(!1,e)},expandallgroups:function(e){this._setbatchgroupstate(!0,e)},getgroup:function(t){var i=this.dataview.loadedrootgroups[t];if(null==i)return null;var r=this.expandedgroups[i.uniqueid].expanded,s=i.group,a=i.level,o=new Array;this._getsubgroups(o,i);var l=this,n={group:s,level:a,expanded:r,subgroups:o};if(i.subItems){var d=new Array;e.each(i.subItems,function(){var e=this.boundindex;d[d.length]=l.getrowdata(e)}),d.length>0&&(n.subrows=d)}return n},getrootgroups:function(){for(var e=this.dataview.loadedrootgroups.length,t=new Array,i=0;e>i;i++)t[i]=this.getgroup(i);return t},_getsubgroups:function(t,i){var r=this;for(obj in i.subGroups){var s=i.subGroups[obj],a=r.expandedgroups[s.uniqueid].expanded,o=s.group,l=s.level;if(t[t.length]={group:o,level:l,expanded:a},s.subItems){var n=new Array;e.each(s.subItems,function(){var e=this.boundindex;n[n.length]=r.getrowdata(e)}),t[t.length-1].subrows=n}if(s.subGroups){var d=new Array;r._getsubgroups(d,s)}}return t},_setbatchgroupstate:function(e,t){var i=this;for(obj in this.dataview.loadedrootgroups)i._setrootgroupstate(obj,e,!1,!0);if(0==t)return i._requiresupdate=!0,i._renderrows(i.virtualsizeinfo),!0;var r=this.vScrollBar[0].style.visibility;return this.rendergridcontent(!0,!1),(r!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),!0},_setrootgroupstate:function(e,t,i,r){if(void 0==e||null==e||0>e)return!1;if(!this.groupable||0==this.groups.length)return!1;var s=void 0!=i?i:!0;if(e>=0&&e<this.dataview.loadedrootgroups.length){var a=this.dataview.loadedrootgroups[e];if(this.pageable){for(var o=new Array,l=0;l<this.dataview.rows.length;l++)null!=this.dataview.rows[l].group&&0===this.dataview.rows[l].level&&o.push(this.dataview.rows[l]);if(a=o[e],!a)return}return this._setgroupstate(a,t,s,r)}return!1},_togglegroupstate:function(e,t){if(null==e||void 0==e)return!1;var i=this.vScrollInstance.value,r=this.expandedgroups[e.uniqueid];r=void 0==r?!1:r.expanded,r=!r;var s=this._setgroupstate(e,r,t);return 0!==i&&"hidden"!==this.vScrollBar.css("visibility")&&this.vScrollInstance.setPosition(i<=this.vScrollInstance.max?i:this.vScrollInstance.max),s},_setgroupstate:function(e,t,i,r){if(null==e||void 0==e)return!1;var s=!1;this.editable&&this.editcell&&this.endcelledit(this.editcell.row,this.editcell.column,!1,!1);var a=this.expandedgroups[e.uniqueid];if(void 0==a&&(a={expanded:!1},s=!0),a.expanded!=t&&(s=!0),s){if(this.expandedgroups[e.uniqueid]={expanded:t,group:e},this._setsubgroupsvisibility(this,e,!t,r),i){var o=this.vScrollBar[0].style.visibility;this.rendergridcontent(!0,!1),(o!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))}return(void 0==this.suspendgroupevents||0==this.suspendgroupevents)&&(t?this._raiseEvent(4,{group:e.group,parentgroup:e.parentItem?e.parentItem.group:null,level:e.level,visibleindex:e.visibleindex}):this._raiseEvent(5,{group:e.group,parentgroup:e.parentItem?e.parentItem.group:null,level:e.level,visibleindex:e.visibleindex})),!0}return!1},_setgroupitemsvisibility:function(e,t,i){for(var r=0;r<t.subItems.length;r++)e._setrowvisibility(t.subItems[r].visibleindex,i,!1)},_setsubgroupsvisibility:function(e,t,i,r){if(null!=t.parentItem){if(this.hiddens[t.parentItem.visibleindex])return}else if(null==t.parentItem&&this.hiddens[t.visibleindex])return;for(subGroup in t.subGroups){var s=t.subGroups[subGroup];i||e._setrowvisibility(s.visibleindex,i,!1);var a=!i;r?this.expandedgroups[s.uniqueid]={expanded:a,group:s}:a=void 0==e.expandedgroups[s.uniqueid]?!1:e.expandedgroups[s.uniqueid].expanded,s.subGroups&&(s.subGroups.length>0?e._setsubgroupsvisibility(e,s,!a||i,r):s.subItems.length>0&&e._setgroupitemsvisibility(e,s,!a||i)),i&&e._setrowvisibility(s.visibleindex,i,!1)}t.subItems&&t.subItems.length>0&&e._setgroupitemsvisibility(e,t,i)},_handlecolumnsdragdrop:function(){var t=this,i=-1,r=!1;if(t.groupable){var s="mousemove.grouping"+this.element.id,a="mousedown.grouping"+this.element.id,o="mouseup.grouping"+this.element.id,l=!1;this.isTouchDevice()&&this.touchmode!==!0&&(l=!0,s=e.jqx.mobile.getTouchEventName("touchmove")+".grouping"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchstart")+".grouping"+this.element.id,o=e.jqx.mobile.getTouchEventName("touchend")+".grouping"+this.element.id),this.removeHandler(e(document),s),this.addHandler(e(document),s,function(s){if(!t.showgroupsheader)return!0;if(null!=t.dragcolumn){var a=parseInt(s.pageX),o=parseInt(s.pageY);if(l){var n=t.getTouches(s),d=n[0];a=parseInt(d.pageX),o=parseInt(d.pageY)}var h=t.host.coord(),c=parseInt(h.left),u=parseInt(h.top);(void 0==t.dragmousedownoffset||null==t.dragmousedownoffset)&&(t.dragmousedownoffset={left:0,top:0});var g=parseInt(a)-parseInt(t.dragmousedownoffset.left),p=parseInt(o)-parseInt(t.dragmousedownoffset.top);if(t.dragcolumn.css({left:g+"px",top:p+"px"}),r=!1,a>=c&&a<=c+t.host.width()&&o>=u&&o<=u+t.host.height()&&(r=!0),i=-1,r){t.dragcolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")),t.dragcolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon"));var f=t.groupsheader.coord(),v=f.top+t.groupsheader.height(),m=e.data(t.dragcolumn[0],"datarecord");if(m)var w=t.groups.indexOf(m.toString());else var w=-1;var b=-1==w||t.groups.length>1&&w>-1;null!=t.dropline&&(o>=f.top&&v>=o?b&&(i=t._handlegroupdroplines(a)):t.dropline.fadeOut("slow"))}else null!=t.dropline&&t.dropline.fadeOut("slow"),t.dragcolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")),t.dragcolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon"));if(l)return s.preventDefault(),s.stopPropagation(),!1}}),this.removeHandler(e(document),o),this.addHandler(e(document),o,function(s){if(!t.showgroupsheader)return!0;t.__drag=!1,e(document.body).removeClass("jqx-disableselect");var a=parseInt(s.pageX),o=parseInt(s.pageY);if(l){var n=t.getTouches(s),d=n[0];a=parseInt(d.pageX),o=parseInt(d.pageY)}var h=t.host.coord(),c=(parseInt(h.left),parseInt(h.top)),u=t.groupsheader.height();if(t.showtoolbar&&(c+=t.toolbarheight),t.dragstarted=!1,t.dragmousedown=null,null!=t.dragcolumn){var g=e.data(t.dragcolumn[0],"datarecord");if(t.dragcolumn.remove(),t.dragcolumn=null,null!=g){if(!t.getcolumn(g).groupable)return void(null!=t.dropline&&(t.dropline.remove(),t.dropline=null));if(r)if(-1!=i){var p=i.index,f=t.groups[p],v=t._getGroupIndexByDataField(g);v!=p&&(void 0!=v&&v>=0&&t.groups.splice(v,1),"before"==i.position?t.rtl?t._insertaftergroup(f,g):t._insertbeforegroup(f,g):t.rtl?t._insertbeforegroup(f,g):t._insertaftergroup(f,g))}else if(0==t.groups.length)o>c&&c+u>=o&&t.addgroup(g);else if(o>c+u){var v=t._getGroupIndexByDataField(g);t.removegroupat(v)}null!=t.dropline&&(t.dropline.remove(),t.dropline=null)}}})}},_getGroupIndexByDataField:function(e){for(var t=0;t<this.groups.length;t++)if(this.groups[t]==e)return t;return-1},_isColumnInGroups:function(e){for(var t=0;t<this.groups.length;t++)if(this.groups[t]==e)return!0;return!1},_handlegroupdroplines:function(t){var i=this,r=-1;return e.each(i.groupheadersbounds,function(e){if(t<=this.left+this.width/2){var s=this.left-3;return e>0&&(s=this.left-1-i.groupindentwidth/6),i.dropline.css("left",s),i.dropline.css("top",this.top),i.dropline.height(this.height),i.dropline.fadeIn("slow"),r={index:e,position:"before"},i.rtl&&(r={index:i.groupheadersbounds.length-1-e,position:"before"}),!1}t>=this.left+this.width/2&&(i.dropline.css("left",1+this.left+this.width),i.dropline.css("top",this.top),i.dropline.height(this.height),i.dropline.fadeIn("slow"),r={index:e,position:"after"},i.rtl&&(r={index:i.groupheadersbounds.length-1-e,position:"after"}))}),r},_handlegroupstocolumnsdragdrop:function(t,i){this.dragmousedown=null,this.dragmousedownoffset=null,this.dragstarted=!1,this.dragcolumn=null;var r,s=this,a="mousedown",o="mousemove",l=!1;this.isTouchDevice()&&this.touchmode!==!0&&(l=!0,a=e.jqx.mobile.getTouchEventName("touchstart"),o=e.jqx.mobile.getTouchEventName("touchmove")),this.addHandler(i,"dragstart",function(){return!1}),this.addHandler(i,a,function(t){if(!s.showgroupsheader)return!0;var i=t.pageX,r=t.pageY;if(s.__drag=!0,s.dragmousedown={left:i,top:r},l){var a=s.getTouches(t),o=a[0];i=o.pageX,r=o.pageY,s.dragmousedown={left:i,top:r},t.preventDefault&&t.preventDefault()}var n=e(t.target).coord();s.dragmousedownoffset={left:parseInt(i)-parseInt(n.left),top:parseInt(r-n.top)}}),this.addHandler(i,o,function(a){if(!s.showgroupsheader)return!0;if(s.dragmousedown){if(r={left:a.pageX,top:a.pageY},l){var o=s.getTouches(a),n=o[0];r={left:n.pageX,top:n.pageY}}if(!s.dragstarted&&null==s.dragcolumn){var d=Math.abs(r.left-s.dragmousedown.left),h=Math.abs(r.top-s.dragmousedown.top);(d>3||h>3)&&(s._createdragcolumn(i,r,!0),e(document.body).addClass("jqx-disableselect"),e.data(s.dragcolumn[0],"datarecord",t),a.preventDefault&&a.preventDefault())}}})},_createdragcolumn:function(t,i,r){var s=this,a=i;s.dragcolumn=e("<div></div>");var o=t.clone();s.dragcolumn.css("z-index",999999),o.css("border-width","1px"),o.css("opacity","0.4");var l=e(o.find("."+s.toThemeProperty("jqx-grid-column-menubutton")));l.length>0&&l.css("display","none");var n=e(o.find(".jqx-icon-close"));n.length>0&&n.css("display","none"),s.dragcolumnicon=e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),s.dragcolumnicon.addClass(s.toThemeProperty("jqx-grid-drag-icon")),s.dragcolumn.css("float","left"),s.dragcolumn.css("position","absolute");s.host.coord();o.width(t.width()+16),s.dragcolumn.append(o),s.dragcolumn.height(t.height()),s.dragcolumn.width(o.width()),s.dragcolumn.append(s.dragcolumnicon),e(document.body).append(s.dragcolumn),o.css("margin-left",0),o.css("left",0),o.css("top",0),s.dragcolumn.css("left",a.left+s.dragmousedown.left),s.dragcolumn.css("top",a.top+s.dragmousedown.top),void 0!=r&&r&&(s.dropline=e('<div style="display: none; position: absolute;"></div>'),s.dropline.width(2),s.dropline.addClass(s.toThemeProperty("jqx-grid-group-drag-line")),e(document.body).append(s.dropline))},iscolumngroupable:function(e){return this._getcolumnproperty(e,"groupable")},_handlecolumnstogroupsdragdrop:function(t,i){this.dragmousedown=null,this.dragmousedownoffset=null,this.dragstarted=!1,this.dragcolumn=null;var r,s=this,a=!1;this.isTouchDevice()&&this.touchmode!==!0&&(a=!0);var o="mousedown.drag",r="mousemove.drag";a?(o=e.jqx.mobile.getTouchEventName("touchstart")+".drag",r=e.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(i,"dragstart",function(){return!1}),this.addHandler(i,o,function(r){if(!s.showgroupsheader)return!0;if(s.__drag=!0,s._isColumnInGroups(t.displayfield))return"col-resize"!=i.css("cursor")?!0:!0;if(0==t.groupable)return!0;var o=r.pageX,l=r.pageY;if(a){var n=s.getTouches(r),d=n[0];o=d.pageX,l=d.pageY}s.dragmousedown={left:o,top:l},a&&r.preventDefault&&r.preventDefault();var h=e(r.target).coord();s.dragmousedownoffset={left:parseInt(o)-parseInt(h.left),top:parseInt(l-h.top)}}),this.addHandler(i,r,function(o){if(!s.showgroupsheader)return!0;if(s._isColumnInGroups(t.displayfield))return"col-resize"!=i.css("cursor")?!0:!0;if(s.dragmousedown){var l=o.pageX,n=o.pageY;if(a){var d=s.getTouches(o),h=d[0];l=h.pageX,n=h.pageY}if(r={left:l,top:n},!s.dragstarted&&null==s.dragcolumn){var c=Math.abs(r.left-s.dragmousedown.left),u=Math.abs(r.top-s.dragmousedown.top);(c>3||u>3)&&(s._createdragcolumn(i,r,!0),e.data(s.dragcolumn[0],"datarecord",t.displayfield),o.preventDefault&&o.preventDefault())}}})},_rendergroupcolumn:function(t,i){var r=e('<div style="float: left; position: relative;"></div>');if(this.rtl&&r.css("float","right"),null!=this.groupcolumnrenderer&&(r[0].innerHTML=this.groupcolumnrenderer(t),r.addClass(this.toThemeProperty("jqx-grid-group-column")),r.addClass(this.toThemeProperty("jqx-fill-state-normal"))),this.closeablegroups){""==r[0].innerHTML&&(r[0].innerHTML='<a style="float: left;" href="#">'+t+"</a>"),this.rtl&&(r[0].innerHTML='<a style="float: right;" href="#">'+t+"</a>");var s=this.rtl?"left":"right",a='<div style="float: '+s+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>';if(e.jqx.browser.msie&&e.jqx.browser.version<8&&(a='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>'),this.rtl){var a='<div style="float: '+s+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>';e.jqx.browser.msie&&e.jqx.browser.version<8&&(a='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>')}r[0].innerHTML+=a}else""==r[0].innerHTML&&(r[0].innerHTML='<a href="#">'+t+"</a>");if(this.sortable){var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),l=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.closeablegroups)var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),l=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.rtl){var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),l=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>');if(this.closeablegroups)var o=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),l=e('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>')}o.css("display","none"),l.css("display","none"),e.jqx.browser.msie&&e.jqx.browser.version<8&&(o.css("float","left"),l.css("float","left")),r.append(o),r.append(l),e.data(document.body,"groupsortelements"+i,{sortasc:o,sortdesc:l})}return r.addClass(this.toThemeProperty("jqx-fill-state-normal")),r.addClass(this.toThemeProperty("jqx-grid-group-column")),r},_rendergroup:function(t,i,r,s,a,o,l){var n=i,d=i.cells[r.level];this.rtl&&(d=i.cells[i.cells.length-1-r.level]);var h=this._findgroupstate(r.uniqueid);if(r.bounddata.subGroups.length>0||r.bounddata.subItems.length>0){var c=this.rtl?"-rtl":"",u=this.toThemeProperty("jqx-icon-arrow-right");c&&(u=this.toThemeProperty("jqx-icon-arrow-left")),d.className+=h?" "+this.toThemeProperty("jqx-grid-group-expand"+c)+" "+this.toThemeProperty("jqx-icon-arrow-down"):" "+this.toThemeProperty("jqx-grid-group-collapse"+c)+" "+u}var g=this._getColumnText(this.groups[r.level]).label,p=this.groupindentwidth,f=this.rowdetails&&this.showrowdetailscolumn?(1+t)*p:t*p,v=l-f,m=r.level+1;this.rtl&&(m=0);for(var w=n.cells[m],b=2;void 0!=w&&"none"==w.style.display&&b<n.cells.length-1;)w=n.cells[m+b-1],b++;var x=e(w);if(w){if(w.style.width=parseInt(v)+"px",-1!=w.className.indexOf("jqx-grid-cell-filter")&&x.removeClass(this.toThemeProperty("jqx-grid-cell-filter")),-1!=w.className.indexOf("jqx-grid-cell-sort")&&x.removeClass(this.toThemeProperty("jqx-grid-cell-sort")),-1!=w.className.indexOf("jqx-grid-cell-pinned")&&x.removeClass(this.toThemeProperty("jqx-grid-cell-pinned")),null!=this.groupsrenderer){var y={group:r.group,level:r.level,parent:r.bounddata.parentItem,subGroups:r.bounddata.subGroups,subItems:r.bounddata.subItems,groupcolumn:this._getColumnText(this.groups[r.level]).column},_=this.groupsrenderer(g+": "+r.group,r.group,h,y);if(_)w.innerHTML=_;else{var q=r.bounddata.subItems.length>0?r.bounddata.subItems.length:r.bounddata.subGroups.length;w.innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+g+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+r.group+" ("+q+")</span></div>"}}else{var j=this._getcolumnbydatafield(this.groups[r.level]),z=r.group;if(null==j)throw new Error("jqxGrid: Unable to find '"+this.groups[r.level]+"' group in the Grid's columns collection.");j.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(z)?z=e.jqx.dataFormat.formatdate(z,j.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(z)&&(z=e.jqx.dataFormat.formatnumber(z,j.cellsformat,this.gridlocalization)));var q=r.bounddata.subItems.length>0?r.bounddata.subItems.length:r.bounddata.subGroups.length;w.innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+g+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+z+" ("+q+")</span></div>"}if(this.rtl){j||(j=this._getcolumnbydatafield(this.groups[r.level]));var k="hidden"==this.hScrollBar.css("visibility")?0:this.hScrollInstance.max-this.hScrollInstance.value,S="hidden"==this.vScrollBar.css("visibility")?0:this.scrollbarsize+6,f=this.rowdetails&&this.showrowdetailscolumn?(2+r.level)*p:(1+r.level)*p;w.style.width=l+parseInt(k)-f-S+"px",x.addClass(this.toThemeProperty("jqx-rtl"));var I=e(i.cells[i.cells.length-1]).css("z-index");x.css("z-index",I);var T=x.find("div"),v=T.width();T.css("left","100%");var C=null!=this.columns.records[i.cells.length-2-r.level]?this.columns.records[i.cells.length-2-r.level].pinned:!1;if(this.table.width()<l&&(l=this.table.width(),"hidden"!=this.vScrollBar.css("visibility")&&(l+=this.vScrollBar.outerWidth())),j.pinned||C)this.rowdetails&&this.showrowdetailscolumn&&(l+=30),T.css("margin-left",-v),w.style.width=l+k-f-S+"px";else{var k="hidden"==this.hScrollBar.css("visibility")?0:this.hScrollInstance.max;w.style.width=l+k-f-S+"px";var v=T.width();T.css("margin-left",-v)}}}}})}(jqxBaseFramework),function(){$.fn.gridLoc=function(){var e;return e=new Object,e.pagergotopagestring="P\xe1g. actual",e.pagershowrowsstring="Muestra",e.pagerrangestring=" de ",e.pagernextbuttonstring="Sig",e.pagerpreviousbuttonstring="Ant",e.sortascendingstring="Ascendente",e.sortdescendingstring="Descendente",e.sortremovestring="Limpiar",e.percentsymbol="%",e.currencysymbol="$",e.currencysymbolposition="before",e.decimalseparator=",",e.thousandsseparator=".",e.groupsheaderstring="Arrastre para agrupar",e.groupbystring="Agrupar columna",e.groupremovestring="Desagrupar columna",e.filterclearstring="Borrar",e.filterstring="Filtrar",e.filtershowrowstring="Filtrar por",e.filtershowrowdatestring="Mostrar lineas con fecha:",e.filterorconditionstring="O",e.filterandconditionstring="Y",e.filterselectallstring="(Seleccionar todos)",e.filterchoosestring="Seleccione:",e.filterstringcomparisonoperators=["vacio","no vacio","contiene","contiene(match case)","no contiene","no contiene(match case)","empieza con...","empieza con...(match case)","termina con...","termina con...(match case)","es igual a","es igual a(match case)","null","no null"],e.filternumericcomparisonoperators=["igual","diferente","menor que","menor que o igual","mayor que","mayor que o igual","null","no null"],e.filterdatecomparisonoperators=["igual","diferente","menor que","menor que o igual","mayor que","mayor que o igual","null","no null"],e.filterbooleancomparisonoperators=["igual","diferente"],e.validationstring="Valor ingresado no valido",e.emptydatastring="No hay datos para mostrar",e.filterselectstring="Filtro ",e.loadtext="Cargando...",e.clearstring="Borrar",e.todaystring="Hoy",e}}.call(this),function(){}.call(this);