!function(e){e.jqx.jqxWidget("jqxTree","",{}),e.extend(e.jqx._jqxTree.prototype,{defineInstance:function(){this.items=new Array,this.width=null,this.height=null,this.easing="easeInOutCirc",this.animationShowDuration="fast",this.animationHideDuration="fast",this.treeElements=new Array,this.disabled=!1,this.enableHover=!0,this.keyboardNavigation=!0,this.enableKeyboardNavigation=!0,this.toggleMode="dblclick",this.source=null,this.checkboxes=!1,this.checkSize=13,this.toggleIndicatorSize=16,this.hasThreeStates=!1,this.selectedItem=null,this.touchMode="auto",this.allowDrag=!0,this.allowDrop=!0,this.searchMode="startswithignorecase",this.incrementalSearch=!0,this.incrementalSearchDelay=700,this.animationHideDelay=0,this.submitCheckedItems=!1,this.dragStart=null,this.dragEnd=null,this.rtl=!1,this.dropAction="default",this.events=["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart"],this.aria={"aria-activedescendant":{name:"getActiveDescendant",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(){var t=this;if(this.host.attr("role","tree"),this.host.attr("data-role","treeview"),this.propertyChangeMap.disabled=function(i,s,r,n){t.disabled?t.host.addClass(t.toThemeProperty("jqx-tree-disabled")):t.host.removeClass(t.toThemeProperty("jqx-tree-disabled")),e.jqx.aria(t,"aria-disabled",n)},null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("%")&&this.host.height(this.height),this.host.attr("tabIndex",1),this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-tree-disabled")),e.jqx.aria(this,"aria-disabled",!0)),this.host.jqxDragDrop&&jqxTreeDragDrop(),this.originalInnerHTML=this.element.innerHTML,this.createdTree=!1,this.element.innerHTML.indexOf("UL")){var i=this.host.find("ul:first");i.length>0&&(this.createTree(i[0]),this.createdTree=!0)}if(null!=this.source){var s=this.loadItems(this.source);this.element.innerHTML=s;var i=this.host.find("ul:first");i.length>0&&(this.createTree(i[0]),this.createdTree=!0)}if(this._itemslength=this.items.length,!this.createdTree&&0==this.host.find("ul").length){this.host.append(e("<ul></ul>"));var i=this.host.find("ul:first");i.length>0&&(this.createTree(i[0]),this.createdTree=!0),this.createdTree=!0}1==this.createdTree&&(this._render(),this._handleKeys()),this._updateCheckLayout()},checkItems:function(t,i){var s=this;if(null!=t){var r=0,n=!1,l=0,a=e(t.element).find("li");if(l=a.length,e.each(a,function(){var e=s.itemMapping["id"+this.id].item;0!=e.checked&&(null==e.checked&&(n=!0),r++)}),t!=i)r==l?this.checkItem(t.element,!0,"tree"):r>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree");else{var h=i.checked,a=e(i.element).find("li");e.each(a,function(){s.itemMapping["id"+this.id].item;s.checkItem(this,h,"tree")})}this.checkItems(this._parentItem(t),i)}else{var h=i.checked,a=e(i.element).find("li");e.each(a,function(){s.itemMapping["id"+this.id].item;s.checkItem(this,h,"tree")})}},_getMatches:function(t,i){if(void 0==t||0==t.length)return-1;for(var s=this.items,r=new Array,n=0;n<s.length;n++)this._isVisible(s[n])&&!s[n].disabled&&r.push(s[n]);s=r,void 0!=i&&(s=s.slice(i));var l=new Array;return e.each(s,function(){var i=this.label;i||(i="");var s=e.jqx.string.startsWithIgnoreCase(i.toString(),t);s&&l.push({id:this.id,element:this.element})}),l},_handleKeys:function(){var t=this;this.addHandler(this.host,"keydown",function(i){var s=i.keyCode;if((t.keyboardNavigation||t.enableKeyboardNavigation)&&null!=t.selectedItem){var r=t.selectedItem.element;if(t.incrementalSearch&&!(s>=33&&40>=s)){var n=-1;t._searchString||(t._searchString=""),(8==s||46==s)&&t._searchString.length>=1&&(t._searchString=t._searchString.substr(0,t._searchString.length-1));var l=String.fromCharCode(s),a=!isNaN(parseInt(l)),h=!1;if(s>=65&&97>=s||a||8==s||32==s||46==s){i.shiftKey||(l=l.toLocaleLowerCase()),8!=s&&32!=s&&46!=s&&(t._searchString.length>0&&t._searchString.substr(0,1)==l||(t._searchString+=l)),32==s&&(t._searchString+=" "),t._searchTime=new Date;var o=t.selectedItem;if(o){for(var d=o.id,m=-1,c=0;c<t.items.length;c++)if(t.items[c].id==d){m=c+1;break}var u=t._getMatches(t._searchString,m);if(0==u.length||u.length>0&&u[0].id==d)var u=t._getMatches(t._searchString)}else var u=t._getMatches(t._searchString);if(u.length>0){var o=t.selectedItem;t.selectedItem&&t.selectedItem.id!=u[0].id&&(t.clearSelection(),t.selectItem(u[0].element)),t._lastSearchString=t._searchString}}if(void 0!=t._searchTimer&&clearTimeout(t._searchTimer),(27==s||13==s)&&(t._searchString="",t._lastSearchString=""),t._searchTimer=setTimeout(function(){t._searchString="",t._lastSearchString=""},500),n>=0)return;if(h)return!1}switch(s){case 32:if(t.checkboxes){t.fromKey=!0;var v=e(t.selectedItem.checkBoxElement).jqxCheckBox("checked");return t.checkItem(t.selectedItem.element,!v,"tree"),t.hasThreeStates&&t.checkItems(t.selectedItem,t.selectedItem),!1}return!0;case 33:for(var p=t._getItemsOnPage(),f=t.selectedItem,c=0;p>c;c++)f=t._prevVisibleItem(f);return null!=f?(t.selectItem(f.element),t.ensureVisible(f.element)):(t.selectItem(t._firstItem().element),t.ensureVisible(t._firstItem().element)),!1;case 34:for(var p=t._getItemsOnPage(),g=t.selectedItem,c=0;p>c;c++)g=t._nextVisibleItem(g);return null!=g?(t.selectItem(g.element),t.ensureVisible(g.element)):(t.selectItem(t._lastItem().element),t.ensureVisible(t._lastItem().element)),!1;case 37:case 39:if(37==s&&!t.rtl||39==s&&t.rtl)if(t.selectedItem.hasItems&&t.selectedItem.isExpanded)t.collapseItem(r);else{var x=t._parentItem(t.selectedItem);null!=x&&(t.selectItem(x.element),t.ensureVisible(x.element))}if((39==s&&!t.rtl||37==s&&t.rtl)&&t.selectedItem.hasItems)if(t.selectedItem.isExpanded){var g=t._nextVisibleItem(t.selectedItem);null!=g&&(t.selectItem(g.element),t.ensureVisible(g.element))}else t.expandItem(r);return!1;case 13:return t.selectedItem.hasItems&&(t.selectedItem.isExpanded?t.collapseItem(r):t.expandItem(r)),!1;case 36:return t.selectItem(t._firstItem().element),t.ensureVisible(t._firstItem().element),!1;case 35:return t.selectItem(t._lastItem().element),t.ensureVisible(t._lastItem().element),!1;case 38:var f=t._prevVisibleItem(t.selectedItem);return null!=f&&(t.selectItem(f.element),t.ensureVisible(f.element)),!1;case 40:var g=t._nextVisibleItem(t.selectedItem);return null!=g&&(t.selectItem(g.element),t.ensureVisible(g.element)),!1}}})},_firstItem:function(){var t=null,s=this,r=this.host.find("ul:first"),n=e(r).find("li");for(i=0;i<=n.length-1;i++){var l=n[i];if(t=this.itemMapping["id"+l.id].item,s._isVisible(t))return t}return null},_lastItem:function(){var t=null,s=this,r=this.host.find("ul:first"),n=e(r).find("li");for(i=n.length-1;i>=0;i--){var l=n[i];if(t=this.itemMapping["id"+l.id].item,s._isVisible(t))return t}return null},_parentItem:function(t){if(null==t||void 0==t)return null;var i=t.parentElement;if(!i)return null;var s=null;return e.each(this.items,function(){return this.element==i?(s=this,!1):void 0}),s},_nextVisibleItem:function(e){if(null==e||void 0==e)return null;for(var t=e;null!=t;)if(t=t.nextItem,this._isVisible(t)&&!t.disabled)return t;return null},_prevVisibleItem:function(e){if(null==e||void 0==e)return null;for(var t=e;null!=t;)if(t=t.prevItem,this._isVisible(t)&&!t.disabled)return t;return null},_isVisible:function(e){if(null==e||void 0==e)return!1;if(!this._isElementVisible(e.element))return!1;var t=this._parentItem(e);if(null==t)return!0;if(null!=t){if(!this._isElementVisible(t.element))return!1;if(!t.isExpanded)return!1;for(;null!=t;){if(t=this._parentItem(t),null!=t&&!this._isElementVisible(t.element))return!1;if(null!=t&&!t.isExpanded)return!1}}return!0},_getItemsOnPage:function(){var t=0,i=(this.panel.jqxPanel("getVScrollPosition"),parseInt(this.host.height())),s=0,r=this._firstItem();if(parseInt(e(r.element).height())>0)for(;i>=s;)s+=parseInt(e(r.element).outerHeight()),t++;return t},_isElementVisible:function(t){return null==t?!1:"none"!=e(t).css("display")&&"hidden"!=e(t).css("visibility")?!0:!1},refresh:function(t){if(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height),this.panel){if(null!=this.width&&-1!=this.width.toString().indexOf("%")){var i=this;this.panel.jqxPanel("width","100%"),i.removeHandler(e(window),"resize.jqxtree"+i.element.id),i.addHandler(e(window),"resize.jqxtree"+i.element.id,function(){i._calculateWidth()})}else this.panel.jqxPanel("width",this.host.width());this.panel.jqxPanel("_arrange")}if(this._calculateWidth(),e.jqx.isHidden(this.host)){var i=this;this._hiddenTimer=setInterval(function(){e.jqx.isHidden(i.host)||(clearInterval(i._hiddenTimer),i._calculateWidth())},100)}1!=t&&this.checkboxes&&this._updateCheckLayout(null)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},loadItems:function(t){if(null!=t){var i=this;this.items=new Array;var s="<ul>";return e.map(t,function(e){return void 0==e?null:void(s+=i._parseItem(e))}),s+="</ul>"}},_parseItem:function(e){var t="";if(void 0==e)return null;var i=e.label;!e.label&&e.html&&(i=e.html),i||(i="Item"),"string"==typeof e&&(i=e);var s=!1;void 0!=e.expanded&&e.expanded&&(s=!0);var r=!1;void 0!=e.locked&&e.locked&&(r=!0);var n=!1;void 0!=e.selected&&e.selected&&(n=!0);var l=!1;void 0!=e.disabled&&e.disabled&&(l=!0);var a=!1;void 0!=e.checked&&e.checked&&(a=!0);var h=e.icon,o=e.iconsize;t+="<li",s&&(t+=' item-expanded="true" '),r&&(t+=' item-locked="true" '),l&&(t+=' item-disabled="true" '),n&&(t+=' item-selected="true" '),o&&(t+=' item-iconsize="'+e.iconsize+'" '),null!=h&&void 0!=h&&(t+=' item-icon="'+h+'" '),e.label&&!e.html&&(t+=' item-label="'+i+'" '),null!=e.value&&(t+=' item-value="'+e.value+'" '),void 0!=e.checked&&(t+=' item-checked="'+a+'" ');var d="";return void 0!=e.id?(d=e.id,t+=' id="'+d+'" '):(d=this.createID(),t+=' id="'+d+'" '),t+=">"+i,e.items&&(t+=this.loadItems(e.items)),this._valueList||(this._valueList=new Array),this._valueList[d]=e.value,t+="</li>"},ensureVisible:function(t){if(null!=t&&void 0!=t){var i=this.panel.jqxPanel("getVScrollPosition"),s=this.panel.jqxPanel("getHScrollPosition"),r=parseInt(this.host.height()),n=e(t).position().top;(i>=n||n>=r+i)&&this.panel.jqxPanel("scrollTo",s,n-r+e(t).outerHeight())}},_syncItems:function(t){this._visibleItems=new Array;var i=this;e.each(t,function(){var t=e(this);if("none"!=t.css("display")){var s=t.outerHeight();if(t.height()>0){var r=parseInt(t.offset().top);i._visibleItems[i._visibleItems.length]={element:this,top:r,height:s,bottom:r+s}}}})},hitTest:function(t,i){var s=this,r=null,n=this.host.find(".jqx-item");if(this._syncItems(n),s._visibleItems){var l=parseInt(s.host.offset().left),a=s.host.outerWidth();e.each(s._visibleItems,function(){if(t>=l&&l+a>t&&this.top+5<i&&i<this.top+this.height){var n=e(this.element).parents("li:first");if(n.length>0&&(r=s.getItem(n[0]),null!=r))return r.height=this.height,r.top=this.top,!1}})}return r},addBefore:function(e,t,i){return this.addBeforeAfter(e,t,!0,i)},addAfter:function(e,t,i){return this.addBeforeAfter(e,t,!1,i)},addBeforeAfter:function(t,i,s,r){var n=this,l=new Array;i&&void 0!=i.treeInstance&&(i=i.element),e.isArray(t)?l=t:l[0]=t;var a="",h=this;e.each(l,function(){a+=h._parseItem(this)});var o=e(a);if(n.element.innerHTML.indexOf("UL"))var d=n.host.find("ul:first");void 0==i&&null==i?d.append(o):s?e(i).before(o):e(i).after(o);for(var m=o,c=0;c<m.length;c++){this._createItem(m[c]);var u=e(m[c]).find("li");if(u.length>0)for(var v=0;v<u.length;v++)this._createItem(u[v])}var p=function(t){h._refreshMapping(!1),h._updateItemsNavigation(),t&&h.allowDrag&&h._enableDragDrop&&h._enableDragDrop(),null!=h.selectedItem&&(e(h.selectedItem.titleElement).addClass(h.toThemeProperty("jqx-fill-state-pressed")),e(h.selectedItem.titleElement).addClass(h.toThemeProperty("jqx-tree-item-selected")))};return 0==r?(p(!0),void this._raiseEvent("4",{items:this.getItems()})):(p(!1),h._render(),this._raiseEvent("4",{items:this.getItems()}),void(h.checkboxes&&h._updateCheckLayout(null)))},addTo:function(t,i,s){var r=this,n=new Array;i&&void 0!=i.treeInstance&&(i=i.element),e.isArray(t)?n=t:n[0]=t;var l="",a=this;e.each(n,function(){l+=a._parseItem(this)});var h=e(l);if(r.element.innerHTML.indexOf("UL"))var o=r.host.find("ul:first");if(void 0==i&&null==i)o.append(h);else{i=e(i);var d=i.find("ul:first");if(0==d.length){ulElement=e("<ul></ul>"),e(i).append(ulElement),d=i.find("ul:first");var m=r.itemMapping["id"+i[0].id].item;m.subtreeElement=d[0],m.hasItems=!0,d.addClass(r.toThemeProperty("jqx-tree-dropdown")),a.rtl&&d.addClass(r.toThemeProperty("jqx-tree-dropdown-rtl")),d.append(h);var c=d.find("li:first");m.parentElement=c}else d.append(h)}for(var u=h,v=0;v<u.length;v++){this._createItem(u[v]);var p=e(u[v]).find("li");if(p.length>0)for(var f=0;f<p.length;f++)this._createItem(p[f])}var g=function(t){a._refreshMapping(!1),a._updateItemsNavigation(),t&&a.allowDrag&&a._enableDragDrop&&a._enableDragDrop(),null!=a.selectedItem&&(e(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-fill-state-pressed")),e(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-tree-item-selected")))};return 0==s?(g(!0),void this._raiseEvent("4",{items:this.getItems()})):(g(!1),a._render(),a.checkboxes&&a._updateCheckLayout(null),void this._raiseEvent("4",{items:this.getItems()}))},updateItem:function(t,i){var s=void 0!=t.treeInstance?t:this.getItem(t);if(!s){var r=t;t=i,i=r;var s=void 0!=t.treeInstance?t:this.getItem(t)}if(s){if("string"==typeof i&&(i={label:i}),i.value&&(s.value=i.value),i.label){s.label=i.label,e.jqx.utilities.html(e(s.titleElement),i.label);var n=e.jqx.browser.msie&&e.jqx.browser.version<8;if(n){e(document.body).append(this._measureItem),this._measureItem.html(e(s.titleElement).text());var l=this._measureItem.width();s.icon&&(l+=20),e(e(s.titleElement).find("img")).length>0&&(l+=20),e(s.titleElement).css("max-width",l+"px"),this._measureItem.remove()}}if(i.icon)if(e(s.element).children(".itemicon").length>0)e(s.element).find(".itemicon")[0].src=i.icon;else{var a=i.iconsize;a||(a=16);var h=e('<img width="'+a+'" height="'+a+'" style="float: left;" class="itemicon" src="'+i.icon+'"/>');e(s.titleElement).prepend(h),h.css("margin-right","4px"),this.rtl&&(h.css("margin-right","0px"),h.css("margin-left","4px"),h.css("float","right"))}return i.expanded&&this.expandItem(s),i.disabled&&this.disableItem(s),i.selected&&this.selectItem(s),!0}return!1},removeItem:function(t,i){if(void 0!=t&&null!=t){void 0!=t.treeInstance&&(t=t.element);var s=this,r=(t.id,-1),n=this.getItem(t);if(n&&(r=this.items.indexOf(n),-1!=r&&function l(t){var i=-1;i=this.items.indexOf(t),-1!=i&&this.items.splice(i,1);var s=e(t.element).find("li"),r=s.length,n=this,a=new Array;if(r>0){e.each(s,function(){var e=n.itemMapping["id"+this.id].item;a.push(e)});for(var h=0;h<a.length;h++)l.apply(this,[a[h]])}}.apply(this,[n])),this.host.find("#"+t.id).length>0&&e(t).remove(),0==i)return void this._raiseEvent("5");s._updateItemsNavigation(),s._render(),null!=s.selectedItem&&s.selectedItem.element==t&&(e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-fill-state-pressed")),e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-selected")),s.selectedItem=null),this._raiseEvent("5"),s.checkboxes&&s._updateCheckLayout(null)}},clear:function(){this.items=new Array,this.itemMapping=new Array;var e=this.host.find("ul:first");e.length>0&&(e[0].innerHTML=""),this.selectedItem=null},disableItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;e.each(i.items,function(){var s=this;return s.element==t?(s.disabled=!0,e(s.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")),e(s.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&s.checkBoxElement&&e(s.checkBoxElement).jqxCheckBox({disabled:!0}),!1):void 0})},_updateInputSelection:function(){if(this.input){if(null==this.selectedItem)this.input.val("");else{var e=this.selectItem.value;null==e&&(e=this.selectedItem.label),this.input.val(e)}if(this.checkboxes){var t=this.getCheckedItems();if(this.submitCheckedItems){for(var i="",s=0;s<t.length;s++){var r=t[s].value;null==r&&(r=t[s].label),i+=s==t.length-1?r:r+","}this.input.val(i)}}}},getCheckedItems:function(){var t=new Array,i=this;return e.each(i.items,function(){var e=this;e.checked&&t.push(e)}),t},getUncheckedItems:function(){var t=new Array,i=this;return e.each(i.items,function(){var e=this;e.checked||t.push(e)}),t},checkAll:function(){var t=this;e.each(t.items,function(){var t=this;t.disabled||(t.checked=!0,e(t.checkBoxElement).jqxCheckBox("_setState",!0))}),this._raiseEvent("6",{element:this,checked:!0})},uncheckAll:function(){var t=this;e.each(t.items,function(){var t=this;t.disabled||(t.checked=!1,e(t.checkBoxElement).jqxCheckBox("_setState",!1))}),this._raiseEvent("6",{element:this,checked:!1})},checkItem:function(t,i,s){if(null==t)return!1;void 0===i&&(i=!0),void 0!=t.treeInstance&&(t=t.element);var r=this,n=!1,l=null;e.each(r.items,function(){var s=this;return s.element!=t||s.disabled?void 0:(n=!0,s.checked=i,l=s,e(s.checkBoxElement).jqxCheckBox({checked:i}),!1)}),n&&(this._raiseEvent("6",{element:t,checked:i}),this._updateInputSelection()),void 0==s&&l&&this.hasThreeStates&&this.checkItems(l,l)},uncheckItem:function(e){this.checkItem(e,!1)},enableItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;e.each(i.items,function(){var s=this;return s.element==t?(s.disabled=!1,e(s.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")),e(s.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&s.checkBoxElement&&e(s.checkBoxElement).jqxCheckBox({disabled:!1}),!1):void 0})},enableAll:function(){var t=this;e.each(t.items,function(){var i=this;i.disabled=!1,e(i.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled")),e(i.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.checkboxes&&i.checkBoxElement&&e(i.checkBoxElement).jqxCheckBox({disabled:!1})})},lockItem:function(t){if(null==t)return!1;var i=this;e.each(i.items,function(){var e=this;return e.element==t?(e.locked=!0,!1):void 0})},unlockItem:function(t){if(null==t)return!1;var i=this;e.each(i.items,function(){var e=this;return e.element==t?(e.locked=!1,!1):void 0})},getItems:function(){return this.items},getItem:function(e){if(null==e||void 0==e)return null;if(this.itemMapping["id"+e.id]){var t=this.itemMapping["id"+e.id].item;return t}return null},isExpanded:function(e){if(null==e||void 0==e)return!1;var t=this.itemMapping["id"+e.id].item;return null!=t?t.isExpanded:!1},isSelected:function(e){if(null==e||void 0==e)return!1;var t=this.itemMapping["id"+e.id].item;return null!=t?t==this.selectedItem:!1},getPrevItem:function(e){var t=this.getItem(e);void 0!=e.treeInstance&&(t=e);var i=this._prevVisibleItem(t);return i},getNextItem:function(e){var t=this.getItem(e);void 0!=e.treeInstance&&(t=e);var i=this._nextVisibleItem(t);return i},getSelectedItem:function(){return this.selectedItem},val:function(e){if(0==arguments.length||"object"==typeof e)return this.selectedItem;if("string"==typeof e){var t=this.host.find("#"+e);if(t.length>0){var i=this.getItem(t[0]);this.selectItem(i)}}else{var i=this.getItem(e);this.selectItem(i)}},getActiveDescendant:function(){return this.selectedItem?this.selectedItem.element.id:""},clearSelection:function(){this.selectItem(null)},selectItem:function(t){if(!this.disabled){var i=this;if(t&&void 0!=t.treeInstance&&(t=t.element),null==t||void 0==t)return void(null!=i.selectedItem&&(e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=null));if(null==this.selectedItem||this.selectedItem.element!=t){var s=null!=this.selectedItem?this.selectedItem.element:null;s&&e(s).removeAttr("aria-selected"),e.each(i.items,function(){var s=this;s.disabled||s.element==t&&(null==i.selectedItem||null!=i.selectedItem&&i.selectedItem.titleElement!=s.titleElement)&&(null!=i.selectedItem&&(e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),e(i.selectedItem.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-selected"))),e(s.titleElement).addClass(i.toThemeProperty("jqx-fill-state-pressed")),e(s.titleElement).addClass(i.toThemeProperty("jqx-tree-item-selected")),i.selectedItem=s,e(s.element).attr("aria-selected","true"),e.jqx.aria(i,"aria-activedescendant",s.element.id))}),this._updateInputSelection(),this._raiseEvent("2",{element:t,prevElement:s})}}},collapseAll:function(){this.isUpdating=!0;var t=this,i=t.items,s=this.animationHideDuration;this.animationHideDuration=0,e.each(i,function(){var e=this;1==e.isExpanded&&t._collapseItem(t,e)}),setTimeout(function(){t.isUpdating=!1,t._calculateWidth()},this.animationHideDuration),this.animationHideDuration=s},expandAll:function(){var t=this;this.isUpdating=!0;var i=this.animationShowDuration;this.animationShowDuration=0,e.each(this.items,function(){var e=this;e.hasItems&&t._expandItem(t,e)}),setTimeout(function(){t.isUpdating=!1,t._calculateWidth()},this.animationShowDuration),this.animationShowDuration=i},collapseItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;return e.each(this.items,function(){var e=this;return 1==e.isExpanded&&e.element==t?(i._collapseItem(i,e),!1):void 0}),!0},expandItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;return e.each(i.items,function(){var e=this;0!=e.isExpanded||e.element!=t||e.disabled||e.locked||(i._expandItem(i,e),e.parentElement&&i.expandItem(e.parentElement))}),!0},_getClosedSubtreeOffset:function(t){var i=e(t.subtreeElement),s=-i.outerHeight(),r=-i.outerWidth();return r=0,{left:r,top:s}},_collapseItem:function(t,i){if(null==t||null==i)return!1;if(i.disabled)return!1;if(t.disabled)return!1;if(t.locked)return!1;{var s=e(i.subtreeElement),r=this._getClosedSubtreeOffset(i);r.top,r.left}$treeElement=e(i.element);var n=t.animationHideDelay;n=0,null!=s.data("timer").show&&(clearTimeout(s.data("timer").show),s.data("timer").show=null);var l=function(){if(i.isExpanded=!1,t.checkboxes){var r=s.find(".chkbox");r.stop(),r.css("opacity",1),s.find(".chkbox").animate({opacity:0},50)}var n=e(i.arrow);t._arrowStyle(n,"",i.isExpanded),s.slideUp(t.animationHideDuration,function(){i.isCollapsing=!1,t._calculateWidth();var r=e(i.arrow);t._arrowStyle(r,"",i.isExpanded),s.hide(),t._raiseEvent("1",{element:i.element})})};n>0?s.data("timer").hide=setTimeout(function(){l()},n):l()},_expandItem:function(t,i){if(null==t||null==i)return!1;if(i.isExpanded)return!1;if(i.locked)return!1;if(i.disabled)return!1;if(t.disabled)return!1;var s=e(i.subtreeElement);null!=s.data("timer")&&null!=s.data("timer").hide&&clearTimeout(s.data("timer").hide);var r=(e(i.element),0);if(parseInt(s.css("top"))==r)return void(i.isExpanded=!0);var n=e(i.arrow);if(t._arrowStyle(n,"",i.isExpanded),t.checkboxes){var l=s.find(".chkbox");l.stop(),l.css("opacity",0),l.animate({opacity:1},t.animationShowDuration)}if(s.slideDown(t.animationShowDuration,t.easing,function(){var s=e(i.arrow);i.isExpanded=!0,t._arrowStyle(s,"",i.isExpanded),i.isExpanding=!1,t._raiseEvent("0",{element:i.element}),t._calculateWidth()}),t.checkboxes&&(t._updateCheckItemLayout(i),i.subtreeElement)){var a=e(i.subtreeElement).find("li");e.each(a,function(){var e=t.getItem(this);null!=e&&t._updateCheckItemLayout(e)})}},_calculateWidth:function(){var t=this,i=this.checkboxes?20:0,s=0;if(!this.isUpdating){if(e.each(this.items,function(){var t=e(this.element).height();if(0!=t){var r=this.titleElement.outerWidth()+10+i+20*(1+this.level);if(s=Math.max(s,r),this.hasItems){var n=parseInt(e(this.titleElement).css("padding-top"));isNaN(n)&&(n=0),n=2*n,n+=2;var l=(n+e(this.titleElement).height())/2-8.5;e.jqx.browser.msie&&e.jqx.browser.version<9?e(this.arrow).css("margin-top","3px"):parseInt(l)>=0&&e(this.arrow).css("margin-top",parseInt(l)+"px")}}}),this.toggleIndicatorSize>16&&(s=s+this.toggleIndicatorSize-16),t.panel)if(s>this.host.width()){var r=s-this.host.width(),n="hidden"!==t.panel.jqxPanel("vScrollBar").css("visibility")?10:0;r+=n,t.panel.jqxPanel({horizontalScrollBarMax:r})}else t.panel.jqxPanel({horizontalScrollBarMax:0});this.host.find("ul:first").width(s);var l=this.host.width()-30;l>0&&this.host.find("ul:first").css("min-width",l),t.panel&&t.panel.jqxPanel("_arrange")}},_arrowStyle:function(e,t,i){var s=this;if(e.length>0){e.removeClass();var r="";"hover"==t&&(r="-"+t);var n=i?"-expand":"-collapse",l="jqx-tree-item-arrow"+n+r;if(e.addClass(s.toThemeProperty(l)),!this.rtl){var n=i?"-down":"-right";e.addClass(s.toThemeProperty("jqx-icon-arrow"+n))}if(this.rtl){e.addClass(s.toThemeProperty(l+"-rtl"));var n=i?"-down":"-left";e.addClass(s.toThemeProperty("jqx-icon-arrow"+n))}}},_initialize:function(){var t=this;this.host.addClass(t.toThemeProperty("jqx-widget")),this.host.addClass(t.toThemeProperty("jqx-widget-content")),this.host.addClass(t.toThemeProperty("jqx-tree")),this._updateDisabledState();var i=e.jqx.browser.msie&&e.jqx.browser.version<8;e.each(this.items,function(){var s=this;$element=e(s.element);var r=null;if(t.checkboxes&&!s.hasItems&&s.checkBoxElement&&e(s.checkBoxElement).css("margin-left","0px"),i)!s.hasItems&&e(s.element).find("ul").length>0&&e(s.element).find("ul").remove();else{if(!s.hasItems){t.rtl?s.element.style.marginRight=parseInt(t.toggleIndicatorSize)+"px":s.element.style.marginLeft=parseInt(t.toggleIndicatorSize)+"px";var n=e(s.arrow);return n.length>0&&(n.remove(),s.arrow=null),!0}s.element.style.marginLeft="0px"}var n=e(s.arrow);n.length>0&&n.remove(),r=e('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>'),r.prependTo($element),t.rtl?r.css("float","right"):r.css("float","left"),r.css("clear","both"),r.width(t.toggleIndicatorSize),t._arrowStyle(r,"",s.isExpanded);var l=parseInt(e(this.titleElement).css("padding-top"));isNaN(l)&&(l=0),l=2*l,l+=2;var a=(l+e(this.titleElement).height())/2-8.5;e.jqx.browser.msie&&e.jqx.browser.version<9?r.css("margin-top","3px"):parseInt(a)>=0&&r.css("margin-top",parseInt(a)+"px"),$element.addClass(t.toThemeProperty("jqx-disableselect")),r.addClass(t.toThemeProperty("jqx-disableselect"));var h="click",o=t.isTouchDevice();o&&(h=e.jqx.mobile.getTouchEventName("touchend")),t.addHandler(r,h,function(){return s.isExpanded?t._collapseItem(t,s):t._expandItem(t,s),!1}),t.addHandler(r,"selectstart",function(){return!1}),t.addHandler(r,"mouseup",function(){return o?void 0:!1}),s.hasItems=e(s.element).find("li").length>0,s.arrow=r[0],s.hasItems||r.css("visibility","hidden"),$element.css("float","none")})},_getOffset:function(t){var i=e(window).scrollTop(),s=e(window).scrollLeft(),r=e.jqx.mobile.isSafariMobileBrowser(),n=e(t).offset(),l=n.top,a=n.left;return null!=r&&r?{left:a-s,top:l-i}:e(t).offset()},_renderHover:function(t,i,s){var r=this;if(!s){var n=e(i.titleElement);r.addHandler(n,"mouseenter",function(){i.disabled||!r.enableHover||r.disabled||(n.addClass(r.toThemeProperty("jqx-fill-state-hover")),n.addClass(r.toThemeProperty("jqx-tree-item-hover")))}),r.addHandler(n,"mouseleave",function(){i.disabled||!r.enableHover||r.disabled||(n.removeClass(r.toThemeProperty("jqx-fill-state-hover")),n.removeClass(r.toThemeProperty("jqx-tree-item-hover")))})}},_updateDisabledState:function(){this.disabled?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_addInput:function(){if(null==this.input){var t=this.host.attr("name");t?this.host.attr("name",""):t=this.element.id,this.input=e("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t),this._updateInputSelection()}},render:function(){this._updateItemsNavigation(),this._render()},_render:function(t,i){if(e.jqx.browser.msie&&e.jqx.browser.version<8){var s=this;e.each(this.items,function(){var t=e(this.element),i=t.parent(),s=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13;t.css("min-width",s);var r=parseInt(i.css("min-width"));isNaN(r)&&(r=0);var n=t.css("min-width");r<parseInt(t.css("min-width"))&&i.css("min-width",n),this.titleElement[0].style.width=null})}var s=this;e.data(s.element,"animationHideDelay",s.animationHideDelay),e.data(document.body,"treeel",this),this._initialize();var r=this.isTouchDevice();if(r&&"dblclick"==this.toggleMode&&(this.toggleMode="click"),(void 0==t||1==t)&&e.each(this.items,function(){s._updateItemEvents(s,this)}),this.allowDrag&&this._enableDragDrop&&(void 0==i||1==i)&&this._enableDragDrop(),this._addInput(),this.host.jqxPanel){if(this.host.find("#panel"+this.element.id).length>0)return this.panel.jqxPanel({touchMode:this.touchMode}),void this.panel.jqxPanel("refresh");this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');var n=this.host.find("div:first"),l="fixed";(null==this.height||"auto"==this.height)&&(l="verticalwrap"),(null==this.width||"auto"==this.width)&&(l="fixed"==l?"horizontalwrap":"wrap"),n.jqxPanel({rtl:this.rtl,theme:this.theme,width:"100%",height:"100%",touchMode:this.touchMode,sizeMode:l}),e.jqx.browser.msie&&e.jqx.browser.version<8&&n.jqxPanel("content").css("left","0px"),n.data({nestedWidget:!0}),(null==this.height||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&this.isTouchDevice()&&(this.removeHandler(n,e.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(n,e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(n,e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var a=e.data(n[0],"jqxPanel").instance;null!=a&&(this.vScrollInstance=a.vScrollInstance,this.hScrollInstance=a.hScrollInstance),this.panelInstance=a,e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0),this.host.find("ul").attr("hideFocus",!0)),n[0].className="",this.panel=n}this._raiseEvent("3",this)},focus:function(){try{this.host.focus()}catch(e){}},_updateItemEvents:function(t,i){var s=this.isTouchDevice();s&&(this.toggleMode=e.jqx.mobile.getTouchEventName("touchend"));var r=e(i.element);t.enableRoundedCorners&&r.addClass(t.toThemeProperty("jqx-rc-all"));var n=s?e.jqx.mobile.getTouchEventName("touchend"):"mousedown";t.touchMode===!0&&t.removeHandler(e(i.checkBoxElement),"mousedown"),t.removeHandler(e(i.checkBoxElement),n),t.addHandler(e(i.checkBoxElement),n,function(){return t.disabled||this.treeItem.disabled||(this.treeItem.checked=!this.treeItem.checked,t.checkItem(this.treeItem.element,this.treeItem.checked,"tree"),t.hasThreeStates&&t.checkItems(this.treeItem,this.treeItem)),!1});var l=e(i.titleElement);t.removeHandler(r);var a=this.allowDrag&&this._enableDragDrop;a?(t.removeHandler(l,"mousedown.item"),t.removeHandler(l,"click"),t.removeHandler(l,"dblclick"),t.removeHandler(l,"mouseenter"),t.removeHandler(l,"mouseleave")):t.removeHandler(l),t._renderHover(r,i,s);var h=e(i.subtreeElement);if(h.length>0){var o=i.isExpanded?"block":"none";h.css({overflow:"hidden",display:o}),h.data("timer",{})}t.addHandler(l,"selectstart",function(){return!1}),e.jqx.browser.opera&&t.addHandler(l,"mousedown.item",function(){return!1}),"click"!=t.toggleMode&&t.addHandler(l,"click",function(){t.selectItem(i.element),null!=t.panel&&t.panel.jqxPanel({focused:!0}),l.focus()}),t.addHandler(l,t.toggleMode,function(){return h.length>0&&clearTimeout(h.data("timer").hide),null!=t.panel&&t.panel.jqxPanel({focused:!0}),t.selectItem(i.element),void 0==i.isExpanding&&(i.isExpanding=!1),void 0==i.isCollapsing&&(i.isCollapsing=!1),h.length>0?(i.isExpanded?0==i.isCollapsing&&(i.isCollapsing=!0,t._collapseItem(t,i,!0)):0==i.isExpanding&&(i.isExpanding=!0,t._expandItem(t,i)),!1):void 0})},isTouchDevice:function(){if(void 0!=this._isTouchDevice)return this._isTouchDevice;var t=e.jqx.mobile.isTouchDevice();return 1==this.touchMode?t=!0:0==this.touchMode&&(t=!1),this._isTouchDevice=t,t
},createID:function(){return e.jqx.utilities.createId()},createTree:function(t){if(null!=t){var i=this,s=e(t).find("li");this.items=new Array,this.itemMapping=new Array,e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root-rtl")),(this.rtl||e.jqx.browser.msie&&e.jqx.browser.version<8)&&(this._measureItem=e("<span style='position: relative; visibility: hidden;'></span>"),this._measureItem.addClass(this.toThemeProperty("jqx-widget")),this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")),this._measureItem.addClass(this.toThemeProperty("jqx-item")),e(document.body).append(this._measureItem)),e.jqx.browser.msie&&e.jqx.browser.version<8;for(var r=0;r<s.length;r++)this._createItem(s[r]);(this.rtl||e.jqx.browser.msie&&e.jqx.browser.version<8)&&this._measureItem.remove(),this._updateItemsNavigation(),this._updateCheckStates()}},_updateCheckLayout:function(t){var i=this;this.checkboxes&&e.each(this.items,function(){(this.level==t||void 0==t)&&i._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(t){if(this.checkboxes&&"none"!=e(t.titleElement).css("display")){var i=e(t.checkBoxElement),s=e(t.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2;i.css("margin-top",s),this.rtl||(e.jqx.browser.msie&&e.jqx.browser.version<8?t.titleElement.css("margin-left",parseInt(this.checkSize)+25):t.hasItems&&i.css("margin-left",this.toggleIndicatorSize))}},_updateCheckStates:function(){var t=this;t.hasThreeStates?e.each(this.items,function(){t._updateCheckState(this)}):e.each(this.items,function(){null==this.checked&&t.checkItem(this.element,!1,"tree")})},_updateCheckState:function(t){if(null!=t&&void 0!=t){var i=this,s=0,r=!1,n=0,l=e(t.element).find("li");n=l.length,t.checked&&n>0&&e.each(l,function(){var e=i.itemMapping["id"+this.id].item,t=e.element.getAttribute("item-checked");(void 0==t||null==t||"true"==t||1==t)&&i.checkItem(e.element,!0,"tree")}),e.each(l,function(){var e=i.itemMapping["id"+this.id].item;0!=e.checked&&(null==e.checked&&(r=!0),s++)}),n>0&&(s==n?this.checkItem(t.element,!0,"tree"):s>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree"))}},_updateItemsNavigation:function(){for(var t=this.host.find("ul:first"),i=e(t).find("li"),s=0;s<i.length;s++){var r=i[s];if(this.itemMapping["id"+r.id]){var n=this.itemMapping["id"+r.id].item;if(!n)continue;n.prevItem=null,n.nextItem=null,s>0&&this.itemMapping["id"+i[s-1].id]&&(n.prevItem=this.itemMapping["id"+i[s-1].id].item),s<i.length-1&&this.itemMapping["id"+i[s+1].id]&&(n.nextItem=this.itemMapping["id"+i[s+1].id].item)}}},_applyTheme:function(t,i){var s=this;this.host.removeClass("jqx-tree-"+t),this.host.removeClass("jqx-widget-"+t),this.host.removeClass("jqx-widget-content-"+t),this.host.addClass(s.toThemeProperty("jqx-tree")),this.host.addClass(s.toThemeProperty("jqx-widget"));var r=this.host.find("ul:first");e(r).removeClass(s.toThemeProperty("jqx-tree-dropdown-root-"+t)),e(r).addClass(s.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&(e(r).removeClass(s.toThemeProperty("jqx-tree-dropdown-root-rtl-"+t)),e(r).addClass(s.toThemeProperty("jqx-tree-dropdown-root-rtl")));for(var n=e(r).find("li"),l=0;l<n.length;l++){var a=n[l];e(a).children().each(function(){return"ul"==this.tagName||"UL"==this.tagName?(e(this).removeClass(s.toThemeProperty("jqx-tree-dropdown-"+t)),e(this).addClass(s.toThemeProperty("jqx-tree-dropdown")),s.rtl&&(e(this).removeClass(s.toThemeProperty("jqx-tree-dropdown-rtl-"+t)),e(this).addClass(s.toThemeProperty("jqx-tree-dropdown-rtl"))),!1):void 0})}e.each(this.items,function(){var r=this,n=e(r.element);n.removeClass(s.toThemeProperty("jqx-tree-item-li-"+t)),n.addClass(s.toThemeProperty("jqx-tree-item-li")),this.rtl&&(n.removeClass(s.toThemeProperty("jqx-tree-item-li-"+t)),n.addClass(s.toThemeProperty("jqx-tree-item-li"))),e(r.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-"+t)),e(r.titleElement).addClass(s.toThemeProperty("jqx-tree-item")),e(r.titleElement).removeClass("jqx-item-"+t),e(r.titleElement).addClass(s.toThemeProperty("jqx-item"));var l=e(r.arrow);l.length>0&&s._arrowStyle(l,"",r.isExpanded),r.checkBoxElement&&e(r.checkBoxElement).jqxCheckBox({theme:i}),s.enableRoundedCorners&&(n.removeClass("jqx-rc-all-"+t),n.addClass(s.toThemeProperty("jqx-rc-all")))}),this.host.jqxPanel&&this.panel.jqxPanel({theme:i})},_refreshMapping:function(t){for(var i=this.host.find("li"),s=new Array,r=new Array,n=e.data(document.body,"treeItemsStorage"),l=this,a=0;a<i.length;a++){var h=i[a],o=e(h),d=n[h.id];if(null!=d){r[r.length]=d,(void 0==t||1==t)&&this._updateItemEvents(this,d),d.level=o.parents("li").length,d.treeInstance=this;var m=null,c=null;-1!=d.titleElement[0].className.indexOf("jqx-fill-state-pressed")&&(e(d.titleElement).removeClass(l.toThemeProperty("jqx-fill-state-pressed")),e(d.titleElement).removeClass(l.toThemeProperty("jqx-tree-item-selected")));var u=o.children();u.each(function(){return"ul"==this.tagName||"UL"==this.tagName?(d.subtreeElement=this,e(this).addClass(l.toThemeProperty("jqx-tree-dropdown")),l.rtl&&e(this).addClass(l.toThemeProperty("jqx-tree-dropdown-rtl")),!1):void 0});var v=o.parents();v.each(function(){return"li"==this.tagName||"LI"==this.tagName?(c=this.id,m=this,!1):void 0}),d.parentElement=m,d.parentId=c,d.hasItems=e(d.element).find("li").length>0,null!=d&&(s[a]={element:h,item:d},s["id"+h.id]=s[a])}}this.itemMapping=s,this.items=r},_createItem:function(t){if(null!=t&&void 0!=t){var i=t.id;i||(i=this.createID());var s=t,r=e(t);s.id=i;var n=e.data(document.body,"treeItemsStorage");void 0==n&&(n=new Array);var l=this.items.length;this.items[l]=new e.jqx._jqxTree.jqxTreeItem,this.treeElements[i]=this.items[l],n[s.id]=this.items[l],e.data(document.body,"treeItemsStorage",n),l=this.items.length;var a=0,h=this,o=null;r.attr("role","treeitem"),r.children().each(function(){return"ul"==this.tagName||"UL"==this.tagName?(h.items[l-1].subtreeElement=this,e(this).addClass(h.toThemeProperty("jqx-tree-dropdown")),h.rtl&&(e(this).addClass(h.toThemeProperty("jqx-tree-dropdown-rtl")),e(this).css("clear","both")),!1):void 0}),r.parents().each(function(){return"li"==this.tagName||"LI"==this.tagName?(a=this.id,o=this,!1):void 0});var d=t.getAttribute("item-expanded");d=null==d||void 0==d||"true"!=d&&1!=d?!1:!0,s.removeAttribute("item-expanded");var m=t.getAttribute("item-locked");m=null==m||void 0==m||"true"!=m&&1!=m?!1:!0,s.removeAttribute("item-locked");var c=t.getAttribute("item-selected");c=null==c||void 0==c||"true"!=c&&1!=c?!1:!0,s.removeAttribute("item-selected");var u=t.getAttribute("item-disabled");u=null==u||void 0==u||"true"!=u&&1!=u?!1:!0,s.removeAttribute("item-disabled");var v=t.getAttribute("item-checked");v=null==v||void 0==v||"true"!=v&&1!=v?!1:!0;var p=t.getAttribute("item-title");(null==p||void 0==p||"true"!=p&&1!=p)&&(p=!1),s.removeAttribute("item-title");var f=t.getAttribute("item-icon"),g=t.getAttribute("item-iconsize"),x=t.getAttribute("item-label"),I=t.getAttribute("item-value");s.removeAttribute("item-icon"),s.removeAttribute("item-iconsize"),s.removeAttribute("item-label"),s.removeAttribute("item-value");var b=this.items[l-1];b.id=i,void 0==b.value&&(b.value=this._valueList&&this._valueList[i]?this._valueList[i]:I),b.icon=f,b.iconsize=g,b.parentId=a,b.disabled=u,b.parentElement=o,b.element=t,b.locked=m,b.selected=c,b.checked=v,b.isExpanded=d,b.treeInstance=this,this.itemMapping[l-1]={element:s,item:b},this.itemMapping["id"+s.id]=this.itemMapping[l-1];var w=!1,_=!1;if(w=!1,this.rtl&&(e(b.element).css("float","right"),e(b.element).css("clear","both")),!w||!_)if(e(s.firstChild).length>0){if(b.icon){var g=b.iconsize;g||(g=16);var f=e('<img width="'+g+'" height="'+g+'" style="float: left;" class="itemicon" src="'+b.icon+'"/>');e(s).prepend(f),f.css("margin-right","4px"),this.rtl&&(f.css("margin-right","0px"),f.css("margin-left","4px"),f.css("float","right"))}var j=s.innerHTML.indexOf("<ul");if(-1==j&&(j=s.innerHTML.indexOf("<UL")),-1==j)b.originalTitle=s.innerHTML,s.innerHTML='<div style="display: inline-block;">'+s.innerHTML+"</div>",b.titleElement=e(e(s)[0].firstChild);else{var y=s.innerHTML.substring(0,j);y=e.trim(y),b.originalTitle=y,y=e('<div style="display: inline-block;">'+y+"</div>");var q=e(s).find("ul:first");q.remove(),s.innerHTML="",e(s).prepend(y),e(s).append(q),b.titleElement=y,this.rtl&&y.css("float","right")}if(e.jqx.browser.msie&&e.jqx.browser.version<8){e(e(s)[0].firstChild).css("display","inline-block");var k=!1;0==this._measureItem.parents().length&&(e(document.body).append(this._measureItem),k=!0),this._measureItem.css("min-width","20px"),this._measureItem[0].innerHTML=e(b.titleElement).text();var E=this._measureItem.width();b.icon&&(E+=20),e(e(item.titleElement).find("img")).length>0&&(E+=20),e(e(s)[0].firstChild).css("max-width",E+"px"),k&&this._measureItem.remove()}}else b.originalTitle="Item",e(s).append(e("<span>Item</span>")),e(s.firstChild).wrap("<span/>"),b.titleElement=e(s)[0].firstChild,e.jqx.browser.msie&&e.jqx.browser.version<8&&e(s.firstChild).css("display","inline-block");var T=e(b.titleElement),C=this.toThemeProperty("jqx-rc-all");if(this.allowDrag&&T.addClass("draggable"),null==x||void 0==x?(x=b.titleElement,b.label=e.trim(T.text())):b.label=x,e(s).addClass(this.toThemeProperty("jqx-tree-item-li")),this.rtl&&e(s).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")),C+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item"),this.rtl&&(C+=" "+this.toThemeProperty("jqx-tree-item-rtl")),T[0].className=T[0].className+" "+C,b.level=e(t).parents("li").length,b.hasItems=e(t).find("li").length>0,this.rtl&&b.parentElement&&(this.checkboxes||T.css("margin-right","5px")),this.checkboxes){if(!this.host.jqxCheckBox)throw new Error("jqxTree: Missing reference to jqxcheckbox.js.");var S=e('<div style="position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>');if(S.width(parseInt(this.checkSize)),S.height(parseInt(this.checkSize)),e(s).prepend(S),this.rtl&&(S.css("float","right"),S.css("position","static")),S.jqxCheckBox({hasInput:!1,checked:b.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:u,theme:this.theme}),this.rtl){var P=5;b.parentElement?S.css("margin-right",P+5+"px"):S.css("margin-right",P+"px")}else T.css("margin-left",parseInt(this.checkSize)+6);b.checkBoxElement=S[0],S[0].treeItem=b;var H=T.outerHeight()/2-1-parseInt(this.checkSize)/2;S.css("margin-top",H),e.jqx.browser.msie&&e.jqx.browser.version<8?(T.css("width","1%"),T.css("margin-left",parseInt(this.checkSize)+25)):b.hasItems&&(this.rtl||S.css("margin-left",this.toggleIndicatorSize))}else e.jqx.browser.msie&&e.jqx.browser.version<8&&T.css("width","1%");u&&this.disableItem(b.element),c&&this.selectItem(b.element),e.jqx.browser.msie&&e.jqx.browser.version<8&&(e(s).css("margin","0px"),e(s).css("padding","0px"))}},destroy:function(){this.removeHandler(e(window),"resize.jqxtree"+this.element.id),this.host.removeClass(),this.isTouchDevice()&&(this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var t=this,i=this.isTouchDevice();e.each(this.items,function(){var s=this,r=e(this.element),n=i?e.jqx.mobile.getTouchEventName("touchend"):"click";t.removeHandler(e(s.checkBoxElement),n);var l=e(s.titleElement);t.removeHandler(r);var a=t.allowDrag&&t._enableDragDrop;a?(t.removeHandler(l,"mousedown.item"),t.removeHandler(l,"click"),t.removeHandler(l,"dblclick"),t.removeHandler(l,"mouseenter"),t.removeHandler(l,"mouseleave")):t.removeHandler(l),$arrowSpan=e(s.arrow),$arrowSpan.length>0&&(t.removeHandler($arrowSpan,n),t.removeHandler($arrowSpan,"selectstart"),t.removeHandler($arrowSpan,"mouseup"),i||(t.removeHandler($arrowSpan,"mouseenter"),t.removeHandler($arrowSpan,"mouseleave")),t.removeHandler(l,"selectstart")),e.jqx.browser.opera&&t.removeHandler(l,"mousedown.item"),"click"!=t.toggleMode&&t.removeHandler(l,"click"),t.removeHandler(l,t.toggleMode)}),this.panel&&(this.panel.jqxPanel("destroy"),this.panel=null),this.host.remove()},_raiseEvent:function(e,t){void 0==t&&(t={owner:null});var i=this.events[e];args=t,args.owner=this;var s=new jQuery.Event(i);s.owner=this,s.args=args;var r=this.host.trigger(s);return r},propertyChangedHandler:function(t,i,s,r){if(void 0!=this.isInitialized&&0!=this.isInitialized){if("submitCheckedItems"==i&&t._updateInputSelection(),"disabled"==i&&t._updateDisabledState(),"theme"==i&&t._applyTheme(s,r),"keyboardNavigation"==i&&(t.enableKeyboardNavigation=r),("width"==i||"height"==i)&&(t.refresh(),t._initialize(),t._calculateWidth(),t.host.jqxPanel)){var n="fixed";(null==this.height||"auto"==this.height)&&(n="verticalwrap"),(null==this.width||"auto"==this.width)&&(n="fixed"==n?"horizontalwrap":"wrap"),t.panel.jqxPanel({sizeMode:n})}if("touchMode"==i&&(t._isTouchDevice=null,r&&(t.enableHover=!1),t._render()),("source"==i||"checkboxes"==i)&&null!=this.source){var l=[];e.each(t.items,function(){this.isExpanded&&(l[l.length]={label:this.label,level:this.level})});var a=t.loadItems(t.source);t.host.jqxPanel?t.panel.jqxPanel("setcontent",a):t.element.innerHTML=a;var h=t.disabled,o=t.host.find("ul:first");o.length>0&&(t.createTree(o[0]),t._render());var d=t,m=d.animationShowDuration;d.animationShowDuration=0,t.disabled=!1,l.length>0&&e.each(t.items,function(){for(var e=0;e<l.length;e++)if(l[e].label==this.label&&l[e].level==this.level){var t=d.getItem(this.element);d._expandItem(d,t)}}),t.disabled=h,d.animationShowDuration=m}"hasThreeStates"==i&&(t._render(),t._updateCheckStates()),"toggleIndicatorSize"==i&&(t._updateCheckLayout(),t._render())}}})}(jQuery),function(e){e.jqx._jqxTree.jqxTreeItem=function(e,t){var i={label:null,id:e,parentId:t,parentElement:null,parentItem:null,disabled:!1,selected:!1,locked:!1,checked:!1,level:0,isExpanded:!1,hasItems:!1,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null};return i}}(jQuery);