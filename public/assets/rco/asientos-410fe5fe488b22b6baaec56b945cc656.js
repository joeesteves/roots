(function(){var e,t,a,n,r,i,o,c,u;r=function(){return"true"===$("#con_arbol").val()&&$.fn.arbolInit(),$.fn.gridRequest(),"index"!==$("#action_name").val()?(u(),e(),t(),a()):$.fn.agregarFiltros([["desde","date"],["hasta","date"],["rco/cuentas","select"]]),$("#rco_asiento_moneda_id").change(function(){var e;return e=$("#rco_asiento_moneda_id option:selected").data("cot"),$("#rco_asiento_cotizacion").val(e)}),$("input, textarea").change(function(){return a()}),$(".agregar_campos").click(function(){var e,t,a,n,r,i,o,c,u;return u=(new Date).getTime(),c=new RegExp($(this).data("id"),"g"),$("#container").append($(this).data("fields").replace(c,u)),$.fn.activarCalcular(),$.fn.initChosen(),$(".chosen-single:visible").last().focus(),e=$(".cuenta"),t=e.length,t>1&&e.last().val(e[t-2].value).trigger("chosen:updated"),o=new RegExp("[0-9]"),r=$(".fecha"),i=r.length,i>1&&-1===[""].indexOf($("#vtos").val())&&o.test($("#vtos").val())?(a=new Date(r[i-2].value),a.setDate(a.getDate()+parseInt($("#vtos").val())),n=$.fn.armaFechas(a.getDate()+1,a.getMonth()+1,a.getFullYear()),r.last().val(n)):void 0}),$("form").on("click",".simil_agrega_campos",function(){return $(".agregar_campos").click()}),$("form").on("click",".quitar_campos",function(){return $(this).parent().prev("input[type=hidden]").val("1"),$(this).closest(".row").hide(),u(),a(),$(".chosen-single:visible")[1].focus()})},$.fn.gridRequest=function(e){var t,a;return t=["id","fecha","desc","importe","moneda","cotizacion"],a=[["Fecha","auto"],["desc","auto","Descripcion"],["Importe","auto"],["Moneda","auto"],["Cotizacion","auto"]],$.fn.gridPrepDatos(t,a,e)},u=function(){return o(),c(),n()},e=function(){return $("form").on("change",".debe",function(){return a(),o(),n()})},t=function(){return $("form").on("change",".haber",function(){return a(),c(),n()})},o=function(){var e;return e=0,$(".debe:visible").each(function(){return e+=parseFloat($(this).val())}),$("#debe").val(parseFloat(e.toFixed(4)))},c=function(){var e;return e=0,$(".haber:visible").each(function(){return e+=parseFloat($(this).val())}),$("#haber").val(parseFloat(e.toFixed(4)))},n=function(){return $("#diferencia").val($("#debe").val()-$("#haber").val())},i=function(e){return e===!0?$("input[type=submit]").removeAttr("disabled"):$("input[type=submit]").attr("disabled","disabled")},a=function(){return i($("#debe").val()===$("#haber").val()&&-1===["0",""].indexOf($("#debe").val())?!0:!1)},$(document).on("page:load",r),$(document).ready(r)}).call(this);