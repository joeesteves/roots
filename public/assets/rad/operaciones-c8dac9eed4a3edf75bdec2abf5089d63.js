(function(){var e,a,o,i,t,r,n,c,p,d;d=function(){switch("true"===$("#con_arbol").val()&&$.fn.arbolInit(),$.fn.gridRequest(),$(".calcCuota").change(function(){return t()}),$(".calcCuotaInv").change(function(){return r()}),$("#rad_operacion_operaciontipo_id").change(function(){return c(!1),p(!0),o($("#rad_operacion_operaciontipo_id option:selected").data("codigo")),$.fn.defineUiXOpTipo([$("#rad_operacion_operaciontipo_id option:selected").data("codigo"),void 0])}),$("#action_name").val()){case"new":return o($("#rad_operacion_operaciontipo_id option:selected").data("codigo"));case"edit":return $.fn.defineUiXOpTipo([$("#rad_operacion_operaciontipo_id option:selected").data("codigo"),$("#rad_operacion_id").val()]);case"create":return $.fn.defineUiXOpTipo([$("#rad_operacion_operaciontipo_id option:selected").data("codigo"),void 0])}},$.fn.defineUiXOpTipo=function(o){switch(o[0]){case 0:return c(!0),p(!0);case-1:case 2:return-1===o[0]&&p(!1),a(void 0===o[1]?["buscaPorCta",n("haber"),"haber"]:["buscaPorReg",o[1],"haber"]),e("haber");case 1:case-2:return 1===o[0]&&p(!1),a(void 0===o[1]?["buscaPorCta",n("debe"),"debe"]:["buscaPorReg",o[1],"debe"]),e("debe")}},c=function(e){return $("#rad_operacion_cuotas, #rad_operacion_cuotaimporte").prop("readonly",e)},p=function(e){return $("#rad_operacion_rdosxmes").prop("disabled",e),e===!0?$("#rad_operacion_rdosxmes").prop("checked",!1):void 0},$.fn.gridRequest=function(e){var a,o;return a=["id","fecha","tipo","importe","desc","cuotaimporte"],o=[["Fecha","20%"],["Tipo","auto"],["Importe","20%"],["desc","auto","Descripci\xf3n"],["cuotaimporte","auto","Cuota"]],$.fn.gridPrepDatos(a,o,e)},t=function(){var e,a,o;return a=$("#rad_operacion_importe").val(),e=$("#rad_operacion_cuotas").val(),o=(a/e).toFixed(2),$("#rad_operacion_cuotaimporte").val(o)},r=function(){var e,a,o;return e=$("#rad_operacion_cuotas").val(),o=$("#rad_operacion_cuotaimporte").val(),a=(o*e).toFixed(2),$("#rad_operacion_importe").val(a)},o=function(e){return $.ajax({type:"POST",url:$("#root_path").val()+"rco/cuentas/x_operacion_tipo",data:{operaciontipo_codigo:e},dataType:"script"})},e=function(e){switch(e){case"debe":return $("#rad_operacion_ctaD_id, #rad_operacion_ctaH_id").unbind("change"),$("#rad_operacion_ctaD_id").change(function(){return a(["buscaPorCta",n("debe"),"debe"])});case"haber":return $("#rad_operacion_ctaD_id, #rad_operacion_ctaH_id").unbind("change"),$("#rad_operacion_ctaH_id").change(function(){return a(["buscaPorCta",n("haber"),"haber"])})}},a=function(e){var a;return a="buscaPorReg"===e[0]?{rad_operacion_id:e[1],saldoTipo:e[2]}:{saldoTipo:e[2],cuenta_id:e[1]},$.ajax({type:"POST",url:$("#root_path").val()+"rad/operaciones/compatibles",data:a,dataType:"script"})},n=function(e){switch(e){case"debe":return $("#rad_operacion_ctaD_id option:selected").val();case"haber":return $("#rad_operacion_ctaH_id option:selected").val()}},$.fn.cargaCompatibles=function(e){return $("#compatibles").empty(),$("#compatibles").append('<select  data-placeholder="Seleccionar registros" id="aplicaciones" name="aplicaciones[]" multiple></select>'),$.each(e,function(){var e;return e='<option id="'+this.id+'" value="'+this.id+", "+this.disponible+'" data-disponible="'+this.disponible+'">'+this.desc+" disponible: "+this.disponible+"</option>",$("#aplicaciones").append(e)}),$("#aplicaciones").change(function(){return $("#compatiblesImporte").empty(),$("#aplicaciones option:selected").each(function(){var e;return e="reg_"+$(this).attr("id"),$("#compatiblesImporte").append("<span>ejemplo</span><input id="+e+" name="+e+' type="text" value="'+$(this).data("disponible")+'">')}),i(),$("#compatiblesImporte input").focus(),$("#compatiblesImporte input").change(function(){return i()})}),$.fn.initChosen()},$.fn.seleccionaAplicados=function(e){return $("#aplicaciones "+e).prop("selected",!0).trigger("chosen:updated"),$.each($("#aplicaciones "+e),function(){var e;return e="reg_"+$(this).attr("id"),$("#compatiblesImporte").append("<span>ejemplo</span><input id="+e+" name="+e+' type="text" value="'+$(this).data("disponible")+'">')}),$("#compatiblesImporte input").change(function(){return i()})},i=function(){return $("#rad_operacion_importe").val(0),$("#compatiblesImporte input").each(function(){var e,a;return e=$(this).attr("id").substr(4),a=$("#aplicaciones #"+e),parseFloat($(this).val())>parseFloat(a.data("disponible"))&&$(this).val(a.data("disponible")),$("#rad_operacion_importe").val(parseFloat($("#rad_operacion_importe").val())+parseFloat($(this).val())),a.val(e+", "+$(this).val())}),$("#rad_operacion_importe").change()},$(document).on("page:load",d),$(document).ready(d)}).call(this);